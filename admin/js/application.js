function getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function cutHex(t){return"#"==t.charAt(0)?t.substring(1,7):t}function getStyle(t,e){var n="";return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,"").getPropertyValue(e):t.currentStyle&&(e=e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),n=t.currentStyle[e]),n}function onCreateElementNsReady(t){void 0!=document.createElementNS?t():setTimeout(function(){onCreateElementNsReady(t)},100)}!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.options=t.extend({},t.fn.affix.defaults,n),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,n=t(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),a=this.options.offset,s=a.bottom,o=a.top,l="affix affix-top affix-bottom";"object"!=typeof a&&(s=o=a),"function"==typeof o&&(o=a.top()),"function"==typeof s&&(s=a.bottom()),e=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=s&&r.top+this.$element.height()>=n-s?"bottom":null!=o&&o>=i?"top":!1,this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?r.top-i:null,this.$element.removeClass(l).addClass("affix"+(e?"-"+e:"")))}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),r=i.data("affix"),a="object"==typeof n&&n;r||i.data("affix",r=new e(this,a)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(window.jQuery),!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,r=t(this),a=r.attr("data-target");a||(a=r.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),i=t(a),e&&e.preventDefault(),i.length||(i=r.hasClass("alert")?r:r.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("alert");r||i.data("alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("button"),a="object"==typeof n&&n;r||i.data("button",r=new e(this,a)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(e){var n=this.getActiveIndex(),i=this;if(!(e>this.$items.length-1||0>e))return this.sliding?this.$element.one("slid",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,n){var i,r=this.$element.find(".item.active"),a=n||r[e](),s=this.interval,o="next"==e?"left":"right",l="next"==e?"first":"last",u=this;if(this.sliding=!0,s&&this.pause(),a=a.length?a:this.$element.find(".item")[l](),i=t.Event("slide",{relatedTarget:a[0],direction:o}),!a.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(u.$indicators.children()[u.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;a.addClass(e),a[0].offsetWidth,r.addClass(o),a.addClass(o),this.$element.one(t.support.transition.end,function(){a.removeClass([e,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;r.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}}};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("carousel"),a=t.extend({},t.fn.carousel.defaults,"object"==typeof n&&n),s="string"==typeof n?n:a.slide;r||i.data("carousel",r=new e(this,a)),"number"==typeof n?r.to(n):s?r[s]():a.interval&&r.pause().cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i,r=t(this),a=t(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=t.extend({},a.data(),r.data());a.carousel(s),(i=r.attr("data-slide-to"))&&a.data("carousel").pause().to(i).cycle(),e.preventDefault()})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,n,i,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),n=t.camelCase(["scroll",e].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(r=i.data("collapse"),r&&r.transitioning)return;i.collapse("hide"),r||i.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][n])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,i){var r=this,a=function(){"show"==n.type&&r.reset(),r.transitioning=0,r.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,a):a())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("collapse"),a=t.extend({},t.fn.collapse.defaults,i.data(),"object"==typeof n&&n);r||i.data("collapse",r=new e(this,a)),"string"==typeof n&&r[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),a=t(r).data("collapse")?"toggle":i.data();i[t(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(r).collapse(a)})}(window.jQuery),!function(t){"use strict";function e(){t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&t(i),n&&n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",r=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,a=t(this);if(!a.is(".disabled, :disabled"))return i=n(a),r=i.hasClass("open"),e(),r||i.toggleClass("open"),a.focus(),!1},keydown:function(e){var r,a,s,o,l;if(/(38|40|27)/.test(e.keyCode)&&(r=t(this),e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled"))){if(s=n(r),o=s.hasClass("open"),!o||o&&27==e.keyCode)return 27==e.which&&s.find(i).focus(),r.click();a=t("[role=menu] li:not(.divider):visible a",s),a.length&&(l=a.index(a.filter(":focus")),38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<a.length-1&&l++,~l||(l=0),a.eq(l).focus())}}};var a=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),r=i.data("modal"),a=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new e(this,a)),"string"==typeof n?r[n]():a.show&&r.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=r.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());e.preventDefault(),r.modal(a).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){"use strict";function e(e,n){var i,r=t.proxy(this.process,this),a=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,n),this.$scrollElement=a.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(i=t(e).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,n=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),r=/^#\w/.test(i)&&t(i);return r&&r.length&&[[r.position().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,a=this.targets,s=this.activeTarget;if(e>=i)return s!=(t=a.last()[0])&&this.activate(t);for(t=r.length;t--;)s!=a[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(a[t])},activate:function(e){var n,i;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),r=i.data("scrollspy"),a="object"==typeof n&&n;r||i.data("scrollspy",r=new e(this,a)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,n,i,r=this.element,a=r.closest("ul:not(.dropdown-menu)"),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(e=a.find(".active:last a")[0],i=t.Event("show",{relatedTarget:e}),r.trigger(i),i.isDefaultPrevented()||(n=t(s),this.activate(r.parent("li"),a),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,n,i){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var a=n.find("> .active"),s=i&&t.support.transition&&a.hasClass("fade");s?a.one(t.support.transition.end,r):r(),a.removeClass("in")}};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("tab");r||i.data("tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var r,a,s,o,l;for(this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)o=s[l],"click"==o?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=o&&(r="hover"==o?"mouseenter":"focus",a="hover"==o?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var n,i=t.fn[this.type].defaults,r={};return this._options&&t.each(this._options,function(t,e){i[t]!=e&&(r[t]=e)},this),n=t(e.currentTarget)[this.type](r).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var e,n,i,r,a,s,o=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(o),o.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),n=this.getPosition(),i=e[0].offsetWidth,r=e[0].offsetHeight,a){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":s={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":s={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":s={top:n.top+n.height/2-r/2,left:n.left+n.width}}this.applyPlacement(s,a),this.$element.trigger("shown")}},applyPlacement:function(t,e){var n,i,r,a,s=this.tip(),o=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(t).addClass(e).addClass("in"),n=s[0].offsetWidth,i=s[0].offsetHeight,"top"==e&&i!=l&&(t.top=t.top+l-i,a=!0),"bottom"==e||"top"==e?(r=0,t.left<0&&(r=-2*t.left,t.left=0,s.offset(t),n=s[0].offsetWidth,i=s[0].offsetHeight),this.replaceArrow(r-o+n,n,"left")):this.replaceArrow(i-l,i,"top"),a&&s.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip(),i=t.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("tooltip"),a="object"==typeof n&&n;r||i.data("tooltip",r=new e(this,a)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,n=this.options;return t=("function"==typeof n.content?n.content.call(e[0]):n.content)||e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("popover"),a="object"==typeof n&&n;r||i.data("popover",r=new e(this,a)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):r.push(e):n.push(e);return n.concat(i,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var i=t(this),r=i.data("typeahead"),a="object"==typeof n&&n;r||i.data("typeahead",r=new e(this,a)),"string"==typeof n&&r[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),function(t,e){function n(e){t.extend(!0,ve,e)}function i(n,i,u){function c(t){K?(S(),_(),R(),b(t)):h()}function h(){Z=i.theme?"ui":"fc",n.addClass("fc"),i.isRTL&&n.addClass("fc-rtl"),i.theme&&n.addClass("ui-widget"),K=t("<div class='fc-content' style='position:relative'/>").prependTo(n),Q=new r(G,i),(J=Q.render())&&n.prepend(J),y(i.defaultView),t(window).resize(D),v()||f()}function f(){setTimeout(function(){!te.start&&v()&&b()},0)}function p(){t(window).unbind("resize",D),Q.destroy(),K.remove(),n.removeClass("fc fc-rtl ui-widget")}function g(){return 0!==oe.offsetWidth}function v(){return 0!==t("body")[0].offsetWidth}function y(e){if(!te||e!=te.name){ce++,P();var n,i=te;i?((i.beforeHide||B)(),j(K,K.height()),i.element.hide()):j(K,1),K.css("overflow","hidden"),(te=le[e])?te.element.show():te=le[e]=new xe[e](n=ie=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(K),G),i&&Q.deactivateButton(i.name),Q.activateButton(e),b(),K.css("overflow",""),i&&j(K,1),n||(te.afterShow||B)(),ce--}}function b(t){if(g()){ce++,P(),ne===e&&S();var i=!1;!te.start||t||he<te.start||he>=te.end?(te.render(he,t||0),T(!0),i=!0):te.sizeDirty?(te.clearEvents(),T(),i=!0):te.eventsDirty&&(te.clearEvents(),i=!0),te.sizeDirty=!1,te.eventsDirty=!1,k(i),ee=n.outerWidth(),Q.updateTitle(te.title),t=new Date,t>=te.start&&t<te.end?Q.disableButton("today"):Q.enableButton("today"),ce--,te.trigger("viewDisplay",oe)}}function C(){_(),g()&&(S(),T(),P(),te.clearEvents(),te.renderEvents(de),te.sizeDirty=!1)}function _(){t.each(le,function(t,e){e.sizeDirty=!0})}function S(){ne=i.contentHeight?i.contentHeight:i.height?i.height-(J?J.height():0)-O(K):Math.round(K.width()/Math.max(i.aspectRatio,.5))}function T(t){ce++,te.setHeight(ne,t),ie&&(ie.css("position","relative"),ie=null),te.setWidth(K.width(),t),ce--}function D(){if(!ce)if(te.start){var t=++ue;setTimeout(function(){t==ue&&!ce&&g()&&ee!=(ee=n.outerWidth())&&(ce++,C(),te.trigger("windowResize",oe),ce--)},200)}else f()}function k(t){!i.lazyFetching||ae(te.visStart,te.visEnd)?M():t&&A()}function M(){se(te.visStart,te.visEnd)}function E(t){de=t,A()}function N(t){A(t)}function A(t){R(),g()&&(te.clearEvents(),te.renderEvents(de,t),te.eventsDirty=!1)}function R(){t.each(le,function(t,e){e.eventsDirty=!0})}function I(t,n,i){te.select(t,n,i===e?!0:i)}function P(){te&&te.unselect()}function F(){b(-1)}function L(){b(1)}function H(){s(he,-1),b()}function z(){s(he,1),b()}function $(){he=new Date,b()}function q(t,e,n){t instanceof Date?he=d(t):m(he,t,e,n),b()}function W(t,n,i){t!==e&&s(he,t),n!==e&&o(he,n),i!==e&&l(he,i),b()}function V(){return d(he)}function U(){return te}function Y(t,n){return n===e?i[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(i[t]=n,C()),void 0)}function X(t,e){return i[t]?i[t].apply(e||oe,Array.prototype.slice.call(arguments,2)):void 0}var G=this;G.options=i,G.render=c,G.destroy=p,G.refetchEvents=M,G.reportEvents=E,G.reportEventChange=N,G.rerenderEvents=A,G.changeView=y,G.select=I,G.unselect=P,G.prev=F,G.next=L,G.prevYear=H,G.nextYear=z,G.today=$,G.gotoDate=q,G.incrementDate=W,G.formatDate=function(t,e){return x(t,e,i)},G.formatDates=function(t,e,n){return w(t,e,n,i)},G.getDate=V,G.getView=U,G.option=Y,G.trigger=X,a.call(G,i,u);var Q,J,K,Z,te,ee,ne,ie,re,ae=G.isFetchNeeded,se=G.fetchEvents,oe=n[0],le={},ue=0,ce=0,he=new Date,de=[];m(he,i.year,i.month,i.date),i.droppable&&t(document).bind("dragstart",function(e,n){var r=e.target,a=t(r);if(!a.parents(".fc").length){var s=i.dropAccept;(t.isFunction(s)?s.call(r,a):a.is(s))&&(re=r,te.dragStart(re,e,n))}}).bind("dragstop",function(t,e){re&&(te.dragStop(re,t,e),re=null)})}function r(e,n){function i(){return d=n.theme?"ui":"fc",n.header?f=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(a("left")).append(a("center")).append(a("right"))):void 0}function r(){f.remove()}function a(i){var r=t("<td class='fc-header-"+i+"'/>");return(i=n.header[i])&&t.each(i.split(" "),function(i){i>0&&r.append("<span class='fc-header-space'/>");
var a;t.each(this.split(","),function(i,s){if("title"==s)r.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),a&&a.addClass(d+"-corner-right"),a=null;else{var o;if(e[s]?o=e[s]:xe[s]&&(o=function(){u.removeClass(d+"-state-hover"),e.changeView(s)}),o){i=n.theme?W(n.buttonIcons,s):null;var l=W(n.buttonText,s),u=t("<span class='fc-button fc-button-"+s+" "+d+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(i?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+i+"'/></span>":l)+"</span><span class='fc-button-effect'><span></span></span></span></span>");u&&(u.click(function(){u.hasClass(d+"-state-disabled")||o()}).mousedown(function(){u.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){u.removeClass(d+"-state-down")}).hover(function(){u.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){u.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(r),a||u.addClass(d+"-corner-left"),a=u)}}}),a&&a.addClass(d+"-corner-right")}),r}function s(t){f.find("h2").html(t)}function o(t){f.find("span.fc-button-"+t).addClass(d+"-state-active")}function l(t){f.find("span.fc-button-"+t).removeClass(d+"-state-active")}function u(t){f.find("span.fc-button-"+t).addClass(d+"-state-disabled")}function c(t){f.find("span.fc-button-"+t).removeClass(d+"-state-disabled")}var h=this;h.render=i,h.destroy=r,h.updateTitle=s,h.activateButton=o,h.deactivateButton=l,h.disableButton=u,h.enableButton=c;var d,f=t([])}function a(n,i){function r(t,e){return!S||S>t||e>T}function a(t,e){S=t,T=e,P=[],t=++A,R=e=N.length;for(var n=0;e>n;n++)s(N[n],t)}function s(t,e){o(t,function(n){if(e==A){if(n){for(var i=0;i<n.length;i++)n[i].source=t,b(n[i]);P=P.concat(n)}R--,R||M(P)}})}function o(e,i){var r,a,s=be.sourceFetchers;for(r=0;r<s.length;r++){if(a=s[r](e,S,T,i),a===!0)return;if("object"==typeof a)return o(a,i),void 0}if(r=e.events)t.isFunction(r)?(m(),r(d(S),d(T),function(t){i(t),y()})):t.isArray(r)?i(r):i();else if(e.url){var l=e.success,u=e.error,c=e.complete;r=t.extend({},e.data||{}),s=K(e.startParam,n.startParam),a=K(e.endParam,n.endParam),s&&(r[s]=Math.round(+S/1e3)),a&&(r[a]=Math.round(+T/1e3)),m(),t.ajax(t.extend({},we,e,{data:r,success:function(e){e=e||[];var n=J(l,this,arguments);t.isArray(n)&&(e=n),i(e)},error:function(){J(u,this,arguments),i()},complete:function(){J(c,this,arguments),y()}}))}else i()}function l(t){(t=u(t))&&(R++,s(t,A))}function u(e){return t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e?(x(e),N.push(e),e):void 0}function c(e){N=t.grep(N,function(t){return!w(t,e)}),P=t.grep(P,function(t){return!w(t.source,e)}),M(P)}function h(t){var e,n,i=P.length,r=k().defaultEventEnd,a=t.start-t._start,s=t.end?t.end-(t._end||r(t)):0;for(e=0;i>e;e++)n=P[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+a),n.end=t.end?n.end?new Date(+n.end+s):new Date(+r(n)+s):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroudColor=t.backgroudColor,n.borderColor=t.borderColor,n.textColor=t.textColor,b(n));b(t),M(P)}function f(t,e){b(t),t.source||(e&&(E.events.push(t),t.source=E),P.push(t)),M(P)}function p(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}for(P=t.grep(P,e,!0),i=0;i<N.length;i++)t.isArray(N[i].events)&&(N[i].events=t.grep(N[i].events,e,!0))}else{P=[];for(var i=0;i<N.length;i++)t.isArray(N[i].events)&&(N[i].events=[])}M(P)}function g(e){return t.isFunction(e)?t.grep(P,e):e?(e+="",t.grep(P,function(t){return t._id==e})):P}function m(){I++||D("loading",null,!0)}function y(){--I||D("loading",null,!1)}function b(t){var i=t.source||{},r=K(i.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+Ce++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=v(t.start,r)),t.end=v(t.end,r),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=K(i.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function x(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=be.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}function w(t,e){return t&&e&&C(t)==C(e)}function C(t){return("object"==typeof t?t.events||t.url:"")||t}var _=this;_.isFetchNeeded=r,_.fetchEvents=a,_.addEventSource=l,_.removeEventSource=c,_.updateEvent=h,_.renderEvent=f,_.removeEvents=p,_.clientEvents=g,_.normalizeEvent=b;var S,T,D=_.trigger,k=_.getView,M=_.reportEvents,E={events:[]},N=[E],A=0,R=0,I=0,P=[];for(_=0;_<i.length;_++)u(i[_])}function s(t,e,n){return t.setFullYear(t.getFullYear()+e),n||h(t),t}function o(t,e,n){if(+t){e=t.getMonth()+e;var i=d(t);for(i.setDate(1),i.setMonth(e),t.setMonth(e),n||h(t);t.getMonth()!=i.getMonth();)t.setDate(t.getDate()+(i>t?1:-1))}return t}function l(t,e,n){if(+t){e=t.getDate()+e;var i=d(t);i.setHours(9),i.setDate(e),t.setDate(e),n||h(t),u(t,i)}return t}function u(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Te)}function c(t,e){return t.setMinutes(t.getMinutes()+e),t}function h(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?h(new Date(+t)):new Date(+t)}function f(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function p(t,e,n){for(e=e||1;!t.getDay()||n&&1==t.getDay()||!n&&6==t.getDay();)l(t,e);return t}function g(t,e){return Math.round((d(t,!0)-d(e,!0))/Se)}function m(t,n,i,r){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),i!==e&&i!=t.getMonth()&&(t.setDate(1),t.setMonth(i)),r!==e&&t.setDate(r)}function v(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),y(t,n)||(t?new Date(t):null)):null}function y(t,e){if(t=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/),!t)return null;var n=new Date(t[1],0,1);return e||!t[13]?(e=new Date(t[1],0,1,9,0),t[3]&&(n.setMonth(t[3]-1),e.setMonth(t[3]-1)),t[5]&&(n.setDate(t[5]),e.setDate(t[5])),u(n,e),t[7]&&n.setHours(t[7]),t[8]&&n.setMinutes(t[8]),t[10]&&n.setSeconds(t[10]),t[12]&&n.setMilliseconds(1e3*Number("0."+t[12])),u(n,e)):(n.setUTCFullYear(t[1],t[3]?t[3]-1:0,t[5]||1),n.setUTCHours(t[7]||0,t[8]||0,t[10]||0,t[12]?1e3*Number("0."+t[12]):0),t[14]&&(e=60*Number(t[16])+(t[18]?Number(t[18]):0),e*="-"==t[15]?1:-1,n=new Date(+n+1e3*60*e))),n}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();if(t=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var e=parseInt(t[1],10);return t[3]&&(e%=12,"p"==t[3].toLowerCase().charAt(0)&&(e+=12)),60*e+(t[2]?parseInt(t[2],10):0)}}function x(t,e,n){return w(t,null,e,n)}function w(t,e,n,i){i=i||ve;var r,a,s,o,l=t,u=e,c=n.length,h="";for(r=0;c>r;r++)if(a=n.charAt(r),"'"==a){for(s=r+1;c>s;s++)if("'"==n.charAt(s)){l&&(h+=s==r+1?"'":n.substring(r+1,s),r=s);break}}else if("("==a){for(s=r+1;c>s;s++)if(")"==n.charAt(s)){r=x(l,n.substring(r+1,s),i),parseInt(r.replace(/\D/,""),10)&&(h+=r),r=s;break}}else if("["==a){for(s=r+1;c>s;s++)if("]"==n.charAt(s)){a=n.substring(r+1,s),r=x(l,a,i),r!=x(u,a,i)&&(h+=r),r=s;break}}else if("{"==a)l=e,u=t;else if("}"==a)l=t,u=e;else{for(s=c;s>r;s--)if(o=ke[n.substring(r,s)]){l&&(h+=o(l,i)),r=s-1;break}s==r&&l&&(h+=a)}return h}function C(t){return t.end?_(t.end,t.allDay):l(d(t.start),1)}function _(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):h(t)}function S(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function T(t,e){return t.end>e.start&&t.start<e.end}function D(t,e,n,i){var r,a,s,o,l,u,c=[],h=t.length;for(r=0;h>r;r++)a=t[r],s=a.start,o=e[r],o>n&&i>s&&(n>s?(s=d(n),l=!1):(s=s,l=!0),o>i?(o=d(i),u=!1):(o=o,u=!0),c.push({event:a,start:s,end:o,isStart:l,isEnd:u,msLength:o-s}));return c.sort(S)}function k(t){var e,n,i,r,a,s=[],o=t.length;for(e=0;o>e;e++){for(n=t[e],i=0;;){if(r=!1,s[i])for(a=0;a<s[i].length;a++)if(T(s[i][a],n)){r=!0;break}if(!r)break;i++}s[i]?s[i].push(n):s[i]=[n]}return s}function M(n,i,r){n.unbind("mouseover").mouseover(function(n){for(var a,s=n.target;s!=this;)a=s,s=s.parentNode;(s=a._fci)!==e&&(a._fci=e,a=i[s],r(a.event,a.element,a),t(n.target).trigger(n)),n.stopPropagation()})}function E(e,n,i){for(var r,a=0;a<e.length;a++)r=t(e[a]),r.width(Math.max(0,n-A(r,i)))}function N(e,n,i){for(var r,a=0;a<e.length;a++)r=t(e[a]),r.height(Math.max(0,n-O(r,i)))}function A(t,e){return R(t)+P(t)+(e?I(t):0)}function R(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function I(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function P(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function O(t,e){return F(t)+H(t)+(e?L(t):0)}function F(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function L(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function H(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function j(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,n){n.style.cssText+=";min-height:"+e+";_height:"+e})}function B(){}function z(t,e){return t-e}function $(t){return Math.max.apply(Math,t)}function q(t){return(10>t?"0":"")+t}function W(t,n){if(t[n]!==e)return t[n];n=n.split(/(?=[A-Z])/);for(var i,r=n.length-1;r>=0;r--)if(i=t[n[r].toLowerCase()],i!==e)return i;return t[""]}function V(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function U(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function Y(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function X(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function G(t,e){t.each(function(t,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+_e[e.getDay()])})}function Q(t,e){var n=t.source||{},i=t.color,r=n.color,a=e("eventColor"),s=t.backgroundColor||i||n.backgroundColor||r||e("eventBackgroundColor")||a;return i=t.borderColor||i||n.borderColor||r||e("eventBorderColor")||a,t=t.textColor||n.textColor||e("eventTextColor"),e=[],s&&e.push("background-color:"+s),i&&e.push("border-color:"+i),t&&e.push("color:"+t),e.join(";")}function J(e,n,i){if(t.isFunction(e)&&(e=[e]),e){var r,a;for(r=0;r<e.length;r++)a=e[r].apply(n,i)||a;return a}}function K(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function Z(t,e){function n(t,e){e&&(o(t,e),t.setDate(1)),t=d(t,!0),t.setDate(1),e=o(d(t),1);var n=d(t),u=d(e),c=r("firstDay"),h=r("weekends")?0:1;h&&(p(n),p(u,-1,!0)),l(n,-((n.getDay()-Math.max(c,h)+7)%7)),l(u,(7-u.getDay()+Math.max(c,h))%7),c=Math.round((u-n)/(7*Se)),"fixed"==r("weekMode")&&(l(u,7*(6-c)),c=6),i.title=s(t,r("titleFormat")),i.start=t,i.end=e,i.visStart=n,i.visEnd=u,a(6,c,h?5:7,!0)}var i=this;i.render=n,ne.call(i,t,e,"month");var r=i.opt,a=i.renderBasic,s=e.formatDate}function te(t,e){function n(t,e){e&&l(t,7*e),t=l(d(t),-((t.getDay()-r("firstDay")+7)%7)),e=l(d(t),7);var n=d(t),o=d(e),u=r("weekends");u||(p(n),p(o,-1,!0)),i.title=s(n,l(d(o),-1),r("titleFormat")),i.start=t,i.end=e,i.visStart=n,i.visEnd=o,a(1,1,u?7:5,!1)}var i=this;i.render=n,ne.call(i,t,e,"basicWeek");var r=i.opt,a=i.renderBasic,s=e.formatDates}function ee(t,e){function n(t,e){e&&(l(t,e),r("weekends")||p(t,0>e?-1:1)),i.title=s(t,r("titleFormat")),i.start=i.visStart=d(t,!0),i.end=i.visEnd=l(d(i.start),1),a(1,1,1,!1)}var i=this;i.render=n,ne.call(i,t,e,"basicDay");var r=i.opt,a=i.renderBasic,s=e.formatDate}function ne(e,n,i){function r(t,e,n,i){K=e,Z=n,a(),(e=!B)?s(t,i):be(),o(e)}function a(){(re=ve("isRTL"))?(ae=-1,se=Z-1):(ae=1,se=0),oe=ve("firstDay"),le=ve("weekends")?0:1,ce=ve("theme")?"ui":"fc",ge=ve("columnFormat")}function s(n,i){var r,a,s=ce+"-widget-header",o=ce+"-widget-content";for(r="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",a=0;Z>a;a++)r+="<th class='fc- "+s+"'/>";for(r+="</tr></thead><tbody>",a=0;n>a;a++){for(r+="<tr class='fc-week"+a+"'>",s=0;Z>s;s++)r+="<td class='fc- "+o+" fc-day"+(a*Z+s)+"'><div>"+(i?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";r+="</tr>"}r+="</tbody></table>",n=t(r).appendTo(e),L=n.find("thead"),H=L.find("th"),B=n.find("tbody"),z=B.find("tr"),$=B.find("td"),q=$.filter(":first-child"),W=z.eq(0).find("div.fc-day-content div"),X(L.add(L.find("tr"))),X(z),z.eq(0).addClass("fc-first"),f($),V=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function o(e){var n,i,r,a=e||1==K,s=F.start.getMonth(),o=h(new Date);a&&H.each(function(e,r){n=t(r),i=A(e),n.html(_e(i,ge)),G(n,i)}),$.each(function(e,r){n=t(r),i=A(e),i.getMonth()==s?n.removeClass("fc-other-month"):n.addClass("fc-other-month"),+i==+o?n.addClass(ce+"-state-highlight fc-today"):n.removeClass(ce+"-state-highlight fc-today"),n.find("div.fc-day-number").text(i.getDate()),a&&G(n,i)}),z.each(function(e,n){r=t(n),K>e?(r.show(),e==K-1?r.addClass("fc-last"):r.removeClass("fc-last")):r.hide()})}function u(e){Q=e,e=Q-L.height();var n,i,r;"variable"==ve("weekMode")?n=i=Math.floor(e/(1==K?2:6)):(n=Math.floor(e/K),i=e-n*(K-1)),q.each(function(e,a){K>e&&(r=t(a),j(r.find("> div"),(e==K-1?i:n)-O(r)))})}function c(t){U=t,ne.clear(),J=Math.floor(U/Z),E(H.slice(0,-1),J)}function f(t){t.click(p).mousedown(Ce)}function p(t){if(!ve("selectable")){var e=parseInt(this.className.match(/fc\-day(\d+)/)[1]);e=A(e),ye("dayClick",this,e,!0,t)}}function m(t,e,n){n&&te.build(),n=d(F.visStart);for(var i=l(d(n),Z),r=0;K>r;r++){var a=new Date(Math.max(n,t)),s=new Date(Math.min(i,e));if(s>a){var o;re?(o=g(s,n)*ae+se+1,a=g(a,n)*ae+se+1):(o=g(a,n),a=g(s,n)),f(v(r,o,r,a-1))}l(n,7),l(i,7)}}function v(t,n,i,r){return t=te.rect(t,n,i,r,e),xe(t,e)}function y(t){return d(t)}function b(t,e){m(t,l(d(e),1),!0)}function x(){we()}function w(t,e,n){var i=k(t);ye("dayClick",$[i.row*Z+i.col],t,e,n)}function C(t,e){ee.start(function(t){we(),t&&v(t.row,t.col,t.row,t.col)},e)}function _(t,e,n){var i=ee.stop();we(),i&&(i=M(i),ye("drop",t,i,!0,e,n))}function S(t){return d(t.start)}function T(t){return ne.left(t)}function D(t){return ne.right(t)}function k(t){return{row:Math.floor(g(t,F.visStart)/7),col:R(t.getDay())}}function M(t){return N(t.row,t.col)}function N(t,e){return l(d(F.visStart),7*t+e*ae+se)}function A(t){return N(Math.floor(t/Z),t%Z)}function R(t){return(t-Math.max(oe,le)+Z)%Z*ae+se}function I(t){return z.eq(t)}function P(){return{left:0,right:U}}var F=this;F.renderBasic=r,F.setHeight=u,F.setWidth=c,F.renderDayOverlay=m,F.defaultSelectionEnd=y,F.renderSelection=b,F.clearSelection=x,F.reportDayClick=w,F.dragStart=C,F.dragStop=_,F.defaultEventEnd=S,F.getHoverListener=function(){return ee},F.colContentLeft=T,F.colContentRight=D,F.dayOfWeekCol=R,F.dateCell=k,F.cellDate=M,F.cellIsAllDay=function(){return!0},F.allDayRow=I,F.allDayBounds=P,F.getRowCnt=function(){return K},F.getColCnt=function(){return Z},F.getColWidth=function(){return J},F.getDaySegmentContainer=function(){return V},ue.call(F,e,n,i),de.call(F),he.call(F),ie.call(F);var L,H,B,z,$,q,W,V,U,Q,J,K,Z,te,ee,ne,re,ae,se,oe,le,ce,ge,ve=F.opt,ye=F.trigger,be=F.clearEvents,xe=F.renderOverlay,we=F.clearOverlays,Ce=F.daySelectionMousedown,_e=n.formatDate;Y(e.addClass("fc-grid")),te=new fe(function(e,n){var i,r,a;H.each(function(e,s){i=t(s),r=i.offset().left,e&&(a[1]=r),a=[r],n[e]=a}),a[1]=r+i.outerWidth(),z.each(function(n,s){K>n&&(i=t(s),r=i.offset().top,n&&(a[1]=r),a=[r],e[n]=a)}),a[1]=r+i.outerHeight()}),ee=new pe(te),ne=new me(function(t){return W.eq(t)})}function ie(){function e(t,e){f(t),M(i(t),e)}function n(){p(),b().empty()}function i(e){var n=S(),i=T(),r=d(s.visStart);i=l(d(r),i);var a,o,u,c,h,f,p=t.map(e,C),g=[];for(a=0;n>a;a++){for(o=k(D(e,p,r,i)),u=0;u<o.length;u++)for(c=o[u],h=0;h<c.length;h++)f=c[h],f.row=a,f.level=u,g.push(f);l(r,7),l(i,7)}return g}function r(t,e,n){c(t)&&a(t,e),n.isEnd&&h(t)&&E(t,e,n),g(t,e)}function a(t,e){var n,i=x();e.draggable({zIndex:9,delay:50,opacity:o("dragOpacity"),revertDuration:o("dragRevertDuration"),start:function(r,a){u("eventDragStart",e,t,r,a),v(t,e),i.start(function(i,r,a,s){e.draggable("option","revert",!i||!a&&!s),_(),i?(n=7*a+s*(o("isRTL")?-1:1),w(l(d(t.start),n),l(C(t),n))):n=0},r,"drag")},stop:function(r,a){i.stop(),_(),u("eventDragStop",e,t,r,a),n?y(this,t,n,0,t.allDay,r,a):(e.css("filter",""),m(t,e))}})}var s=this;s.renderEvents=e,s.compileDaySegs=i,s.clearEvents=n,s.bindDaySeg=r,ce.call(s);var o=s.opt,u=s.trigger,c=s.isEventDraggable,h=s.isEventResizable,f=s.reportEvents,p=s.reportEventClear,g=s.eventElementHandlers,m=s.showEvents,v=s.hideEvents,y=s.eventDrop,b=s.getDaySegmentContainer,x=s.getHoverListener,w=s.renderDayOverlay,_=s.clearOverlays,S=s.getRowCnt,T=s.getColCnt,M=s.renderDaySegs,E=s.resizableDayEvent}function re(t,e){function n(t,e){e&&l(t,7*e),t=l(d(t),-((t.getDay()-r("firstDay")+7)%7)),e=l(d(t),7);var n=d(t),o=d(e),u=r("weekends");u||(p(n),p(o,-1,!0)),i.title=s(n,l(d(o),-1),r("titleFormat")),i.start=t,i.end=e,i.visStart=n,i.visEnd=o,a(u?7:5)}var i=this;i.render=n,se.call(i,t,e,"agendaWeek");var r=i.opt,a=i.renderAgenda,s=e.formatDates}function ae(t,e){function n(t,e){e&&(l(t,e),r("weekends")||p(t,0>e?-1:1)),e=d(t,!0);var n=l(d(e),1);i.title=s(t,r("titleFormat")),i.start=i.visStart=e,i.end=i.visEnd=n,a(1)}var i=this;i.render=n,se.call(i,t,e,"agendaDay");var r=i.opt,a=i.renderAgenda,s=e.formatDate}function se(n,i,r){function a(t){Pe=t,s(),te?Qe():o(),u()}function s(){je=Xe("theme")?"ui":"fc",ze=Xe("weekends")?0:1,Be=Xe("firstDay"),($e=Xe("isRTL"))?(qe=-1,We=Pe-1):(qe=1,We=0),Ve=b(Xe("minTime")),Ue=b(Xe("maxTime")),Ye=Xe("columnFormat")}function o(){var e,i,r,a,s,o=je+"-widget-header",l=je+"-widget-content",u=0==Xe("slotMinutes")%15;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",i=0;Pe>i;i++)e+="<th class='fc- fc-col"+i+" "+o+"'/>";for(e+="<th class='fc-agenda-gutter "+o+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",i=0;Pe>i;i++)e+="<td class='fc- fc-col"+i+" "+l+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";for(e+="<td class='fc-agenda-gutter "+l+"'>&nbsp;</td></tr></tbody></table>",te=t(e).appendTo(n),ee=te.find("thead"),ne=ee.find("th").slice(1,-1),ie=te.find("tbody"),re=ie.find("td").slice(0,-1),ae=re.find("div.fc-day-content div"),se=re.eq(0),le=se.find("> div"),X(ee.add(ee.find("tr"))),X(ie.add(ie.find("tr"))),Se=ee.find("th:first"),Te=te.find(".fc-agenda-gutter"),ce=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Xe("allDaySlot")?(ge=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+o+" fc-agenda-axis'>"+Xe("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+o+" fc-agenda-gutter'>&nbsp;</th></tr></table>",ve=t(e).appendTo(ce),ye=ve.find("tr"),w(ye.find("td")),Se=Se.add(ve.find("th:first")),Te=Te.add(ve.find("th.fc-agenda-gutter")),ce.append("<div class='fc-agenda-divider "+o+"'><div class='fc-agenda-divider-inner'/></div>")):ge=t([]),be=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce),xe=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(be),we=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(xe),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=f(),a=c(d(r),Ue),c(r,Ve),i=Oe=0;a>r;i++)s=r.getMinutes(),e+="<tr class='fc-slot"+i+" "+(s?"fc-minor":"")+"'><th class='fc-agenda-axis "+o+"'>"+(u&&s?"&nbsp;":rn(r,Xe("axisFormat")))+"</th><td class='"+l+"'><div style='position:relative'>&nbsp;</div></td></tr>",c(r,Xe("slotMinutes")),Oe++;e+="</tbody></table>",Ce=t(e).appendTo(xe),_e=Ce.find("div:first"),C(Ce.find("td")),Se=Se.add(Ce.find("th:first"))}function u(){var t,e,n,i,r=h(new Date);for(t=0;Pe>t;t++)i=I(t),e=ne.eq(t),e.html(rn(i,Ye)),n=re.eq(t),+i==+r?n.addClass(je+"-state-highlight fc-today"):n.removeClass(je+"-state-highlight fc-today"),G(e.add(n),i)}function p(t,n){t===e&&(t=Me),Me=t,an={};var i=ie.position().top,r=be.position().top;t=Math.min(t-i,Ce.height()+r+1),le.height(t-O(se)),ce.css("top",i),be.height(t-r-1),Re=_e.height()+1,n&&v()}function m(e){ke=e,He.clear(),Ee=0,E(Se.width("").each(function(e,n){Ee=Math.max(Ee,t(n).outerWidth())}),Ee),e=be[0].clientWidth,(Ae=be.width()-e)?(E(Te,Ae),Te.show().prev().removeClass("fc-last")):Te.hide().prev().addClass("fc-last"),Ne=Math.floor((e-Ee)/Pe),E(ne.slice(0,-1),Ne)}function v(){function t(){be.scrollTop(i)}var e=f(),n=d(e);n.setHours(Xe("firstHour"));var i=L(e,n)+1;t(),setTimeout(t,0)}function y(){Ie=be.scrollTop()}function x(){be.scrollTop(Ie)}function w(t){t.click(_).mousedown(en)}function C(t){t.click(_).mousedown(U)}function _(t){if(!Xe("selectable")){var e=Math.min(Pe-1,Math.floor((t.pageX-te.offset().left-Ee)/Ne)),n=I(e),i=this.parentNode.className.match(/fc-slot(\d+)/);if(i){i=parseInt(i[1])*Xe("slotMinutes");var r=Math.floor(i/60);n.setHours(r),n.setMinutes(i%60+Ve),Ge("dayClick",re[e],n,!1,t)}else Ge("dayClick",re[e],n,!0,t)}}function S(t,e,n){n&&Fe.build();var i=d(Z.visStart);$e?(n=g(e,i)*qe+We+1,t=g(t,i)*qe+We+1):(n=g(t,i),t=g(e,i)),n=Math.max(0,n),t=Math.min(Pe,t),t>n&&w(T(0,n,0,t-1))}function T(t,e,n,i){return t=Fe.rect(t,e,n,i,ce),Je(t,ce)}function D(t,e){for(var n=d(Z.visStart),i=l(d(n),1),r=0;Pe>r;r++){var a=new Date(Math.max(n,t)),s=new Date(Math.min(i,e));if(s>a){var o=r*qe+We;o=Fe.rect(0,o,0,o,xe),a=L(n,a),s=L(n,s),o.top=a,o.height=s-a,C(Je(o,xe))}l(n,1),l(i,1)}}function k(t){return He.left(t)}function M(t){return He.right(t)}function A(t){return{row:Math.floor(g(t,Z.visStart)/7),col:F(t.getDay())}}function R(t){var e=I(t.col);return t=t.row,Xe("allDaySlot")&&t--,t>=0&&c(e,Ve+t*Xe("slotMinutes")),e}function I(t){return l(d(Z.visStart),t*qe+We)}function P(t){return Xe("allDaySlot")&&!t.row}function F(t){return(t-Math.max(Be,ze)+Pe)%Pe*qe+We}function L(t,n){if(t=d(t,!0),n<c(d(t),Ve))return 0;if(n>=c(d(t),Ue))return Ce.height();t=Xe("slotMinutes"),n=60*n.getHours()+n.getMinutes()-Ve;var i=Math.floor(n/t),r=an[i];return r===e&&(r=an[i]=Ce.find("tr:eq("+i+") td div")[0].offsetTop),Math.max(0,Math.round(r-1+Re*(n%t/t)))}function H(){return{left:Ee,right:ke-Ae}}function j(){return ye}function B(t){var e=d(t.start);return t.allDay?e:c(e,Xe("defaultEventMinutes"))}function $(t,e){return e?d(t):c(d(t),Xe("slotMinutes"))}function q(t,e,n){n?Xe("allDaySlot")&&S(t,l(d(e),1),!0):W(t,e)}function W(e,n){var i=Xe("selectHelper");if(Fe.build(),i){var r=g(e,Z.visStart)*qe+We;if(r>=0&&Pe>r){r=Fe.rect(0,r,0,r,xe);var a=L(e,e),s=L(e,n);s>a&&(r.top=a,r.height=s-a,r.left+=2,r.width-=5,t.isFunction(i)?(e=i(e,n))&&(r.position="absolute",r.zIndex=8,De=t(e).css(r).appendTo(xe)):(r.isStart=!0,r.isEnd=!0,De=t(nn({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},r)),De.css("opacity",Xe("dragOpacity"))),De&&(C(De),xe.append(De),E(De,r.width,!0),N(De,r.height,!0)))}}else D(e,n)}function V(){Ke(),De&&(De.remove(),De=null)}function U(e){if(1==e.which&&Xe("selectable")){tn(e);var n;Le.start(function(t,e){V(),t&&t.col==e.col&&!P(t)?(e=R(e),t=R(t),n=[e,c(d(e),Xe("slotMinutes")),t,c(d(t),Xe("slotMinutes"))].sort(z),W(n[0],n[3])):n=null},e),t(document).one("mouseup",function(t){Le.stop(),n&&(+n[0]==+n[1]&&Q(n[0],!1,t),Ze(n[0],n[3],!1,t))})}}function Q(t,e,n){Ge("dayClick",re[F(t.getDay())],t,e,n)}function J(t,e){Le.start(function(t){if(Ke(),t)if(P(t))T(t.row,t.col,t.row,t.col);else{t=R(t);var e=c(d(t),Xe("defaultEventMinutes"));D(t,e)}},e)}function K(t,e,n){var i=Le.stop();Ke(),i&&Ge("drop",t,R(i),P(i),e,n)}var Z=this;Z.renderAgenda=a,Z.setWidth=m,Z.setHeight=p,Z.beforeHide=y,Z.afterShow=x,Z.defaultEventEnd=B,Z.timePosition=L,Z.dayOfWeekCol=F,Z.dateCell=A,Z.cellDate=R,Z.cellIsAllDay=P,Z.allDayRow=j,Z.allDayBounds=H,Z.getHoverListener=function(){return Le},Z.colContentLeft=k,Z.colContentRight=M,Z.getDaySegmentContainer=function(){return ge},Z.getSlotSegmentContainer=function(){return we},Z.getMinMinute=function(){return Ve},Z.getMaxMinute=function(){return Ue},Z.getBodyContent=function(){return xe},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return Pe},Z.getColWidth=function(){return Ne},Z.getSlotHeight=function(){return Re},Z.defaultSelectionEnd=$,Z.renderDayOverlay=S,Z.renderSelection=q,Z.clearSelection=V,Z.reportDayClick=Q,Z.dragStart=J,Z.dragStop=K,ue.call(Z,n,i,r),de.call(Z),he.call(Z),oe.call(Z);var te,ee,ne,ie,re,ae,se,le,ce,ge,ve,ye,be,xe,we,Ce,_e,Se,Te,De,ke,Me,Ee,Ne,Ae,Re,Ie,Pe,Oe,Fe,Le,He,je,Be,ze,$e,qe,We,Ve,Ue,Ye,Xe=Z.opt,Ge=Z.trigger,Qe=Z.clearEvents,Je=Z.renderOverlay,Ke=Z.clearOverlays,Ze=Z.reportSelection,tn=Z.unselect,en=Z.daySelectionMousedown,nn=Z.slotSegHtml,rn=i.formatDate,an={};Y(n.addClass("fc-agenda")),Fe=new fe(function(e,n){function i(t){return Math.max(l,Math.min(u,t))}var r,a,s;ne.each(function(e,i){r=t(i),a=r.offset().left,e&&(s[1]=a),s=[a],n[e]=s}),s[1]=a+r.outerWidth(),Xe("allDaySlot")&&(r=ye,a=r.offset().top,e[0]=[a,a+r.outerHeight()]);for(var o=xe.offset().top,l=be.offset().top,u=l+be.outerHeight(),c=0;Oe>c;c++)e.push([i(o+Re*c),i(o+Re*(c+1))])}),Le=new pe(Fe),He=new me(function(t){return ae.eq(t)})}function oe(){function n(t,e){S(t);var n,i=t.length,s=[],l=[];for(n=0;i>n;n++)t[n].allDay?s.push(t[n]):l.push(t[n]);y("allDaySlot")&&($(r(s),e),R()),o(a(l),e)}function i(){T(),I().empty(),P().empty()}function r(e){e=k(D(e,t.map(e,C),v.visStart,v.visEnd));var n,i,r,a,s=e.length,o=[];for(n=0;s>n;n++)for(i=e[n],r=0;r<i.length;r++)a=i[r],a.row=0,a.level=n,o.push(a);return o}function a(e){var n,i,r,a,o,u,h=W(),f=H(),p=L(),g=c(d(v.visStart),f),m=t.map(e,s),y=[];for(n=0;h>n;n++){for(i=k(D(e,m,g,c(d(g),p-f))),le(i),r=0;r<i.length;r++)for(a=i[r],o=0;o<a.length;o++)u=a[o],u.col=n,u.level=r,y.push(u);l(g,1,!0)}return y}function s(t){return t.end?d(t.end):c(d(t.start),y("defaultEventMinutes"))}function o(n,i){var r,a,s,o,l,c,h,d,p,g,m,v,x,w=n.length,C="",_={},S={},T=P();for(r=W(),(m=y("isRTL"))?(v=-1,x=r-1):(v=1,x=0),r=0;w>r;r++)a=n[r],s=a.event,o=j(a.start,a.start),l=j(a.start,a.end),c=a.col,h=a.level,d=a.forward||0,p=B(c*v+x),g=z(c*v+x)-p,g=Math.min(g-6,.95*g),c=h?g/(h+d+1):d?2*(g/(d+1)-6):g,h=p+g/(h+d+1)*h*v+(m?g-c:0),a.top=o,a.left=h,a.outerWidth=c,a.outerHeight=l-o,C+=u(s,a);for(T[0].innerHTML=C,m=T.children(),r=0;w>r;r++)a=n[r],s=a.event,C=t(m[r]),v=b("eventRender",s,s,C),v===!1?C.remove():(v&&v!==!0&&(C.remove(),C=t(v).css({position:"absolute",top:a.top,left:a.left}).appendTo(T)),a.element=C,s._id===i?f(s,C,a):C[0]._fci=r,J(s,C));for(M(T,n,f),r=0;w>r;r++)a=n[r],(C=a.element)&&(s=_[i=a.key=U(C[0])],a.vsides=s===e?_[i]=O(C,!0):s,s=S[i],a.hsides=s===e?S[i]=A(C,!0):s,i=C.find("div.fc-event-content"),i.length&&(a.contentTop=i[0].offsetTop));for(r=0;w>r;r++)a=n[r],(C=a.element)&&(C[0].style.width=Math.max(0,a.outerWidth-a.hsides)+"px",_=Math.max(0,a.outerHeight-a.vsides),C[0].style.height=_+"px",s=a.event,a.contentTop!==e&&_-a.contentTop<10&&(C.find("div.fc-event-time").text(ae(s.start,y("timeFormat"))+" - "+s.title),C.find("div.fc-event-title").remove()),b("eventAfterRender",s,s,C))}function u(t,e){var n="<",i=t.url,r=Q(t,y),a=r?" style='"+r+"'":"",s=["fc-event","fc-event-skin","fc-event-vert"];return x(t)&&s.push("fc-event-draggable"),e.isStart&&s.push("fc-corner-top"),e.isEnd&&s.push("fc-corner-bottom"),s=s.concat(t.className),t.source&&(s=s.concat(t.source.className||[])),n+=i?"a href='"+V(t.url)+"'":"div",n+=" class='"+s.join(" ")+"' style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+r+"'><div class='fc-event-inner fc-event-skin'"+a+"><div class='fc-event-head fc-event-skin'"+a+"><div class='fc-event-time'>"+V(se(t.start,t.end,y("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+V(t.title)+"</div></div><div class='fc-event-bg'></div></div>",e.isEnd&&w(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(i?"a":"div")+">"}function h(t,e,n){x(t)&&p(t,e,n.isStart),n.isEnd&&w(t)&&q(t,e,n),E(t,e)}function f(t,e,n){var i=e.find("div.fc-event-time");x(t)&&g(t,e,i),n.isEnd&&w(t)&&m(t,e,i),E(t,e)}function p(t,e,n){function i(){o||(e.width(r).height("").draggable("option","grid",null),o=!0)}var r,a,s,o=!0,u=y("isRTL")?-1:1,c=F(),h=Y(),f=X(),p=H();e.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(p,g){b("eventDragStart",e,t,p,g),Z(t,e),r=e.width(),c.start(function(r,c,p,g){ie(),r?(a=!1,s=g*u,r.row?n?o&&(e.width(h-10),N(e,f*Math.round((t.end?(t.end-t.start)/De:y("defaultEventMinutes"))/y("slotMinutes"))),e.draggable("option","grid",[h,1]),o=!1):a=!0:(ne(l(d(t.start),s),l(C(t),s)),i()),a=a||o&&!s):(i(),a=!0),e.draggable("option","revert",a)},p,"drag")},stop:function(n,r){if(c.stop(),ie(),b("eventDragStop",e,t,n,r),a)i(),e.css("filter",""),K(t,e);else{var l=0;o||(l=Math.round((e.offset().top-G().offset().top)/f)*y("slotMinutes")+p-(60*t.start.getHours()+t.start.getMinutes())),te(this,t,s,l,o,n,r)}}})}function g(t,e,n){function i(e){var i,r=c(d(t.start),e);t.end&&(i=c(d(t.end),e)),n.text(se(r,i,y("timeFormat")))}function r(){h&&(n.css("display",""),e.draggable("option","grid",[m,v]),h=!1)}var a,s,o,u,h=!1,f=y("isRTL")?-1:1,p=F(),g=W(),m=Y(),v=X();e.draggable({zIndex:9,scroll:!1,grid:[m,v],axis:1==g?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(i,c){b("eventDragStart",e,t,i,c),Z(t,e),a=e.position(),o=u=0,p.start(function(i,a,o,u){e.draggable("option","revert",!i),ie(),i&&(s=u*f,y("allDaySlot")&&!i.row?(h||(h=!0,n.hide(),e.draggable("option","grid",null)),ne(l(d(t.start),s),l(C(t),s))):r())},i,"drag")},drag:function(t,e){o=Math.round((e.position.top-a.top)/v)*y("slotMinutes"),o!=u&&(h||i(o),u=o)},stop:function(n,l){var u=p.stop();ie(),b("eventDragStop",e,t,n,l),u&&(s||o||h)?te(this,t,s,h?0:o,h,n,l):(r(),e.css("filter",""),e.css(a),i(0),K(t,e))}})}function m(t,e,n){var i,r,a=X();e.resizable({handles:{s:"div.ui-resizable-s"},grid:a,start:function(n,a){i=r=0,Z(t,e),e.css("z-index",9),b("eventResizeStart",this,t,n,a)},resize:function(s,o){i=Math.round((Math.max(a,e.height())-o.originalSize.height)/a),i!=r&&(n.text(se(t.start,i||t.end?c(_(t),y("slotMinutes")*i):null,y("timeFormat"))),r=i)},stop:function(n,r){b("eventResizeStop",this,t,n,r),i?ee(this,t,0,y("slotMinutes")*i,n,r):(e.css("z-index",8),K(t,e))}})}var v=this;v.renderEvents=n,v.compileDaySegs=r,v.clearEvents=i,v.slotSegHtml=u,v.bindDaySeg=h,ce.call(v);var y=v.opt,b=v.trigger,x=v.isEventDraggable,w=v.isEventResizable,_=v.eventEnd,S=v.reportEvents,T=v.reportEventClear,E=v.eventElementHandlers,R=v.setHeight,I=v.getDaySegmentContainer,P=v.getSlotSegmentContainer,F=v.getHoverListener,L=v.getMaxMinute,H=v.getMinMinute,j=v.timePosition,B=v.colContentLeft,z=v.colContentRight,$=v.renderDaySegs,q=v.resizableDayEvent,W=v.getColCnt,Y=v.getColWidth,X=v.getSlotHeight,G=v.getBodyContent,J=v.reportEventElement,K=v.showEvents,Z=v.hideEvents,te=v.eventDrop,ee=v.eventResize,ne=v.renderDayOverlay,ie=v.clearOverlays,re=v.calendar,ae=re.formatDate,se=re.formatDates}function le(t){var e,n,i,r,a,s;for(e=t.length-1;e>0;e--)for(r=t[e],n=0;n<r.length;n++)for(a=r[n],i=0;i<t[e-1].length;i++)s=t[e-1][i],T(a,s)&&(s.forward=Math.max(s.forward||0,(a.forward||0)+1))}function ue(t,n,i){function r(t,e){return t=A[t],"object"==typeof t?W(t,e||i):t}function a(t,e){return n.trigger.apply(n,[t,e||S].concat(Array.prototype.slice.call(arguments,2),[S]))}function s(t){return u(t)&&!r("disableDragging")}function o(t){return u(t)&&!r("disableResizing")}function u(t){return K(t.editable,(t.source||{}).editable,r("editable"))}function h(t){M={};var e,n,i=t.length;for(e=0;i>e;e++)n=t[e],M[n._id]?M[n._id].push(n):M[n._id]=[n]}function f(t){return t.end?d(t.end):T(t)}function p(t,e){E.push(e),N[t._id]?N[t._id].push(e):N[t._id]=[e]}function g(){E=[],N={}}function m(t,e){e.click(function(n){return e.hasClass("ui-draggable-dragging")||e.hasClass("ui-resizable-resizing")?void 0:a("eventClick",this,t,n)}).hover(function(e){a("eventMouseover",this,t,e)
},function(e){a("eventMouseout",this,t,e)})}function v(t,e){b(t,e,"show")}function y(t,e){b(t,e,"hide")}function b(t,e,n){t=N[t._id];var i,r=t.length;for(i=0;r>i;i++)e&&t[i][0]==e[0]||t[i][n]()}function x(t,e,n,i,r,s,o){var l=e.allDay,u=e._id;C(M[u],n,i,r),a("eventDrop",t,e,n,i,r,function(){C(M[u],-n,-i,l),k(u)},s,o),k(u)}function w(t,e,n,i,r,s){var o=e._id;_(M[o],n,i),a("eventResize",t,e,n,i,function(){_(M[o],-n,-i),k(o)},r,s),k(o)}function C(t,n,i,r){i=i||0;for(var a,s=t.length,o=0;s>o;o++)a=t[o],r!==e&&(a.allDay=r),c(l(a.start,n,!0),i),a.end&&(a.end=c(l(a.end,n,!0),i)),D(a,A)}function _(t,e,n){n=n||0;for(var i,r=t.length,a=0;r>a;a++)i=t[a],i.end=c(l(f(i),e,!0),n),D(i,A)}var S=this;S.element=t,S.calendar=n,S.name=i,S.opt=r,S.trigger=a,S.isEventDraggable=s,S.isEventResizable=o,S.reportEvents=h,S.eventEnd=f,S.reportEventElement=p,S.reportEventClear=g,S.eventElementHandlers=m,S.showEvents=v,S.hideEvents=y,S.eventDrop=x,S.eventResize=w;var T=S.defaultEventEnd,D=n.normalizeEvent,k=n.reportEventChange,M={},E=[],N={},A=n.options}function ce(){function n(t,e){var n,i,l,d,m=j(),v=k(),y=E(),b=0,x=t.length;for(m[0].innerHTML=r(t),a(t,m.children()),s(t),o(t,m,e),u(t),c(t),h(t),e=f(),m=0;v>m;m++){for(n=[],i=0;y>i;i++)n[i]=0;for(;x>b&&(l=t[b]).row==m;){for(i=$(n.slice(l.startCol,l.endCol)),l.top=i,i+=l.outerHeight,d=l.startCol;d<l.endCol;d++)n[d]=i;b++}e[m].height($(n))}g(t,p(e))}function i(e,n,i){var s,o=t("<div/>"),l=j(),d=e.length;for(o[0].innerHTML=r(e),o=o.children(),l.append(o),a(e,o),u(e),c(e),h(e),g(e,p(f())),o=[],l=0;d>l;l++)(s=e[l].element)&&(e[l].row===n&&s.css("top",i),o.push(s[0]));return t(o)}function r(t){var e,n,i,r,a,s=y("isRTL"),o=t.length;e=R();var l,u,c,h,d,f=e.left,p=e.right,g="";for(e=0;o>e;e++)n=t[e],i=n.event,a=["fc-event","fc-event-skin","fc-event-hori"],x(i)&&a.push("fc-event-draggable"),s?(n.isStart&&a.push("fc-corner-right"),n.isEnd&&a.push("fc-corner-left"),l=O(n.end.getDay()-1),u=O(n.start.getDay()),c=n.isEnd?I(l):f,h=n.isStart?P(u):p):(n.isStart&&a.push("fc-corner-left"),n.isEnd&&a.push("fc-corner-right"),l=O(n.start.getDay()),u=O(n.end.getDay()-1),c=n.isStart?I(l):f,h=n.isEnd?P(u):p),a=a.concat(i.className),i.source&&(a=a.concat(i.source.className||[])),r=i.url,d=Q(i,y),g+=r?"<a href='"+V(r)+"'":"<div",g+=" class='"+a.join(" ")+"' style='position:absolute;z-index:8;left:"+c+"px;"+d+"'><div class='fc-event-inner fc-event-skin'"+(d?" style='"+d+"'":"")+">",!i.allDay&&n.isStart&&(g+="<span class='fc-event-time'>"+V(z(i.start,i.end,y("timeFormat")))+"</span>"),g+="<span class='fc-event-title'>"+V(i.title)+"</span></div>",n.isEnd&&w(i)&&(g+="<div class='ui-resizable-handle ui-resizable-"+(s?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),g+="</"+(r?"a":"div")+">",n.left=c,n.outerWidth=h-c,n.startCol=l,n.endCol=u+1;return g}function a(e,n){var i,r,a,s,o=e.length;for(i=0;o>i;i++)r=e[i],a=r.event,s=t(n[i]),a=b("eventRender",a,a,s),a===!1?s.remove():(a&&a!==!0&&(a=t(a).css({position:"absolute",left:r.left}),s.replaceWith(a),s=a),r.element=s)}function s(t){var e,n,i,r=t.length;for(e=0;r>e;e++)n=t[e],(i=n.element)&&_(n.event,i)}function o(t,e,n){var i,r,a,s,o=t.length;for(i=0;o>i;i++)r=t[i],(a=r.element)&&(s=r.event,s._id===n?B(s,a,r):a[0]._fci=i);M(e,t,B)}function u(t){var n,i,r,a,s,o=t.length,l={};for(n=0;o>n;n++)i=t[n],(r=i.element)&&(a=i.key=U(r[0]),s=l[a],s===e&&(s=l[a]=A(r,!0)),i.hsides=s)}function c(t){var e,n,i,r=t.length;for(e=0;r>e;e++)n=t[e],(i=n.element)&&(i[0].style.width=Math.max(0,n.outerWidth-n.hsides)+"px")}function h(t){var n,i,r,a,s,o=t.length,l={};for(n=0;o>n;n++)i=t[n],(r=i.element)&&(a=i.key,s=l[a],s===e&&(s=l[a]=L(r)),i.outerHeight=r[0].offsetHeight+s)}function f(){var t,e=k(),n=[];for(t=0;e>t;t++)n[t]=N(t).find("td:first div.fc-day-content > div");return n}function p(t){var e,n=t.length,i=[];for(e=0;n>e;e++)i[e]=t[e][0].offsetTop;return i}function g(t,e){var n,i,r,a=t.length;for(n=0;a>n;n++)i=t[n],(r=i.element)&&(r[0].style.top=e[i.row]+(i.top||0)+"px",i=i.event,b("eventAfterRender",i,i,r))}function m(e,n,r){var a=y("isRTL"),s=a?"w":"e",o=n.find("div.ui-resizable-"+s),u=!1;Y(n),n.mousedown(function(t){t.preventDefault()}).click(function(t){u&&(t.preventDefault(),t.stopImmediatePropagation())}),o.mousedown(function(o){function c(n){b("eventResizeStop",this,e,n),t("body").css("cursor",""),p.stop(),W(),h&&D(this,e,h,0,n),setTimeout(function(){u=!1},0)}if(1==o.which){u=!0;var h,f,p=v.getHoverListener(),g=k(),m=E(),y=a?-1:1,x=a?m-1:0,w=n.css("top"),_=t.extend({},e),M=F(e.start);X(),t("body").css("cursor",s+"-resize").one("mouseup",c),b("eventResizeStart",this,e,o),p.start(function(t,n){if(t){var o=Math.max(M.row,t.row);t=t.col,1==g&&(o=0),o==M.row&&(t=a?Math.min(M.col,t):Math.max(M.col,t)),h=7*o+t*y+x-(7*n.row+n.col*y+x),n=l(C(e),h,!0),h?(_.end=n,o=f,f=i(H([_]),r.row,w),f.find("*").css("cursor",s+"-resize"),o&&o.remove(),T(e)):f&&(S(e),f.remove(),f=null),W(),q(e.start,l(d(n),1))}},o)}})}var v=this;v.renderDaySegs=n,v.resizableDayEvent=m;var y=v.opt,b=v.trigger,x=v.isEventDraggable,w=v.isEventResizable,C=v.eventEnd,_=v.reportEventElement,S=v.showEvents,T=v.hideEvents,D=v.eventResize,k=v.getRowCnt,E=v.getColCnt,N=v.allDayRow,R=v.allDayBounds,I=v.colContentLeft,P=v.colContentRight,O=v.dayOfWeekCol,F=v.dateCell,H=v.compileDaySegs,j=v.getDaySegmentContainer,B=v.bindDaySeg,z=v.calendar.formatDates,q=v.renderDayOverlay,W=v.clearOverlays,X=v.clearSelection}function he(){function e(t,e,r){n(),e||(e=l(t,r)),u(t,e,r),i(t,e,r)}function n(t){h&&(h=!1,c(),o("unselect",null,t))}function i(t,e,n,i){h=!0,o("select",null,t,e,n,i)}function r(e){var r=a.cellDate,o=a.cellIsAllDay,l=a.getHoverListener(),h=a.reportDayClick;if(1==e.which&&s("selectable")){n(e);var d;l.start(function(t,e){c(),t&&o(t)?(d=[r(e),r(t)].sort(z),u(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&h(d[0],!0,t),i(d[0],d[1],!0,t))})}}var a=this;a.select=e,a.unselect=n,a.reportSelection=i,a.daySelectionMousedown=r;var s=a.opt,o=a.trigger,l=a.defaultSelectionEnd,u=a.renderSelection,c=a.clearSelection,h=!1;s("selectable")&&s("unselectAuto")&&t(document).mousedown(function(e){var i=s("unselectCancel");i&&t(e.target).parents(i).length||n(e)})}function de(){function e(e,n){var i=a.shift();return i||(i=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),i[0].parentNode!=n[0]&&i.appendTo(n),r.push(i.css(e).show()),i}function n(){for(var t;t=r.shift();)a.push(t.hide().unbind())}var i=this;i.renderOverlay=e,i.clearOverlays=n;var r=[],a=[]}function fe(t){var e,n,i=this;i.build=function(){e=[],n=[],t(e,n)},i.cell=function(t,i){var r,a=e.length,s=n.length,o=-1,l=-1;for(r=0;a>r;r++)if(i>=e[r][0]&&i<e[r][1]){o=r;break}for(r=0;s>r;r++)if(t>=n[r][0]&&t<n[r][1]){l=r;break}return o>=0&&l>=0?{row:o,col:l}:null},i.rect=function(t,i,r,a,s){return s=s.offset(),{top:e[t][0]-s.top,left:n[i][0]-s.left,width:n[a][1]-n[i][0],height:e[r][1]-e[t][0]}}}function pe(e){function n(t){ge(t),t=e.cell(t.pageX,t.pageY),(!t!=!s||t&&(t.row!=s.row||t.col!=s.col))&&(t?(a||(a=t),r(t,a,t.row-a.row,t.col-a.col)):r(t,a),s=t)}var i,r,a,s,o=this;o.start=function(o,l,u){r=o,a=s=null,e.build(),n(l),i=u||"mousemove",t(document).bind(i,n)},o.stop=function(){return t(document).unbind(i,n),s}}function ge(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function me(t){function n(e){return r[e]=r[e]||t(e)}var i=this,r={},a={},s={};i.left=function(t){return a[t]=a[t]===e?n(t).position().left:a[t]},i.right=function(t){return s[t]=s[t]===e?i.left(t)+n(t).width():s[t]},i.clear=function(){r={},a={},s={}}}var ve={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},ye={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},be=t.fullCalendar={version:"1.5.4"},xe=be.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var r,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=t.data(this,"fullCalendar");i&&t.isFunction(i[n])&&(i=i[n].apply(i,a),r===e&&(r=i),"destroy"==n&&t.removeData(this,"fullCalendar"))}),r!==e?r:this}var s=n.eventSources||[];return delete n.eventSources,n.events&&(s.push(n.events),delete n.events),n=t.extend(!0,{},ve,n.isRTL||n.isRTL===e&&ve.isRTL?ye:{},n),this.each(function(e,r){e=t(r),r=new i(e,n,s),e.data("fullCalendar",r),r.render()}),this},be.sourceNormalizers=[],be.sourceFetchers=[];var we={dataType:"json",cache:!1},Ce=1;be.addDays=l,be.cloneDate=d,be.parseDate=v,be.parseISO8601=y,be.parseTime=b,be.formatDate=x,be.formatDates=w;var _e=["sun","mon","tue","wed","thu","fri","sat"],Se=864e5,Te=36e5,De=6e4,ke={s:function(t){return t.getSeconds()},ss:function(t){return q(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return q(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return q(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return q(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return q(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return q(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return x(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){return t=t.getDate(),t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"}};be.applyAll=J,xe.month=Z,xe.basicWeek=te,xe.basicDay=ee,n({weekMode:"fixed"}),xe.agendaWeek=re,xe.agendaDay=ae,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery),function(t){t.gritter={},t.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},t.gritter.add=function(t){try{return e.add(t||{})}catch(n){var i="Gritter Error: "+n;"undefined"!=typeof console&&console.error?console.error(i,t):alert(i)}},t.gritter.remove=function(t,n){e.removeSpecific(t,n||{})},t.gritter.removeAll=function(t){e.stop(t||{})};var e={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(n){if("string"==typeof n&&(n={text:n}),!n.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var i=n.title,r=n.text,a=n.image||"",s=n.sticky||!1,o=n.class_name||t.gritter.options.class_name,l=t.gritter.options.position,u=n.time||"";this._verifyWrapper(),this._item_count++;var c=this._item_count,h=this._tpl_item;t(["before_open","after_open","before_close","after_close"]).each(function(i,r){e["_"+r+"_"+c]=t.isFunction(n[r])?n[r]:function(){}}),this._custom_timer=0,u&&(this._custom_timer=u);var d=""!=a?'<img src="'+a+'" class="gritter-image" />':"",f=""!=a?"gritter-with-image":"gritter-without-image";if(i=i?this._str_replace("[[title]]",i,this._tpl_title):"",h=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[i,r,this._tpl_close,d,this._item_count,f,o],h),this["_before_open_"+c]()===!1)return!1;t("#gritter-notice-wrapper").addClass(l).append(h);var p=t("#gritter-item-"+this._item_count);return p.fadeIn(this.fade_in_speed,function(){e["_after_open_"+c](t(this))}),s||this._setFadeTimer(p,c),t(p).bind("mouseenter mouseleave",function(n){"mouseenter"==n.type?s||e._restoreItemIfFading(t(this),c):s||e._setFadeTimer(t(this),c),e._hoverState(t(this),n.type)}),t(p).find(".gritter-close").click(function(){e.removeSpecific(c,{},null,!0)}),c},_countRemoveWrapper:function(e,n,i){n.remove(),this["_after_close_"+e](n,i),0==t(".gritter-item-wrapper").length&&t("#gritter-notice-wrapper").remove()},_fade:function(t,n,i,r){var i=i||{},a="undefined"!=typeof i.fade?i.fade:!0,s=i.speed||this.fade_out_speed,o=r;this["_before_close_"+n](t,o),r&&t.unbind("mouseenter mouseleave"),a?t.animate({opacity:0},s,function(){t.animate({height:0},300,function(){e._countRemoveWrapper(n,t,o)})}):this._countRemoveWrapper(n,t)},_hoverState:function(t,e){"mouseenter"==e?(t.addClass("hover"),t.find(".gritter-close").show()):(t.removeClass("hover"),t.find(".gritter-close").hide())},removeSpecific:function(e,n,i,r){if(!i)var i=t("#gritter-item-"+e);this._fade(i,e,n||{},r)},_restoreItemIfFading:function(t,e){clearTimeout(this["_int_id_"+e]),t.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in t.gritter.options)this[opt]=t.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(t,n){var i=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+n]=setTimeout(function(){e._fade(t,n)},i)},stop:function(e){var n=t.isFunction(e.before_close)?e.before_close:function(){},i=t.isFunction(e.after_close)?e.after_close:function(){},r=t("#gritter-notice-wrapper");n(r),r.fadeOut(function(){t(this).remove(),i()})},_str_replace:function(t,e,n,i){var r=0,a=0,s="",o="",l=0,u=0,c=[].concat(t),h=[].concat(e),d=n,f=h instanceof Array,p=d instanceof Array;for(d=[].concat(d),i&&(this.window[i]=0),r=0,l=d.length;l>r;r++)if(""!==d[r])for(a=0,u=c.length;u>a;a++)s=d[r]+"",o=f?void 0!==h[a]?h[a]:"":h[0],d[r]=s.split(c[a]).join(o),i&&d[r]!==s&&(this.window[i]+=(s.length-d[r].length)/c[a].length);return p?d:d[0]},_verifyWrapper:function(){0==t("#gritter-notice-wrapper").length&&t("body").append(this._tpl_wrap)}}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var e,n,i,r,a,s,o,l,u,c,h,d,f,p,g,m,v,y,b,x,w,C,_,S,T,D,k,M,E,N,A,R,I={},P=0;e=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:void 0,normalRangeMax:void 0,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:void 0,chartRangeMax:void 0,chartRangeMinX:void 0,chartRangeMaxX:void 0,tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:void 0,nullColor:void 0,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:!1,colorMap:void 0,tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:void 0,thresholdValue:0,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:!1,tooltipFormat:new i("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:void 0,tooltipFormat:new i("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:void 0,targetColor:"#4a2",chartRangeMax:void 0,chartRangeMin:void 0,tooltipFormat:new i("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},D='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',n=function(){var e,n;return e=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(e.prototype=t.extend(new arguments[0],arguments[arguments.length-1]),e._super=arguments[0].prototype):e.prototype=arguments[arguments.length-1],arguments.length>2&&(n=Array.prototype.slice.call(arguments,1,-1),n.unshift(e.prototype),t.extend.apply(t,n))):e.prototype=arguments[0],e.prototype.cls=e,e},t.SPFormatClass=i=n({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,n){var i,r,a,s,o,l=this,c=t;return this.format.replace(this.fre,function(){var t;return r=arguments[1],a=arguments[3],i=l.precre.exec(r),i?(o=i[2],r=i[1]):o=!1,s=c[r],void 0===s?"":a&&e&&e[a]?(t=e[a],t.get?e[a].get(s)||s:e[a][s]||s):(u(s)&&(s=n.get("numberFormatter")?n.get("numberFormatter")(s):p(s,o,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),s)})}}),t.spformat=function(t,e){return new i(t,e)},r=function(t,e,n){return e>t?e:t>n?n:t},a=function(t,e){var n;return 2===e?(n=Math.floor(t.length/2),t.length%2?t[n]:(t[n-1]+t[n])/2):t.length%2?(n=(t.length*e+e)/4,n%1?(t[Math.floor(n)]+t[Math.floor(n)-1])/2:t[n-1]):(n=(t.length*e+2)/4,n%1?(t[Math.floor(n)]+t[Math.floor(n)-1])/2:t[n-1])},s=function(t){var e;switch(t){case"undefined":t=void 0;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:e=parseFloat(t),t==e&&(t=e)}return t},o=function(t){var e,n=[];for(e=t.length;e--;)n[e]=s(t[e]);return n},l=function(t,e){var n,i,r=[];for(n=0,i=t.length;i>n;n++)t[n]!==e&&r.push(t[n]);return r},u=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},p=function(e,n,i,r,a){var s,o;for(e=(n===!1?parseFloat(e).toString():e.toFixed(n)).split(""),s=(s=t.inArray(".",e))<0?e.length:s,s<e.length&&(e[s]=a),o=s-i;o>0;o-=i)e.splice(o,0,r);return e.join("")},c=function(t,e,n){var i;for(i=e.length;i--;)if((!n||null!==e[i])&&e[i]!==t)return!1;return!0},h=function(t){var e,n=0;for(e=t.length;e--;)n+="number"==typeof t[e]?t[e]:0;return n},f=function(e){return t.isArray(e)?e:[e]},d=function(t){var e;document.createStyleSheet?document.createStyleSheet().cssText=t:(e=document.createElement("style"),e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e),e["string"==typeof document.body.style.WebkitAppearance?"innerText":"innerHTML"]=t)},t.fn.simpledraw=function(e,n,i,r){var a,s;if(i&&(a=this.data("_jqs_vcanvas")))return a;if(void 0===e&&(e=t(this).innerWidth()),void 0===n&&(n=t(this).innerHeight()),t.fn.sparkline.hasCanvas)a=new N(e,n,this,r);else{if(!t.fn.sparkline.hasVML)return!1;a=new A(e,n,this)}return s=t(this).data("_jqs_mhandler"),s&&s.registerCanvas(a),a},t.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},t.RangeMapClass=g=n({init:function(t){var e,n,i=[];for(e in t)t.hasOwnProperty(e)&&"string"==typeof e&&e.indexOf(":")>-1&&(n=e.split(":"),n[0]=0===n[0].length?-1/0:parseFloat(n[0]),n[1]=0===n[1].length?1/0:parseFloat(n[1]),n[2]=t[e],i.push(n));this.map=t,this.rangelist=i||!1},get:function(t){var e,n,i,r=this.rangelist;if(void 0!==(i=this.map[t]))return i;if(r)for(e=r.length;e--;)if(n=r[e],n[0]<=t&&n[1]>=t)return n[2];return void 0}}),t.range_map=function(t){return new g(t)},m=n({init:function(e,n){var i=t(e);this.$el=i,this.options=n,this.currentPageX=0,this.currentPageY=0,this.el=e,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!n.get("disableTooltips"),this.highlightEnabled=!n.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(e){var n=t(e.canvas);this.canvas=e,this.$canvas=n,n.mouseenter(t.proxy(this.mouseenter,this)),n.mouseleave(t.proxy(this.mouseleave,this)),n.click(t.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=void 0)},mouseclick:function(e){var n=t.Event("sparklineClick");n.originalEvent=e,n.sparklines=this.splist,this.$el.trigger(n)},mouseenter:function(e){t(document.body).unbind("mousemove.jqs"),t(document.body).bind("mousemove.jqs",t.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new v(this.options),this.tooltip.updatePosition(e.pageX,e.pageY)),this.updateDisplay()},mouseleave:function(){t(document.body).unbind("mousemove.jqs");var e,n,i=this.splist,r=i.length,a=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),n=0;r>n;n++)e=i[n],e.clearRegionHighlight()&&(a=!0);a&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var e,n,i,r,a,s=this.splist,o=s.length,l=!1,u=this.$canvas.offset(),c=this.currentPageX-u.left,h=this.currentPageY-u.top;if(this.over){for(i=0;o>i;i++)n=s[i],r=n.setRegionHighlight(this.currentEl,c,h),r&&(l=!0);if(l){if(a=t.Event("sparklineRegionChange"),a.sparklines=this.splist,this.$el.trigger(a),this.tooltip){for(e="",i=0;o>i;i++)n=s[i],e+=n.getCurrentRegionTooltip();this.tooltip.setContent(e)}this.disableHighlight||this.canvas.render()}null===r&&this.mouseleave()}}}),v=n({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(e){var n,i=e.get("tooltipClassname","jqstooltip"),r=this.sizeStyle;this.container=e.get("tooltipContainer")||document.body,this.tooltipOffsetX=e.get("tooltipOffsetX",10),this.tooltipOffsetY=e.get("tooltipOffsetY",12),t("#jqssizetip").remove(),t("#jqstooltip").remove(),this.sizetip=t("<div/>",{id:"jqssizetip",style:r,"class":i}),this.tooltip=t("<div/>",{id:"jqstooltip","class":i}).appendTo(this.container),n=this.tooltip.offset(),this.offsetLeft=n.left,this.offsetTop=n.top,this.hidden=!0,t(window).unbind("resize.jqs scroll.jqs"),t(window).bind("resize.jqs scroll.jqs",t.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=t(window).scrollTop(),this.scrollLeft=t(window).scrollLeft(),this.scrollRight=this.scrollLeft+t(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){return t?(this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition()),void 0):(this.tooltip.css("visibility","hidden"),this.hidden=!0,void 0)},updatePosition:function(t,e){if(void 0===t){if(void 0===this.mousex)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;this.height&&this.width&&!this.hidden&&(e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=void 0,t(window).unbind("resize.jqs scroll.jqs")}}),k=function(){d(D)},t(k),R=[],t.fn.sparkline=function(e,n){return this.each(function(){var i,r,a=new t.fn.sparkline.options(this,n),s=t(this);if(i=function(){var n,i,r,o,l,u,c;return"html"===e||void 0===e?(c=this.getAttribute(a.get("tagValuesAttribute")),(void 0===c||null===c)&&(c=s.html()),n=c.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):n=e,i="auto"===a.get("width")?n.length*a.get("defaultPixelsPerValue"):a.get("width"),"auto"===a.get("height")?a.get("composite")&&t.data(this,"_jqs_vcanvas")||(o=document.createElement("span"),o.innerHTML="a",s.html(o),r=t(o).innerHeight()||t(o).height(),t(o).remove(),o=null):r=a.get("height"),a.get("disableInteraction")?l=!1:(l=t.data(this,"_jqs_mhandler"),l?a.get("composite")||l.reset():(l=new m(this,a),t.data(this,"_jqs_mhandler",l))),a.get("composite")&&!t.data(this,"_jqs_vcanvas")?(t.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),t.data(this,"_jqs_errnotify",!0)),void 0):(u=new(t.fn.sparkline[a.get("type")])(this,n,a,i,r),u.render(),l&&l.registerSparkline(u),void 0)},t(this).html()&&!a.get("disableHiddenCheck")&&t(this).is(":hidden")||t.fn.jquery<"1.3.0"&&t(this).parents().is(":hidden")||!t(this).parents("body").length){if(!a.get("composite")&&t.data(this,"_jqs_pending"))for(r=R.length;r;r--)R[r-1][0]==this&&R.splice(r-1,1);R.push([this,i]),t.data(this,"_jqs_pending",!0)}else i.call(this)})},t.fn.sparkline.defaults=e(),t.sparkline_display_visible=function(){var e,n,i,r=[];for(n=0,i=R.length;i>n;n++)e=R[n][0],t(e).is(":visible")&&!t(e).parents().is(":hidden")?(R[n][1].call(e),t.data(R[n][0],"_jqs_pending",!1),r.push(n)):t(e).closest("html").length||t.data(e,"_jqs_pending")||(t.data(R[n][0],"_jqs_pending",!1),r.push(n));for(n=r.length;n;n--)R.splice(r[n-1],1)},t.fn.sparkline.options=n({init:function(e,n){var i,r,a,s;this.userOptions=n=n||{},this.tag=e,this.tagValCache={},r=t.fn.sparkline.defaults,a=r.common,this.tagOptionsPrefix=n.enableTagOptions&&(n.tagOptionsPrefix||a.tagOptionsPrefix),s=this.getTagSetting("type"),i=s===I?r[n.type||a.type]:r[s],this.mergedOptions=t.extend({},a,i,n)},getTagSetting:function(t){var e,n,i,r,a=this.tagOptionsPrefix;if(a===!1||void 0===a)return I;if(this.tagValCache.hasOwnProperty(t))e=this.tagValCache.key;else{if(e=this.tag.getAttribute(a+t),void 0===e||null===e)e=I;else if("["===e.substr(0,1))for(e=e.substr(1,e.length-2).split(","),n=e.length;n--;)e[n]=s(e[n].replace(/(^\s*)|(\s*$)/g,""));else if("{"===e.substr(0,1))for(i=e.substr(1,e.length-2).split(","),e={},n=i.length;n--;)r=i[n].split(":",2),e[r[0].replace(/(^\s*)|(\s*$)/g,"")]=s(r[1].replace(/(^\s*)|(\s*$)/g,""));else e=s(e);this.tagValCache.key=e}return e},get:function(t,e){var n,i=this.getTagSetting(t);return i!==I?i:void 0===(n=this.mergedOptions[t])?e:n}}),t.fn.sparkline._base=n({disabled:!1,init:function(e,n,i,r,a){this.el=e,this.$el=t(e),this.values=n,this.options=i,this.width=r,this.height=a,this.currentRegion=void 0},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(){},setRegionHighlight:function(t,e,n){var i,r=this.currentRegion,a=!this.options.get("disableHighlight");return e>this.canvasWidth||n>this.canvasHeight||0>e||0>n?null:(i=this.getRegion(t,e,n),r!==i?(void 0!==r&&a&&this.removeHighlight(),this.currentRegion=i,void 0!==i&&a&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return void 0!==this.currentRegion?(this.removeHighlight(),this.currentRegion=void 0,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(){},getCurrentRegionTooltip:function(){var e,n,r,a,s,o,l,u,c,h,d,f,p,g,m=this.options,v="",y=[];if(void 0===this.currentRegion)return"";if(e=this.getCurrentRegionFields(),d=m.get("tooltipFormatter"))return d(this,m,e);if(m.get("tooltipChartTitle")&&(v+='<div class="jqs jqstitle">'+m.get("tooltipChartTitle")+"</div>\n"),n=this.options.get("tooltipFormat"),!n)return"";if(t.isArray(n)||(n=[n]),t.isArray(e)||(e=[e]),l=this.options.get("tooltipFormatFieldlist"),u=this.options.get("tooltipFormatFieldlistKey"),l&&u){for(c=[],o=e.length;o--;)h=e[o][u],-1!=(g=t.inArray(h,l))&&(c[g]=e[o]);e=c}for(r=n.length,p=e.length,o=0;r>o;o++)for(f=n[o],"string"==typeof f&&(f=new i(f)),a=f.fclass||"jqsfield",g=0;p>g;g++)e[g].isNull&&m.get("tooltipSkipNull")||(t.extend(e[g],{prefix:m.get("tooltipPrefix"),suffix:m.get("tooltipSuffix")}),s=f.render(e[g],m.get("tooltipValueLookups"),m),y.push('<div class="'+a+'">'+s+"</div>"));return y.length?v+y.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,e){var n,i,a,s,o=e.get("highlightColor"),l=e.get("highlightLighten");if(o)return o;if(l&&(n=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t))){for(a=[],i=4===t.length?16:1,s=0;3>s;s++)a[s]=r(Math.round(parseInt(n[s+1],16)*i*l),0,255);return"rgb("+a.join(",")+")"}return t}}),y={changeHighlight:function(e){var n,i=this.currentRegion,r=this.target,a=this.regionShapes[i];a&&(n=this.renderRegion(i,e),t.isArray(n)||t.isArray(a)?(r.replaceWithShapes(a,n),this.regionShapes[i]=t.map(n,function(t){return t.id})):(r.replaceWithShape(a,n),this.regionShapes[i]=n.id))},render:function(){var e,n,i,r,a=this.values,s=this.target,o=this.regionShapes;if(this.cls._super.render.call(this)){for(i=a.length;i--;)if(e=this.renderRegion(i))if(t.isArray(e)){for(n=[],r=e.length;r--;)e[r].append(),n.push(e[r].id);o[i]=n}else e.append(),o[i]=e.id;else o[i]=null;s.render()}}},t.fn.sparkline.line=b=n(t.fn.sparkline._base,{type:"line",init:function(t,e,n,i,r){b._super.init.call(this,t,e,n,i,r),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e){var n,i=this.regionMap;for(n=i.length;n--;)if(null!==i[n]&&e>=i[n][0]&&e<=i[n][1])return i[n][2];return void 0},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:null===this.yvalues[t],x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t,e,n=this.currentRegion,i=this.target,r=this.vertices[n],a=this.options,s=a.get("spotRadius"),o=a.get("highlightSpotColor"),l=a.get("highlightLineColor");r&&(s&&o&&(t=i.drawCircle(r[0],r[1],s,void 0,o),this.highlightSpotId=t.id,i.insertAfterShape(this.lastShapeId,t)),l&&(e=i.drawLine(r[0],this.canvasTop,r[0],this.canvasTop+this.canvasHeight,l),this.highlightLineId=e.id,i.insertAfterShape(this.lastShapeId,e)))},removeHighlight:function(){var t=this.target;
this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t,e,n,i,r,a=this.values,s=a.length,o=this.xvalues,l=this.yvalues,u=this.yminmax;for(t=0;s>t;t++)e=a[t],n="string"==typeof a[t],i="object"==typeof a[t]&&a[t]instanceof Array,r=n&&a[t].split(":"),n&&2===r.length?(o.push(Number(r[0])),l.push(Number(r[1])),u.push(Number(r[1]))):i?(o.push(e[0]),l.push(e[1]),u.push(e[1])):(o.push(t),null===a[t]||"null"===a[t]?l.push(null):(l.push(Number(e)),u.push(Number(e))));this.options.get("xvalues")&&(o=this.options.get("xvalues")),this.maxy=this.maxyorg=Math.max.apply(Math,u),this.miny=this.minyorg=Math.min.apply(Math,u),this.maxx=Math.max.apply(Math,o),this.minx=Math.min.apply(Math,o),this.xvalues=o,this.yvalues=l,this.yminmax=u},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),n=t.get("normalRangeMax");void 0!==e&&(e<this.miny&&(this.miny=e),n>this.maxy&&(this.maxy=n)),void 0!==t.get("chartRangeMin")&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),void 0!==t.get("chartRangeMax")&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),void 0!==t.get("chartRangeMinX")&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),void 0!==t.get("chartRangeMaxX")&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,e,n,i,r){var a=this.options.get("normalRangeMin"),s=this.options.get("normalRangeMax"),o=e+Math.round(n-n*((s-this.miny)/r)),l=Math.round(n*(s-a)/r);this.target.drawRect(t,o,i,l,void 0,this.options.get("normalRangeColor")).append()},render:function(){var e,n,i,r,a,s,o,l,u,c,h,d,f,p,m,v,y,x,w,C,_,S,T,D,k,M=this.options,E=this.target,N=this.canvasWidth,A=this.canvasHeight,R=this.vertices,I=M.get("spotRadius"),P=this.regionMap;if(b._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),T=this.xvalues,D=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(r=a=0,e=0===this.maxx-this.minx?1:this.maxx-this.minx,n=0===this.maxy-this.miny?1:this.maxy-this.miny,i=this.yvalues.length-1,I&&(4*I>N||4*I>A)&&(I=0),I&&(_=M.get("highlightSpotColor")&&!M.get("disableInteraction"),(_||M.get("minSpotColor")||M.get("spotColor")&&D[i]===this.miny)&&(A-=Math.ceil(I)),(_||M.get("maxSpotColor")||M.get("spotColor")&&D[i]===this.maxy)&&(A-=Math.ceil(I),r+=Math.ceil(I)),(_||(M.get("minSpotColor")||M.get("maxSpotColor"))&&(D[0]===this.miny||D[0]===this.maxy))&&(a+=Math.ceil(I),N-=Math.ceil(I)),(_||M.get("spotColor")||M.get("minSpotColor")||M.get("maxSpotColor")&&(D[i]===this.miny||D[i]===this.maxy))&&(N-=Math.ceil(I))),A--,void 0===M.get("normalRangeMin")||M.get("drawNormalOnTop")||this.drawNormalRange(a,r,A,N,n),o=[],l=[o],p=m=null,v=D.length,k=0;v>k;k++)u=T[k],h=T[k+1],c=D[k],d=a+Math.round((u-this.minx)*(N/e)),f=v-1>k?a+Math.round((h-this.minx)*(N/e)):N,m=d+(f-d)/2,P[k]=[p||0,m,k],p=m,null===c?k&&(null!==D[k-1]&&(o=[],l.push(o)),R.push(null)):(c<this.miny&&(c=this.miny),c>this.maxy&&(c=this.maxy),o.length||o.push([d,r+A]),s=[d,r+Math.round(A-A*((c-this.miny)/n))],o.push(s),R.push(s));for(y=[],x=[],w=l.length,k=0;w>k;k++)o=l[k],o.length&&(M.get("fillColor")&&(o.push([o[o.length-1][0],r+A]),x.push(o.slice(0)),o.pop()),o.length>2&&(o[0]=[o[0][0],o[1][1]]),y.push(o));for(w=x.length,k=0;w>k;k++)E.drawShape(x[k],M.get("fillColor"),M.get("fillColor")).append();for(void 0!==M.get("normalRangeMin")&&M.get("drawNormalOnTop")&&this.drawNormalRange(a,r,A,N,n),w=y.length,k=0;w>k;k++)E.drawShape(y[k],M.get("lineColor"),void 0,M.get("lineWidth")).append();if(I&&M.get("valueSpots"))for(C=M.get("valueSpots"),void 0===C.get&&(C=new g(C)),k=0;v>k;k++)S=C.get(D[k]),S&&E.drawCircle(a+Math.round((T[k]-this.minx)*(N/e)),r+Math.round(A-A*((D[k]-this.miny)/n)),I,void 0,S).append();I&&M.get("spotColor")&&null!==D[i]&&E.drawCircle(a+Math.round((T[T.length-1]-this.minx)*(N/e)),r+Math.round(A-A*((D[i]-this.miny)/n)),I,void 0,M.get("spotColor")).append(),this.maxy!==this.minyorg&&(I&&M.get("minSpotColor")&&(u=T[t.inArray(this.minyorg,D)],E.drawCircle(a+Math.round((u-this.minx)*(N/e)),r+Math.round(A-A*((this.minyorg-this.miny)/n)),I,void 0,M.get("minSpotColor")).append()),I&&M.get("maxSpotColor")&&(u=T[t.inArray(this.maxyorg,D)],E.drawCircle(a+Math.round((u-this.minx)*(N/e)),r+Math.round(A-A*((this.maxyorg-this.miny)/n)),I,void 0,M.get("maxSpotColor")).append())),this.lastShapeId=E.getLastShapeId(),this.canvasTop=r,E.render()}}}),t.fn.sparkline.bar=x=n(t.fn.sparkline._base,y,{type:"bar",init:function(e,n,i,a,u){var c,h,d,f,p,m,v,y,b,w,C,_,S,T,D,k,M,E,N,A,R,I,P=parseInt(i.get("barWidth"),10),O=parseInt(i.get("barSpacing"),10),F=i.get("chartRangeMin"),L=i.get("chartRangeMax"),H=i.get("chartRangeClip"),j=1/0,B=-1/0;for(x._super.init.call(this,e,n,i,a,u),m=0,v=n.length;v>m;m++)A=n[m],c="string"==typeof A&&A.indexOf(":")>-1,(c||t.isArray(A))&&(D=!0,c&&(A=n[m]=o(A.split(":"))),A=l(A,null),h=Math.min.apply(Math,A),d=Math.max.apply(Math,A),j>h&&(j=h),d>B&&(B=d));this.stacked=D,this.regionShapes={},this.barWidth=P,this.barSpacing=O,this.totalBarWidth=P+O,this.width=a=n.length*P+(n.length-1)*O,this.initTarget(),H&&(S=void 0===F?-1/0:F,T=void 0===L?1/0:L),p=[],f=D?[]:p;var z=[],$=[];for(m=0,v=n.length;v>m;m++)if(D)for(k=n[m],n[m]=N=[],z[m]=0,f[m]=$[m]=0,M=0,E=k.length;E>M;M++)A=N[M]=H?r(k[M],S,T):k[M],null!==A&&(A>0&&(z[m]+=A),0>j&&B>0?0>A?$[m]+=Math.abs(A):f[m]+=A:f[m]+=Math.abs(A-(0>A?B:j)),p.push(A));else A=H?r(n[m],S,T):n[m],A=n[m]=s(A),null!==A&&p.push(A);this.max=_=Math.max.apply(Math,p),this.min=C=Math.min.apply(Math,p),this.stackMax=B=D?Math.max.apply(Math,z):_,this.stackMin=j=D?Math.min.apply(Math,p):C,void 0!==i.get("chartRangeMin")&&(i.get("chartRangeClip")||i.get("chartRangeMin")<C)&&(C=i.get("chartRangeMin")),void 0!==i.get("chartRangeMax")&&(i.get("chartRangeClip")||i.get("chartRangeMax")>_)&&(_=i.get("chartRangeMax")),this.zeroAxis=b=i.get("zeroAxis",!0),w=0>=C&&_>=0&&b?0:0==b?C:C>0?C:_,this.xaxisOffset=w,y=D?Math.max.apply(Math,f)+Math.max.apply(Math,$):_-C,this.canvasHeightEf=b&&0>C?this.canvasHeight-2:this.canvasHeight-1,w>C?(I=D&&_>=0?B:_,R=(I-w)/y*this.canvasHeight,R!==Math.ceil(R)&&(this.canvasHeightEf-=2,R=Math.ceil(R))):R=this.canvasHeight,this.yoffset=R,t.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&void 0===this.colorMapByValue.get&&(this.colorMapByValue=new g(this.colorMapByValue))),this.range=y},getRegion:function(t,e){var n=Math.floor(e/this.totalBarWidth);return 0>n||n>=this.values.length?void 0:n},getCurrentRegionFields:function(){var t,e,n=this.currentRegion,i=f(this.values[n]),r=[];for(e=i.length;e--;)t=i[e],r.push({isNull:null===t,value:t,color:this.calcColor(e,t,n),offset:n});return r},calcColor:function(e,n,i){var r,a,s=this.colorMapByIndex,o=this.colorMapByValue,l=this.options;return r=this.stacked?l.get("stackedBarColor"):0>n?l.get("negBarColor"):l.get("barColor"),0===n&&void 0!==l.get("zeroColor")&&(r=l.get("zeroColor")),o&&(a=o.get(n))?r=a:s&&s.length>i&&(r=s[i]),t.isArray(r)?r[e%r.length]:r},renderRegion:function(e,n){var i,r,a,s,o,l,u,h,d,f,p=this.values[e],g=this.options,m=this.xaxisOffset,v=[],y=this.range,b=this.stacked,x=this.target,w=e*this.totalBarWidth,C=this.canvasHeightEf,_=this.yoffset;if(p=t.isArray(p)?p:[p],u=p.length,h=p[0],s=c(null,p),f=c(m,p,!0),s)return g.get("nullColor")?(a=n?g.get("nullColor"):this.calcHighlightColor(g.get("nullColor"),g),i=_>0?_-1:_,x.drawRect(w,i,this.barWidth-1,0,a,a)):void 0;for(o=_,l=0;u>l;l++){if(h=p[l],b&&h===m){if(!f||d)continue;d=!0}r=y>0?Math.floor(C*(Math.abs(h-m)/y))+1:1,m>h||h===m&&0===_?(i=o,o+=r):(i=_-r,_-=r),a=this.calcColor(l,h,e),n&&(a=this.calcHighlightColor(a,g)),v.push(x.drawRect(w,i,this.barWidth-1,r-1,a,a))}return 1===v.length?v[0]:v}}),t.fn.sparkline.tristate=w=n(t.fn.sparkline._base,y,{type:"tristate",init:function(e,n,i,r,a){var s=parseInt(i.get("barWidth"),10),o=parseInt(i.get("barSpacing"),10);w._super.init.call(this,e,n,i,r,a),this.regionShapes={},this.barWidth=s,this.barSpacing=o,this.totalBarWidth=s+o,this.values=t.map(n,Number),this.width=r=n.length*s+(n.length-1)*o,t.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&void 0===this.colorMapByValue.get&&(this.colorMapByValue=new g(this.colorMapByValue))),this.initTarget()},getRegion:function(t,e){return Math.floor(e/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:void 0===this.values[t],value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var n,i,r=this.values,a=this.options,s=this.colorMapByIndex,o=this.colorMapByValue;return n=o&&(i=o.get(t))?i:s&&s.length>e?s[e]:r[e]<0?a.get("negBarColor"):r[e]>0?a.get("posBarColor"):a.get("zeroBarColor")},renderRegion:function(t,e){var n,i,r,a,s,o,l=this.values,u=this.options,c=this.target;return n=c.pixelHeight,r=Math.round(n/2),a=t*this.totalBarWidth,l[t]<0?(s=r,i=r-1):l[t]>0?(s=0,i=r-1):(s=r-1,i=2),o=this.calcColor(l[t],t),null!==o?(e&&(o=this.calcHighlightColor(o,u)),c.drawRect(a,s,this.barWidth-1,i-1,o,o)):void 0}}),t.fn.sparkline.discrete=C=n(t.fn.sparkline._base,y,{type:"discrete",init:function(e,n,i,r,a){C._super.init.call(this,e,n,i,r,a),this.regionShapes={},this.values=n=t.map(n,Number),this.min=Math.min.apply(Math,n),this.max=Math.max.apply(Math,n),this.range=this.max-this.min,this.width=r="auto"===i.get("width")?2*n.length:this.width,this.interval=Math.floor(r/n.length),this.itemWidth=r/n.length,void 0!==i.get("chartRangeMin")&&(i.get("chartRangeClip")||i.get("chartRangeMin")<this.min)&&(this.min=i.get("chartRangeMin")),void 0!==i.get("chartRangeMax")&&(i.get("chartRangeClip")||i.get("chartRangeMax")>this.max)&&(this.max=i.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===i.get("lineHeight")?Math.round(.3*this.canvasHeight):i.get("lineHeight"))},getRegion:function(t,e){return Math.floor(e/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:void 0===this.values[t],value:this.values[t],offset:t}},renderRegion:function(t,e){var n,i,a,s,o=this.values,l=this.options,u=this.min,c=this.max,h=this.range,d=this.interval,f=this.target,p=this.canvasHeight,g=this.lineHeight,m=p-g;return i=r(o[t],u,c),s=t*d,n=Math.round(m-m*((i-u)/h)),a=l.get("thresholdColor")&&i<l.get("thresholdValue")?l.get("thresholdColor"):l.get("lineColor"),e&&(a=this.calcHighlightColor(a,l)),f.drawLine(s,n,s,n+g,a)}}),t.fn.sparkline.bullet=_=n(t.fn.sparkline._base,{type:"bullet",init:function(t,e,n,i,r){var a,s,l;_._super.init.call(this,t,e,n,i,r),this.values=e=o(e),l=e.slice(),l[0]=null===l[0]?l[2]:l[0],l[1]=null===e[1]?l[2]:l[1],a=Math.min.apply(Math,e),s=Math.max.apply(Math,e),a=void 0===n.get("base")?0>a?a:0:n.get("base"),this.min=a,this.max=s,this.range=s-a,this.shapes={},this.valueShapes={},this.regiondata={},this.width=i="auto"===n.get("width")?"4.0em":i,this.target=this.$el.simpledraw(i,r,n.get("composite")),e.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,n){var i=this.target.getShapeAt(t,e,n);return void 0!==i&&void 0!==this.shapes[i]?this.shapes[i]:void 0},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e,n=this.currentRegion,i=this.valueShapes[n];switch(delete this.shapes[i],n.substr(0,1)){case"r":e=this.renderRange(n.substr(1),t);break;case"p":e=this.renderPerformance(t);break;case"t":e=this.renderTarget(t)}this.valueShapes[n]=e.id,this.shapes[e.id]=n,this.target.replaceWithShape(i,e)},renderRange:function(t,e){var n=this.values[t],i=Math.round(this.canvasWidth*((n-this.min)/this.range)),r=this.options.get("rangeColors")[t-2];return e&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,i-1,this.canvasHeight-1,r,r)},renderPerformance:function(t){var e=this.values[1],n=Math.round(this.canvasWidth*((e-this.min)/this.range)),i=this.options.get("performanceColor");return t&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(0,Math.round(.3*this.canvasHeight),n-1,Math.round(.4*this.canvasHeight)-1,i,i)},renderTarget:function(t){var e=this.values[0],n=Math.round(this.canvasWidth*((e-this.min)/this.range)-this.options.get("targetWidth")/2),i=Math.round(.1*this.canvasHeight),r=this.canvasHeight-2*i,a=this.options.get("targetColor");return t&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(n,i,this.options.get("targetWidth")-1,r-1,a,a)},render:function(){var t,e,n=this.values.length,i=this.target;if(_._super.render.call(this)){for(t=2;n>t;t++)e=this.renderRange(t).append(),this.shapes[e.id]="r"+t,this.valueShapes["r"+t]=e.id;null!==this.values[1]&&(e=this.renderPerformance().append(),this.shapes[e.id]="p1",this.valueShapes.p1=e.id),null!==this.values[0]&&(e=this.renderTarget().append(),this.shapes[e.id]="t0",this.valueShapes.t0=e.id),i.render()}}}),t.fn.sparkline.pie=S=n(t.fn.sparkline._base,{type:"pie",init:function(e,n,i,r,a){var s,o=0;if(S._super.init.call(this,e,n,i,r,a),this.shapes={},this.valueShapes={},this.values=n=t.map(n,Number),"auto"===i.get("width")&&(this.width=this.height),n.length>0)for(s=n.length;s--;)o+=n[s];this.total=o,this.initTarget(),this.radius=Math.floor(Math.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,n){var i=this.target.getShapeAt(t,e,n);return void 0!==i&&void 0!==this.shapes[i]?this.shapes[i]:void 0},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:void 0===this.values[t],value:this.values[t],percent:100*(this.values[t]/this.total),color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,n=this.renderSlice(e,t),i=this.valueShapes[e];delete this.shapes[i],this.target.replaceWithShape(i,n),this.valueShapes[e]=n.id,this.shapes[n.id]=e},renderSlice:function(t,e){var n,i,r,a,s,o=this.target,l=this.options,u=this.radius,c=l.get("borderWidth"),h=l.get("offset"),d=2*Math.PI,f=this.values,p=this.total,g=h?2*Math.PI*(h/360):0;for(a=f.length,r=0;a>r;r++){if(n=g,i=g,p>0&&(i=g+d*(f[r]/p)),t===r)return s=l.get("sliceColors")[r%l.get("sliceColors").length],e&&(s=this.calcHighlightColor(s,l)),o.drawPieSlice(u,u,u-c,n,i,void 0,s);g=i}},render:function(){var t,e,n=this.target,i=this.values,r=this.options,a=this.radius,s=r.get("borderWidth");if(S._super.render.call(this)){for(s&&n.drawCircle(a,a,Math.floor(a-s/2),r.get("borderColor"),void 0,s).append(),e=i.length;e--;)i[e]&&(t=this.renderSlice(e).append(),this.valueShapes[e]=t.id,this.shapes[t.id]=e);n.render()}}}),t.fn.sparkline.box=T=n(t.fn.sparkline._base,{type:"box",init:function(e,n,i,r,a){T._super.init.call(this,e,n,i,r,a),this.values=t.map(n,Number),this.width="auto"===i.get("width")?"4.0em":r,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return void 0!==this.loutlier&&t.push({field:"lo",value:this.loutlier}),void 0!==this.routlier&&t.push({field:"ro",value:this.routlier}),void 0!==this.lwhisker&&t.push({field:"lw",value:this.lwhisker}),void 0!==this.rwhisker&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t,e,n,i,r,s,o,l,u,c,h,d=this.target,f=this.values,p=f.length,g=this.options,m=this.canvasWidth,v=this.canvasHeight,y=void 0===g.get("chartRangeMin")?Math.min.apply(Math,f):g.get("chartRangeMin"),b=void 0===g.get("chartRangeMax")?Math.max.apply(Math,f):g.get("chartRangeMax"),x=0;if(T._super.render.call(this)){if(g.get("raw"))g.get("showOutliers")&&f.length>5?(e=f[0],t=f[1],i=f[2],r=f[3],s=f[4],o=f[5],l=f[6]):(t=f[0],i=f[1],r=f[2],s=f[3],o=f[4]);else if(f.sort(function(t,e){return t-e}),i=a(f,1),r=a(f,2),s=a(f,3),n=s-i,g.get("showOutliers")){for(t=o=void 0,u=0;p>u;u++)void 0===t&&f[u]>i-n*g.get("outlierIQR")&&(t=f[u]),f[u]<s+n*g.get("outlierIQR")&&(o=f[u]);e=f[0],l=f[p-1]}else t=f[0],o=f[p-1];this.quartiles=[i,r,s],this.lwhisker=t,this.rwhisker=o,this.loutlier=e,this.routlier=l,h=m/(b-y+1),g.get("showOutliers")&&(x=Math.ceil(g.get("spotRadius")),m-=2*Math.ceil(g.get("spotRadius")),h=m/(b-y+1),t>e&&d.drawCircle((e-y)*h+x,v/2,g.get("spotRadius"),g.get("outlierLineColor"),g.get("outlierFillColor")).append(),l>o&&d.drawCircle((l-y)*h+x,v/2,g.get("spotRadius"),g.get("outlierLineColor"),g.get("outlierFillColor")).append()),d.drawRect(Math.round((i-y)*h+x),Math.round(.1*v),Math.round((s-i)*h),Math.round(.8*v),g.get("boxLineColor"),g.get("boxFillColor")).append(),d.drawLine(Math.round((t-y)*h+x),Math.round(v/2),Math.round((i-y)*h+x),Math.round(v/2),g.get("lineColor")).append(),d.drawLine(Math.round((t-y)*h+x),Math.round(v/4),Math.round((t-y)*h+x),Math.round(v-v/4),g.get("whiskerColor")).append(),d.drawLine(Math.round((o-y)*h+x),Math.round(v/2),Math.round((s-y)*h+x),Math.round(v/2),g.get("lineColor")).append(),d.drawLine(Math.round((o-y)*h+x),Math.round(v/4),Math.round((o-y)*h+x),Math.round(v-v/4),g.get("whiskerColor")).append(),d.drawLine(Math.round((r-y)*h+x),Math.round(.1*v),Math.round((r-y)*h+x),Math.round(.9*v),g.get("medianColor")).append(),g.get("target")&&(c=Math.ceil(g.get("spotRadius")),d.drawLine(Math.round((g.get("target")-y)*h+x),Math.round(v/2-c),Math.round((g.get("target")-y)*h+x),Math.round(v/2+c),g.get("targetColor")).append(),d.drawLine(Math.round((g.get("target")-y)*h+x-c),Math.round(v/2),Math.round((g.get("target")-y)*h+x+c),Math.round(v/2),g.get("targetColor")).append()),d.render()}}}),function(){document.namespaces&&!document.namespaces.v?(t.fn.sparkline.hasVML=!0,document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML")):t.fn.sparkline.hasVML=!1;var e=document.createElement("canvas");t.fn.sparkline.hasCanvas=!(!e.getContext||!e.getContext("2d"))}(),M=n({init:function(t,e,n,i){this.target=t,this.id=e,this.type=n,this.args=i},append:function(){return this.target.appendShape(this),this}}),E=n({_pxregex:/(\d+)(px)?\s*$/i,init:function(e,n,i){e&&(this.width=e,this.height=n,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),t.data(i,"_jqs_vcanvas",this))},drawLine:function(t,e,n,i,r,a){return this.drawShape([[t,e],[n,i]],r,a)},drawShape:function(t,e,n,i){return this._genShape("Shape",[t,e,n,i])},drawCircle:function(t,e,n,i,r,a){return this._genShape("Circle",[t,e,n,i,r,a])},drawPieSlice:function(t,e,n,i,r,a,s){return this._genShape("PieSlice",[t,e,n,i,r,a,s])},drawRect:function(t,e,n,i,r,a){return this._genShape("Rect",[t,e,n,i,r,a])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(e,n){t(n).html(e)},_calculatePixelDims:function(e,n,i){var r;r=this._pxregex.exec(n),this.pixelHeight=r?r[1]:t(i).height(),r=this._pxregex.exec(e),this.pixelWidth=r?r[1]:t(i).width()},_genShape:function(t,e){var n=P++;return e.unshift(n),new M(this,n,t,e)},appendShape:function(){alert("appendShape not implemented")},replaceWithShape:function(){alert("replaceWithShape not implemented")},insertAfterShape:function(){alert("insertAfterShape not implemented")},removeShapeId:function(){alert("removeShapeId not implemented")},getShapeAt:function(){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),N=n(E,{init:function(e,n,i,r){N._super.init.call(this,e,n,i),this.canvas=document.createElement("canvas"),i[0]&&(i=i[0]),t.data(i,"_jqs_vcanvas",this),t(this.canvas).css({display:"inline-block",width:e,height:n,verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(e,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=r,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=void 0,t(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,n){var i=this.canvas.getContext("2d");return void 0!==t&&(i.strokeStyle=t),i.lineWidth=void 0===n?1:n,void 0!==e&&(i.fillStyle=e),i},reset:function(){var t=this._getContext();t.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=void 0},_drawShape:function(t,e,n,i,r){var a,s,o=this._getContext(n,i,r);for(o.beginPath(),o.moveTo(e[0][0]+.5,e[0][1]+.5),a=1,s=e.length;s>a;a++)o.lineTo(e[a][0]+.5,e[a][1]+.5);void 0!==n&&o.stroke(),void 0!==i&&o.fill(),void 0!==this.targetX&&void 0!==this.targetY&&o.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,e,n,i,r,a,s){var o=this._getContext(r,a,s);o.beginPath(),o.arc(e,n,i,0,2*Math.PI,!1),void 0!==this.targetX&&void 0!==this.targetY&&o.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),void 0!==r&&o.stroke(),void 0!==a&&o.fill()},_drawPieSlice:function(t,e,n,i,r,a,s,o){var l=this._getContext(s,o);l.beginPath(),l.moveTo(e,n),l.arc(e,n,i,r,a,!1),l.lineTo(e,n),l.closePath(),void 0!==s&&l.stroke(),o&&l.fill(),void 0!==this.targetX&&void 0!==this.targetY&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,n,i,r,a,s){return this._drawShape(t,[[e,n],[e+i,n],[e+i,n+r],[e,n+r],[e,n]],a,s)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var n,i=this.shapeseq;for(this.shapes[e.id]=e,n=i.length;n--;)i[n]==t&&(i[n]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var n,i,r,a=this.shapeseq,s={};for(i=t.length;i--;)s[t[i]]=!0;for(i=a.length;i--;)n=a[i],s[n]&&(a.splice(i,1),delete this.shapes[n],r=i);for(i=e.length;i--;)a.splice(r,0,e[i].id),this.shapes[e[i].id]=e[i]},insertAfterShape:function(t,e){var n,i=this.shapeseq;for(n=i.length;n--;)if(i[n]===t)return i.splice(n+1,0,e.id),this.shapes[e.id]=e,void 0},removeShapeId:function(t){var e,n=this.shapeseq;for(e=n.length;e--;)if(n[e]===t){n.splice(e,1);break}delete this.shapes[t]},getShapeAt:function(t,e,n){return this.targetX=e,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var t,e,n,i=this.shapeseq,r=this.shapes,a=i.length,s=this._getContext();for(s.clearRect(0,0,this.pixelWidth,this.pixelHeight),n=0;a>n;n++)t=i[n],e=r[t],this["_draw"+e.type].apply(this,e.args);this.interact||(this.shapes={},this.shapeseq=[])}}),A=n(E,{init:function(e,n,i){var r;A._super.init.call(this,e,n,i),i[0]&&(i=i[0]),t.data(i,"_jqs_vcanvas",this),this.canvas=document.createElement("span"),t(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:n,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(e,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,r='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",r),this.group=t(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,n,i,r){var a,s,o,l,u,c,h,d=[];for(h=0,c=e.length;c>h;h++)d[h]=""+e[h][0]+","+e[h][1];return a=d.splice(0,1),r=void 0===r?1:r,s=void 0===n?' stroked="false" ':' strokeWeight="'+r+'px" strokeColor="'+n+'" ',o=void 0===i?' filled="false"':' fillColor="'+i+'" filled="true" ',l=d[0]===d[d.length-1]?"x ":"",u='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+s+o+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+a+" l "+d.join(", ")+" "+l+'e">'+" </v:shape>"},_drawCircle:function(t,e,n,i,r,a,s){var o,l,u;return e-=i,n-=i,o=void 0===r?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+r+'" ',l=void 0===a?' filled="false"':' fillColor="'+a+'" filled="true" ',u='<v:oval  id="jqsshape'+t+'" '+o+l+' style="position:absolute;top:'+n+"px; left:"+e+"px; width:"+2*i+"px; height:"+2*i+'px"></v:oval>'},_drawPieSlice:function(t,e,n,i,r,a,s,o){var l,u,c,h,d,f,p,g;if(r===a)return"";if(a-r===2*Math.PI&&(r=0,a=2*Math.PI),u=e+Math.round(Math.cos(r)*i),c=n+Math.round(Math.sin(r)*i),h=e+Math.round(Math.cos(a)*i),d=n+Math.round(Math.sin(a)*i),u===h&&c===d){if(a-r<Math.PI)return"";u=h=e+i,c=d=n}return u===h&&c===d&&a-r<Math.PI?"":(l=[e-i,n-i,e+i,n+i,u,c,h,d],f=void 0===s?' stroked="false" ':' strokeWeight="1px" strokeColor="'+s+'" ',p=void 0===o?' filled="false"':' fillColor="'+o+'" filled="true" ',g='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+f+p+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+e+","+n+" wa "+l.join(", ")+' x e">'+" </v:shape>")},_drawRect:function(t,e,n,i,r,a,s){return this._drawShape(t,[[e,n],[e,n+r],[e+i,n+r],[e+i,n],[e,n]],a,s)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(e,n){var i=t("#jqsshape"+e),r=this["_draw"+n.type].apply(this,n.args);i[0].outerHTML=r},replaceWithShapes:function(e,n){var i,r=t("#jqsshape"+e[0]),a="",s=n.length;for(i=0;s>i;i++)a+=this["_draw"+n[i].type].apply(this,n[i].args);for(r[0].outerHTML=a,i=1;i<e.length;i++)t("#jqsshape"+e[i]).remove()},insertAfterShape:function(e,n){var i=t("#jqsshape"+e),r=this["_draw"+n.type].apply(this,n.args);i[0].insertAdjacentHTML("afterEnd",r)},removeShapeId:function(e){var n=t("#jqsshape"+e);this.group.removeChild(n[0])},getShapeAt:function(t){var e=t.id.substr(8);return e},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})}),function(t){var e=new Array,n=new Array;t.fn.doAutosize=function(e){var n=t(this).data("minwidth"),i=t(this).data("maxwidth"),r="",a=t(this),s=t("#"+t(this).data("tester_id"));if(r!==(r=a.val())){var o=r.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");s.html(o);var l=s.width(),u=l+e.comfortZone>=n?l+e.comfortZone:n,c=a.width(),h=c>u&&u>=n||u>n&&i>u;h&&a.width(u)}},t.fn.resetAutosize=function(e){var n=t(this).data("minwidth")||e.minInputWidth||t(this).width(),i=t(this).data("maxwidth")||e.maxInputWidth||t(this).closest(".tagsinput").width()-e.inputPadding,r=t(this),a=t("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:r.css("fontSize"),fontFamily:r.css("fontFamily"),fontWeight:r.css("fontWeight"),letterSpacing:r.css("letterSpacing"),whiteSpace:"nowrap"}),s=t(this).attr("id")+"_autosize_tester";!t("#"+s).length>0&&(a.attr("id",s),a.appendTo("body")),r.data("minwidth",n),r.data("maxwidth",i),r.data("tester_id",s),r.css("width",n)},t.fn.addTag=function(i,r){return r=jQuery.extend({focus:!1,callback:!0},r),this.each(function(){var a=t(this).attr("id"),s=t(this).val().split(e[a]);if(""==s[0]&&(s=new Array),i=jQuery.trim(i),r.unique){var o=t(this).tagExist(i);1==o&&t("#"+a+"_tag").addClass("not_valid")}else var o=!1;if(""!=i&&1!=o){if(t("<span>").addClass("tag").append(t("<span>").text(i).append("&nbsp;&nbsp;"),t("<a>",{href:"#",title:"Removing tag",html:'<i class="icon-remove"></i>'}).click(function(){return t("#"+a).removeTag(escape(i))})).insertBefore("#"+a+"_addTag"),s.push(i),t("#"+a+"_tag").val(""),r.focus?t("#"+a+"_tag").focus():t("#"+a+"_tag").blur(),t.fn.tagsInput.updateTagsField(this,s),r.callback&&n[a]&&n[a].onAddTag){var l=n[a].onAddTag;l.call(this,i)}if(n[a]&&n[a].onChange){var u=s.length,l=n[a].onChange;l.call(this,t(this),s[u-1])}}}),!1},t.fn.removeTag=function(r){return r=unescape(r),this.each(function(){var a=t(this).attr("id"),s=t(this).val().split(e[a]);for(t("#"+a+"_tagsinput .tag").remove(),str="",i=0;i<s.length;i++)s[i]!=r&&(str=str+e[a]+s[i]);if(t.fn.tagsInput.importTags(this,str),n[a]&&n[a].onRemoveTag){var o=n[a].onRemoveTag;o.call(this,r)}}),!1},t.fn.tagExist=function(n){var i=t(this).attr("id"),r=t(this).val().split(e[i]);return jQuery.inArray(n,r)>=0},t.fn.importTags=function(e){id=t(this).attr("id"),t("#"+id+"_tagsinput .tag").remove(),t.fn.tagsInput.importTags(this,e)},t.fn.tagsInput=function(i){var r=jQuery.extend({interactive:!0,defaultText:"adicione uma tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},i);return this.each(function(){r.hide&&t(this).hide();var i=t(this).attr("id");(!i||e[t(this).attr("id")])&&(i=t(this).attr("id","tags"+(new Date).getTime()).attr("id"));var a=jQuery.extend({pid:i,real_input:"#"+i,holder:"#"+i+"_tagsinput",input_wrapper:"#"+i+"_addTag",fake_input:"#"+i+"_tag"},r);e[i]=a.delimiter,(r.onAddTag||r.onRemoveTag||r.onChange)&&(n[i]=new Array,n[i].onAddTag=r.onAddTag,n[i].onRemoveTag=r.onRemoveTag,n[i].onChange=r.onChange);var s='<div id="'+i+'_tagsinput" class="tagsinput"><div id="'+i+'_addTag">';if(r.interactive&&(s=s+'<input id="'+i+'_tag" value="" data-default="'+r.defaultText+'" />'),s+='</div><div class="tags_clear"></div></div>',t(s).insertAfter(this),t(a.holder).css("width",r.width),""!=t(a.real_input).val()&&t.fn.tagsInput.importTags(t(a.real_input),t(a.real_input).val()),r.interactive){if(t(a.fake_input).val(t(a.fake_input).attr("data-default")),t(a.fake_input).css("color",r.placeholderColor),t(a.fake_input).resetAutosize(r),t(a.holder).bind("click",a,function(e){t(e.data.fake_input).focus()}),t(a.fake_input).bind("focus",a,function(e){t(e.data.fake_input).val()==t(e.data.fake_input).attr("data-default")&&t(e.data.fake_input).val(""),t(e.data.fake_input).css("color","#000000")}),void 0!=r.autocomplete_url){autocomplete_options={source:r.autocomplete_url};for(attrname in r.autocomplete)autocomplete_options[attrname]=r.autocomplete[attrname];void 0!==jQuery.Autocompleter?(t(a.fake_input).autocomplete(r.autocomplete_url,r.autocomplete),t(a.fake_input).bind("result",a,function(e,n){n&&t("#"+i).addTag(n[0]+"",{focus:!0,unique:r.unique})})):void 0!==jQuery.ui.autocomplete&&(t(a.fake_input).autocomplete(autocomplete_options),t(a.fake_input).bind("autocompleteselect",a,function(e,n){return t(e.data.real_input).addTag(n.item.value,{focus:!0,unique:r.unique}),!1}))}else t(a.fake_input).bind("blur",a,function(e){var n=t(this).attr("data-default");return""!=t(e.data.fake_input).val()&&t(e.data.fake_input).val()!=n?e.data.minChars<=t(e.data.fake_input).val().length&&(!e.data.maxChars||e.data.maxChars>=t(e.data.fake_input).val().length)&&t(e.data.real_input).addTag(t(e.data.fake_input).val(),{focus:!0,unique:r.unique}):(t(e.data.fake_input).val(t(e.data.fake_input).attr("data-default")),t(e.data.fake_input).css("color",r.placeholderColor)),!1});t(a.fake_input).bind("keypress",a,function(e){return e.which==e.data.delimiter.charCodeAt(0)||13==e.which?(e.preventDefault(),e.data.minChars<=t(e.data.fake_input).val().length&&(!e.data.maxChars||e.data.maxChars>=t(e.data.fake_input).val().length)&&t(e.data.real_input).addTag(t(e.data.fake_input).val(),{focus:!0,unique:r.unique}),t(e.data.fake_input).resetAutosize(r),!1):(e.data.autosize&&t(e.data.fake_input).doAutosize(r),void 0)}),a.removeWithBackspace&&t(a.fake_input).bind("keydown",function(e){if(8==e.keyCode&&""==t(this).val()){e.preventDefault();var n=t(this).closest(".tagsinput").find(".tag:last").text(),i=t(this).attr("id").replace(/_tag$/,"");n=n.replace(/[\s]+x$/,""),t("#"+i).removeTag(escape(n)),t(this).trigger("focus")}}),t(a.fake_input).blur(),a.unique&&t(a.fake_input).keydown(function(e){(8==e.keyCode||String.fromCharCode(e.which).match(/\w+|[,/]+/))&&t(this).removeClass("not_valid")})}}),this},t.fn.tagsInput.updateTagsField=function(n,i){var r=t(n).attr("id");t(n).val(i.join(e[r]))},t.fn.tagsInput.importTags=function(r,a){t(r).val("");var s=t(r).attr("id"),o=a.split(e[s]);for(i=0;i<o.length;i++)t(r).addTag(o[i],{focus:!1,callback:!1});if(n[s]&&n[s].onChange){var l=n[s].onChange;l.call(r,r,o[i])}}}(jQuery),function(t,e){"use strict";function n(t){var e=Array.prototype.slice.call(arguments,1);return t.prop?t.prop.apply(t,e):t.attr.apply(t,e)}function i(t,e,n){var i,r;for(i in n)n.hasOwnProperty(i)&&(r=i.replace(/ |$/g,e.eventNamespace),t.bind(r,n[i]))}function r(t,e,n){i(t,n,{focus:function(){e.addClass(n.focusClass)
},blur:function(){e.removeClass(n.focusClass),e.removeClass(n.activeClass)},mouseenter:function(){e.addClass(n.hoverClass)},mouseleave:function(){e.removeClass(n.hoverClass),e.removeClass(n.activeClass)},"mousedown touchbegin":function(){t.is(":disabled")||e.addClass(n.activeClass)},"mouseup touchend":function(){e.removeClass(n.activeClass)}})}function a(t,e){t.removeClass(e.hoverClass+" "+e.focusClass+" "+e.activeClass)}function s(t,e,n){n?t.addClass(e):t.removeClass(e)}function o(t,e,n){var i="checked",r=e.is(":"+i);e.prop?e.prop(i,r):r?e.attr(i,i):e.removeAttr(i),s(t,n.checkedClass,r)}function l(t,e,n){s(t,n.disabledClass,e.is(":disabled"))}function u(t,e,n){switch(n){case"after":return t.after(e),t.next();case"before":return t.before(e),t.prev();case"wrap":return t.wrap(e),t.parent()}return null}function c(e,i,r){var a,s,o;return r||(r={}),r=t.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},r),a=t("<div />"),s=t("<span />"),i.autoHide&&e.is(":hidden")&&"none"===e.css("display")&&a.hide(),r.divClass&&a.addClass(r.divClass),i.wrapperClass&&a.addClass(i.wrapperClass),r.spanClass&&s.addClass(r.spanClass),o=n(e,"id"),i.useID&&o&&n(a,"id",i.idPrefix+"-"+o),r.spanHtml&&s.html(r.spanHtml),a=u(e,a,r.divWrap),s=u(e,s,r.spanWrap),l(a,e,i),{div:a,span:s}}function h(e,n){var i;return n.wrapperClass?(i=t("<span />").addClass(n.wrapperClass),i=u(e,i,"wrap")):null}function d(){var e,n,i,r;return r="rgb(120,2,153)",n=t('<div style="width:0;height:0;color:'+r+'">'),t("body").append(n),i=n.get(0),e=window.getComputedStyle?window.getComputedStyle(i,"").color:(i.currentStyle||i.style||{}).color,n.remove(),e.replace(/ /g,"")!==r}function f(e){return e?t("<span />").text(e).html():""}function p(){return navigator.cpuClass&&!navigator.product}function g(){return"undefined"!=typeof window.XMLHttpRequest?!0:!1}function m(t){var e;return t[0].multiple?!0:(e=n(t,"size"),!e||1>=e?!1:!0)}function v(){return!1}function y(t,e){var n="none";i(t,e,{"selectstart dragstart mousedown":v}),t.css({MozUserSelect:n,msUserSelect:n,webkitUserSelect:n,userSelect:n})}function b(t,e,n){var i=t.val();""===i?i=n.fileDefaultHtml:(i=i.split(/[\/\\]+/),i=i[i.length-1]),e.text(i)}function x(t,e,n){var i,r;for(i=[],t.each(function(){var t;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i.push({el:this,name:t,old:this.style[t]}),this.style[t]=e[t])}),n();i.length;)r=i.pop(),r.el.style[r.name]=r.old}function w(t,e){var n;n=t.parents(),n.push(t[0]),n=n.not(":visible"),x(n,{visibility:"hidden",display:"block",position:"absolute"},e)}function C(t,e){return function(){t.unwrap().unwrap().unbind(e.eventNamespace)}}var _=!0,S=!1,T=[{match:function(t){return t.is("a, button, :submit, :reset, input[type='button']")},apply:function(t,e){var s,o,u,h,d;return o=e.submitDefaultHtml,t.is(":reset")&&(o=e.resetDefaultHtml),h=t.is("a, button")?function(){return t.html()||o}:function(){return f(n(t,"value"))||o},u=c(t,e,{divClass:e.buttonClass,spanHtml:h()}),s=u.div,r(t,s,e),d=!1,i(s,e,{"click touchend":function(){var e,i,r,a;d||t.is(":disabled")||(d=!0,t[0].dispatchEvent?(e=document.createEvent("MouseEvents"),e.initEvent("click",!0,!0),i=t[0].dispatchEvent(e),t.is("a")&&i&&(r=n(t,"target"),a=n(t,"href"),r&&"_self"!==r?window.open(a,r):document.location.href=a)):t.click(),d=!1)}}),y(s,e),{remove:function(){return s.after(t),s.remove(),t.unbind(e.eventNamespace),t},update:function(){a(s,e),l(s,t,e),t.detach(),u.span.html(h()).append(t)}}}},{match:function(t){return t.is(":checkbox")},apply:function(t,e){var n,s,u;return n=c(t,e,{divClass:e.checkboxClass}),s=n.div,u=n.span,r(t,s,e),i(t,e,{"click touchend":function(){o(u,t,e)}}),o(u,t,e),{remove:C(t,e),update:function(){a(s,e),u.removeClass(e.checkedClass),o(u,t,e),l(s,t,e)}}}},{match:function(t){return t.is(":file")},apply:function(e,s){function o(){b(e,f,s)}var h,d,f,g;return h=c(e,s,{divClass:s.fileClass,spanClass:s.fileButtonClass,spanHtml:s.fileButtonHtml,spanWrap:"after"}),d=h.div,g=h.span,f=t("<span />").html(s.fileDefaultHtml),f.addClass(s.filenameClass),f=u(e,f,"after"),n(e,"size")||n(e,"size",d.width()/10),r(e,d,s),o(),p()?i(e,s,{click:function(){e.trigger("change"),setTimeout(o,0)}}):i(e,s,{change:o}),y(f,s),y(g,s),{remove:function(){return f.remove(),g.remove(),e.unwrap().unbind(s.eventNamespace)},update:function(){a(d,s),b(e,f,s),l(d,e,s)}}}},{match:function(t){if(t.is("input")){var e=(" "+n(t,"type")+" ").toLowerCase(),i=" color date datetime datetime-local email month number password search tel text time url week ";return i.indexOf(e)>=0}return!1},apply:function(t,e){var i,a;return i=n(t,"type"),t.addClass(e.inputClass),a=h(t,e),r(t,t,e),e.inputAddTypeAsClass&&t.addClass(i),{remove:function(){t.removeClass(e.inputClass),e.inputAddTypeAsClass&&t.removeClass(i),a&&t.unwrap()},update:v}}},{match:function(t){return t.is(":radio")},apply:function(e,s){var u,h,d;return u=c(e,s,{divClass:s.radioClass}),h=u.div,d=u.span,r(e,h,s),i(e,s,{"click touchend":function(){var i;i=n(e,"name"),i=i.replace(/(["\\])/g,"\\$1"),t.uniform.update(t(':radio[name="'+i+'"]'))}}),o(d,e,s),{remove:C(e,s),update:function(){a(h,s),o(d,e,s),l(h,e,s)}}}},{match:function(t){return t.is("select")&&!m(t)?!0:!1},apply:function(e,n){function s(){var t={borderWidth:"0px",display:"inline",width:"auto"};p&&(t.fontSize=p),x(e,t,function(){w(e,function(){f=e.width(),p||(p=e.css("fontSize"))})})}function o(){var e,n;x(t([d[0],h[0]]),{display:"block",width:""},function(){var t;t=d.outerWidth()-d.width(),e=f+t,n=f}),h.width(e),d.width(n)}var u,h,d,f,p;return n.selectAutoWidth&&s(),u=c(e,n,{divClass:n.selectClass,spanHtml:(e.find(":selected:first")||e.find("option:first")).html(),spanWrap:"before"}),h=u.div,d=u.span,n.selectAutoWidth?o():h.addClass("fixedWidth"),r(e,h,n),i(e,n,{change:function(){d.html(e.find(":selected").html()),h.removeClass(n.activeClass)},"click touchend":function(){var t=e.find(":selected").html();d.html()!==t&&e.trigger("change")},keyup:function(){d.html(e.find(":selected").html())}}),y(d,n),{remove:function(){return d.remove(),e.unwrap().unbind(n.eventNamespace),e},update:function(){n.selectAutoWidth&&s(),a(h,n),d.html(e.find(":selected:first").html()),l(h,e,n),n.selectAutoWidth&&o()}}}},{match:function(t){return t.is("select")&&m(t)?!0:!1},apply:function(t,e){var n;return t.addClass(e.selectMultiClass),n=h(t,e),r(t,t,e),{remove:function(){t.removeClass(e.selectMultiClass),n&&t.unwrap()},update:v}}},{match:function(t){return t.is("textarea")},apply:function(t,e){var n;return t.addClass(e.textareaClass),n=h(t,e),r(t,t,e),{remove:function(){t.removeClass(e.textareaClass),n&&t.unwrap()},update:v}}}];p()&&!g()&&(_=!1),t.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"Nenhum arquivo selecionado",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},t.fn.uniform=function(e){var n=this;return e=t.extend({},t.uniform.defaults,e),S||(S=!0,d()&&(_=!1)),_?(e.resetSelector&&t(e.resetSelector).mouseup(function(){window.setTimeout(function(){t.uniform.update(n)},10)}),this.each(function(){var n,i,r,a=t(this);if(a.data("uniformed"))return t.uniform.update(a),void 0;for(n=0;n<T.length;n+=1)if(i=T[n],i.match(a,e))return r=i.apply(a,e),a.data("uniformed",r),t.uniform.elements.push(a.get(0)),void 0})):this},t.uniform.restore=t.fn.uniform.restore=function(n){n===e&&(n=t.uniform.elements),t(n).each(function(){var e,n,i=t(this);n=i.data("uniformed"),n&&(n.remove(),e=t.inArray(this,t.uniform.elements),e>=0&&t.uniform.elements.splice(e,1),i.removeData("uniformed"))})},t.uniform.update=t.fn.uniform.update=function(n){n===e&&(n=t.uniform.elements),t(n).each(function(){var e,n=t(this);e=n.data("uniformed"),e&&e.update(n,e.options)})}}(jQuery),function(t,e,n,i,r,a,s,o,l,u,c,h){function d(t,e,n){var o=t[0];if(l=/ble/.test(n)?a:r,active="update"==n?{checked:o[r],disabled:o[a]}:o[l],/^ch|di/.test(n)&&!active)f(t,l);else if(/^un|en/.test(n)&&active)p(t,l);else if("update"==n)for(var l in active)active[l]?f(t,l,!0):p(t,l,!0);else e&&"toggle"!=n||(e||t.trigger("ifClicked"),active?o[s]!==i&&p(t,l):f(t,l))}function f(n,o,l){var d=n[0],f=n.parent(),g=o==a?"enabled":"un"+r,y=m(n,g+v(d[s])),b=m(n,o+v(d[s]));if(d[o]!==!0&&!l&&(d[o]=!0,n.trigger("ifChanged").trigger("if"+v(o)),o==r&&d[s]==i&&d.name)){var x=n.closest("form"),w='input[name="'+d.name+'"]';w=x.length?x.find(w):t(w),w.each(function(){this!==d&&t(this).data(e)&&p(t(this),o)})}d[a]&&m(n,h,!0)&&f.find("."+e+"-helper").css(h,"default"),f[u](b||m(n,o)),f[c](y||m(n,g)||"")}function p(t,n,i){var o=t[0],l=t.parent(),d=n==a?"enabled":"un"+r,f=m(t,d+v(o[s])),p=m(t,n+v(o[s]));o[n]===!1||i||(o[n]=!1,t.trigger("ifChanged").trigger("if"+v(d))),!o[a]&&m(t,h,!0)&&l.find("."+e+"-helper").css(h,"pointer"),l[c](p||m(t,n)||""),l[u](f||m(t,d))}function g(n,i){n.data(e)&&(n.parent().html(n.attr("style",n.data(e).s||"").trigger(i||"")),n.off(".i").unwrap(),t('label[for="'+n[0].id+'"]').add(n.closest("label")).off(".i"))}function m(t,n,i){return t.data(e)?t.data(e).o[n+(i?"":"Class")]:void 0}function v(t){return t.charAt(0).toUpperCase()+t.slice(1)}t.fn[e]=function(h,m){var v=navigator.userAgent,y=/ipad|iphone|ipod/i.test(v),b=":"+n+", :"+i;if(/^(check|uncheck|toggle|disable|enable|update|destroy)$/.test(h))return this.each(function(){var e=t(this),n=e.is(b)?e:e.find(b);n.each(function(){e=t(this),"destroy"==h?g(e,"ifDestroyed"):d(e,!0,h),t.isFunction(m)&&m()})});if("object"!=typeof h&&h)return this;var x=t.extend({checkedClass:r,disabledClass:a,labelHover:!0},h),w=x.handle,C=x.hoverClass||"hover",_=x.focusClass||"focus",S=x.activeClass||"active",T=!!x.labelHover,D=x.labelHoverClass||"hover",k=0|(""+x.increaseArea).replace("%","");return(w==n||w==i)&&(b=":"+w),-50>k&&(k=-50),this.each(function(){var h=t(this),m=h.is(b)?h:h.find(b);m.each(function(){h=t(this),g(h);var m=this,b=m.id,w=-k+"%",M=100+2*k+"%",E={position:"absolute",top:w,left:w,display:"block",width:M,height:M,margin:0,padding:0,background:"#fff",border:0,opacity:0},N=y||/android|blackberry|windows phone|opera mini/i.test(v)?{position:"absolute",visibility:"hidden"}:k?E:{position:"absolute",opacity:0},A=m[s]==n?x.checkboxClass||"i"+n:x.radioClass||"i"+i,R=t('label[for="'+b+'"]').add(h.closest("label")),I=h.wrap('<div class="'+A+'"/>').trigger("ifCreated").parent().append(x.insert),P=t('<ins class="'+e+'-helper"/>').css(E).appendTo(I);h.data(e,{o:x,s:h.attr("style")}).css(N),!!x.inheritClass&&I[u](m.className),!!x.inheritID&&b&&I.attr("id",e+"-"+b),"static"==I.css("position")&&I.css("position","relative"),d(h,!0,"update"),R.length&&R.on(o+".i mouseenter.i mouseleave.i "+l,function(e){var n=e[s],i=t(this);if(!m[a]){if(n==o?d(h,!1,!0):T&&(/ve|nd/.test(n)?(I[c](C),i[c](D)):(I[u](C),i[u](D))),!y)return!1;e.stopPropagation()}}),h.on(o+".i focus.i blur.i keyup.i keydown.i keypress.i",function(t){var e=t[s],n=t.keyCode;return e==o?!1:"keydown"==e&&32==n?(m[s]==i&&m[r]||(m[r]?p(h,r):f(h,r)),!1):("keyup"==e&&m[s]==i?!m[r]&&f(h,r):/us|ur/.test(e)&&I["blur"==e?c:u](_),void 0)}),P.on(o+" mousedown mouseup mouseover mouseout "+l,function(t){var e=t[s],n=/wn|up/.test(e)?S:C;if(!m[a]){if(e==o?d(h,!1,!0):(/wn|er|in/.test(e)?I[u](n):I[c](n+" "+S),R.length&&T&&n==C&&R[/ut|nd/.test(e)?c:u](D)),!y)return!1;t.stopPropagation()}})})})}}(jQuery,"iCheck","checkbox","radio","checked","disabled","type","click","touchbegin.i touchend.i","addClass","removeClass","cursor"),function(t){"undefined"==typeof t.fn.each2&&t.fn.extend({each2:function(e){for(var n=t([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&e.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function n(t,e){for(var n=0,i=e.length;i>n;n+=1)if(r(t,e[n]))return n;return-1}function i(){var e=t(O);e.appendTo("body");var n={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),n}function r(t,n){return t===n?!0:t===e||n===e?!1:null===t||null===n?!1:t.constructor===String?t+""==n+"":n.constructor===String?n+""==t+"":!1}function a(e,n){var i,r,a;if(null===e||e.length<1)return[];for(i=e.split(n),r=0,a=i.length;a>r;r+=1)i[r]=t.trim(i[r]);return i}function s(t){return t.outerWidth(!1)-t.width()}function o(n){var i="keyup-change-value";n.bind("keydown",function(){t.data(n,i)===e&&t.data(n,i,n.val())}),n.bind("keyup",function(){var r=t.data(n,i);r!==e&&n.val()!==r&&(t.removeData(n,i),n.trigger("keyup-change"))})}function l(n){n.bind("mousemove",function(n){var i=R;(i===e||i.x!==n.pageX||i.y!==n.pageY)&&t(n.target).trigger("mousemove-filtered",n)})}function u(t,n,i){i=i||e;var r;return function(){var e=arguments;window.clearTimeout(r),r=window.setTimeout(function(){n.apply(i,e)},t)}}function c(t){var e,n=!1;return function(){return n===!1&&(e=t(),n=!0),e}}function h(t,e){var i=u(t,function(t){e.trigger("scroll-debounced",t)});e.bind("scroll",function(t){n(t.target,e.get())>=0&&i(t)})}function d(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,n=t[0],i=t.val().length;t.focus(),t.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(e=n.createTextRange(),e.collapse(!1),e.select()))},0)}function f(t){t.preventDefault(),t.stopPropagation()}function p(t){t.preventDefault(),t.stopImmediatePropagation()}function g(e){if(!A){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);A=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),A.attr("class","select2-sizer"),t("body").append(A)}return A.text(e.val()),A.width()}function m(e,n,i){var r,a,s=[];r=e.attr("class"),r&&(r=""+r,t(r.split(" ")).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),r=n.attr("class"),r&&(r=""+r,t(r.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(a=i(this),a&&s.push(this))})),e.attr("class",s.join(" "))}function v(t,e,n,i){var r=t.toUpperCase().indexOf(e.toUpperCase()),a=e.length;return 0>r?(n.push(i(t)),void 0):(n.push(i(t.substring(0,r))),n.push("<span class='select2-match'>"),n.push(i(t.substring(r,r+a))),n.push("</span>"),n.push(i(t.substring(r+a,t.length))),void 0)}function y(n){var i,r=0,a=null,s=n.quietMillis||100,o=n.url,l=this;return function(u){window.clearTimeout(i),i=window.setTimeout(function(){r+=1;var i=r,s=n.data,c=o,h=n.transport||t.ajax,d=n.cache||!1,f=n.jsonpCallback||e,p=n.type||"GET",g={};s=s?s.call(l,u.term,u.page,u.context):null,c="function"==typeof c?c.call(l,u.term,u.page,u.context):c,null!==a&&a.abort(),n.params&&(t.isFunction(n.params)?t.extend(g,n.params.call(l)):t.extend(g,n.params)),t.extend(g,{url:c,dataType:n.dataType,data:s,type:p,cache:d,jsonpCallback:f,success:function(t){if(!(r>i)){var e=n.results(t,u.page);u.callback(e)}}}),a=h.call(l,g)},s)}}function b(e){var n,i,r=e,a=function(t){return""+t.text};t.isArray(r)&&(i=r,r={results:i}),t.isFunction(r)===!1&&(i=r,r=function(){return i});var s=r();return s.text&&(a=s.text,t.isFunction(a)||(n=s.text,a=function(t){return t[n]})),function(e){var n,i=e.term,s={results:[]};return""===i?(e.callback(r()),void 0):(n=function(r,s){var o,l;if(r=r[0],r.children){o={};for(l in r)r.hasOwnProperty(l)&&(o[l]=r[l]);o.children=[],t(r.children).each2(function(t,e){n(e,o.children)}),(o.children.length||e.matcher(i,a(o),r))&&s.push(o)}else e.matcher(i,a(r),r)&&s.push(r)},t(r().results).each2(function(t,e){n(e,s.results)}),e.callback(s),void 0)}}function x(n){var i=t.isFunction(n);return function(r){var a=r.term,s={results:[]};t(i?n():n).each(function(){var t=this.text!==e,n=t?this.text:this;(""===a||r.matcher(a,n))&&s.results.push(t?this:{id:this,text:this})}),r.callback(s)}}function w(e){if(t.isFunction(e))return!0;if(!e)return!1;throw new Error("formatterName must be a function or a falsy value")}function C(e){return t.isFunction(e)?e():e}function _(e){var n=0;return t.each(e,function(t,e){e.children?n+=_(e.children):n++}),n}function S(t,n,i,a){var s,o,l,u,c,h=t,d=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return e;for(;;){for(o=-1,l=0,u=a.tokenSeparators.length;u>l&&(c=a.tokenSeparators[l],o=t.indexOf(c),!(o>=0));l++);if(0>o)break;if(s=t.substring(0,o),t=t.substring(o+c.length),s.length>0&&(s=a.createSearchChoice(s,n),s!==e&&null!==s&&a.id(s)!==e&&null!==a.id(s))){for(d=!1,l=0,u=n.length;u>l;l++)if(r(a.id(s),a.id(n[l]))){d=!0;break}d||i(s)}}return h!==t?t:void 0}function T(e,n){var i=function(){};return i.prototype=new e,i.prototype.constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,n),i}if(window.Select2===e){var D,k,M,E,N,A,R,I,P,D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},O="<div class='select2-measure-scrollbar'></div>";I=t(document),N=function(){var t=1;return function(){return t++}}(),I.bind("mousemove",function(t){R={x:t.pageX,y:t.pageY}}),k=T(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var r,a,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+N()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=c(function(){return n.element.closest("body")}),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(C(n.containerCss)),this.container.addClass(C(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).bind("focus.select2",function(){t(this).select2("focus")}).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(C(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=r=this.container.find(s),this.search=a=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),l(this.results),this.dropdown.delegate(s,"mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.delegate(s,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),t(this.container).delegate(".select2-input","change",function(t){t.stopPropagation()}),t(this.dropdown).delegate(".select2-input","change",function(t){t.stopPropagation()}),t.fn.mousewheel&&r.mousewheel(function(t,e,n,i){var a=r.scrollTop();i>0&&0>=a-i?(r.scrollTop(0),f(t)):0>i&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),f(t))}),o(a),a.bind("keyup-change input paste",this.bind(this.updateResults)),a.bind("focus",function(){a.addClass("select2-focused")}),a.bind("blur",function(){a.removeClass("select2-focused")}),this.dropdown.delegate(s,"mouseup",this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.bind("click mouseup mousedown",function(t){t.stopPropagation()}),t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(n.element.is(":disabled")||n.element.is("[readonly='readonly']"))&&this.disable(),P=P||i()},destroy:function(){var t=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),t!==e&&(t.container.remove(),t.dropdown.remove(),t.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabindex:this.elementTabIndex}).show())},optionToData:function(t){return t.is("option")?{id:t.attr("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:r(t.attr("disabled"),"disabled"),locked:r(t.attr("locked"),"locked")}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(n){var i,s,o,l,u=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=s=n.element),s&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=t.extend({},{populateResults:function(i,r,a){var s,o=this.opts.id;s=function(i,r,l){var c,h,d,f,p,g,m,v,y,b;for(i=n.sortResults(i,r,a),c=0,h=i.length;h>c;c+=1)d=i[c],p=d.disabled===!0,f=!p&&o(d)!==e,g=d.children&&d.children.length>0,m=t("<li></li>"),m.addClass("select2-results-dept-"+l),m.addClass("select2-result"),m.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&m.addClass("select2-disabled"),g&&m.addClass("select2-result-with-children"),m.addClass(u.opts.formatResultCssClass(d)),v=t(document.createElement("div")),v.addClass("select2-result-label"),b=n.formatResult(d,v,a,u.opts.escapeMarkup),b!==e&&v.html(b),m.append(v),g&&(y=t("<ul></ul>"),y.addClass("select2-result-sub"),s(d.children,y,l+1),m.append(y)),m.data("select2-data",d),r.append(m)},s(r,i,0)}},t.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(t){return t[o]}),t.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(s?(n.query=this.bind(function(n){var r,a,s,o={results:[],more:!1},l=n.term;s=function(t,e){var i;t.is("option")?n.matcher(l,t.text(),t)&&e.push(u.optionToData(t)):t.is("optgroup")&&(i=u.optionToData(t),t.children().each2(function(t,e){s(e,i.children)}),i.children.length>0&&e.push(i))},r=i.children(),this.getPlaceholder()!==e&&r.length>0&&(a=r[0],""===t(a).text()&&(r=r.not(a))),r.each2(function(t,e){s(e,o.results)}),n.callback(o)}),n.id=function(t){return t.id},n.formatResultCssClass=function(t){return t.css}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=y.call(n.element,n.ajax)):"data"in n?n.query=b(n.data):"tags"in n&&(n.query=x(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(t){return{id:t,text:t}}),n.initSelection===e&&(n.initSelection=function(e,i){var s=[];t(a(e.val(),n.separator)).each(function(){var e=this,i=this,a=n.tags;t.isFunction(a)&&(a=a()),t(a).each(function(){return r(this.id,e)?(i=this.text,!1):void 0}),s.push({id:e,text:i})}),i(s)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var t,n=this.opts.element;n.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),t=this.bind(function(){var t,e;t="disabled"!==this.opts.element.attr("disabled"),e="readonly"===this.opts.element.attr("readonly"),t=t&&!e,this.enabled!==t&&(t?this.enable():this.disable()),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(C(this.opts.containerCssClass)),m(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(this.opts.dropdownCssClass))}),n.bind("propertychange.select2 DOMAttrModified.select2",t),this.mutationCallback===e&&(this.mutationCallback=function(e){e.forEach(t)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var n=t.Event("selected",{val:this.id(e),object:e});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,n,i,r,a=this.dropdown,s=this.container.offset(),o=this.container.outerHeight(!1),l=this.container.outerWidth(!1),u=a.outerHeight(!1),c=t(window).scrollLeft()+t(window).width(),h=t(window).scrollTop()+t(window).height(),d=s.top+o,f=s.left,p=h>=d+u,g=s.top-u>=this.body().scrollTop(),m=a.outerWidth(!1),v=c>=f+m,y=a.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(r=t(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),m=a.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:P.width),m>l?l=m:m=l,v=c>=f+m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(e=this.body().offset(),d-=e.top,f-=e.left),y?(n=!0,!g&&p&&(n=!1)):(n=!1,!p&&g&&(n=!0)),v||(f=s.left+l-m),n?(d=s.top-u,this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),i=t.extend({top:d,left:f,width:l},C(this.opts.dropdownCss)),a.css(i)},shouldOpen:function(){var e;return this.opened()?!1:(e=t.Event("opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){function e(){return{width:Math.max(document.documentElement.scrollWidth,t(window).width()),height:Math.max(document.documentElement.scrollHeight,t(window).height())}}var n,i=this.containerId,r="scroll."+i,a="resize."+i,s="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),n=t("#select2-drop-mask"),0==n.length&&(n=t(document.createElement("div")),n.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body()),n.bind("mousedown touchstart",function(){var e,n=t("#select2-drop");n.length>0&&(e=n.data("select2"),e.opts.selectOnBlur&&e.selectHighlighted({noFocus:!0}),e.close())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.css(e()),n.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var o=this;this.container.parents().add(window).each(function(){t(this).bind(a+" "+r+" "+s,function(){t("#select2-drop-mask").css(e()),o.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerId,n="scroll."+e,i="resize."+e,r="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).unbind(n).unbind(i).unbind(r)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return C(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var e,n,i,r,a,s,o,l=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return l.scrollTop(0),void 0;e=this.findHighlightableChoices().find(".select2-result-label"),i=t(e[n]),r=i.offset().top+i.outerHeight(!0),n===e.length-1&&(o=l.find("li.select2-more-results"),o.length>0&&(r=o.offset().top+o.outerHeight(!0))),a=l.offset().top+l.outerHeight(!0),r>a&&l.scrollTop(l.scrollTop()+(r-a)),s=i.offset().top-l.offset().top,0>s&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(e){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=e;var r=t(n[i]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var i,r,a=this.findHighlightableChoices();return 0===arguments.length?n(a.filter(".select2-highlighted")[0],a.get()):(e>=a.length&&(e=a.length-1),0>e&&(e=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),i=t(a[e]),i.addClass("select2-highlighted"),this.ensureHighlightVisible(),r=i.data("select2-data"),r&&this.opts.element.trigger({type:"highlight",val:this.id(r),choice:r}),void 0)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var t,e=this.results,n=e.find("li.select2-more-results"),i=this.resultsPage+1,r=this,a=this.search.val(),s=this.context;0!==n.length&&(t=n.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(t){r.opened()&&(r.opts.populateResults.call(this,e,t.results,{term:a,page:i,context:s}),r.postprocessResults(t,!1,!1),t.more===!0?(n.detach().appendTo(e).text(r.opts.formatLoadMore(i+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):n.remove(),r.positionDropdown(),r.resultsPage=i,r.context=t.context)})})))},tokenize:function(){},updateResults:function(n){function i(){u.scrollTop(0),l.removeClass("select2-active"),h.positionDropdown()}function a(t){u.html(t),i()}var s,o,l=this.search,u=this.results,c=this.opts,h=this,d=l.val(),f=t.data(this.container,"select2-last-term");if((n===!0||!f||!r(d,f))&&(t.data(this.container,"select2-last-term",d),n===!0||this.showSearchInput!==!1&&this.opened())){var p=this.getMaximumSelectionSize();if(p>=1&&(s=this.data(),t.isArray(s)&&s.length>=p&&w(c.formatSelectionTooBig,"formatSelectionTooBig")))return a("<li class='select2-selection-limit'>"+c.formatSelectionTooBig(p)+"</li>"),void 0;if(l.val().length<c.minimumInputLength)return w(c.formatInputTooShort,"formatInputTooShort")?a("<li class='select2-no-results'>"+c.formatInputTooShort(l.val(),c.minimumInputLength)+"</li>"):a(""),void 0;if(c.maximumInputLength&&l.val().length>c.maximumInputLength)return w(c.formatInputTooLong,"formatInputTooLong")?a("<li class='select2-no-results'>"+c.formatInputTooLong(l.val(),c.maximumInputLength)+"</li>"):a(""),void 0;c.formatSearching&&0===this.findHighlightableChoices().length&&a("<li class='select2-searching'>"+c.formatSearching()+"</li>"),l.addClass("select2-active"),o=this.tokenize(),o!=e&&null!=o&&l.val(o),this.resultsPage=1,c.query({element:c.element,term:l.val(),page:this.resultsPage,context:null,matcher:c.matcher,callback:this.bind(function(s){var o;return this.opened()?(this.context=s.context===e?null:s.context,this.opts.createSearchChoice&&""!==l.val()&&(o=this.opts.createSearchChoice.call(null,l.val(),s.results),o!==e&&null!==o&&h.id(o)!==e&&null!==h.id(o)&&0===t(s.results).filter(function(){return r(h.id(this),h.id(o))}).length&&s.results.unshift(o)),0===s.results.length&&w(c.formatNoMatches,"formatNoMatches")?(a("<li class='select2-no-results'>"+c.formatNoMatches(l.val())+"</li>"),void 0):(u.empty(),h.opts.populateResults.call(this,u,s.results,{term:l.val(),page:this.resultsPage,context:null}),s.more===!0&&w(c.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(c.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()
},10)),this.postprocessResults(s,n),i(),this.opts.element.trigger({type:"loaded",data:s}),void 0)):(this.search.removeClass("select2-active"),void 0)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){d(this.search)},selectHighlighted:function(t){var e=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i&&(this.highlight(e),this.onSelect(i,t))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function n(){var n,i,r,a,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==e)for(i=n.split(";"),a=0,s=i.length;s>a;a+=1)if(r=i[a].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return n=this.opts.element.css("width"),n&&n.length>0?n:"resolve"===this.opts.width?0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),M=T(k,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close select2-display-none'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),this.focusser.attr("disabled","disabled").val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),d(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var e,n=this.container,i=this.dropdown,r=!1;this.showSearch(this.opts.minimumResultsForSearch>=0),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+N()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===D.PAGE_UP||t.which===D.PAGE_DOWN)return f(t),void 0;switch(t.which){case D.UP:case D.DOWN:return this.moveHighlight(t.which===D.UP?-1:1),f(t),void 0;case D.TAB:case D.ENTER:return this.selectHighlighted(),f(t),void 0;case D.ESC:return this.cancel(t),f(t),void 0}}})),this.search.bind("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.bind("keydown",this.bind(function(t){return!this.enabled||t.which===D.TAB||D.isControl(t)||D.isFunctionKey(t)||t.which===D.ESC?void 0:this.opts.openOnEnter===!1&&t.which===D.ENTER?(f(t),void 0):t.which==D.DOWN||t.which==D.UP||t.which==D.ENTER&&this.opts.openOnEnter?(this.open(),f(t),void 0):t.which==D.DELETE||t.which==D.BACKSPACE?(this.opts.allowClear&&this.clear(),f(t),void 0):void 0})),o(this.focusser),this.focusser.bind("keyup-change input",this.bind(function(t){t.stopPropagation(),this.opened()||this.open()})),e.delegate("abbr","mousedown",this.bind(function(t){this.enabled&&(this.clear(),p(t),this.close(),this.selection.focus())})),e.bind("mousedown",this.bind(function(t){r=!0,this.opened()?this.close():this.enabled&&this.open(),f(t),r=!1})),i.bind("mousedown",this.bind(function(){this.search.focus()})),e.bind("focus",this.bind(function(t){f(t)})),this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")})),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var e=this.selection.data("select2-data");e&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"removed",val:this.id(e),choice:e}),this.triggerChange({removed:e})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.updateSelection([]),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=t.find(":selected");e(n.optionToData(i))}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var a=n.val(),s=null;e.query({matcher:function(t,n,i){var o=r(a,e.id(i));return o&&(s=i),o},callback:t.isFunction(i)?function(){i(s)}:t.noop})}),e},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(""===this.opts.element.val()&&t!==e){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"),this.selection.find("abbr").hide()}},postprocessResults:function(t,e,n){var i=0,a=this,s=!0;if(this.findHighlightableChoices().each2(function(t,e){return r(a.id(e.data("select2-data")),a.opts.element.val())?(i=t,!1):void 0}),n!==!1&&this.highlight(i),e===!0){var o=this.opts.minimumResultsForSearch;s=0>o?!1:_(t.results)>=o,this.showSearch(s)}},showSearch:function(e){this.showSearchInput=e,this.dropdown.find(".select2-search")[e?"removeClass":"addClass"]("select2-search-hidden"),t(this.dropdown,this.container)[e?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.close(),e&&e.noFocus||this.selection.focus(),r(n,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var n,i=this.selection.find("span");this.selection.data("select2-data",t),i.empty(),n=this.opts.formatSelection(t,i),n!==e&&i.append(this.opts.escapeMarkup(n)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&(this.container.addClass("select2-allowclear"),this.selection.find("abbr").show())},val:function(){var t,n=!1,i=null,r=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(t).find(":selected").each2(function(t,e){return i=r.optionToData(e),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:a});else{if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");if(!t&&0!==t)return this.clear(n),void 0;this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){r.opts.element.val(t?r.id(t):""),r.updateSelection(t),r.setPlaceholder(),n&&r.triggerChange({added:t,removed:a})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t,n){var i;return 0===arguments.length?(i=this.selection.data("select2-data"),i==e&&(i=null),i):(t&&""!==t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),n&&this.triggerChange({added:t,removed:i})):this.clear(n),void 0)}}),E=T(k,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find(":selected").each2(function(t,e){i.push(n.optionToData(e))}),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var s=a(n.val(),e.separator),o=[];e.query({matcher:function(n,i,a){var l=t.grep(s,function(t){return r(t,e.id(a))}).length;return l&&o.push(a),l},callback:t.isFunction(i)?function(){i(o)}:t.noop})}),e},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n),this.search.attr("id","s2id_autogen"+N()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.search.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===D.BACKSPACE&&""===this.search.val()){this.close();var n,i=e.find(".select2-search-choice-focus");if(i.length>0)return this.unselect(i.first()),this.search.width(10),f(t),void 0;n=e.find(".select2-search-choice:not(.select2-locked)"),n.length>0&&n.last().addClass("select2-search-choice-focus")}else e.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(t.which){case D.UP:case D.DOWN:return this.moveHighlight(t.which===D.UP?-1:1),f(t),void 0;case D.ENTER:case D.TAB:return this.selectHighlighted(),f(t),void 0;case D.ESC:return this.cancel(t),f(t),void 0}if(t.which!==D.TAB&&!D.isControl(t)&&!D.isFunctionKey(t)&&t.which!==D.BACKSPACE&&t.which!==D.ESC){if(t.which===D.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===D.PAGE_UP||t.which===D.PAGE_DOWN)&&f(t),t.which===D.ENTER&&f(t)}}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.opened()||this.clearSearch(),t.stopImmediatePropagation()})),this.container.delegate(n,"mousedown",this.bind(function(e){this.enabled&&(t(e.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.delegate(n,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),n=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(t.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],r=[],a=this;t(e).each(function(){n(a.id(this),i)<0&&(i.push(a.id(this)),r.push(this))}),e=r,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer(t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.triggerSelect(t)&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,r=!n.locked,a=t("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=t("<li class='select2-search-choice select2-locked'><div></div></li>"),o=r?a:s,l=this.id(n),u=this.getVal();i=this.opts.formatSelection(n,o.find("div")),i!=e&&o.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(i)+"'>"+this.opts.escapeMarkup(i)+"</div>"),r&&o.find(".select2-search-choice-close").bind("mousedown",f).bind("click dblclick",this.bind(function(e){this.enabled&&(t(e.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),f(e))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),o.data("select2-data",n),o.insertBefore(this.searchContainer),u.push(l),this.setVal(u)},unselect:function(t){var e,i,r=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";e=t.data("select2-data"),e&&(i=n(this.id(e),r),i>=0&&(r.splice(i,1),this.setVal(r),this.select&&this.postprocessResults()),t.remove(),this.opts.element.trigger({type:"removed",val:this.id(e),choice:e}),this.triggerChange({removed:e}))},postprocessResults:function(){var t=this.getVal(),e=this.results.find(".select2-result"),i=this.results.find(".select2-result-with-children"),r=this;e.each2(function(e,i){var a=r.id(i.data("select2-data"));n(a,t)>=0&&(i.addClass("select2-selected"),i.find(".select2-result-selectable").addClass("select2-selected"))}),i.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&r.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-s(this.search)},resizeSearch:function(){var t,e,n,i,r,a=s(this.search);t=g(this.search)+10,e=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,r=n-(e-i)-a,t>r&&(r=n-a),40>r&&(r=n-a),0>=r&&(r=t),this.search.width(r)},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),a(t,this.opts.separator))},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each(function(){n(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),n=0;n<e.length;n++)for(var i=0;i<t.length;i++)r(this.opts.id(e[n]),this.opts.id(t[i]))&&(e.splice(n,1),n--,t.splice(i,1),i--);return{added:e,removed:t}},val:function(n,i){var r,a=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),i&&this.triggerChange({added:this.data(),removed:r}),void 0;if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var n=t(e).map(a.id);a.setVal(n),a.updateSelection(e),a.clearSearch(),i&&a.triggerChange(this.buildChangeDetails(r,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(n.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,n){var i,r,a=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(r=this.data(),e||(e=[]),i=t.map(e,function(t){return a.opts.id(t)}),this.setVal(i),this.updateSelection(e),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(r,this.data())),void 0)}}),t.fn.select2=function(){var i,r,a,s,o=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===o.length||"object"==typeof o[0])i=0===o.length?{}:t.extend({},o[0]),i.element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?s=i.element.attr("multiple"):(s=i.multiple||!1,"tags"in i&&(i.multiple=s=!0)),r=s?new E:new M,r.init(i);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(n(o[0],l)<0)throw"Unknown method: "+o[0];if(a=e,r=t(this).data("select2"),r===e)return;if(a="container"===o[0]?r.container:r[o[0]].apply(r,o.slice(1)),a!==e)return!1}}),a===e?this:a},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,i){var r=[];return v(t.text,n.term,r,i),r.join("")},formatSelection:function(t){return t?t.text:e},sortResults:function(t){return t},formatResultCssClass:function(){return e},formatNoMatches:function(){return"Nenhum resultado encontrado"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t.id},matcher:function(t,e){return(""+e).toUpperCase().indexOf((""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:S,escapeMarkup:function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(){return null}},window.Select2={query:{ajax:y,local:b,tags:x},util:{debounce:u,markMatch:v},"class":{"abstract":k,single:M,multi:E}}}}(jQuery),function(){function t(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(i){t.prototype=e}}function e(t){for(var e=-1,n=t.length,i=[];++e<n;)i.push(t[e]);return i}function n(t){return Array.prototype.slice.call(t)}function i(){}function r(t){return t}function a(){return this}function s(){return!0}function o(t){return"function"==typeof t?t:function(){return t}}function l(t,e,n){return function(){var i=n.apply(e,arguments);return arguments.length?t:i}}function u(t){return null!=t&&!isNaN(t)}function c(t){return t.length}function h(t){return null==t}function d(t){return t.trim().replace(/\s+/g," ")}function f(t){for(var e=1;t*e%1;)e*=10;return e}function p(){}function g(t){function e(){for(var e,i=n,r=-1,a=i.length;++r<a;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],r=new i;return e.on=function(e,i){var a,s=r.get(e);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,a=n.indexOf(s)).concat(n.slice(a+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function m(t,e){return e-(t?1+Math.floor(Math.log(t+Math.pow(10,1+Math.floor(Math.log(t)/Math.LN10)-e))/Math.LN10):1)}function v(t){return t+""}function y(t){for(var e=t.lastIndexOf("."),n=e>=0?t.substring(e):(e=t.length,""),i=[];e>0;)i.push(t.substring(e-=3,e+3));return i.reverse().join(",")+n}function b(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function x(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function w(t){return function(e){return 1-t(1-e)}}function C(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function _(t){return t}function S(t){return function(e){return Math.pow(e,t)}}function T(t){return 1-Math.cos(t*Math.PI/2)}function D(t){return Math.pow(2,10*(t-1))}function k(t){return 1-Math.sqrt(1-t*t)}function M(t,e){var n;return arguments.length<2&&(e=.45),arguments.length<1?(t=1,n=e/4):n=e/(2*Math.PI)*Math.asin(1/t),function(i){return 1+t*Math.pow(2,10*-i)*Math.sin(2*(i-n)*Math.PI/e)}}function E(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function N(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function A(){d3.event.stopPropagation(),d3.event.preventDefault()}function R(){for(var t,e=d3.event;t=e.sourceEvent;)e=t;return e}function I(t){for(var e=new p,n=0,i=arguments.length;++n<i;)e[arguments[n]]=g(e);return e.of=function(n,i){return function(r){try{var a=r.sourceEvent=d3.event;r.target=t,d3.event=r,e[r.type].apply(n,i)}finally{d3.event=a}}},e}function P(t){var e=[t.a,t.b],n=[t.c,t.d],i=F(e),r=O(e,n),a=F(L(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*oa,this.translate=[t.e,t.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*oa:0}function O(t,e){return t[0]*e[0]+t[1]*e[1]}function F(t){var e=Math.sqrt(O(t,t));return e&&(t[0]/=e,t[1]/=e),e}function L(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function H(t){return"transform"==t?d3.interpolateTransform:d3.interpolate}function j(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function B(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function z(){}function $(t,e,n){return new q(t,e,n)}function q(t,e,n){this.r=t,this.g=e,this.b=n}function W(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function V(t,e,n){var i,r,a,s=0,o=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(G(r[0]),G(r[1]),G(r[2]))}return(a=ha.get(t))?e(a.r,a.g,a.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(s=t.charAt(1),s+=s,o=t.charAt(2),o+=o,l=t.charAt(3),l+=l):7===t.length&&(s=t.substring(1,3),o=t.substring(3,5),l=t.substring(5,7)),s=parseInt(s,16),o=parseInt(o,16),l=parseInt(l,16)),e(s,o,l))}function U(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),o=s-a,l=(s+a)/2;return o?(r=.5>l?o/(s+a):o/(2-s-a),i=t==s?(e-n)/o+(n>e?6:0):e==s?(n-t)/o+2:(t-e)/o+4,i*=60):r=i=0,Q(i,r,l)}function Y(t,e,n){t=X(t),e=X(e),n=X(n);var i=oe((.4124564*t+.3575761*e+.1804375*n)/ga),r=oe((.2126729*t+.7151522*e+.072175*n)/ma),a=oe((.0193339*t+.119192*e+.9503041*n)/va);return ne(116*r-16,500*(i-r),200*(r-a))}function X(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function G(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Q(t,e,n){return new J(t,e,n)}function J(t,e,n){this.h=t,this.s=e,this.l=n}function K(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(s-a)*t/60:180>t?s:240>t?a+(s-a)*(240-t)/60:a}function r(t){return Math.round(255*i(t))}var a,s;return t%=360,0>t&&(t+=360),e=0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,a=2*n-s,$(r(t+120),r(t),r(t-120))}function Z(t,e,n){return new te(t,e,n)}function te(t,e,n){this.h=t,this.c=e,this.l=n}function ee(t,e,n){return ne(n,Math.cos(t*=Math.PI/180)*e,Math.sin(t)*e)}function ne(t,e,n){return new ie(t,e,n)}function ie(t,e,n){this.l=t,this.a=e,this.b=n}function re(t,e,n){var i=(t+16)/116,r=i+e/500,a=i-n/200;return r=se(r)*ga,i=se(i)*ma,a=se(a)*va,$(le(3.2404542*r-1.5371385*i-.4985314*a),le(-.969266*r+1.8760108*i+.041556*a),le(.0556434*r-.2040259*i+1.0572252*a))}function ae(t,e,n){return Z(180*(Math.atan2(n,e)/Math.PI),Math.sqrt(e*e+n*n),t)}function se(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function oe(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function le(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ue(t){return Yr(t,Sa),t}function ce(t){return function(){return ba(t,this)}}function he(t){return function(){return xa(t,this)}}function de(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=d3.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?o:s:t.local?a:r}function fe(t){return new RegExp("(?:^|\\s+)"+d3.requote(t)+"(?:\\s+|$)","g")}function pe(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=t.trim().split(/\s+/).map(ge);var r=t.length;return"function"==typeof e?i:n}function ge(t){var e=fe(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.className,a=null!=r.baseVal,s=a?r.baseVal:r;i?(e.lastIndex=0,e.test(s)||(s=d(s+" "+t),a?r.baseVal=s:n.className=s)):s&&(s=d(s.replace(e," ")),a?r.baseVal=s:n.className=s)}}function me(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function a(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?a:r}function ve(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function ye(t){return{__data__:t}}function be(t){return function(){return _a(this,t)}}function xe(t){return arguments.length||(t=d3.ascending),function(e,n){return t(e&&e.__data__,n&&n.__data__)}}function we(t,e,n){function i(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){function r(t){var n=d3.event;d3.event=t,o[0]=s.__data__;try{e.apply(s,o)}finally{d3.event=n}}var s=this,o=arguments;i.call(this),this.addEventListener(t,this[a]=r,r.$=n),r._=e}var a="__on"+t,s=t.indexOf(".");return s>0&&(t=t.substring(0,s)),e?r:i}function Ce(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,a=t[n],s=0,o=a.length;o>s;s++)(r=a[s])&&e(r,s,n);return t}function _e(t){return Yr(t,Da),t}function Se(t,e,n){Yr(t,ka);var r=new i,a=d3.dispatch("start","end"),s=Oa;return t.id=e,t.time=n,t.tween=function(e,n){return arguments.length<2?r.get(e):(null==n?r.remove(e):r.set(e,n),t)},t.ease=function(e){return arguments.length?(s="function"==typeof e?e:d3.ease.apply(d3,arguments),t):s},t.each=function(e,n){return arguments.length<2?Te.call(t,e):(a.on(e,n),t)},d3.timer(function(i){return Ce(t,function(t,o){function l(i){return p.active>e?c():(p.active=e,r.forEach(function(e,n){(n=n.call(t,g,o))&&h.push(n)}),a.start.call(t,g,o),u(i)||d3.timer(u,0,n),1)}function u(n){if(p.active!==e)return c();for(var i=(n-d)/f,r=s(i),l=h.length;l>0;)h[--l].call(t,r);return i>=1?(c(),Ea=e,a.end.call(t,g,o),Ea=0,1):void 0}function c(){return--p.count||delete t.__transition__,1}var h=[],d=t.delay,f=t.duration,p=(t=t.node).__transition__||(t.__transition__={active:0,count:0}),g=t.__data__;++p.count,i>=d?l(i):d3.timer(l,d,n)})},0,n),t}function Te(t){var e=Ea,n=Oa,i=Ia,r=Pa;return Ea=this.id,Oa=this.ease(),Ce(this,function(e,n,i){Ia=e.delay,Pa=e.duration,t.call(e=e.node,e.__data__,n,i)}),Ea=e,Oa=n,Ia=i,Pa=r,this}function De(t,e,n){return""!=n&&Ha}function ke(t,e){return d3.tween(t,H(e))}function Me(){for(var t,e=Date.now(),n=za;n;)t=e-n.then,t>=n.delay&&(n.flush=n.callback(t)),n=n.next;var i=Ee()-e;i>24?(isFinite(i)&&(clearTimeout(La),La=setTimeout(Me,i)),Fa=0):(Fa=1,$a(Me))}function Ee(){for(var t=null,e=za,n=1/0;e;)e.flush?(delete Ba[e.callback.id],e=t?t.next=e.next:za=e.next):(n=Math.min(n,e.then+e.delay),e=(t=e).next);return n}function Ne(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>qa&&(window.scrollX||window.scrollY)){n=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var r=n[0][0].getScreenCTM();qa=!r.f&&!r.e,n.remove()}return qa?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function Ae(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Re(t){return t.rangeExtent?t.rangeExtent():Ae(t.range())}function Ie(t,e){var n,i=0,r=t.length-1,a=t[i],s=t[r];return a>s&&(n=i,i=r,r=n,n=a,a=s,s=n),(e=e(s-a))&&(t[i]=e.floor(a),t[r]=e.ceil(s)),t}function Pe(){return Math}function Oe(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?$e:ze,l=i?B:j;return s=r(t,e,l,n),o=r(e,t,l,d3.interpolate),a}function a(t){return s(t)}var s,o;return a.invert=function(t){return o(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},a.range=function(t){return arguments.length?(e=t,r()):e},a.rangeRound=function(t){return a.range(t).interpolate(d3.interpolateRound)},a.clamp=function(t){return arguments.length?(i=t,r()):i},a.interpolate=function(t){return arguments.length?(n=t,r()):n},a.ticks=function(e){return je(t,e)},a.tickFormat=function(e){return Be(t,e)},a.nice=function(){return Ie(t,Le),r()},a.copy=function(){return Oe(t,e,n,i)},r()}function Fe(t,e){return d3.rebind(t,e,"range","rangeRound","interpolate","clamp")
}function Le(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function He(t,e){var n=Ae(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=e/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function je(t,e){return d3.range.apply(d3,He(t,e))}function Be(t,e){return d3.format(",."+Math.max(0,-Math.floor(Math.log(He(t,e)[2])/Math.LN10+.01))+"f")}function ze(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function $e(t,e,n,i){var r=[],a=[],s=0,o=Math.min(t.length,e.length)-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=o;)r.push(n(t[s-1],t[s])),a.push(i(e[s-1],e[s]));return function(e){var n=d3.bisect(t,e,1,o)-1;return a[n](r[n](e))}}function qe(t,e){function n(n){return t(e(n))}var i=e.pow;return n.invert=function(e){return i(t.invert(e))},n.domain=function(r){return arguments.length?(e=r[0]<0?Ve:We,i=e.pow,t.domain(r.map(e)),n):t.domain().map(i)},n.nice=function(){return t.domain(Ie(t.domain(),Pe)),n},n.ticks=function(){var n=Ae(t.domain()),r=[];if(n.every(isFinite)){var a=Math.floor(n[0]),s=Math.ceil(n[1]),o=i(n[0]),l=i(n[1]);if(e===Ve)for(r.push(i(a));a++<s;)for(var u=9;u>0;u--)r.push(i(a)*u);else{for(;s>a;a++)for(var u=1;10>u;u++)r.push(i(a)*u);r.push(i(a))}for(a=0;r[a]<o;a++);for(s=r.length;r[s-1]>l;s--);r=r.slice(a,s)}return r},n.tickFormat=function(t,r){if(arguments.length<2&&(r=Wa),arguments.length<1)return r;var a,s=Math.max(.1,t/n.ticks().length),o=e===Ve?(a=-1e-12,Math.floor):(a=1e-12,Math.ceil);return function(t){return t/i(o(e(t)+a))<=s?r(t):""}},n.copy=function(){return qe(t.copy(),e)},Fe(n,t)}function We(t){return Math.log(0>t?0:t)/Math.LN10}function Ve(t){return-Math.log(t>0?0:-t)/Math.LN10}function Ue(t,e){function n(e){return t(i(e))}var i=Ye(e),r=Ye(1/e);return n.invert=function(e){return r(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e.map(i)),n):t.domain().map(r)},n.ticks=function(t){return je(n.domain(),t)},n.tickFormat=function(t){return Be(n.domain(),t)},n.nice=function(){return n.domain(Ie(n.domain(),Le))},n.exponent=function(t){if(!arguments.length)return e;var a=n.domain();return i=Ye(e=t),r=Ye(1/e),n.domain(a)},n.copy=function(){return Ue(t.copy(),e)},Fe(n,t)}function Ye(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function Xe(t,e){function n(e){return s[((a.get(e)||a.set(e,t.push(e)))-1)%s.length]}function r(e,n){return d3.range(t.length).map(function(t){return e+n*t})}var a,s,o;return n.domain=function(r){if(!arguments.length)return t;t=[],a=new i;for(var s,o=-1,l=r.length;++o<l;)a.has(s=r[o])||a.set(s,t.push(s));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(s=t,o=0,e={t:"range",a:arguments},n):s},n.rangePoints=function(i,a){arguments.length<2&&(a=0);var l=i[0],u=i[1],c=(u-l)/(Math.max(1,t.length-1)+a);return s=r(t.length<2?(l+u)/2:l+c*a/2,c),o=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var u=i[1]<i[0],c=i[u-0],h=i[1-u],d=(h-c)/(t.length-a+2*l);return s=r(c+d*l,d),u&&s.reverse(),o=d*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var u=i[1]<i[0],c=i[u-0],h=i[1-u],d=Math.floor((h-c)/(t.length-a+2*l)),f=h-c-(t.length-a)*d;return s=r(c+Math.round(f/2),d),u&&s.reverse(),o=Math.round(d*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Ae(e.a[0])},n.copy=function(){return Xe(t,e)},n.domain(t)}function Ge(t,e){function n(){var n=0,a=(t.length,e.length);for(r=[];++n<a;)r[n-1]=d3.quantile(t,n/a);return i}function i(t){return isNaN(t=+t)?0/0:e[d3.bisect(r,t)]}var r;return i.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(d3.ascending),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return r},i.copy=function(){return Ge(t,e)},n()}function Qe(t,e,n){function i(e){return n[Math.max(0,Math.min(s,Math.floor(a*(e-t))))]}function r(){return a=n.length/(e-t),s=n.length-1,i}var a,s;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.copy=function(){return Qe(t,e,n)},r()}function Je(t,e){function n(n){return e[d3.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Je(t,e)},n}function Ke(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return je(t,e)},e.tickFormat=function(e){return Be(t,e)},e.copy=function(){return Ke(t)},e}function Ze(t){return t.innerRadius}function tn(t){return t.outerRadius}function en(t){return t.startAngle}function nn(t){return t.endAngle}function rn(t){function e(e){function s(){c.push("M",a(t(h),u))}for(var l,c=[],h=[],d=-1,f=e.length,p=o(n),g=o(i);++d<f;)r.call(this,l=e[d],d)?h.push([+p.call(this,l,d),+g.call(this,l,d)]):h.length&&(s(),h=[]);return h.length&&s(),c.length?c.join(""):null}var n=an,i=sn,r=s,a=on,l=a.key,u=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?a=t:(a=Ja.get(t)||on).key,e):l},e.tension=function(t){return arguments.length?(u=t,e):u},e}function an(t){return t[0]}function sn(t){return t[1]}function on(t){return t.join("L")}function ln(t){return on(t)+"Z"}function un(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function cn(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function hn(t,e){return t.length<4?on(t):t[1]+pn(t.slice(1,t.length-1),gn(t,e))}function dn(t,e){return t.length<3?on(t):t[0]+pn((t.push(t[0]),t),gn([t[t.length-2]].concat(t,[t[1]]),e))}function fn(t,e){return t.length<3?on(t):t[0]+pn(t,gn(t,e))}function pn(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return on(t);var n=t.length!=e.length,i="",r=t[0],a=t[1],s=e[0],o=s,l=1;if(n&&(i+="Q"+(a[0]-2*s[0]/3)+","+(a[1]-2*s[1]/3)+","+a[0]+","+a[1],r=t[1],l=2),e.length>1){o=e[1],a=t[l],l++,i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1];for(var u=2;u<e.length;u++,l++)a=t[l],o=e[u],i+="S"+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1]}if(n){var c=t[l];i+="Q"+(a[0]+2*o[0]/3)+","+(a[1]+2*o[1]/3)+","+c[0]+","+c[1]}return i}function gn(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],s=t[1],o=1,l=t.length;++o<l;)n=a,a=s,s=t[o],i.push([r*(s[0]-n[0]),r*(s[1]-n[1])]);return i}function mn(t){if(t.length<3)return on(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],s=[r,r,r,(i=t[1])[0]],o=[a,a,a,i[1]],l=[r,",",a];for(wn(l,s,o);++e<n;)i=t[e],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),wn(l,s,o);for(e=-1;++e<2;)s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),wn(l,s,o);return l.join("")}function vn(t){if(t.length<4)return on(t);for(var e,n=[],i=-1,r=t.length,a=[0],s=[0];++i<3;)e=t[i],a.push(e[0]),s.push(e[1]);for(n.push(xn(ts,a)+","+xn(ts,s)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),s.shift(),s.push(e[1]),wn(n,a,s);return n.join("")}function yn(t){for(var e,n,i=-1,r=t.length,a=r+4,s=[],o=[];++i<4;)n=t[i%r],s.push(n[0]),o.push(n[1]);for(e=[xn(ts,s),",",xn(ts,o)],--i;++i<a;)n=t[i%r],s.shift(),s.push(n[0]),o.shift(),o.push(n[1]),wn(e,s,o);return e.join("")}function bn(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],s=t[0][1],o=t[n][0]-a,l=t[n][1]-s,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(a+r*o),i[1]=e*i[1]+(1-e)*(s+r*l);return mn(t)}function xn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function wn(t,e,n){t.push("C",xn(Ka,e),",",xn(Ka,n),",",xn(Za,e),",",xn(Za,n),",",xn(ts,e),",",xn(ts,n))}function Cn(t,e){return(e[1]-t[1])/(e[0]-t[0])}function _n(t){for(var e=0,n=t.length-1,i=[],r=t[0],a=t[1],s=i[0]=Cn(r,a);++e<n;)i[e]=(s+(s=Cn(r=a,a=t[e+1])))/2;return i[e]=s,i}function Sn(t){for(var e,n,i,r,a=[],s=_n(t),o=-1,l=t.length-1;++o<l;)e=Cn(t[o],t[o+1]),Math.abs(e)<1e-6?s[o]=s[o+1]=0:(n=s[o]/e,i=s[o+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),s[o]=r*n,s[o+1]=r*i));for(o=-1;++o<=l;)r=(t[Math.min(l,o+1)][0]-t[Math.max(0,o-1)][0])/(6*(1+s[o]*s[o])),a.push([r||0,s[o]*r||0]);return a}function Tn(t){return t.length<3?on(t):t[0]+pn(t,Sn(t))}function Dn(t){for(var e,n,i,r=-1,a=t.length;++r<a;)e=t[r],n=e[0],i=e[1]+Ga,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function kn(t){function e(e){function s(){m.push("M",u(t(y),f),d,h(t(v.reverse()),f),"Z")}for(var c,p,g,m=[],v=[],y=[],b=-1,x=e.length,w=o(n),C=o(r),_=n===i?function(){return p}:o(i),S=r===a?function(){return g}:o(a);++b<x;)l.call(this,c=e[b],b)?(v.push([p=+w.call(this,c,b),g=+C.call(this,c,b)]),y.push([+_.call(this,c,b),+S.call(this,c,b)])):v.length&&(s(),v=[],y=[]);return v.length&&s(),m.length?m.join(""):null}var n=an,i=an,r=0,a=sn,l=s,u=on,c=u.key,h=u,d="L",f=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=a=t,e):a},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(l=t,e):l},e.interpolate=function(t){return arguments.length?(c="function"==typeof t?u=t:(u=Ja.get(t)||on).key,h=u.reverse||u,d=u.closed?"M":"L",e):c},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Mn(t){return t.source}function En(t){return t.target}function Nn(t){return t.radius}function An(t){return[t.x,t.y]}function Rn(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+Ga;return[n*Math.cos(i),n*Math.sin(i)]}}function In(){return 64}function Pn(){return"circle"}function On(t){var e=Math.sqrt(t/Math.PI);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Fn(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Ln(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Hn(t,e,n){if(i=[],n&&e.length>1){for(var i,r,a,s=Ae(t.domain()),o=-1,l=e.length,u=(e[1]-e[0])/++n;++o<l;)for(r=n;--r>0;)(a=+e[o]-r*u)>=s[0]&&i.push(a);for(--o,r=0;++r<n&&(a=+e[o]+r*u)<s[1];)i.push(a)}return i}function jn(){ss||(ss=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var t,e=d3.event;try{ss.scrollTop=1e3,ss.dispatchEvent(e),t=1e3-ss.scrollTop}catch(n){t=e.wheelDelta||5*-e.detail}return t}function Bn(t){for(var e=t.source,n=t.target,i=$n(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function zn(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function $n(t,e){if(t===e)return t;for(var n=zn(t),i=zn(e),r=n.pop(),a=i.pop(),s=null;r===a;)s=r,r=n.pop(),a=i.pop();return s}function qn(t){t.fixed|=2}function Wn(t){t.fixed&=1}function Vn(t){t.fixed|=4}function Un(t){t.fixed&=3}function Yn(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var a,s=t.nodes,o=s.length,l=-1;++l<o;)a=s[l],null!=a&&(Yn(a,e,n),t.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function Xn(){return 20}function Gn(){return 1}function Qn(t){return t.x}function Jn(t){return t.y}function Kn(t,e,n){t.y0=e,t.y=n}function Zn(t){return d3.range(t.length)}function ti(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function ei(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function ni(t){return t.reduce(ii,0)}function ii(t,e){return t+e[1]}function ri(t,e){return ai(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ai(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function si(t){return[d3.min(t),d3.max(t)]}function oi(t,e){return d3.rebind(t,e,"sort","children","value"),t.links=hi,t.nodes=function(e){return hs=!0,(t.nodes=t)(e)},t}function li(t){return t.children}function ui(t){return t.value}function ci(t,e){return e.value-t.value}function hi(t){return d3.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function di(t,e){return t.value-e.value}function fi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function pi(t,e){t._pack_next=e,e._pack_prev=t}function gi(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r-n*n-i*i>.001}function mi(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),d=Math.min(t.y-t.r,d),f=Math.max(t.y+t.r,f)}if((n=t.children)&&(u=n.length)){var n,i,r,a,s,o,l,u,c=1/0,h=-1/0,d=1/0,f=-1/0;if(n.forEach(vi),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(a=n[2],xi(i,r,a),e(a),fi(i,a),i._pack_prev=a,fi(a,r),r=i._pack_next,s=3;u>s;s++){xi(i,r,a=n[s]);var p=0,g=1,m=1;for(o=r._pack_next;o!==r;o=o._pack_next,g++)if(gi(o,a)){p=1;break}if(1==p)for(l=i._pack_prev;l!==o._pack_prev&&!gi(l,a);l=l._pack_prev,m++);p?(m>g||g==m&&r.r<i.r?pi(i,r=o):pi(i=l,r),s--):(fi(i,a),r=a,e(a))}var v=(c+h)/2,y=(d+f)/2,b=0;for(s=0;u>s;s++)a=n[s],a.x-=v,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=b,n.forEach(yi)}}function vi(t){t._pack_next=t._pack_prev=t}function yi(t){delete t._pack_next,delete t._pack_prev}function bi(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var a=-1,s=r.length;++a<s;)bi(r[a],e,n,i)}function xi(t,e,n){var i=t.r+n.r,r=e.x-t.x,a=e.y-t.y;if(i&&(r||a)){var s=e.r+n.r,o=r*r+a*a;s*=s,i*=i;var l=.5+(i-s)/(2*o),u=Math.sqrt(Math.max(0,2*s*(i+o)-(i-=o)*i-s*s))/(2*o);n.x=t.x+l*r+u*a,n.y=t.y+l*a-u*r}else n.x=t.x+i,n.y=t.y}function wi(t){return 1+d3.max(t,function(t){return t.y})}function Ci(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function _i(t){var e=t.children;return e&&e.length?_i(e[0]):t}function Si(t){var e,n=t.children;return n&&(e=n.length)?Si(n[e-1]):t}function Ti(t,e){return t.parent==e.parent?1:2}function Di(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function ki(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function Mi(t,e){var n=t.children;if(n&&(r=n.length))for(var i,r,a=-1;++a<r;)e(i=Mi(n[a],e),t)>0&&(t=i);return t}function Ei(t,e){return t.x-e.x}function Ni(t,e){return e.x-t.x}function Ai(t,e){return t.depth-e.depth}function Ri(t,e){function n(t,i){var r=t.children;if(r&&(s=r.length))for(var a,s,o=null,l=-1;++l<s;)a=r[l],n(a,o),o=a;e(t,i)}n(t,null)}function Ii(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)e=r[a]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function Pi(t,e,n){t=t._tree,e=e._tree;var i=n/(e.number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function Oi(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function Fi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Li(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Hi(t,e){function n(t,i){d3.text(t,e,function(t){i(t&&n.parse(t))})}function i(e){return e.map(r).join(t)}function r(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var a=new RegExp("\r\n|["+t+"\r\n]","g"),s=new RegExp('["'+t+"\n]"),o=t.charCodeAt(0);return n.parse=function(t){var e;return n.parseRows(t,function(t,n){if(n){for(var i={},r=-1,a=e.length;++r<a;)i[e[r]]=t[r];return i}return e=t,null})},n.parseRows=function(t,e){function n(){if(a.lastIndex>=t.length)return l;if(r)return r=!1,s;var e=a.lastIndex;if(34===t.charCodeAt(e)){for(var n=e;n++<t.length;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;n++}a.lastIndex=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&a.lastIndex++):10===i&&(r=!0),t.substring(e+1,n).replace(/""/g,'"')}var u=a.exec(t);return u?(r=u[0].charCodeAt(0)!==o,t.substring(e,u.index)):(a.lastIndex=t.length,t.substring(e))}var i,r,s={},l={},u=[],c=0;for(a.lastIndex=0;(i=n())!==l;){for(var h=[];i!==s&&i!==l;)h.push(i),i=n();(!e||(h=e(h,c++)))&&u.push(h)}return u},n.format=function(t){return t.map(i).join("\n")},n}function ji(t,e){return function(n){return n&&t.hasOwnProperty(n.type)?t[n.type](n):e}}function Bi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function zi(t,e){fs.hasOwnProperty(t.type)&&fs[t.type](t,e)}function $i(t,e){zi(t.geometry,e)}function qi(t,e){for(var n=t.features,i=0,r=n.length;r>i;i++)zi(n[i].geometry,e)}function Wi(t,e){for(var n=t.geometries,i=0,r=n.length;r>i;i++)zi(n[i],e)}function Vi(t,e){for(var n=t.coordinates,i=0,r=n.length;r>i;i++)e.apply(null,n[i])}function Ui(t,e){for(var n=t.coordinates,i=0,r=n.length;r>i;i++)for(var a=n[i],s=0,o=a.length;o>s;s++)e.apply(null,a[s])}function Yi(t,e){for(var n=t.coordinates,i=0,r=n.length;r>i;i++)for(var a=n[i][0],s=0,o=a.length;o>s;s++)e.apply(null,a[s])}function Xi(t,e){e.apply(null,t.coordinates)}function Gi(t,e){for(var n=t.coordinates[0],i=0,r=n.length;r>i;i++)e.apply(null,n[i])}function Qi(t){return t.source}function Ji(t){return t.target}function Ki(){function t(t){var e=Math.sin(t*=f)*p,n=Math.sin(f-t)*p,i=n*a+e*h,o=n*s+e*d,l=n*r+e*c;return[Math.atan2(o,i)/ds,Math.atan2(l,Math.sqrt(i*i+o*o))/ds]}var e,n,i,r,a,s,o,l,u,c,h,d,f,p;return t.distance=function(){return null==f&&(p=1/Math.sin(f=Math.acos(Math.max(-1,Math.min(1,r*c+i*u*Math.cos(o-e)))))),f},t.source=function(o){var l=Math.cos(e=o[0]*ds),u=Math.sin(e);return i=Math.cos(n=o[1]*ds),r=Math.sin(n),a=i*l,s=i*u,f=null,t},t.target=function(e){var n=Math.cos(o=e[0]*ds),i=Math.sin(o);return u=Math.cos(l=e[1]*ds),c=Math.sin(l),h=u*n,d=u*i,f=null,t},t}function Zi(t,e){var n=Ki().source(t).target(e);return n.distance(),n}function tr(t){for(var e=0,n=0;;){if(t(e,n))return[e,n];0===e?(e=n+1,n=0):(e-=1,n+=1)}}function er(t,e,n,i){var r,a,s,o,l,u,c;return r=i[t],a=r[0],s=r[1],r=i[e],o=r[0],l=r[1],r=i[n],u=r[0],c=r[1],(c-s)*(o-a)-(l-s)*(u-a)>0}function nr(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function ir(t,e,n,i){var r=t[0],a=e[0],s=n[0],o=i[0],l=t[1],u=e[1],c=n[1],h=i[1],d=r-s,f=a-r,p=o-s,g=l-c,m=u-l,v=h-c,y=(p*g-v*d)/(v*f-p*m);return[r+y*f,l+y*m]}function rr(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=i.leftEnd;do e=e.r;while(e!=i.rightEnd&&r.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[ms[t.side]]}},r={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},i=e.x-t.x,r=e.y-t.y,a=i>0?i:-i,s=r>0?r:-r;return n.c=t.x*i+t.y*r+.5*(i*i+r*r),a>s?(n.a=1,n.b=r/i,n.c/=i):(n.b=1,n.a=i/r,n.c/=r),n},intersect:function(t,e){var n=t.edge,i=e.edge;if(!n||!i||n.region.r==i.region.r)return null;var r=n.a*i.b-n.b*i.a;if(Math.abs(r)<1e-10)return null;var a,s,o=(n.c*i.b-i.c*n.b)/r,l=(i.c*n.a-n.c*i.a)/r,u=n.region.r,c=i.region.r;u.y<c.y||u.y==c.y&&u.x<c.x?(a=t,s=n):(a=e,s=i);var h=o>=s.region.r.x;return h&&"l"===a.side||!h&&"r"===a.side?null:{x:o,y:l}},rightOf:function(t,e){var n=t.edge,i=n.region.r,r=e.x>i.x;if(r&&"l"===t.side)return 1;if(!r&&"r"===t.side)return 0;if(1===n.a){var a=e.y-i.y,s=e.x-i.x,o=0,l=0;if(!r&&n.b<0||r&&n.b>=0?l=o=a>=n.b*s:(l=e.x+e.y*n.b>n.c,n.b<0&&(l=!l),l||(o=1)),!o){var u=i.x-n.region.l.x;l=n.b*(s*s-a*a)<u*a*(1+2*s/u+n.b*n.b),n.b<0&&(l=!l)}}else{var c=n.c-n.a*e.x,h=e.y-c,d=e.x-i.x,f=c-i.y;l=h*h>d*d+f*f}return"l"===t.side?l:!l},endPoint:function(t,n,i){t.ep[n]=i,t.ep[ms[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},a={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var i=0,r=a.list,s=r.length;s>i;i++){var o=r[i];if(!(t.ystar>o.ystar||t.ystar==o.ystar&&e.x>o.vertex.x))break}r.splice(i,0,t)},del:function(t){for(var e=0,n=a.list,i=n.length;i>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===a.list.length},nextEvent:function(t){for(var e=0,n=a.list,i=n.length;i>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=a.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return a.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var s,o,l,u,c,h,d,f,p,g,m,v,y,b=n.list.shift();;)if(a.empty()||(s=a.min()),b&&(a.empty()||b.y<s.y||b.y==s.y&&b.x<s.x))o=i.leftBound(b),l=i.right(o),d=i.rightRegion(o),v=r.bisect(d,b),h=i.createHalfEdge(v,"l"),i.insert(o,h),g=r.intersect(o,h),g&&(a.del(o),a.insert(o,g,r.distance(g,b))),o=h,h=i.createHalfEdge(v,"r"),i.insert(o,h),g=r.intersect(h,l),g&&a.insert(h,g,r.distance(g,b)),b=n.list.shift();else{if(a.empty())break;o=a.extractMin(),u=i.left(o),l=i.right(o),c=i.right(l),d=i.leftRegion(o),f=i.rightRegion(l),m=o.vertex,r.endPoint(o.edge,o.side,m),r.endPoint(l.edge,l.side,m),i.del(o),a.del(l),i.del(l),y="l",d.y>f.y&&(p=d,d=f,f=p,y="r"),v=r.bisect(d,f),h=i.createHalfEdge(v,y),i.insert(u,h),r.endPoint(v,ms[y],m),g=r.intersect(u,h),g&&(a.del(u),a.insert(u,g,r.distance(g,d))),g=r.intersect(h,c),g&&a.insert(h,g,r.distance(g,d))}for(o=i.right(i.leftEnd);o!=i.rightEnd;o=i.right(o))e(o.edge)}function ar(){return{leaf:!0,nodes:[],point:null}}function sr(t,e,n,i,r,a){if(!t(e,n,i,r,a)){var s=.5*(n+r),o=.5*(i+a),l=e.nodes;l[0]&&sr(t,l[0],n,i,s,o),l[1]&&sr(t,l[1],s,i,r,o),l[2]&&sr(t,l[2],n,o,s,a),l[3]&&sr(t,l[3],s,o,r,a)}}function or(t){return{x:t[0],y:t[1]}}function lr(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ur(t){return t.substring(0,3)}function cr(t,e,n,i){for(var r,a,s=0,o=e.length,l=n.length;o>s;){if(i>=l)return-1;if(r=e.charCodeAt(s++),37==r){if(a=Hs[e.charAt(s++)],!a||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function hr(t){return new RegExp("^(?:"+t.map(d3.requote).join("|")+")","i")}function dr(t){for(var e=new i,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function fr(t,e,n){Rs.lastIndex=0;var i=Rs.exec(e.substring(n));return i?n+=i[0].length:-1}function pr(t,e,n){As.lastIndex=0;var i=As.exec(e.substring(n));return i?n+=i[0].length:-1}function gr(t,e,n){Os.lastIndex=0;var i=Os.exec(e.substring(n));return i?(t.m=Fs.get(i[0].toLowerCase()),n+=i[0].length):-1}function mr(t,e,n){Is.lastIndex=0;var i=Is.exec(e.substring(n));return i?(t.m=Ps.get(i[0].toLowerCase()),n+=i[0].length):-1}function vr(t,e,n){return cr(t,Ls.c.toString(),e,n)}function yr(t,e,n){return cr(t,Ls.x.toString(),e,n)}function br(t,e,n){return cr(t,Ls.X.toString(),e,n)}function xr(t,e,n){js.lastIndex=0;var i=js.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+=i[0].length):-1}function wr(t,e,n){js.lastIndex=0;var i=js.exec(e.substring(n,n+2));return i?(t.y=Cr(+i[0]),n+=i[0].length):-1}function Cr(t){return t+(t>68?1900:2e3)}function _r(t,e,n){js.lastIndex=0;var i=js.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+=i[0].length):-1}function Sr(t,e,n){js.lastIndex=0;var i=js.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+=i[0].length):-1}function Tr(t,e,n){js.lastIndex=0;var i=js.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+=i[0].length):-1}function Dr(t,e,n){js.lastIndex=0;var i=js.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+=i[0].length):-1}function kr(t,e,n){js.lastIndex=0;var i=js.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+=i[0].length):-1}function Mr(t,e,n){js.lastIndex=0;var i=js.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+=i[0].length):-1}function Er(t,e,n){var i=Bs.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}function Nr(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=~~(Math.abs(e)/60),r=Math.abs(e)%60;return n+ks(i)+ks(r)}function Ar(t){return t.toISOString()}function Rr(t,e,n){function i(e){var n=t(e),i=a(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new vs(n-1)),1),n}function a(t,n){return e(t=new vs(+t),n),t}function s(t,i,a){var s=r(t),o=[];if(a>1)for(;i>s;)n(s)%a||o.push(new Date(+s)),e(s,1);else for(;i>s;)o.push(new Date(+s)),e(s,1);return o}function o(t,e,n){try{vs=lr;var i=new lr;return i._=t,s(i,e,n)}finally{vs=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=a,t.range=s;var l=t.utc=Ir(t);return l.floor=l,l.round=Ir(i),l.ceil=Ir(r),l.offset=Ir(a),l.range=o,t}function Ir(t){return function(e,n){try{vs=lr;var i=new lr;return i._=e,t(i,n)._}finally{vs=Date}}}function Pr(t,e,n){function i(e){return t(e)}return i.invert=function(e){return Fr(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Fr)},i.nice=function(t){return i.domain(Ie(i.domain(),function(){return t}))},i.ticks=function(n,r){var a=Or(i.domain());if("function"!=typeof n){var s=a[1]-a[0],o=s/n,l=d3.bisect($s,o);if(l==$s.length)return e.year(a,n);if(!l)return t.ticks(n).map(Fr);Math.log(o/$s[l-1])<Math.log($s[l]/o)&&--l,n=e[l],r=n[1],n=n[0].range}return n(a[0],new Date(+a[1]+1),r)},i.tickFormat=function(){return n},i.copy=function(){return Pr(t.copy(),e,n)},d3.rebind(i,t,"range","rangeRound","interpolate","clamp")}function Or(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Fr(t){return new Date(t)}function Lr(t){return function(e){for(var n=t.length-1,i=t[n];!i[1](e);)i=t[--n];return i[0](e)}}function Hr(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function jr(t){var e=t.getFullYear(),n=Hr(e),i=Hr(e+1);return e+(t-n)/(i-n)}function Br(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function zr(t){var e=t.getUTCFullYear(),n=Br(e),i=Br(e+1);return e+(t-n)/(i-n)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch($r){var qr=CSSStyleDeclaration.prototype,Wr=qr.setProperty;qr.setProperty=function(t,e,n){Wr.call(this,t,e+"",n)}}d3={version:"2.10.3"};var Vr=n;try{Vr(document.documentElement.childNodes)[0].nodeType}catch(Ur){Vr=e}var Yr=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};d3.map=function(t){var e=new i;for(var n in t)e.set(n,t[n]);return e},t(i,{has:function(t){return Xr+t in this},get:function(t){return this[Xr+t]},set:function(t,e){return this[Xr+t]=e},remove:function(t){return t=Xr+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Gr&&t.call(this,e.substring(1),this[e])}});var Xr="\x00",Gr=Xr.charCodeAt(0);d3.functor=o,d3.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=l(t,e,e[n]);return t},d3.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},d3.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},d3.mean=function(t,e){var n,i=t.length,r=0,a=-1,s=0;if(1===arguments.length)for(;++a<i;)u(n=t[a])&&(r+=(n-r)/++s);else for(;++a<i;)u(n=e.call(t,t[a],a))&&(r+=(n-r)/++s);return s?r:void 0},d3.median=function(t,e){return arguments.length>1&&(t=t.map(e)),t=t.filter(u),t.length?d3.quantile(t.sort(d3.ascending),.5):void 0},d3.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a&&(null==(n=t[r])||n!=n);)n=void 0;for(;++r<a;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<a&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},d3.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a&&(null==(n=t[r])||n!=n);)n=void 0;for(;++r<a;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<a&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},d3.extent=function(t,e){var n,i,r,a=-1,s=t.length;if(1===arguments.length){for(;++a<s&&(null==(n=r=t[a])||n!=n);)n=r=void 0;for(;++a<s;)null!=(i=t[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<s&&(null==(n=r=e.call(t,t[a],a))||n!=n);)n=void 0;for(;++a<s;)null!=(i=e.call(t,t[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},d3.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(t,e){var n=arguments.length;2>n&&(e=1),1>n&&(t=0);var i=d3.random.normal();return function(){return Math.exp(t+e*i())}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e/t}}},d3.sum=function(t,e){var n,i=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)isNaN(n=+t[a])||(i+=n);else for(;++a<r;)isNaN(n=+e.call(t,t[a],a))||(i+=n);return i},d3.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=t[i-1],a=n-i;return a?r+a*(t[i]-r):r},d3.transpose=function(t){return d3.zip.apply(d3,t)},d3.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=d3.min(arguments,c),n=new Array(e);++t<e;)for(var i,r=-1,a=n[t]=new Array(i);++r<i;)a[r]=arguments[r][t];return n},d3.bisector=function(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t.call(e,e[a],a)<n?i=a+1:r=a}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;n<t.call(e,e[a],a)?r=a:i=a+1}return i}}};var Qr=d3.bisector(function(t){return t});d3.bisectLeft=Qr.left,d3.bisect=d3.bisectRight=Qr.right,d3.first=function(t,e){var n,i=0,r=t.length,a=t[0];for(1===arguments.length&&(e=d3.ascending);++i<r;)e.call(t,a,n=t[i])>0&&(a=n);return a},d3.last=function(t,e){var n,i=0,r=t.length,a=t[0];for(1===arguments.length&&(e=d3.ascending);++i<r;)e.call(t,a,n=t[i])<=0&&(a=n);return a},d3.nest=function(){function t(e,o){if(o>=s.length)return r?r.call(a,e):n?e.sort(n):e;for(var l,u,c,h=-1,d=e.length,f=s[o++],p=new i,g={};++h<d;)(c=p.get(l=f(u=e[h])))?c.push(u):p.set(l,[u]);return p.forEach(function(e,n){g[e]=t(n,o)}),g}function e(t,n){if(n>=s.length)return t;var i,r=[],a=o[n++];for(i in t)r.push({key:i,values:e(t[i],n)});return a&&r.sort(function(t,e){return a(t.key,e.key)}),r}var n,r,a={},s=[],o=[];return a.map=function(e){return t(e,0)},a.entries=function(n){return e(t(n,0),0)},a.key=function(t){return s.push(t),a},a.sortKeys=function(t){return o[s.length-1]=t,a},a.sortValues=function(t){return n=t,a},a.rollup=function(t){return r=t,a},a},d3.keys=function(t){var e=[];for(var n in t)e.push(n);return e},d3.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},d3.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},d3.permute=function(t,e){for(var n=[],i=-1,r=e.length;++i<r;)n[i]=t[e[i]];return n},d3.merge=function(t){return Array.prototype.concat.apply([],t)},d3.split=function(t,e){var n,i=[],r=[],a=-1,s=t.length;for(arguments.length<2&&(e=h);++a<s;)e.call(r,n=t[a],a)?r=[]:(r.length||i.push(r),r.push(n));return i},d3.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),1/0===(e-t)/n)throw new Error("infinite range");var i,r=[],a=f(Math.abs(n)),s=-1;if(t*=a,e*=a,n*=a,0>n)for(;(i=t+n*++s)>e;)r.push(i/a);else for(;(i=t+n*++s)<e;)r.push(i/a);return r},d3.requote=function(t){return t.replace(Jr,"\\$&")};var Jr=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},d3.xhr=function(t,e,n){var i=new XMLHttpRequest;arguments.length<3?(n=e,e=null):e&&i.overrideMimeType&&i.overrideMimeType(e),i.open("GET",t,!0),e&&i.setRequestHeader("Accept",e),i.onreadystatechange=function(){if(4===i.readyState){var t=i.status;n(!t&&i.response||t>=200&&300>t||304===t?i:null)}},i.send(null)},d3.text=function(t,e,n){function i(t){n(t&&t.responseText)}arguments.length<3&&(n=e,e=null),d3.xhr(t,e,i)},d3.json=function(t,e){d3.text(t,"application/json",function(t){e(t?JSON.parse(t):null)})},d3.html=function(t,e){d3.text(t,"text/html",function(t){if(null!=t){var n=document.createRange();n.selectNode(document.body),t=n.createContextualFragment(t)}e(t)})},d3.xml=function(t,e,n){function i(t){n(t&&t.responseXML)
}arguments.length<3&&(n=e,e=null),d3.xhr(t,e,i)};var Kr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Kr,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Kr.hasOwnProperty(n)?{space:Kr[n],local:t}:t}},d3.dispatch=function(){for(var t=new p,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=g(t);return t},p.prototype.on=function(t,e){var n=t.indexOf("."),i="";return n>0&&(i=t.substring(n+1),t=t.substring(0,n)),arguments.length<2?this[t].on(i):this[t].on(i,e)},d3.format=function(t){var e=Zr.exec(t),n=e[1]||" ",i=e[3]||"",r=e[5],a=+e[6],s=e[7],o=e[8],l=e[9],u=1,c="",h=!1;switch(o&&(o=+o.substring(1)),r&&(n="0",s&&(a-=Math.floor((a-1)/4))),l){case"n":s=!0,l="g";break;case"%":u=100,c="%",l="f";break;case"p":u=100,c="%",l="r";break;case"d":h=!0,o=0;break;case"s":u=-1,l="r"}return"r"==l&&!o&&(l="g"),l=ta.get(l)||v,function(t){if(h&&t%1)return"";var e=0>t&&(t=-t)?"-":i;if(0>u){var d=d3.formatPrefix(t,o);t=d.scale(t),c=d.symbol}else t*=u;if(t=l(t,o),r){var f=t.length+e.length;a>f&&(t=new Array(a-f+1).join(n)+t),s&&(t=y(t)),t=e+t}else{s&&(t=y(t)),t=e+t;var f=t.length;a>f&&(t=new Array(a-f+1).join(n)+t)}return t+c}};var Zr=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,ta=d3.map({g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return d3.round(t,e=m(t,e)).toFixed(Math.max(0,Math.min(20,e)))}}),ea=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(b);d3.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=d3.round(t,m(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),ea[8+n/3]};var na=S(2),ia=S(3),ra=function(){return _},aa=d3.map({linear:ra,poly:S,quad:function(){return na},cubic:function(){return ia},sin:function(){return T},exp:function(){return D},circle:function(){return k},elastic:M,back:E,bounce:function(){return N}}),sa=d3.map({"in":_,out:w,"in-out":C,"out-in":function(t){return C(w(t))}});d3.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,i=e>=0?t.substring(e+1):"in";return n=aa.get(n)||ra,i=sa.get(i)||_,x(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.transform=function(t){var e=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate();return new P(n?n.matrix:la)})(t)},P.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oa=180/Math.PI,la={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(t,e){for(var n,i=d3.interpolators.length;--i>=0&&!(n=d3.interpolators[i](t,e)););return n},d3.interpolateNumber=function(t,e){return e-=t,function(n){return t+e*n}},d3.interpolateRound=function(t,e){return e-=t,function(n){return Math.round(t+e*n)}},d3.interpolateString=function(t,e){var n,i,r,a,s,o=0,l=0,u=[],c=[];for(ua.lastIndex=0,i=0;n=ua.exec(e);++i)n.index&&u.push(e.substring(o,l=n.index)),c.push({i:u.length,x:n[0]}),u.push(null),o=ua.lastIndex;for(o<e.length&&u.push(e.substring(o)),i=0,a=c.length;(n=ua.exec(t))&&a>i;++i)if(s=c[i],s.x==n[0]){if(s.i)if(null==u[s.i+1])for(u[s.i-1]+=s.x,u.splice(s.i,1),r=i+1;a>r;++r)c[r].i--;else for(u[s.i-1]+=s.x+u[s.i+1],u.splice(s.i,2),r=i+1;a>r;++r)c[r].i-=2;else if(null==u[s.i+1])u[s.i]=s.x;else for(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1),r=i+1;a>r;++r)c[r].i--;c.splice(i,1),a--,i--}else s.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(s.x));for(;a>i;)s=c.pop(),null==u[s.i+1]?u[s.i]=s.x:(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1)),a--;return 1===u.length?null==u[0]?c[0].x:function(){return e}:function(t){for(i=0;a>i;++i)u[(s=c[i]).i]=s.x(t);return u.join("")}},d3.interpolateTransform=function(t,e){var n,i=[],r=[],a=d3.transform(t),s=d3.transform(e),o=a.translate,l=s.translate,u=a.rotate,c=s.rotate,h=a.skew,d=s.skew,f=a.scale,p=s.scale;return o[0]!=l[0]||o[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:d3.interpolateNumber(o[0],l[0])},{i:3,x:d3.interpolateNumber(o[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(u,c)})):c&&i.push(i.pop()+"rotate("+c+")"),h!=d?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(h,d)}):d&&i.push(i.pop()+"skewX("+d+")"),f[0]!=p[0]||f[1]!=p[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:d3.interpolateNumber(f[0],p[0])},{i:n-2,x:d3.interpolateNumber(f[1],p[1])})):(1!=p[0]||1!=p[1])&&i.push(i.pop()+"scale("+p+")"),n=r.length,function(t){for(var e,a=-1;++a<n;)i[(e=r[a]).i]=e.x(t);return i.join("")}},d3.interpolateRgb=function(t,e){t=d3.rgb(t),e=d3.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,s=e.g-i,o=e.b-r;return function(t){return"#"+W(Math.round(n+a*t))+W(Math.round(i+s*t))+W(Math.round(r+o*t))}},d3.interpolateHsl=function(t,e){t=d3.hsl(t),e=d3.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,s=e.s-i,o=e.l-r;return a>180?a-=360:-180>a&&(a+=360),function(t){return K(n+a*t,i+s*t,r+o*t)+""}},d3.interpolateLab=function(t,e){t=d3.lab(t),e=d3.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,s=e.a-i,o=e.b-r;return function(t){return re(n+a*t,i+s*t,r+o*t)+""}},d3.interpolateHcl=function(t,e){t=d3.hcl(t),e=d3.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,s=e.c-i,o=e.l-r;return a>180?a-=360:-180>a&&(a+=360),function(t){return ee(n+a*t,i+s*t,r+o*t)+""}},d3.interpolateArray=function(t,e){var n,i=[],r=[],a=t.length,s=e.length,o=Math.min(t.length,e.length);for(n=0;o>n;++n)i.push(d3.interpolate(t[n],e[n]));for(;a>n;++n)r[n]=t[n];for(;s>n;++n)r[n]=e[n];return function(t){for(n=0;o>n;++n)r[n]=i[n](t);return r}},d3.interpolateObject=function(t,e){var n,i={},r={};for(n in t)n in e?i[n]=H(n)(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}};var ua=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(t,e){return e instanceof Array&&d3.interpolateArray(t,e)},function(t,e){return("string"==typeof t||"string"==typeof e)&&d3.interpolateString(t+"",e+"")},function(t,e){return("string"==typeof e?ha.has(e)||/^(#|rgb\(|hsl\()/.test(e):e instanceof z)&&d3.interpolateRgb(t,e)},function(t,e){return!isNaN(t=+t)&&!isNaN(e=+e)&&d3.interpolateNumber(t,e)}],z.prototype.toString=function(){return this.rgb()+""},d3.rgb=function(t,e,n){return 1===arguments.length?t instanceof q?$(t.r,t.g,t.b):V(""+t,$,K):$(~~t,~~e,~~n)};var ca=q.prototype=new z;ca.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),$(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(i/t)))):$(r,r,r)},ca.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),$(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},ca.hsl=function(){return U(this.r,this.g,this.b)},ca.toString=function(){return"#"+W(this.r)+W(this.g)+W(this.b)};var ha=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});ha.forEach(function(t,e){ha.set(t,V(e,$,K))}),d3.hsl=function(t,e,n){return 1===arguments.length?t instanceof J?Q(t.h,t.s,t.l):V(""+t,U,Q):Q(+t,+e,+n)};var da=J.prototype=new z;da.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),Q(this.h,this.s,this.l/t)},da.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),Q(this.h,this.s,t*this.l)},da.rgb=function(){return K(this.h,this.s,this.l)},d3.hcl=function(t,e,n){return 1===arguments.length?t instanceof te?Z(t.h,t.c,t.l):t instanceof ie?ae(t.l,t.a,t.b):ae((t=Y((t=d3.rgb(t)).r,t.g,t.b)).l,t.a,t.b):Z(+t,+e,+n)};var fa=te.prototype=new z;fa.brighter=function(t){return Z(this.h,this.c,Math.min(100,this.l+pa*(arguments.length?t:1)))},fa.darker=function(t){return Z(this.h,this.c,Math.max(0,this.l-pa*(arguments.length?t:1)))},fa.rgb=function(){return ee(this.h,this.c,this.l).rgb()},d3.lab=function(t,e,n){return 1===arguments.length?t instanceof ie?ne(t.l,t.a,t.b):t instanceof te?ee(t.l,t.c,t.h):Y((t=d3.rgb(t)).r,t.g,t.b):ne(+t,+e,+n)};var pa=18,ga=.95047,ma=1,va=1.08883,ya=ie.prototype=new z;ya.brighter=function(t){return ne(Math.min(100,this.l+pa*(arguments.length?t:1)),this.a,this.b)},ya.darker=function(t){return ne(Math.max(0,this.l-pa*(arguments.length?t:1)),this.a,this.b)},ya.rgb=function(){return re(this.l,this.a,this.b)};var ba=function(t,e){return e.querySelector(t)},xa=function(t,e){return e.querySelectorAll(t)},wa=document.documentElement,Ca=wa.matchesSelector||wa.webkitMatchesSelector||wa.mozMatchesSelector||wa.msMatchesSelector||wa.oMatchesSelector,_a=function(t,e){return Ca.call(t,e)};"function"==typeof Sizzle&&(ba=function(t,e){return Sizzle(t,e)[0]||null},xa=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},_a=Sizzle.matchesSelector);var Sa=[];d3.selection=function(){return Ta},d3.selection.prototype=Sa,Sa.select=function(t){var e,n,i,r,a=[];"function"!=typeof t&&(t=ce(t));for(var s=-1,o=this.length;++s<o;){a.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return ue(a)},Sa.selectAll=function(t){var e,n,i=[];"function"!=typeof t&&(t=he(t));for(var r=-1,a=this.length;++r<a;)for(var s=this[r],o=-1,l=s.length;++o<l;)(n=s[o])&&(i.push(e=Vr(t.call(n,n.__data__,o))),e.parentNode=n);return ue(i)},Sa.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=d3.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(de(e,t[e]));return this}return this.each(de(t,e))},Sa.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=t.trim().split(/^|\s+/g)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.className,null!=e.baseVal&&(e=e.baseVal);++r<i;)if(!fe(t[r]).test(e))return!1;return!0}for(e in t)this.each(pe(e,t[e]));return this}return this.each(pe(t,e))},Sa.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(me(n,t[n],e));return this}if(2>i)return window.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(me(t,e,n))},Sa.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(ve(e,t[e]));return this}return this.each(ve(t,e))},Sa.text=function(t){return arguments.length<1?this.node().textContent:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t})},Sa.html=function(t){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t})},Sa.append=function(t){function e(){return this.appendChild(document.createElementNS(this.namespaceURI,t))}function n(){return this.appendChild(document.createElementNS(t.space,t.local))}return t=d3.ns.qualify(t),this.select(t.local?n:e)},Sa.insert=function(t,e){function n(){return this.insertBefore(document.createElementNS(this.namespaceURI,t),ba(e,this))}function i(){return this.insertBefore(document.createElementNS(t.space,t.local),ba(e,this))}return t=d3.ns.qualify(t),this.select(t.local?i:n)},Sa.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Sa.data=function(t,e){function n(t,n){var r,a,s,o=t.length,h=n.length,d=Math.min(o,h),f=Math.max(o,h),p=[],g=[],m=[];if(e){var v,y=new i,b=[],x=n.length;for(r=-1;++r<o;)v=e.call(a=t[r],a.__data__,r),y.has(v)?m[x++]=a:y.set(v,a),b.push(v);for(r=-1;++r<h;)v=e.call(n,s=n[r],r),y.has(v)?(p[r]=a=y.get(v),a.__data__=s,g[r]=m[r]=null):(g[r]=ye(s),p[r]=m[r]=null),y.remove(v);for(r=-1;++r<o;)y.has(b[r])&&(m[r]=t[r])}else{for(r=-1;++r<d;)a=t[r],s=n[r],a?(a.__data__=s,p[r]=a,g[r]=m[r]=null):(g[r]=ye(s),p[r]=m[r]=null);for(;h>r;++r)g[r]=ye(n[r]),p[r]=m[r]=null;for(;f>r;++r)m[r]=t[r],g[r]=p[r]=null}g.update=p,g.parentNode=p.parentNode=m.parentNode=t.parentNode,l.push(g),u.push(p),c.push(m)}var r,a,s=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(r=this[0]).length);++s<o;)(a=r[s])&&(t[s]=a.__data__);return t}var l=_e([]),u=ue([]),c=ue([]);if("function"==typeof t)for(;++s<o;)n(r=this[s],t.call(r,r.parentNode.__data__,s));else for(;++s<o;)n(r=this[s],t);return u.enter=function(){return l},u.exit=function(){return c},u},Sa.datum=Sa.map=function(t){return arguments.length<1?this.property("__data__"):this.property("__data__",t)},Sa.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=be(t));for(var a=0,s=this.length;s>a;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var o=0,l=n.length;l>o;o++)(i=n[o])&&t.call(i,i.__data__,o)&&e.push(i)}return ue(r)},Sa.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Sa.sort=function(t){t=xe.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Sa.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(we(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(we(t,e,n))},Sa.each=function(t){return Ce(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Sa.call=function(t){return t.apply(this,(arguments[0]=this,arguments)),this},Sa.empty=function(){return!this.node()},Sa.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},Sa.transition=function(){for(var t,e,n=[],i=-1,r=this.length;++i<r;){n.push(t=[]);for(var a=this[i],s=-1,o=a.length;++s<o;)t.push((e=a[s])?{node:e,delay:Ia,duration:Pa}:null)}return Se(n,Ea||++Ma,Date.now())};var Ta=ue([[document]]);Ta[0].parentNode=wa,d3.select=function(t){return"string"==typeof t?Ta.select(t):ue([[t]])},d3.selectAll=function(t){return"string"==typeof t?Ta.selectAll(t):ue([Vr(t)])};var Da=[];d3.selection.enter=_e,d3.selection.enter.prototype=Da,Da.append=Sa.append,Da.insert=Sa.insert,Da.empty=Sa.empty,Da.node=Sa.node,Da.select=function(t){for(var e,n,i,r,a,s=[],o=-1,l=this.length;++o<l;){i=(r=this[o]).update,s.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(a=r[u])?(e.push(i[u]=n=t.call(r.parentNode,a.__data__,u)),n.__data__=a.__data__):e.push(null)}return ue(s)};var ka=[],Ma=0,Ea=0,Na=0,Aa=250,Ra=d3.ease("cubic-in-out"),Ia=Na,Pa=Aa,Oa=Ra;ka.call=Sa.call,d3.transition=function(t){return arguments.length?Ea?t.transition():t:Ta.transition()},d3.transition.prototype=ka,ka.select=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=ce(t));for(var a=-1,s=this.length;++a<s;){r.push(e=[]);for(var o=this[a],l=-1,u=o.length;++l<u;)(i=o[l])&&(n=t.call(i.node,i.node.__data__,l))?("__data__"in i.node&&(n.__data__=i.node.__data__),e.push({node:n,delay:i.delay,duration:i.duration})):e.push(null)}return Se(r,this.id,this.time).ease(this.ease())},ka.selectAll=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=he(t));for(var a=-1,s=this.length;++a<s;)for(var o=this[a],l=-1,u=o.length;++l<u;)if(i=o[l]){n=t.call(i.node,i.node.__data__,l),r.push(e=[]);for(var c=-1,h=n.length;++c<h;)e.push({node:n[c],delay:i.delay,duration:i.duration})}return Se(r,this.id,this.time).ease(this.ease())},ka.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=be(t));for(var a=0,s=this.length;s>a;a++){r.push(e=[]);for(var n=this[a],o=0,l=n.length;l>o;o++)(i=n[o])&&t.call(i.node,i.node.__data__,o)&&e.push(i)}return Se(r,this.id,this.time).ease(this.ease())},ka.attr=function(t,e){if(arguments.length<2){for(e in t)this.attrTween(e,ke(t[e],e));return this}return this.attrTween(t,ke(e,t))},ka.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i===Ha?(this.removeAttribute(r),null):i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i===Ha?(this.removeAttributeNS(r.space,r.local),null):i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=d3.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},ka.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.styleTween(n,ke(t[n],n),e);return this}n=""}return this.styleTween(t,ke(e,t),n)},ka.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(i,r){var a=e.call(this,i,r,window.getComputedStyle(this,null).getPropertyValue(t));return a===Ha?(this.style.removeProperty(t),null):a&&function(e){this.style.setProperty(t,a(e),n)}})},ka.text=function(t){return this.tween("text",function(e,n){this.textContent="function"==typeof t?t.call(this,e,n):t})},ka.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},ka.delay=function(t){return Ce(this,"function"==typeof t?function(e,n,i){e.delay=0|t.call(e=e.node,e.__data__,n,i)}:(t|=0,function(e){e.delay=t}))},ka.duration=function(t){return Ce(this,"function"==typeof t?function(e,n,i){e.duration=Math.max(1,0|t.call(e=e.node,e.__data__,n,i))}:(t=Math.max(1,0|t),function(e){e.duration=t}))},ka.transition=function(){return this.select(a)},d3.tween=function(t,e){function n(n,i,r){var a=t.call(this,n,i);return null==a?""!=r&&Ha:r!=a&&e(r,a+"")}function i(n,i,r){return r!=t&&e(r,t)}return"function"==typeof t?n:null==t?De:(t+="",i)};var Fa,La,Ha={},ja=0,Ba={},za=null;d3.timer=function(t,e,n){if(arguments.length<3){if(arguments.length<2)e=0;else if(!isFinite(e))return;n=Date.now()}var i=Ba[t.id];i&&i.callback===t?(i.then=n,i.delay=e):Ba[t.id=++ja]=za={callback:t,then:n,delay:e,next:za},Fa||(La=clearTimeout(La),Fa=1,$a(Me))},d3.timer.flush=function(){for(var t,e=Date.now(),n=za;n;)t=e-n.then,n.delay||(n.flush=n.callback(t)),n=n.next;Ee()};var $a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,17)};d3.mouse=function(t){return Ne(t,R())};var qa=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(t,e){return arguments.length<2&&(e=R().touches),e?Vr(e).map(function(e){var n=Ne(t,e);return n.identifier=e.identifier,n}):[]},d3.scale={},d3.scale.linear=function(){return Oe([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return qe(d3.scale.linear(),We)};var Wa=d3.format(".0e");We.pow=function(t){return Math.pow(10,t)},Ve.pow=function(t){return-Math.pow(10,-t)},d3.scale.pow=function(){return Ue(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return Xe([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Va)},d3.scale.category20=function(){return d3.scale.ordinal().range(Ua)},d3.scale.category20b=function(){return d3.scale.ordinal().range(Ya)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Xa)};var Va=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ua=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Ya=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Xa=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return Ge([],[])},d3.scale.quantize=function(){return Qe(0,1,[0,1])},d3.scale.threshold=function(){return Je([.5],[0,1])},d3.scale.identity=function(){return Ke([0,1])},d3.svg={},d3.svg.arc=function(){function t(){var t=e.apply(this,arguments),a=n.apply(this,arguments),s=i.apply(this,arguments)+Ga,o=r.apply(this,arguments)+Ga,l=(s>o&&(l=s,s=o,o=l),o-s),u=l<Math.PI?"0":"1",c=Math.cos(s),h=Math.sin(s),d=Math.cos(o),f=Math.sin(o);return l>=Qa?t?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":t?"M"+a*c+","+a*h+"A"+a+","+a+" 0 "+u+",1 "+a*d+","+a*f+"L"+t*d+","+t*f+"A"+t+","+t+" 0 "+u+",0 "+t*c+","+t*h+"Z":"M"+a*c+","+a*h+"A"+a+","+a+" 0 "+u+",1 "+a*d+","+a*f+"L0,0"+"Z"}var e=Ze,n=tn,i=en,r=nn;return t.innerRadius=function(n){return arguments.length?(e=o(n),t):e},t.outerRadius=function(e){return arguments.length?(n=o(e),t):n},t.startAngle=function(e){return arguments.length?(i=o(e),t):i},t.endAngle=function(e){return arguments.length?(r=o(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,a=(i.apply(this,arguments)+r.apply(this,arguments))/2+Ga;return[Math.cos(a)*t,Math.sin(a)*t]},t};var Ga=-Math.PI/2,Qa=2*Math.PI-1e-6;d3.svg.line=function(){return rn(r)};var Ja=d3.map({linear:on,"linear-closed":ln,"step-before":un,"step-after":cn,basis:mn,"basis-open":vn,"basis-closed":yn,bundle:bn,cardinal:fn,"cardinal-open":hn,"cardinal-closed":dn,monotone:Tn});Ja.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Ka=[0,2/3,1/3,0],Za=[0,1/3,2/3,0],ts=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var t=rn(Dn);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},un.reverse=cn,cn.reverse=un,d3.svg.area=function(){return kn(r)},d3.svg.area.radial=function(){var t=kn(Dn);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},d3.svg.chord=function(){function t(t,o){var l=e(this,a,t,o),u=e(this,s,t,o);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),a=l.call(t,r,i),s=u.call(t,r,i)+Ga,o=c.call(t,r,i)+Ga;return{r:a,a0:s,a1:o,p0:[a*Math.cos(s),a*Math.sin(s)],p1:[a*Math.cos(o),a*Math.sin(o)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Math.PI)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var a=Mn,s=En,l=Nn,u=en,c=nn;return t.radius=function(e){return arguments.length?(l=o(e),t):l},t.source=function(e){return arguments.length?(a=o(e),t):a},t.target=function(e){return arguments.length?(s=o(e),t):s},t.startAngle=function(e){return arguments.length?(u=o(e),t):u},t.endAngle=function(e){return arguments.length?(c=o(e),t):c},t},d3.svg.diagonal=function(){function t(t,r){var a=e.call(this,t,r),s=n.call(this,t,r),o=(a.y+s.y)/2,l=[a,{x:a.x,y:o},{x:s.x,y:o},s];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=Mn,n=En,i=An;return t.source=function(n){return arguments.length?(e=o(n),t):e},t.target=function(e){return arguments.length?(n=o(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},d3.svg.diagonal.radial=function(){var t=d3.svg.diagonal(),e=An,n=t.projection;return t.projection=function(t){return arguments.length?n(Rn(e=t)):e},t},d3.svg.mouse=d3.mouse,d3.svg.touches=d3.touches,d3.svg.symbol=function(){function t(t,i){return(es.get(e.call(this,t,i))||On)(n.call(this,t,i))}var e=Pn,n=In;return t.type=function(n){return arguments.length?(e=o(n),t):e},t.size=function(e){return arguments.length?(n=o(e),t):n},t};var es=d3.map({circle:On,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*is)),n=e*is;return"M0,"+-e+"L"+n+",0"+" 0,"+e+" "+-n+",0"+"Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ns),n=e*ns/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ns),n=e*ns/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});d3.svg.symbolTypes=es.keys();var ns=Math.sqrt(3),is=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function t(t){t.each(function(){var t,h=d3.select(this),d=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,f=null==e?n.tickFormat?n.tickFormat.apply(n,l):String:e,p=Hn(n,d,c),g=h.selectAll(".minor").data(p,String),m=g.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),v=d3.transition(g.exit()).style("opacity",1e-6).remove(),y=d3.transition(g).style("opacity",1),b=h.selectAll("g").data(d,String),x=b.enter().insert("g","path").style("opacity",1e-6),w=d3.transition(b.exit()).style("opacity",1e-6).remove(),C=d3.transition(b).style("opacity",1),_=Re(n),S=h.selectAll(".domain").data([0]),T=(S.enter().append("path").attr("class","domain"),d3.transition(S)),D=n.copy(),k=this.__chart__||D;this.__chart__=D,x.append("line").attr("class","tick"),x.append("text");var M=x.select("line"),E=C.select("line"),N=b.select("text").text(f),A=x.select("text"),R=C.select("text");switch(i){case"bottom":t=Fn,m.attr("y2",a),y.attr("x2",0).attr("y2",a),M.attr("y2",r),A.attr("y",Math.max(r,0)+o),E.attr("x2",0).attr("y2",r),R.attr("x",0).attr("y",Math.max(r,0)+o),N.attr("dy",".71em").attr("text-anchor","middle"),T.attr("d","M"+_[0]+","+s+"V0H"+_[1]+"V"+s);break;case"top":t=Fn,m.attr("y2",-a),y.attr("x2",0).attr("y2",-a),M.attr("y2",-r),A.attr("y",-(Math.max(r,0)+o)),E.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-(Math.max(r,0)+o)),N.attr("dy","0em").attr("text-anchor","middle"),T.attr("d","M"+_[0]+","+-s+"V0H"+_[1]+"V"+-s);break;case"left":t=Ln,m.attr("x2",-a),y.attr("x2",-a).attr("y2",0),M.attr("x2",-r),A.attr("x",-(Math.max(r,0)+o)),E.attr("x2",-r).attr("y2",0),R.attr("x",-(Math.max(r,0)+o)).attr("y",0),N.attr("dy",".32em").attr("text-anchor","end"),T.attr("d","M"+-s+","+_[0]+"H0V"+_[1]+"H"+-s);break;case"right":t=Ln,m.attr("x2",a),y.attr("x2",a).attr("y2",0),M.attr("x2",r),A.attr("x",Math.max(r,0)+o),E.attr("x2",r).attr("y2",0),R.attr("x",Math.max(r,0)+o).attr("y",0),N.attr("dy",".32em").attr("text-anchor","start"),T.attr("d","M"+s+","+_[0]+"H0V"+_[1]+"H"+s)}if(n.ticks)x.call(t,k),C.call(t,D),w.call(t,D),m.call(t,k),y.call(t,D),v.call(t,D);else{var I=D.rangeBand()/2,P=function(t){return D(t)+I};x.call(t,P),C.call(t,P)}})}var e,n=d3.scale.linear(),i="bottom",r=6,a=6,s=6,o=3,l=[10],u=null,c=0;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e,t):i},t.ticks=function(){return arguments.length?(l=arguments,t):l},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e,n){if(!arguments.length)return r;var i=arguments.length-1;return r=+e,a=i>1?+n:r,s=i>0?+arguments[i]:r,t},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(e){return arguments.length?(c=+e,t):c},t},d3.svg.brush=function(){function t(a){a.each(function(){var a,s=d3.select(this),c=s.selectAll(".background").data([0]),h=s.selectAll(".extent").data([0]),d=s.selectAll(".resize").data(u,String);s.style("pointer-events","all").on("mousedown.brush",r).on("touchstart.brush",r),c.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),d.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return rs[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),d.style("display",t.empty()?"none":null),d.exit().remove(),o&&(a=Re(o),c.attr("x",a[0]).attr("width",a[1]-a[0]),n(s)),l&&(a=Re(l),c.attr("y",a[0]).attr("height",a[1]-a[0]),i(s)),e(s)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)][0]+","+c[+/^s/.test(t)][1]+")"})}function n(t){t.select(".extent").attr("x",c[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1][0]-c[0][0])}function i(t){t.select(".extent").attr("y",c[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1][1]-c[0][1])}function r(){function r(){var t=d3.event.changedTouches;return t?d3.touches(v,t)[0]:d3.mouse(v)}function u(){32==d3.event.keyCode&&(S||(g=null,T[0]-=c[1][0],T[1]-=c[1][1],S=2),A())}function h(){32==d3.event.keyCode&&2==S&&(T[0]+=c[1][0],T[1]+=c[1][1],S=0,A())}function d(){var t=r(),a=!1;m&&(t[0]+=m[0],t[1]+=m[1]),S||(d3.event.altKey?(g||(g=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]),T[0]=c[+(t[0]<g[0])][0],T[1]=c[+(t[1]<g[1])][1]):g=null),C&&f(t,o,0)&&(n(x),a=!0),_&&f(t,l,1)&&(i(x),a=!0),a&&(e(x),b({type:"brush",mode:S?"move":"resize"}))}function f(t,e,n){var i,r,s=Re(e),o=s[0],l=s[1],u=T[n],h=c[1][n]-c[0][n];return S&&(o-=u,l-=h+u),i=Math.max(o,Math.min(l,t[n])),S?r=(i+=u)+h:(g&&(u=Math.max(o,Math.min(l,2*g[n]-i))),i>u?(r=i,i=u):r=u),c[0][n]!==i||c[1][n]!==r?(a=null,c[0][n]=i,c[1][n]=r,!0):void 0}function p(){d(),x.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),d3.select("body").style("cursor",null),D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),b({type:"brushend"}),A()}var g,m,v=this,y=d3.select(d3.event.target),b=s.of(v,arguments),x=d3.select(v),w=y.datum(),C=!/^(n|s)$/.test(w)&&o,_=!/^(e|w)$/.test(w)&&l,S=y.classed("extent"),T=r(),D=d3.select(window).on("mousemove.brush",d).on("mouseup.brush",p).on("touchmove.brush",d).on("touchend.brush",p).on("keydown.brush",u).on("keyup.brush",h);
if(S)T[0]=c[0][0]-T[0],T[1]=c[0][1]-T[1];else if(w){var k=+/w$/.test(w),M=+/^n/.test(w);m=[c[1-k][0]-T[0],c[1-M][1]-T[1]],T[0]=c[k][0],T[1]=c[M][1]}else d3.event.altKey&&(g=T.slice());x.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),d(),A()}var a,s=I(t,"brushstart","brush","brushend"),o=null,l=null,u=as[0],c=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(o=e,u=as[!o<<1|!l],t):o},t.y=function(e){return arguments.length?(l=e,u=as[!o<<1|!l],t):l},t.extent=function(e){var n,i,r,s,u;return arguments.length?(a=[[0,0],[0,0]],o&&(n=e[0],i=e[1],l&&(n=n[0],i=i[0]),a[0][0]=n,a[1][0]=i,o.invert&&(n=o(n),i=o(i)),n>i&&(u=n,n=i,i=u),c[0][0]=0|n,c[1][0]=0|i),l&&(r=e[0],s=e[1],o&&(r=r[1],s=s[1]),a[0][1]=r,a[1][1]=s,l.invert&&(r=l(r),s=l(s)),r>s&&(u=r,r=s,s=u),c[0][1]=0|r,c[1][1]=0|s),t):(e=a||c,o&&(n=e[0][0],i=e[1][0],a||(n=c[0][0],i=c[1][0],o.invert&&(n=o.invert(n),i=o.invert(i)),n>i&&(u=n,n=i,i=u))),l&&(r=e[0][1],s=e[1][1],a||(r=c[0][1],s=c[1][1],l.invert&&(r=l.invert(r),s=l.invert(s)),r>s&&(u=r,r=s,s=u))),o&&l?[[n,r],[i,s]]:o?[n,i]:l&&[r,s])},t.clear=function(){return a=null,c[0][0]=c[0][1]=c[1][0]=c[1][1]=0,t},t.empty=function(){return o&&c[0][0]===c[1][0]||l&&c[0][1]===c[1][1]},d3.rebind(t,s,"on")};var rs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},as=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={},d3.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=o.parentNode;return c?d3.touches(t).filter(function(t){return t.identifier===c})[0]:d3.mouse(t)}function e(){if(!o.parentNode)return r();var e=t(),n=e[0]-h[0],i=e[1]-h[1];d|=n|i,h=e,A(),l({type:"drag",x:e[0]+s[0],y:e[1]+s[1],dx:n,dy:i})}function r(){l({type:"dragend"}),d&&(A(),d3.event.target===u&&f.on("click.drag",a,!0)),f.on(c?"touchmove.drag-"+c:"mousemove.drag",null).on(c?"touchend.drag-"+c:"mouseup.drag",null)}function a(){A(),f.on("click.drag",null)}var s,o=this,l=n.of(o,arguments),u=d3.event.target,c=d3.event.touches&&d3.event.changedTouches[0].identifier,h=t(),d=0,f=d3.select(window).on(c?"touchmove.drag-"+c:"mousemove.drag",e).on(c?"touchend.drag-"+c:"mouseup.drag",r,!0);i?(s=i.apply(o,arguments),s=[s.x-h[0],s.y-h[1]]):s=[0,0],c||A(),l({type:"dragstart"})}var n=I(t,"drag","dragstart","dragend"),i=null;return t.origin=function(e){return arguments.length?(i=e,t):i},d3.rebind(t,n,"on")},d3.behavior.zoom=function(){function t(){this.on("mousedown.zoom",s).on("mousewheel.zoom",o).on("mousemove.zoom",l).on("DOMMouseScroll.zoom",o).on("dblclick.zoom",u).on("touchstart.zoom",c).on("touchmove.zoom",h).on("touchend.zoom",c)}function e(t){return[(t[0]-b[0])/x,(t[1]-b[1])/x]}function n(t){return[t[0]*x+b[0],t[1]*x+b[1]]}function i(t){x=Math.max(w[0],Math.min(w[1],t))}function r(t,e){e=n(e),b[0]+=t[0]-e[0],b[1]+=t[1]-e[1]}function a(t){g&&g.domain(p.range().map(function(t){return(t-b[0])/x}).map(p.invert)),v&&v.domain(m.range().map(function(t){return(t-b[1])/x}).map(m.invert)),d3.event.preventDefault(),t({type:"zoom",scale:x,translate:b})}function s(){function t(){u=1,r(d3.mouse(s),h),a(o)}function n(){u&&A(),c.on("mousemove.zoom",null).on("mouseup.zoom",null),u&&d3.event.target===l&&c.on("click.zoom",i,!0)}function i(){A(),c.on("click.zoom",null)}var s=this,o=C.of(s,arguments),l=d3.event.target,u=0,c=d3.select(window).on("mousemove.zoom",t).on("mouseup.zoom",n),h=e(d3.mouse(s));window.focus(),A()}function o(){d||(d=e(d3.mouse(this))),i(Math.pow(2,.002*jn())*x),r(d3.mouse(this),d),a(C.of(this,arguments))}function l(){d=null}function u(){var t=d3.mouse(this),n=e(t);i(d3.event.shiftKey?x/2:2*x),r(t,n),a(C.of(this,arguments))}function c(){var t=d3.touches(this),n=Date.now();if(f=x,d={},t.forEach(function(t){d[t.identifier]=e(t)}),A(),1===t.length){if(500>n-y){var s=t[0],o=e(t[0]);i(2*x),r(s,o),a(C.of(this,arguments))}y=n}}function h(){var t=d3.touches(this),e=t[0],n=d[e.identifier];if(s=t[1]){var s,o=d[s.identifier];e=[(e[0]+s[0])/2,(e[1]+s[1])/2],n=[(n[0]+o[0])/2,(n[1]+o[1])/2],i(d3.event.scale*f)}r(e,n),y=null,a(C.of(this,arguments))}var d,f,p,g,m,v,y,b=[0,0],x=1,w=os,C=I(t,"zoom");return t.translate=function(e){return arguments.length?(b=e.map(Number),t):b},t.scale=function(e){return arguments.length?(x=+e,t):x},t.scaleExtent=function(e){return arguments.length?(w=null==e?os:e.map(Number),t):w},t.x=function(e){return arguments.length?(g=e,p=e.copy(),t):g},t.y=function(e){return arguments.length?(v=e,m=e.copy(),t):v},d3.rebind(t,C,"on")};var ss,os=[0,1/0];d3.layout={},d3.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Bn(t[n]));return e}},d3.layout.chord=function(){function t(){var t,u,h,d,f,p={},g=[],m=d3.range(a),v=[];for(n=[],i=[],t=0,d=-1;++d<a;){for(u=0,f=-1;++f<a;)u+=r[d][f];g.push(u),v.push(d3.range(a)),t+=u}for(s&&m.sort(function(t,e){return s(g[t],g[e])}),o&&v.forEach(function(t,e){t.sort(function(t,n){return o(r[e][t],r[e][n])})}),t=(2*Math.PI-c*a)/t,u=0,d=-1;++d<a;){for(h=u,f=-1;++f<a;){var y=m[d],b=v[y][f],x=r[y][b],w=u,C=u+=x*t;p[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:C,value:x}}i[y]={index:y,startAngle:h,endAngle:u,value:(u-h)/t},u+=c}for(d=-1;++d<a;)for(f=d-1;++f<a;){var _=p[d+"-"+f],S=p[f+"-"+d];(_.value||S.value)&&n.push(_.value<S.value?{source:S,target:_}:{source:_,target:S})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,a,s,o,l,u={},c=0;return u.matrix=function(t){return arguments.length?(a=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(c=t,n=i=null,u):c},u.sortGroups=function(t){return arguments.length?(s=t,n=i=null,u):s},u.sortSubgroups=function(t){return arguments.length?(o=t,n=null,u):o},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},d3.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var a=e.cx-t.x,s=e.cy-t.y,o=1/Math.sqrt(a*a+s*s);if(v>(r-n)*o){var l=e.charge*o*o;return t.px-=a*l,t.py-=s*l,!0}if(e.point&&isFinite(o)){var l=e.pointCharge*o*o;t.px-=a*l,t.py-=s*l}}return!e.charge}}function e(t){t.px=d3.event.x,t.py=d3.event.y,u.resume()}var n,i,a,s,l,u={},c=d3.dispatch("start","tick","end"),h=[1,1],d=.9,f=Xn,p=Gn,g=-30,m=.1,v=.8,y=[],b=[];return u.tick=function(){if((i*=.99)<.005)return c.end({type:"end",alpha:i=0}),!0;var e,n,r,o,u,f,p,v,x,w=y.length,C=b.length;for(n=0;C>n;++n)r=b[n],o=r.source,u=r.target,v=u.x-o.x,x=u.y-o.y,(f=v*v+x*x)&&(f=i*s[n]*((f=Math.sqrt(f))-a[n])/f,v*=f,x*=f,u.x-=v*(p=o.weight/(u.weight+o.weight)),u.y-=x*p,o.x+=v*(p=1-p),o.y+=x*p);if((p=i*m)&&(v=h[0]/2,x=h[1]/2,n=-1,p))for(;++n<w;)r=y[n],r.x+=(v-r.x)*p,r.y+=(x-r.y)*p;if(g)for(Yn(e=d3.geom.quadtree(y),i,l),n=-1;++n<w;)(r=y[n]).fixed||e.visit(t(r));for(n=-1;++n<w;)r=y[n],r.fixed?(r.x=r.px,r.y=r.py):(r.x-=(r.px-(r.px=r.x))*d,r.y-=(r.py-(r.py=r.y))*d);c.tick({type:"tick",alpha:i})},u.nodes=function(t){return arguments.length?(y=t,u):y},u.links=function(t){return arguments.length?(b=t,u):b},u.size=function(t){return arguments.length?(h=t,u):h},u.linkDistance=function(t){return arguments.length?(f=o(t),u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(p=o(t),u):p},u.friction=function(t){return arguments.length?(d=t,u):d},u.charge=function(t){return arguments.length?(g="function"==typeof t?t:+t,u):g},u.gravity=function(t){return arguments.length?(m=t,u):m},u.theta=function(t){return arguments.length?(v=t,u):v},u.alpha=function(t){return arguments.length?(i?i=t>0?t:0:t>0&&(c.start({type:"start",alpha:i=t}),d3.timer(u.tick)),u):i},u.start=function(){function t(t,i){for(var r,a=e(n),s=-1,o=a.length;++s<o;)if(!isNaN(r=a[s][t]))return r;return Math.random()*i}function e(){if(!r){for(r=[],i=0;c>i;++i)r[i]=[];for(i=0;d>i;++i){var t=b[i];r[t.source.index].push(t.target),r[t.target.index].push(t.source)}}return r[n]}var n,i,r,o,c=y.length,d=b.length,m=h[0],v=h[1];for(n=0;c>n;++n)(o=y[n]).index=n,o.weight=0;for(a=[],s=[],n=0;d>n;++n)o=b[n],"number"==typeof o.source&&(o.source=y[o.source]),"number"==typeof o.target&&(o.target=y[o.target]),a[n]=f.call(this,o,n),s[n]=p.call(this,o,n),++o.source.weight,++o.target.weight;for(n=0;c>n;++n)o=y[n],isNaN(o.x)&&(o.x=t("x",m)),isNaN(o.y)&&(o.y=t("y",v)),isNaN(o.px)&&(o.px=o.x),isNaN(o.py)&&(o.py=o.y);if(l=[],"function"==typeof g)for(n=0;c>n;++n)l[n]=+g.call(this,y[n],n);else for(n=0;c>n;++n)l[n]=g;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){n||(n=d3.behavior.drag().origin(r).on("dragstart",qn).on("drag",e).on("dragend",Wn)),this.on("mouseover.force",Vn).on("mouseout.force",Un).call(n)},d3.rebind(u,c,"on")},d3.layout.partition=function(){function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(s=a.length)){var s,o,l,u=-1;for(i=e.value?i/e.value:0;++u<s;)t(o=a[u],n,l=o.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,e(n[a]));return 1+i}function n(n,a){var s=i.call(this,n,a);return t(s[0],0,r[0],r[1]/e(s[0])),s}var i=d3.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},oi(n,i)},d3.layout.pie=function(){function t(a){var s=a.map(function(n,i){return+e.call(t,n,i)}),o=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-i)/d3.sum(s),u=d3.range(a.length);null!=n&&u.sort(n===ls?function(t,e){return s[e]-s[t]}:function(t,e){return n(a[t],a[e])});var c=[];return u.forEach(function(t){var e;c[t]={data:a[t],value:e=s[t],startAngle:o,endAngle:o+=e*l}}),c}var e=Number,n=ls,i=0,r=2*Math.PI;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var ls={};d3.layout.stack=function(){function t(r,l){var u=r.map(function(n,i){return e.call(t,n,i)}),c=u.map(function(e){return e.map(function(e,n){return[s.call(t,e,n),o.call(t,e,n)]})}),h=n.call(t,c,l);u=d3.permute(u,h),c=d3.permute(c,h);var d,f,p,g=i.call(t,c,l),m=u.length,v=u[0].length;for(f=0;v>f;++f)for(a.call(t,u[0][f],p=g[f],c[0][f][1]),d=1;m>d;++d)a.call(t,u[d][f],p+=c[d-1][f][1],c[d][f][1]);return r}var e=r,n=Zn,i=ti,a=Kn,s=Qn,o=Jn;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:us.get(e)||Zn,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:cs.get(e)||ti,t):i},t.x=function(e){return arguments.length?(s=e,t):s},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(a=e,t):a},t};var us=d3.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(ei),a=t.map(ni),s=d3.range(i).sort(function(t,e){return r[t]-r[e]}),o=0,l=0,u=[],c=[];for(e=0;i>e;++e)n=s[e],l>o?(o+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return d3.range(t.length).reverse()},"default":Zn}),cs=d3.map({silhouette:function(t){var e,n,i,r=t.length,a=t[0].length,s=[],o=0,l=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>o&&(o=i),s.push(i)}for(n=0;a>n;++n)l[n]=(o-s[n])/2;return l},wiggle:function(t){var e,n,i,r,a,s,o,l,u,c=t.length,h=t[0],d=h.length,f=[];for(f[0]=l=u=0,n=1;d>n;++n){for(e=0,r=0;c>e;++e)r+=t[e][n][1];for(e=0,a=0,o=h[n][0]-h[n-1][0];c>e;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*o);e>i;++i)s+=(t[i][n][1]-t[i][n-1][1])/o;a+=s*t[e][n][1]}f[n]=l-=r?a/r*o:0,u>l&&(u=l)}for(n=0;d>n;++n)f[n]-=u;return f},expand:function(t){var e,n,i,r=t.length,a=t[0].length,s=1/r,o=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=s}for(n=0;a>n;++n)o[n]=0;return o},zero:ti});d3.layout.histogram=function(){function t(t,a){for(var s,o,l=[],u=t.map(n,this),c=i.call(this,u,a),h=r.call(this,c,u,a),a=-1,d=u.length,f=h.length-1,p=e?1:1/d;++a<f;)s=l[a]=[],s.dx=h[a+1]-(s.x=h[a]),s.y=0;if(f>0)for(a=-1;++a<d;)o=u[a],o>=c[0]&&o<=c[1]&&(s=l[d3.bisect(h,o,1,f)-1],s.y+=p,s.push(t[a]));return l}var e=!0,n=Number,i=si,r=ri;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=o(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return ai(t,e)}:o(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},d3.layout.hierarchy=function(){function t(e,s,o){var l=r.call(n,e,s),u=hs?e:{data:e};if(u.depth=s,o.push(u),l&&(c=l.length)){for(var c,h,d=-1,f=u.children=[],p=0,g=s+1;++d<c;)h=t(l[d],g,o),h.parent=u,f.push(h),p+=h.value;i&&f.sort(i),a&&(u.value=p)}else a&&(u.value=+a.call(n,e,s)||0);return u}function e(t,i){var r=t.children,s=0;if(r&&(o=r.length))for(var o,l=-1,u=i+1;++l<o;)s+=e(r[l],u);else a&&(s=+a.call(n,hs?t:t.data,i)||0);return a&&(t.value=s),s}function n(e){var n=[];return t(e,0,n),n}var i=ci,r=li,a=ui;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(t){return arguments.length?(a=t,n):a},n.revalue=function(t){return e(t,0),t},n};var hs=!1;d3.layout.pack=function(){function t(t,r){var a=e.call(this,t,r),s=a[0];s.x=0,s.y=0,Ri(s,function(t){t.r=Math.sqrt(t.value)}),Ri(s,mi);var o=i[0],l=i[1],u=Math.max(2*s.r/o,2*s.r/l);if(n>0){var c=n*u/2;Ri(s,function(t){t.r+=c}),Ri(s,mi),Ri(s,function(t){t.r-=c}),u=Math.max(2*s.r/o,2*s.r/l)}return bi(s,o/2,l/2,1/u),a}var e=d3.layout.hierarchy().sort(di),n=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.padding=function(e){return arguments.length?(n=+e,t):n},oi(t,e)},d3.layout.cluster=function(){function t(t,r){var a,s=e.call(this,t,r),o=s[0],l=0;Ri(o,function(t){var e=t.children;e&&e.length?(t.x=Ci(e),t.y=wi(e)):(t.x=a?l+=n(t,a):0,t.y=0,a=t)});var u=_i(o),c=Si(o),h=u.x-n(u,c)/2,d=c.x+n(c,u)/2;return Ri(o,function(t){t.x=(t.x-h)/(d-h)*i[0],t.y=(1-(o.y?t.y/o.y:1))*i[1]}),s}var e=d3.layout.hierarchy().sort(null).value(null),n=Ti,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},oi(t,e)},d3.layout.tree=function(){function t(t,r){function a(t,e){var i=t.children,r=t._tree;if(i&&(s=i.length)){for(var s,l,u,c=i[0],h=c,d=-1;++d<s;)u=i[d],a(u,l),h=o(u,l,h),l=u;Ii(t);var f=.5*(c._tree.prelim+u._tree.prelim);e?(r.prelim=e._tree.prelim+n(t,e),r.mod=r.prelim-f):r.prelim=f}else e&&(r.prelim=e._tree.prelim+n(t,e))}function s(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,r=-1;for(e+=t._tree.mod;++r<i;)s(n[r],e)}}function o(t,e,i){if(e){for(var r,a=t,s=t,o=e,l=t.parent.children[0],u=a._tree.mod,c=s._tree.mod,h=o._tree.mod,d=l._tree.mod;o=ki(o),a=Di(a),o&&a;)l=Di(l),s=ki(s),s._tree.ancestor=t,r=o._tree.prelim+h-a._tree.prelim-u+n(o,a),r>0&&(Pi(Oi(o,t,i),t,r),u+=r,c+=r),h+=o._tree.mod,u+=a._tree.mod,d+=l._tree.mod,c+=s._tree.mod;o&&!ki(s)&&(s._tree.thread=o,s._tree.mod+=h-c),a&&!Di(l)&&(l._tree.thread=a,l._tree.mod+=u-d,i=t)}return i}var l=e.call(this,t,r),u=l[0];Ri(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),a(u),s(u,-u._tree.prelim);var c=Mi(u,Ni),h=Mi(u,Ei),d=Mi(u,Ai),f=c.x-n(c,h)/2,p=h.x+n(h,c)/2,g=d.depth||1;return Ri(u,function(t){t.x=(t.x-f)/(p-f)*i[0],t.y=t.depth/g*i[1],delete t._tree}),l}var e=d3.layout.hierarchy().sort(null).value(null),n=Ti,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},oi(t,e)},d3.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var a=n.children;if(a&&a.length){var s,o,l,u=h(n),c=[],d=a.slice(),f=1/0,p=Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(s=d[l-1]),c.area+=s.area,(o=i(c,p))<=f?(d.pop(),f=o):(c.area-=c.pop().area,r(c,p,u,!1),p=Math.min(u.dx,u.dy),c.length=c.area=0,f=1/0);c.length&&(r(c,p,u,!0),c.length=c.area=0),a.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var a,s=h(e),o=i.slice(),l=[];for(t(o,s.dx*s.dy/e.value),l.area=0;a=o.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?s.dx:s.dy,s,!o.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,a=1/0,s=-1,o=t.length;++s<o;)(n=t[s].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*f/i,i/(e*a*f)):1/0}function r(t,e,n,i){var r,a=-1,s=t.length,o=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<s;)r=t[a],r.x=o,r.y=u,r.dy=c,o+=r.dx=Math.min(n.x+n.dx-o,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-o,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<s;)r=t[a],r.x=o,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(i){var r=s||o(i),a=r[0];return a.x=0,a.y=0,a.dx=u[0],a.dy=u[1],s&&o.revalue(a),t([a],a.dx*a.dy/a.value),(s?n:e)(a),d&&(s=r),r}var s,o=d3.layout.hierarchy(),l=Math.round,u=[1,1],c=null,h=Fi,d=!1,f=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(u=t,a):u},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?Fi(e):Li(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Li(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?Fi:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(l=t?Math.round:Number,a):l!=Number},a.sticky=function(t){return arguments.length?(d=t,s=null,a):d},a.ratio=function(t){return arguments.length?(f=t,a):f},oi(a,o)},d3.csv=Hi(",","text/csv"),d3.tsv=Hi("	","text/tab-separated-values"),d3.geo={};var ds=Math.PI/180;d3.geo.azimuthal=function(){function t(t){var e,i=t[0]*ds-n,u=t[1]*ds,c=Math.cos(i),h=Math.sin(i),d=Math.cos(u),f=Math.sin(u),p="orthographic"!==s?a*f+r*d*c:null,g="stereographic"===s?1/(1+p):"gnomonic"===s?1/p:"equidistant"===s?(e=Math.acos(p),e?e/Math.sin(e):0):"equalarea"===s?Math.sqrt(2/(1+p)):1,m=g*d*h,v=g*(a*d*c-r*f);return[o*m+l[0],o*v+l[1]]}var e,n,i,r,a,s="orthographic",o=200,l=[480,250];return t.invert=function(t){var e=(t[0]-l[0])/o,i=(t[1]-l[1])/o,u=Math.sqrt(e*e+i*i),c="stereographic"===s?2*Math.atan(u):"gnomonic"===s?Math.atan(u):"equidistant"===s?u:"equalarea"===s?2*Math.asin(.5*u):Math.asin(u),h=Math.sin(c),d=Math.cos(c);return[(n+Math.atan2(e*h,u*r*d+i*a*h))/ds,Math.asin(d*a-(u?i*h*r/u:0))/ds]},t.mode=function(e){return arguments.length?(s=e+"",t):s},t.origin=function(s){return arguments.length?(e=s,n=e[0]*ds,i=e[1]*ds,r=Math.cos(i),a=Math.sin(i),t):e},t.scale=function(e){return arguments.length?(o=+e,t):o},t.translate=function(e){return arguments.length?(l=[+e[0],+e[1]],t):l},t.origin([0,0])},d3.geo.albers=function(){function t(t){var e=i*(ds*t[0]-n),s=Math.sqrt(r-2*i*Math.sin(ds*t[1]))/i;return[l*s*Math.sin(e)+u[0],l*(s*Math.cos(e)-a)+u[1]]}function e(){var e=ds*o[0],l=ds*o[1],u=ds*s[1],c=Math.sin(e),h=Math.cos(e);return n=ds*s[0],i=.5*(c+Math.sin(l)),r=h*h+2*i*c,a=Math.sqrt(r-2*i*Math.sin(u))/i,t}var n,i,r,a,s=[-98,38],o=[29.5,45.5],l=1e3,u=[480,250];return t.invert=function(t){var e=(t[0]-u[0])/l,s=(t[1]-u[1])/l,o=a+s,c=Math.atan2(e,o),h=Math.sqrt(e*e+o*o);return[(n+c/i)/ds,Math.asin((r-h*h*i*i)/(2*i))/ds]},t.origin=function(t){return arguments.length?(s=[+t[0],+t[1]],e()):s},t.parallels=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o},t.scale=function(e){return arguments.length?(l=+e,t):l},t.translate=function(e){return arguments.length?(u=[+e[0],+e[1]],t):u},e()},d3.geo.albersUsa=function(){function t(t){var a=t[0],s=t[1];return(s>50?n:-140>a?i:21>s?r:e)(t)}var e=d3.geo.albers(),n=d3.geo.albers().origin([-160,60]).parallels([55,65]),i=d3.geo.albers().origin([-160,20]).parallels([8,18]),r=d3.geo.albers().origin([-60,10]).parallels([8,18]);return t.scale=function(a){return arguments.length?(e.scale(a),n.scale(.6*a),i.scale(a),r.scale(1.5*a),t.translate(e.translate())):e.scale()},t.translate=function(a){if(!arguments.length)return e.translate();var s=e.scale()/1e3,o=a[0],l=a[1];return e.translate(a),n.translate([o-400*s,l+170*s]),i.translate([o-190*s,l+200*s]),r.translate([o+580*s,l+430*s]),t},t.scale(e.scale())},d3.geo.bonne=function(){function t(t){var o=t[0]*ds-e,l=t[1]*ds-n;if(i){var u=r+i-l,c=o*Math.cos(l)/u;o=u*Math.sin(c),l=u*Math.cos(c)-r}else o*=Math.cos(l),l*=-1;return[a*o+s[0],a*l+s[1]]}var e,n,i,r,a=200,s=[480,250];return t.invert=function(t){var n=(t[0]-s[0])/a,o=(t[1]-s[1])/a;if(i){var l=r+o,u=Math.sqrt(n*n+l*l);o=r+i-u,n=e+u*Math.atan2(n,l)/Math.cos(o)}else o*=-1,n/=Math.cos(o);return[n/ds,o/ds]},t.parallel=function(e){return arguments.length?(r=1/Math.tan(i=e*ds),t):i/ds},t.origin=function(i){return arguments.length?(e=i[0]*ds,n=i[1]*ds,t):[e/ds,n/ds]},t.scale=function(e){return arguments.length?(a=+e,t):a},t.translate=function(e){return arguments.length?(s=[+e[0],+e[1]],t):s},t.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function t(t){var i=t[0]/360,r=-t[1]/360;return[e*i+n[0],e*r+n[1]]}var e=500,n=[480,250];return t.invert=function(t){var i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return[360*i,-360*r]},t.scale=function(n){return arguments.length?(e=+n,t):e},t.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],t):n},t},d3.geo.mercator=function(){function t(t){var i=t[0]/360,r=-(Math.log(Math.tan(Math.PI/4+t[1]*ds/2))/ds)/360;return[e*i+n[0],e*Math.max(-.5,Math.min(.5,r))+n[1]]}var e=500,n=[480,250];return t.invert=function(t){var i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return[360*i,2*Math.atan(Math.exp(-360*r*ds))/ds-90]},t.scale=function(n){return arguments.length?(e=+n,t):e},t.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],t):n},t},d3.geo.path=function(){function t(t){"function"==typeof a&&(s=Bi(a.apply(this,arguments))),u(t);var e=l.length?l.join(""):null;return l=[],e}function e(t){return o(t).join(",")}function n(t){for(var e=r(t[0]),n=0,i=t.length;++n<i;)e-=r(t[n]);return e}function i(t){for(var e=d3.geom.polygon(t[0].map(o)),n=e.area(),i=e.centroid(0>n?(n*=-1,1):-1),r=i[0],a=i[1],s=n,l=0,u=t.length;++l<u;)e=d3.geom.polygon(t[l].map(o)),n=e.area(),i=e.centroid(0>n?(n*=-1,1):-1),r-=i[0],a-=i[1],s-=n;return[r,a,6*s]}function r(t){return Math.abs(d3.geom.polygon(t.map(o)).area())}var a=4.5,s=Bi(a),o=d3.geo.albersUsa(),l=[],u=ji({FeatureCollection:function(t){for(var e=t.features,n=-1,i=e.length;++n<i;)l.push(u(e[n].geometry))},Feature:function(t){u(t.geometry)},Point:function(t){l.push("M",e(t.coordinates),s)},MultiPoint:function(t){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)l.push("M",e(n[i]),s)},LineString:function(t){var n=t.coordinates,i=-1,r=n.length;for(l.push("M");++i<r;)l.push(e(n[i]),"L");l.pop()},MultiLineString:function(t){for(var n,i,r,a=t.coordinates,s=-1,o=a.length;++s<o;){for(n=a[s],i=-1,r=n.length,l.push("M");++i<r;)l.push(e(n[i]),"L");l.pop()}},Polygon:function(t){for(var n,i,r,a=t.coordinates,s=-1,o=a.length;++s<o;)if(n=a[s],i=-1,(r=n.length-1)>0){for(l.push("M");++i<r;)l.push(e(n[i]),"L");l[l.length-1]="Z"}},MultiPolygon:function(t){for(var n,i,r,a,s,o,u=t.coordinates,c=-1,h=u.length;++c<h;)for(n=u[c],i=-1,r=n.length;++i<r;)if(a=n[i],s=-1,(o=a.length-1)>0){for(l.push("M");++s<o;)l.push(e(a[s]),"L");l[l.length-1]="Z"}},GeometryCollection:function(t){for(var e=t.geometries,n=-1,i=e.length;++n<i;)l.push(u(e[n]))}}),c=t.area=ji({FeatureCollection:function(t){for(var e=0,n=t.features,i=-1,r=n.length;++i<r;)e+=c(n[i]);return e},Feature:function(t){return c(t.geometry)},Polygon:function(t){return n(t.coordinates)},MultiPolygon:function(t){for(var e=0,i=t.coordinates,r=-1,a=i.length;++r<a;)e+=n(i[r]);return e},GeometryCollection:function(t){for(var e=0,n=t.geometries,i=-1,r=n.length;++i<r;)e+=c(n[i]);return e}},0),h=t.centroid=ji({Feature:function(t){return h(t.geometry)},Polygon:function(t){var e=i(t.coordinates);return[e[0]/e[2],e[1]/e[2]]},MultiPolygon:function(t){for(var e,n=t.coordinates,r=0,a=0,s=0,o=-1,l=n.length;++o<l;)e=i(n[o]),r+=e[0],a+=e[1],s+=e[2];return[r/s,a/s]}});return t.projection=function(e){return o=e,t},t.pointRadius=function(e){return"function"==typeof e?a=e:(a=+e,s=Bi(a)),t},t},d3.geo.bounds=function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;return zi(t,function(t,a){e>t&&(e=t),t>i&&(i=t),n>a&&(n=a),a>r&&(r=a)}),[[e,n],[i,r]]};var fs={Feature:$i,FeatureCollection:qi,GeometryCollection:Wi,LineString:Vi,MultiLineString:Ui,MultiPoint:Vi,MultiPolygon:Yi,Point:Xi,Polygon:Gi};d3.geo.circle=function(){function t(){}function e(t){return l.distance(t)<o}function n(t){for(var e,n,r,a,s,u=-1,c=t.length,h=[];++u<c;)s=l.distance(r=t[u]),o>s?(n&&h.push(Zi(n,r)((a-o)/(a-s))),h.push(r),e=n=null):(n=r,!e&&h.length&&(h.push(Zi(h[h.length-1],n)((o-a)/(s-a))),e=n)),a=s;return e=t[0],n=h[0],n&&r[0]===e[0]&&r[1]===e[1]&&(r[0]!==n[0]||r[1]!==n[1])&&h.push(n),i(h)}function i(t){for(var e,n,i,r=0,a=t.length,s=a?[t[0]]:t,o=l.source();++r<a;)for(i=l.source(t[r-1])(t[r]).coordinates,e=0,n=i.length;++e<n;)s.push(i[e]);return l.source(o),s}var a=[0,0],s=89.99,o=s*ds,l=d3.geo.greatArc().source(a).target(r);t.clip=function(t){return"function"==typeof a&&l.source(a.apply(this,arguments)),u(t)||null};var u=ji({FeatureCollection:function(t){var e=t.features.map(u).filter(r);return e&&(t=Object.create(t),t.features=e,t)},Feature:function(t){var e=u(t.geometry);return e&&(t=Object.create(t),t.geometry=e,t)},Point:function(t){return e(t.coordinates)&&t},MultiPoint:function(t){var n=t.coordinates.filter(e);return n.length&&{type:t.type,coordinates:n}},LineString:function(t){var e=n(t.coordinates);return e.length&&(t=Object.create(t),t.coordinates=e,t)},MultiLineString:function(t){var e=t.coordinates.map(n).filter(function(t){return t.length});return e.length&&(t=Object.create(t),t.coordinates=e,t)},Polygon:function(t){var e=t.coordinates.map(n);return e[0].length&&(t=Object.create(t),t.coordinates=e,t)},MultiPolygon:function(t){var e=t.coordinates.map(function(t){return t.map(n)}).filter(function(t){return t[0].length});return e.length&&(t=Object.create(t),t.coordinates=e,t)},GeometryCollection:function(t){var e=t.geometries.map(u).filter(r);return e.length&&(t=Object.create(t),t.geometries=e,t)}});return t.origin=function(e){return arguments.length?(a=e,"function"!=typeof a&&l.source(a),t):a},t.angle=function(e){return arguments.length?(o=(s=+e)*ds,t):s},d3.rebind(t,l,"precision")},d3.geo.greatArc=function(){function t(){for(var i=t.distance.apply(this,arguments),r=0,o=a/i,l=[e];(r+=o)<1;)l.push(s(r));return l.push(n),{type:"LineString",coordinates:l}}var e,n,i=Qi,r=Ji,a=6*ds,s=Ki();return t.distance=function(){return"function"==typeof i&&s.source(e=i.apply(this,arguments)),"function"==typeof r&&s.target(n=r.apply(this,arguments)),s.distance()},t.source=function(n){return arguments.length?(i=n,"function"!=typeof i&&s.source(e=i),t):i},t.target=function(e){return arguments.length?(r=e,"function"!=typeof r&&s.target(n=r),t):r},t.precision=function(e){return arguments.length?(a=e*ds,t):a/ds},t},d3.geo.greatCircle=d3.geo.circle,d3.geom={},d3.geom.contour=function(t,e){var n=e||tr(t),i=[],r=n[0],a=n[1],s=0,o=0,l=0/0,u=0/0,c=0;do c=0,t(r-1,a-1)&&(c+=1),t(r,a-1)&&(c+=2),t(r-1,a)&&(c+=4),t(r,a)&&(c+=8),6===c?(s=-1===u?-1:1,o=0):9===c?(s=0,o=1===l?-1:1):(s=ps[c],o=gs[c]),s!=l&&o!=u&&(i.push([r,a]),l=s,u=o),r+=s,a+=o;while(n[0]!=r||n[1]!=a);return i};var ps=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,0/0],gs=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,0/0];d3.geom.hull=function(t){if(t.length<3)return[];var e,n,i,r,a,s,o,l,u,c,h=t.length,d=h-1,f=[],p=[],g=0;for(e=1;h>e;++e)t[e][1]<t[g][1]?g=e:t[e][1]==t[g][1]&&(g=t[e][0]<t[g][0]?e:g);for(e=0;h>e;++e)e!==g&&(r=t[e][1]-t[g][1],i=t[e][0]-t[g][0],f.push({angle:Math.atan2(r,i),index:e}));for(f.sort(function(t,e){return t.angle-e.angle}),u=f[0].angle,l=f[0].index,o=0,e=1;d>e;++e)n=f[e].index,u==f[e].angle?(i=t[l][0]-t[g][0],r=t[l][1]-t[g][1],a=t[n][0]-t[g][0],s=t[n][1]-t[g][1],i*i+r*r>=a*a+s*s?f[e].index=-1:(f[o].index=-1,u=f[e].angle,o=e,l=n)):(u=f[e].angle,o=e,l=n);for(p.push(g),e=0,n=0;2>e;++n)-1!==f[n].index&&(p.push(f[n].index),e++);for(c=p.length;d>n;++n)if(-1!==f[n].index){for(;!er(p[c-2],p[c-1],f[n].index,t);)--c;p[c++]=f[n].index}var m=[];for(e=0;c>e;++e)m.push(t[p[e]]);return m},d3.geom.polygon=function(t){return t.area=function(){for(var e=0,n=t.length,i=t[n-1][0]*t[0][1],r=t[n-1][1]*t[0][0];++e<n;)i+=t[e-1][0]*t[e][1],r+=t[e-1][1]*t[e][0];return.5*(r-i)},t.centroid=function(e){var n,i,r=-1,a=t.length,s=0,o=0,l=t[a-1];for(arguments.length||(e=-1/(6*t.area()));++r<a;)n=l,l=t[r],i=n[0]*l[1]-l[0]*n[1],s+=(n[0]+l[0])*i,o+=(n[1]+l[1])*i;return[s*e,o*e]},t.clip=function(e){for(var n,i,r,a,s,o,l=-1,u=t.length,c=t[u-1];++l<u;){for(n=e.slice(),e.length=0,a=t[l],s=n[(r=n.length)-1],i=-1;++i<r;)o=n[i],nr(o,c,a)?(nr(s,c,a)||e.push(ir(s,o,c,a)),e.push(o)):nr(s,c,a)&&e.push(ir(s,o,c,a)),s=o;c=a}return e},t},d3.geom.voronoi=function(t){var e=t.map(function(){return[]});return rr(t,function(t){var n,i,r,a,s,o;1===t.a&&t.b>=0?(n=t.ep.r,i=t.ep.l):(n=t.ep.l,i=t.ep.r),1===t.a?(s=n?n.y:-1e6,r=t.c-t.b*s,o=i?i.y:1e6,a=t.c-t.b*o):(r=n?n.x:-1e6,s=t.c-t.a*r,a=i?i.x:1e6,o=t.c-t.a*a);var l=[r,s],u=[a,o];e[t.region.l.index].push(l,u),e[t.region.r.index].push(l,u)}),e.map(function(e,n){var i=t[n][0],r=t[n][1];return e.forEach(function(t){t.angle=Math.atan2(t[0]-i,t[1]-r)}),e.sort(function(t,e){return t.angle-e.angle}).filter(function(t,n){return!n||t.angle-e[n-1].angle>1e-10})})};var ms={l:"r",r:"l"};d3.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return rr(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,i){var r=t[i],a=r[0],s=r[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-a,t[1]-s)}),e.sort(function(t,e){return t.angle-e.angle});for(var o=0,l=e.length-1;l>o;o++)n.push([r,e[o],e[o+1]])}),n},d3.geom.quadtree=function(t,e,n,i,r){function a(t,e,n,i,r,a){if(!isNaN(e.x)&&!isNaN(e.y))if(t.leaf){var o=t.point;o?Math.abs(o.x-e.x)+Math.abs(o.y-e.y)<.01?s(t,e,n,i,r,a):(t.point=null,s(t,o,n,i,r,a),s(t,e,n,i,r,a)):t.point=e}else s(t,e,n,i,r,a)}function s(t,e,n,i,r,s){var o=.5*(n+r),l=.5*(i+s),u=e.x>=o,c=e.y>=l,h=(c<<1)+u;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]=ar()),u?n=o:r=o,c?i=l:s=l,a(t,e,n,i,r,s)}var o,l=-1,u=t.length;if(u&&isNaN(t[0].x)&&(t=t.map(or)),arguments.length<5)if(3===arguments.length)r=i=n,n=e;else{for(e=n=1/0,i=r=-1/0;++l<u;)o=t[l],o.x<e&&(e=o.x),o.y<n&&(n=o.y),o.x>i&&(i=o.x),o.y>r&&(r=o.y);var c=i-e,h=r-n;c>h?r=n+c:i=e+h}var d=ar();return d.add=function(t){a(d,t,e,n,i,r)},d.visit=function(t){sr(t,d,e,n,i,r)},t.forEach(d.add),d},d3.time={};var vs=Date,ys=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];lr.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){bs.setUTCDate.apply(this._,arguments)},setDay:function(){bs.setUTCDay.apply(this._,arguments)},setFullYear:function(){bs.setUTCFullYear.apply(this._,arguments)},setHours:function(){bs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){bs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){bs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){bs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){bs.setUTCSeconds.apply(this._,arguments)},setTime:function(){bs.setTime.apply(this._,arguments)}};var bs=Date.prototype,xs="%a %b %e %H:%M:%S %Y",ws="%m/%d/%y",Cs="%H:%M:%S",_s=ys,Ss=_s.map(ur),Ts=["January","February","March","April","May","June","July","August","September","October","November","December"],Ds=Ts.map(ur);d3.time.format=function(t){function e(e){for(var i,r,a=[],s=-1,o=0;++s<n;)37==t.charCodeAt(s)&&(a.push(t.substring(o,s),(r=Ls[i=t.charAt(++s)])?r(e):i),o=s+1);return a.push(t.substring(o,s)),a.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},i=cr(n,t,e,0);if(i!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=new vs;return r.setFullYear(n.y,n.m,n.d),r.setHours(n.H,n.M,n.S,n.L),r},e.toString=function(){return t},e};var ks=d3.format("02d"),Ms=d3.format("03d"),Es=d3.format("04d"),Ns=d3.format("2d"),As=hr(_s),Rs=hr(Ss),Is=hr(Ts),Ps=dr(Ts),Os=hr(Ds),Fs=dr(Ds),Ls={a:function(t){return Ss[t.getDay()]
},A:function(t){return _s[t.getDay()]},b:function(t){return Ds[t.getMonth()]},B:function(t){return Ts[t.getMonth()]},c:d3.time.format(xs),d:function(t){return ks(t.getDate())},e:function(t){return Ns(t.getDate())},H:function(t){return ks(t.getHours())},I:function(t){return ks(t.getHours()%12||12)},j:function(t){return Ms(1+d3.time.dayOfYear(t))},L:function(t){return Ms(t.getMilliseconds())},m:function(t){return ks(t.getMonth()+1)},M:function(t){return ks(t.getMinutes())},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t){return ks(t.getSeconds())},U:function(t){return ks(d3.time.sundayOfYear(t))},w:function(t){return t.getDay()},W:function(t){return ks(d3.time.mondayOfYear(t))},x:d3.time.format(ws),X:d3.time.format(Cs),y:function(t){return ks(t.getFullYear()%100)},Y:function(t){return Es(t.getFullYear()%1e4)},Z:Nr,"%":function(){return"%"}},Hs={a:fr,A:pr,b:gr,B:mr,c:vr,d:Sr,e:Sr,H:Tr,I:Tr,L:Mr,m:_r,M:Dr,p:Er,S:kr,x:yr,X:br,y:wr,Y:xr},js=/^\s*\d+/,Bs=d3.map({am:0,pm:1});d3.time.format.utc=function(t){function e(t){try{vs=lr;var e=new vs;return e._=t,n(e)}finally{vs=Date}}var n=d3.time.format(t);return e.parse=function(t){try{vs=lr;var e=n.parse(t);return e&&e._}finally{vs=Date}},e.toString=n.toString,e};var zs=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?Ar:zs,Ar.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ar.toString=zs.toString,d3.time.second=Rr(function(t){return new vs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),d3.time.seconds=d3.time.second.range,d3.time.seconds.utc=d3.time.second.utc.range,d3.time.minute=Rr(function(t){return new vs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),d3.time.minutes=d3.time.minute.range,d3.time.minutes.utc=d3.time.minute.utc.range,d3.time.hour=Rr(function(t){var e=t.getTimezoneOffset()/60;return new vs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),d3.time.hours=d3.time.hour.range,d3.time.hours.utc=d3.time.hour.utc.range,d3.time.day=Rr(function(t){var e=new vs(1970,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),d3.time.days=d3.time.day.range,d3.time.days.utc=d3.time.day.utc.range,d3.time.dayOfYear=function(t){var e=d3.time.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},ys.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=d3.time[t]=Rr(function(t){return(t=d3.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});d3.time[t+"s"]=n.range,d3.time[t+"s"].utc=n.utc.range,d3.time[t+"OfYear"]=function(t){var n=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(n+e)%7)/7)}}),d3.time.week=d3.time.sunday,d3.time.weeks=d3.time.sunday.range,d3.time.weeks.utc=d3.time.sunday.utc.range,d3.time.weekOfYear=d3.time.sundayOfYear,d3.time.month=Rr(function(t){return t=d3.time.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),d3.time.months=d3.time.month.range,d3.time.months.utc=d3.time.month.utc.range,d3.time.year=Rr(function(t){return t=d3.time.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),d3.time.years=d3.time.year.range,d3.time.years.utc=d3.time.year.utc.range;var $s=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],qs=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],Ws=[[d3.time.format("%Y"),function(){return!0}],[d3.time.format("%B"),function(t){return t.getMonth()}],[d3.time.format("%b %d"),function(t){return 1!=t.getDate()}],[d3.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[d3.time.format("%I %p"),function(t){return t.getHours()}],[d3.time.format("%I:%M"),function(t){return t.getMinutes()}],[d3.time.format(":%S"),function(t){return t.getSeconds()}],[d3.time.format(".%L"),function(t){return t.getMilliseconds()}]],Vs=d3.scale.linear(),Us=Lr(Ws);qs.year=function(t,e){return Vs.domain(t.map(jr)).ticks(e).map(Hr)},d3.time.scale=function(){return Pr(d3.scale.linear(),qs,Us)};var Ys=qs.map(function(t){return[t[0].utc,t[1]]}),Xs=[[d3.time.format.utc("%Y"),function(){return!0}],[d3.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[d3.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[d3.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]],Gs=Lr(Xs);Ys.year=function(t,e){return Vs.domain(t.map(zr)).ticks(e).map(Br)},d3.time.scale.utc=function(){return Pr(d3.scale.linear(),Ys,Gs)}}(),function(){function t(t){return _.chain(_.range(t,10)).reverse().map(function(t){return'g[data-index="'+t+'"]'}).value().join(", ")}function e(t,e){var n=t.getAttribute("class");return(null!==n?n.replace(/color\d+/g,""):"")+" color"+e}function n(t,e){return _.chain(t).pluck("data").flatten().pluck(e).uniq().filter(function(t){return void 0!==t&&null!==t}).value().sort(d3.ascending)}function i(t,e,i,r){r=r||g;var a=n(t,e);return d3.scale.ordinal().domain(a).rangeRoundBands(i,r)}function r(t,e){return d3.scale.linear().domain(t).nice().rangeRound(e)}function a(t,e){return d3.scale.pow().exponent(.65).domain(t).nice().rangeRound(e)}function s(t,e){return d3.time.scale().domain(_.map(t,function(t){return new Date(t)})).range(e)}function o(t){var e,n,i=t[0],r=t[1];return i===r&&(n=Math.max(Math.round(i/10),4),i-=n,r+=n),e=r-i,i=i?i-e/10:i,i=t[0]>0?Math.max(i,0):i,r=r?r+e/10:r,r=t[1]<0?Math.min(r,0):r,[i,r]}function l(t,e,n,i){var r,a=_.chain(e).pluck("data").flatten().value();return r={x:d3.extent(a,function(t){return t.x}),y:d3.extent(a,function(t){return t.y})},_.each([n,i],function(e,n){var i,s=n?"y":"x";r[s]=d3.extent(a,function(t){return t[s]}),"ordinal"!==e&&_.each([s+"Min",s+"Max"],function(n,a){"time"!==e&&(i=o(r[s])),r[s][a]=t.hasOwnProperty(n)&&null!==t[n]?t[n]:"time"!==e?i[a]:r[s][a]})}),r}function u(t,e,n,o){var u=t._options,c=l(u,e,n,o),h={},d=[u.axisPaddingLeft,t._width],f=[t._height,u.axisPaddingTop];return _.each([n,o],function(t,n){var o=0===n?"x":"y",l=0===n?d:f;switch(t){case"ordinal":h[o]=i(e,o,l);break;case"linear":h[o]=r(c[o],l,o);break;case"exponential":h[o]=a(c[o],l,o);break;case"time":h[o]=s(c[o],l)}}),h}function c(){var t=document;return!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function h(t,e,n,i){var r,a=this;return a._options=i=_.defaults(i||{},v),c()===!1?i.unsupported(n):(a._selector=n,a._container=d3.select(n),a._drawSvg(),e=_.clone(e),t&&!e.type&&(e.type=t),a.setData(e),d3.select(window).on("resize.for."+n,function(){r&&clearTimeout(r),r=setTimeout(function(){r=null,a._resize()},500)}),void 0)}var h,d={},f={},p={};(function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,a=Function.prototype,s=i.push,o=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,h=i.forEach,d=i.map,f=i.reduce,p=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,x=Array.isArray,w=Object.keys,C=a.bind,_=function(t){return t instanceof _?t:this instanceof _?(this._wrapped=t,void 0):new _(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):t._=_,_.VERSION="1.4.3";var S=_.each=_.forEach=function(t,e,i){if(null!=t)if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,a=t.length;a>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s in t)if(_.has(t,s)&&e.call(i,t[s],s,t)===n)return};_.map=_.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(S(t,function(t,r,a){i[i.length]=e.call(n,t,r,a)}),i)};var T="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=_.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(S(t,function(t,a,s){r?n=e.call(i,n,t,a,s):(n=t,r=!0)}),!r)throw new TypeError(T);return n},_.reduceRight=_.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=_.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var a=t.length;if(a!==+a){var s=_.keys(t);a=s.length}if(S(t,function(o,l,u){l=s?s[--a]:--a,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError(T);return n},_.find=_.detect=function(t,e,n){var i;return D(t,function(t,r,a){return e.call(n,t,r,a)?(i=t,!0):void 0}),i},_.filter=_.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(S(t,function(t,r,a){e.call(n,t,r,a)&&(i[i.length]=t)}),i)},_.reject=function(t,e,n){return _.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},_.every=_.all=function(t,e,i){e||(e=_.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,i):(S(t,function(t,a,s){return(r=r&&e.call(i,t,a,s))?void 0:n}),!!r)};var D=_.some=_.any=function(t,e,i){e||(e=_.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(S(t,function(t,a,s){return r||(r=e.call(i,t,a,s))?n:void 0}),!!r)};_.contains=_.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):D(t,function(t){return t===e})},_.invoke=function(t,e){var n=o.call(arguments,2);return _.map(t,function(t){return(_.isFunction(e)?e:t[e]).apply(t,n)})},_.pluck=function(t,e){return _.map(t,function(t){return t[e]})},_.where=function(t,e){return _.isEmpty(e)?[]:_.filter(t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},_.max=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&_.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return S(t,function(t,r,a){var s=e?e.call(n,t,r,a):t;s>=i.computed&&(i={value:t,computed:s})}),i.value},_.min=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&_.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return S(t,function(t,r,a){var s=e?e.call(n,t,r,a):t;i.computed>s&&(i={value:t,computed:s})}),i.value},_.shuffle=function(t){var e,n=0,i=[];return S(t,function(t){e=_.random(n++),i[n-1]=i[e],i[e]=t}),i};var k=function(t){return _.isFunction(t)?t:function(e){return e[t]}};_.sortBy=function(t,e,n){var i=k(e);return _.pluck(_.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var M=function(t,e,n,i){var r={},a=k(e||_.identity);return S(t,function(e,s){var o=a.call(n,e,s,t);i(r,o,e)}),r};_.groupBy=function(t,e,n){return M(t,e,n,function(t,e,n){(_.has(t,e)?t[e]:t[e]=[]).push(n)})},_.countBy=function(t,e,n){return M(t,e,n,function(t,e){_.has(t,e)||(t[e]=0),t[e]++})},_.sortedIndex=function(t,e,n,i){n=null==n?_.identity:k(n);for(var r=n.call(i,e),a=0,s=t.length;s>a;){var o=a+s>>>1;r>n.call(i,t[o])?a=o+1:s=o}return a},_.toArray=function(t){return t?_.isArray(t)?o.call(t):t.length===+t.length?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:t.length===+t.length?t.length:_.keys(t).length},_.first=_.head=_.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:o.call(t,0,e)},_.initial=function(t,e,n){return o.call(t,0,t.length-(null==e||n?1:e))},_.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},_.rest=_.tail=_.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},_.compact=function(t){return _.filter(t,_.identity)};var E=function(t,e,n){return S(t,function(t){_.isArray(t)?e?s.apply(n,t):E(t,e,n):n.push(t)}),n};_.flatten=function(t,e){return E(t,e,[])},_.without=function(t){return _.difference(t,o.call(arguments,1))},_.uniq=_.unique=function(t,e,n,i){_.isFunction(e)&&(i=n,n=e,e=!1);var r=n?_.map(t,n,i):t,a=[],s=[];return S(r,function(n,i){(e?i&&s[s.length-1]===n:_.contains(s,n))||(s.push(n),a.push(t[i]))}),a},_.union=function(){return _.uniq(l.apply(i,arguments))},_.intersection=function(t){var e=o.call(arguments,1);return _.filter(_.uniq(t),function(t){return _.every(e,function(e){return _.indexOf(e,t)>=0})})},_.difference=function(t){var e=l.apply(i,o.call(arguments,1));return _.filter(t,function(t){return!_.contains(e,t)})},_.zip=function(){for(var t=o.call(arguments),e=_.max(_.pluck(t,"length")),n=Array(e),i=0;e>i;i++)n[i]=_.pluck(t,""+i);return n},_.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},_.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=_.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},_.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},_.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,a=Array(i);i>r;)a[r++]=t,t+=n;return a};var N=function(){};_.bind=function(t,e){var n,i;if(t.bind===C&&C)return C.apply(t,o.call(arguments,1));if(!_.isFunction(t))throw new TypeError;return n=o.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(o.call(arguments)));N.prototype=t.prototype;var r=new N;N.prototype=null;var a=t.apply(r,n.concat(o.call(arguments)));return Object(a)===a?a:r}},_.bindAll=function(t){var e=o.call(arguments,1);return 0==e.length&&(e=_.functions(t)),S(e,function(e){t[e]=_.bind(t[e],t)}),t},_.memoize=function(t,e){var n={};return e||(e=_.identity),function(){var i=e.apply(this,arguments);return _.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},_.delay=function(t,e){var n=o.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},_.defer=function(t){return _.delay.apply(_,[t,1].concat(o.call(arguments,1)))},_.throttle=function(t,e){var n,i,r,a,s=0,o=function(){s=new Date,r=null,a=t.apply(n,i)};return function(){var l=new Date,u=e-(l-s);return n=this,i=arguments,0>=u?(clearTimeout(r),r=null,s=l,a=t.apply(n,i)):r||(r=setTimeout(o,u)),a}},_.debounce=function(t,e,n){var i,r;return function(){var a=this,s=arguments,o=function(){i=null,n||(r=t.apply(a,s))},l=n&&!i;return clearTimeout(i),i=setTimeout(o,e),l&&(r=t.apply(a,s)),r}},_.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},_.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},_.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},_.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},_.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)_.has(t,n)&&(e[e.length]=n);return e},_.values=function(t){var e=[];for(var n in t)_.has(t,n)&&e.push(t[n]);return e},_.pairs=function(t){var e=[];for(var n in t)_.has(t,n)&&e.push([n,t[n]]);return e},_.invert=function(t){var e={};for(var n in t)_.has(t,n)&&(e[t[n]]=n);return e},_.functions=_.methods=function(t){var e=[];for(var n in t)_.isFunction(t[n])&&e.push(n);return e.sort()},_.extend=function(t){return S(o.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},_.pick=function(t){var e={},n=l.apply(i,o.call(arguments,1));return S(n,function(n){n in t&&(e[n]=t[n])}),e},_.omit=function(t){var e={},n=l.apply(i,o.call(arguments,1));for(var r in t)_.contains(n,r)||(e[r]=t[r]);return e},_.defaults=function(t){return S(o.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t};var A=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return i[a]==e;n.push(t),i.push(e);var s=0,o=!0;if("[object Array]"==r){if(s=t.length,o=s==e.length)for(;s--&&(o=A(t[s],e[s],n,i)););}else{var l=t.constructor,c=e.constructor;if(l!==c&&!(_.isFunction(l)&&l instanceof l&&_.isFunction(c)&&c instanceof c))return!1;for(var h in t)if(_.has(t,h)&&(s++,!(o=_.has(e,h)&&A(t[h],e[h],n,i))))break;if(o){for(h in e)if(_.has(e,h)&&!s--)break;o=!s}}return n.pop(),i.pop(),o};_.isEqual=function(t,e){return A(t,e,[],[])},_.isEmpty=function(t){if(null==t)return!0;if(_.isArray(t)||_.isString(t))return 0===t.length;for(var e in t)if(_.has(t,e))return!1;return!0},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=x||function(t){return"[object Array]"==u.call(t)},_.isObject=function(t){return t===Object(t)},S(["Arguments","Function","String","Number","Date","RegExp"],function(t){_["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return!(!t||!_.has(t,"callee"))}),_.isFunction=function(t){return"function"==typeof t},_.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&t!=+t},_.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){return c.call(t,e)},_.noConflict=function(){return t._=e,this},_.identity=function(t){return t},_.times=function(t,e,n){for(var i=Array(t),r=0;t>r;r++)i[r]=e.call(n,r);return i},_.random=function(t,e){return null==e&&(e=t,t=0),t+(0|Math.random()*(e-t+1))};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};R.unescape=_.invert(R.escape);var I={escape:RegExp("["+_.keys(R.escape).join("")+"]","g"),unescape:RegExp("("+_.keys(R.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(t){_[t]=function(e){return null==e?"":(""+e).replace(I[t],function(e){return R[t][e]})}}),_.result=function(t,e){if(null==t)return null;var n=t[e];return _.isFunction(n)?n.call(t):n},_.mixin=function(t){S(_.functions(t),function(e){var n=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),H.call(this,n.apply(_,t))}})};var P=0;_.uniqueId=function(t){var e=""+ ++P;return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(t,e,n){n=_.defaults({},n,_.templateSettings);var i=RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(i,function(e,n,i,s,o){return a+=t.slice(r,o).replace(L,function(t){return"\\"+F[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(a+="';\n"+s+"\n__p+='"),r=o+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var s=Function(n.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(e)return s(e,_);var l=function(t){return s.call(this,t,_)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},_.chain=function(t){return _(t).chain()};var H=function(t){return this._chain?_(t).chain():t};_.mixin(_),S(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];_.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],H.call(this,n)}}),S(["concat","join","slice"],function(t){var e=i[t];_.prototype[t]=function(){return H.call(this,e.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),p={getInsertionPoint:t,colorClass:e};var g=.25,f={ordinal:i,linear:r,exponential:a,time:s,xy:u};!function(){function t(t,e,n){t.xScale2=d3.scale.ordinal().domain(d3.range(0,n.length)).rangeRoundBands([0,t.xScale.rangeBand()],.08)}function e(t,e,n,i,r){var l,u,c=t.yZero;l=t._g.selectAll(s+n).data(i,function(t){return t.className}),l.enter().insert("g",o).attr("data-index",a).style("opacity",0).attr("class",function(t,e){var i=_.uniq((n+t.className).split(".")).join(" ");return i+" bar "+p.colorClass(this,e)}).attr("transform",function(e,n){return"translate("+t.xScale2(n)+",0)"}),u=l.selectAll("rect").data(function(t){return t.data},function(t){return t.x}),u.enter().append("rect").attr("width",0).attr("rx",3).attr("ry",3).attr("x",function(e){return t.xScale(e.x)+t.xScale2.rangeBand()/2}).attr("height",function(e){return Math.abs(c-t.yScale(e.y))}).attr("y",function(e){return e.y<0?c:t.yScale(e.y)}).on("mouseover",r.mouseover).on("mouseout",r.mouseout).on("click",r.click),e.barGroups=l,e.bars=u}function n(t,e,n){var i=t.yZero;e.barGroups.attr("class",function(t,e){return p.colorClass(this,e)}).transition().duration(n).style("opacity",1).attr("transform",function(e,n){return"translate("+t.xScale2(n)+",0)"}),e.bars.transition().duration(n).attr("width",t.xScale2.rangeBand()).attr("x",function(e){return t.xScale(e.x)}).attr("height",function(e){return Math.abs(i-t.yScale(e.y))}).attr("y",function(e){return e.y<0?i:t.yScale(e.y)})}function i(t,e,n){e.bars.exit().transition().duration(n).attr("width",0).remove(),e.barGroups.exit().transition().duration(n).style("opacity",0).remove()}function r(t,e,n){var i=t.xScale2?t.xScale2.rangeBand()/2:0;delete t.xScale2,e.bars.transition().duration(n).attr("width",0).attr("x",function(e){return t.xScale(e.x)+i})}var a=2,s="g.bar",o=p.getInsertionPoint(a);d.bar={postUpdateScale:t,enter:e,update:n,exit:i,destroy:r}}(),function(){function t(t,e,n,i){function o(t){return[t.data]}var l,u,c,h=t._options.interpolation,d=function(e){return t.xScale2||t.xScale.rangeBand?t.xScale(e.x)+t.xScale.rangeBand()/2:t.xScale(e.x)},f=function(e){return t.yScale(e.y)},g=d3.svg.line().x(d).interpolate(h),m=d3.svg.area().x(d).y1(t.yZero).interpolate(h);l=t._g.selectAll(a+n).data(i,function(t){return t.className}),l.enter().insert("g",s).attr("data-index",r).attr("class",function(t,e){var i=_.uniq((n+t.className).split(".")).join(" ");return i+" line "+p.colorClass(this,e)}),u=l.selectAll("path.fill").data(o),u.enter().append("path").attr("class","fill").style("opacity",0).attr("d",m.y0(f)),c=l.selectAll("path.line").data(o),c.enter().append("path").attr("class","line").style("opacity",0).attr("d",g.y(f)),e.lineContainers=l,e.lineFills=u,e.linePaths=c,e.lineX=d,e.lineY=f,e.lineA=m,e.line=g}function e(t,e,n){e.lineContainers.attr("class",function(t,e){return p.colorClass(this,e)}),e.lineFills.transition().duration(n).style("opacity",1).attr("d",e.lineA.y0(e.lineY)),e.linePaths.transition().duration(n).style("opacity",1).attr("d",e.line.y(e.lineY))}function n(t,e){e.linePaths.exit().style("opacity",0).remove(),e.lineFills.exit().style("opacity",0).remove(),e.lineContainers.exit().remove()}function i(t,e,n){e.linePaths.transition().duration(n).style("opacity",0),e.lineFills.transition().duration(n).style("opacity",0)}var r=3,a="g.line",s=p.getInsertionPoint(r);d.line={enter:t,update:e,exit:n,destroy:i}}(),function(){function t(t,e,n,i,a){var s;r.enter(t,e,n,i,a),s=e.lineContainers.selectAll("circle").data(function(t){return t.data},function(t){return t.x}),s.enter().append("circle").style("opacity",0).attr("cx",e.lineX).attr("cy",e.lineY).attr("r",5).on("mouseover",a.mouseover).on("mouseout",a.mouseout).on("click",a.click),e.lineCircles=s}function e(t,e,n){r.update.apply(null,_.toArray(arguments)),e.lineCircles.transition().duration(n).style("opacity",1).attr("cx",e.lineX).attr("cy",e.lineY)}function n(t,e){e.lineCircles.exit().remove(),r.exit.apply(null,_.toArray(arguments))}function i(t,e,n){r.destroy.apply(null,_.toArray(arguments)),e.lineCircles&&e.lineCircles.transition().duration(n).style("opacity",0)}var r=d.line;d["line-dotted"]={enter:t,update:e,exit:n,destroy:i}}(),function(){function t(t,e,n,i,r){a.enter(t,e,n,i,r)}function e(t){function e(t,e){return t+e.y}var n=_.map(t,function(t){var n=t.data.length,i=_.clone(t.data);for(t=_.clone(t);n;)n-=1,i[n]=_.clone(t.data[n]),i[n].y0=t.data[n].y,i[n].y=_.reduce(_.first(t.data,n),e,t.data[n].y);return _.extend(t,{data:i})});return n}function n(t){t.hasOwnProperty("cumulativeOMainData")&&(t._mainData=t.cumulativeOMainData,delete t.cumulativeOMainData,t._compData=t.cumulativeOCompData,delete t.cumulativeOCompData)}function i(t){n(t),t.cumulativeOMainData=t._mainData,t._mainData=e(t._mainData),t.cumulativeOCompData=t._compData,t._compData=e(t._compData)}function r(t){n(t),a.destroy.apply(null,_.toArray(arguments))}var a=d["line-dotted"];d.cumulative={preUpdateScale:i,enter:t,update:a.update,exit:a.exit,destroy:r}}();var m=[[]],v={mouseover:function(){},mouseout:function(){},click:function(){},axisPaddingTop:0,axisPaddingRight:0,axisPaddingBottom:5,axisPaddingLeft:20,paddingTop:0,paddingRight:0,paddingBottom:20,paddingLeft:60,tickHintX:10,tickFormatX:function(t){return t},tickHintY:10,tickFormatY:function(t){return t},xMin:null,xMax:null,yMin:null,yMax:null,dataFormatX:function(t){return t},dataFormatY:function(t){return t},unsupported:function(t){d3.select(t).text("SVG is not supported on your browser")},empty:function(){},notempty:function(){},timing:750,interpolation:"monotone"};return h.setVis=function(t,e){if(d.hasOwnProperty(t))throw'Cannot override vis type "'+t+'".';d[t]=e},h.getVis=function(t){if(!d.hasOwnProperty(t))throw'Vis type "'+t+'" does not exist.';return _.clone(d[t])},h.visutils=p,h.scales=f,_.defaults(h.prototype,{setType:function(t,e){var n=this;if(!n._type||t!==n._type){if(!d.hasOwnProperty(t))throw'Vis type "'+t+'" is not defined.';n._type&&n._destroy(n._vis,n._mainStorage),n._type=t,n._vis=d[t],e||n._draw()}},setData:function(t){function e(t){var e=_.map(_.clone(t.data),function(t){var e=_.clone(t);return t.hasOwnProperty("x")&&(e.x=i.dataFormatX(t.x)),t.hasOwnProperty("y")&&(e.y=i.dataFormatY(t.y)),e}).sort(function(t,e){return t.x||e.x?t.x<e.x?-1:1:0});return _.extend(_.clone(t),{data:e})}var n=this,i=n._options,r=_.clone(t);if(!t.hasOwnProperty("main"))throw'No "main" key found in given chart data.';switch(t.type){case"bar":t.xScale="ordinal";break;case void 0:t.type=n._type}i.xMin=t.xMin||i.xMin,i.xMax=t.xMax||i.xMax,i.yMin=t.yMin||i.yMin,i.yMax=t.yMax||i.yMax,n._vis&&n._destroy(n._vis,n._mainStorage),n.setType(t.type,!0),r.main=_.map(r.main,e),n._mainData=r.main,n._xScaleType=r.xScale,n._yScaleType=r.yScale,r.hasOwnProperty("comp")?(r.comp=_.map(r.comp,e),n._compData=r.comp):n._compData=[],n._draw()},setScale:function(t,e){var n=this;switch(t){case"x":n._xScaleType=e;break;case"y":n._yScaleType=e;break;default:throw'Cannot change scale of unknown axis "'+t+'".'}n._draw()},_drawSvg:function(){var t,e,n,i=this,r=i._container,a=i._options,s=parseInt(r.style("width").replace("px",""),10),o=parseInt(r.style("height").replace("px",""),10);t=r.selectAll("svg").data(m),t.enter().append("svg").attr("height",o).attr("width",s).attr("class","xchart"),t.transition().attr("width",s).attr("height",o),e=t.selectAll("g").data(m),e.enter().append("g").attr("transform","translate("+a.paddingLeft+","+a.paddingTop+")"),n=e.selectAll("g.scale").data(m),n.enter().append("g").attr("class","scale"),i._svg=t,i._g=e,i._gScale=n,i._height=o-a.paddingTop-a.paddingBottom-a.axisPaddingTop-a.axisPaddingBottom,i._width=s-a.paddingLeft-a.paddingRight-a.axisPaddingLeft-a.axisPaddingRight},_resize:function(){var t=this;t._drawSvg(),t._draw()},_drawAxes:function(){if(!this._noData){var t,e,n,i,r,a,s,o=this,l=o._options,u=o._gScale.transition().duration(l.timing),c=l.tickHintX,h=l.tickHintY,d=o._height+l.axisPaddingTop+l.axisPaddingBottom;d3.svg.line().x(function(t){return t}),i=d3.svg.axis().scale(o.xScale).ticks(c).tickSize(-o._height).tickFormat(l.tickFormatX).orient("bottom"),n=o._gScale.selectAll("g.axisX").data(m),n.enter().append("g").attr("class","axis axisX").attr("transform","translate(0,"+d+")"),n.call(i),s=o._gScale.selectAll(".axisX g")[0],s.length>o._width/80&&(s.sort(function(t,e){var n=/translate\(([^,)]+)/;return t=t.getAttribute("transform").match(n),e=e.getAttribute("transform").match(n),parseFloat(t[1],10)-parseFloat(e[1],10)}),d3.selectAll(s).filter(function(t,e){return e%(Math.ceil(s.length/c)+1)}).remove()),a=d3.svg.axis().scale(o.yScale).ticks(h).tickSize(-o._width-l.axisPaddingRight-l.axisPaddingLeft).tickFormat(l.tickFormatY).orient("left"),r=o._gScale.selectAll("g.axisY").data(m),r.enter().append("g").attr("class","axis axisY").attr("transform","translate(0,0)"),u.selectAll("g.axisY").call(a),t=o._gScale.selectAll("g.axisZero").data([[]]),t.enter().append("g").attr("class","axisZero"),e=t.selectAll("line").data([[]]),e.enter().append("line").attr("x1",0).attr("x2",o._width+l.axisPaddingLeft+l.axisPaddingRight).attr("y1",o.yZero).attr("y2",o.yZero),e.transition().duration(l.timing).attr("y1",o.yZero).attr("y2",o.yZero)}},_updateScale:function(){var t,e,n=this,i=function(){return _.union(n._mainData,n._compData)},r=i(),a=n._vis;delete n.xScale,delete n.yScale,delete n.yZero,a.hasOwnProperty("preUpdateScale")&&a.preUpdateScale(n,r,n._mainData,n._compData),r=i(),t=f.xy(n,r,n._xScaleType,n._yScaleType),n.xScale=t.x,n.yScale=t.y,e=n.yScale.domain()[0],n.yZero=e>0?n.yScale(e):n.yScale(0),a.hasOwnProperty("postUpdateScale")&&a.postUpdateScale(n,r,n._mainData,n._compData)},_enter:function(t,e,n,i){var r=this,a={click:r._options.click,mouseover:r._options.mouseover,mouseout:r._options.mouseout};r._checkVisMethod(t,"enter"),t.enter(r,e,i,n,a)},_update:function(t,e){var n=this;n._checkVisMethod(t,"update"),t.update(n,e,n._options.timing)},_exit:function(t,e){var n=this;n._checkVisMethod(t,"exit"),t.exit(n,e,n._options.timing)},_destroy:function(t,e){var n=this;n._checkVisMethod(t,"destroy");try{t.destroy(n,e,n._options.timing)}catch(i){}},_mainStorage:{},_compStorage:{},_draw:function(){var t,e,n=this,i=n._options;n._noData=0===_.flatten(_.pluck(n._mainData,"data").concat(_.pluck(n._compData,"data"))).length,n._updateScale(),n._drawAxes(),n._enter(n._vis,n._mainStorage,n._mainData,".main"),n._exit(n._vis,n._mainStorage),n._update(n._vis,n._mainStorage),t=_.chain(n._compData).groupBy(function(t){return t.type}),e=t.keys(),_.each(n._compStorage,function(t,i){if(-1===e.indexOf(i).value()){var r=d[i];n._enter(r,t,[],".comp."+i.replace(/\W+/g,"")),n._exit(r,t)}}),t.each(function(t,e){var i,r=d[e];n._compStorage.hasOwnProperty(e)||(n._compStorage[e]={}),i=n._compStorage[e],n._enter(r,i,t,".comp."+e.replace(/\W+/g,"")),n._exit(r,i),n._update(r,i)}),n._noData?i.empty(n,n._selector,n._mainData):i.notempty(n,n._selector)},_checkVisMethod:function(t,e){var n=this;if(!t[e])throw'Required method "'+e+'" not found on vis type "'+n._type+'".'}}),"function"==typeof define&&define.amd&&"object"==typeof define.amd?(define(function(){return h}),void 0):(window.xChart=h,void 0)}();var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=function(){function t(t,e){var n=typeof t[e];return n==h||!(n!=c||!t[e])||"unknown"==n}function e(t,e){return!(typeof t[e]!=c||!t[e])}function n(t,e){return typeof t[e]!=d}function i(t){return function(e,n){for(var i=n.length;i--;)if(!t(e,n[i]))return!1;return!0}}function r(t){return t&&v(t,m)&&b(t,g)}function a(t){window.alert("Rangy not supported in your browser. Reason: "+t),x.initialized=!0,x.supported=!1
}function s(t){var e="Rangy warning: "+t;x.config.alertOnWarn?window.alert(e):typeof window.console!=d&&typeof window.console.log!=d&&window.console.log(e)}function o(){if(!x.initialized){var n,i=!1,s=!1;t(document,"createRange")&&(n=document.createRange(),v(n,p)&&b(n,f)&&(i=!0),n.detach());var o=e(document,"body")?document.body:document.getElementsByTagName("body")[0];o&&t(o,"createTextRange")&&(n=o.createTextRange(),r(n)&&(s=!0)),i||s||a("Neither Range nor TextRange are implemented"),x.initialized=!0,x.features={implementsDomRange:i,implementsTextRange:s};for(var l=C.concat(w),u=0,c=l.length;c>u;++u)try{l[u](x)}catch(h){e(window,"console")&&t(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",h)}}}function l(t){t=t||window,o();for(var e=0,n=_.length;n>e;++e)_[e](t)}function u(t){this.name=t,this.initialized=!1,this.supported=!1}var c="object",h="function",d="undefined",f=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],p=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],g=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],m=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],v=i(t),y=i(e),b=i(n),x={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:t,isHostObject:e,isHostProperty:n,areHostMethods:v,areHostObjects:y,areHostProperties:b,isTextRange:r},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};x.fail=a,x.warn=s,{}.hasOwnProperty?x.util.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}:a("hasOwnProperty not supported");var w=[],C=[];x.init=o,x.addInitListener=function(t){x.initialized?t(x):w.push(t)};var _=[];x.addCreateMissingNativeApiListener=function(t){_.push(t)},x.createMissingNativeApi=l,u.prototype.fail=function(t){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+t)},u.prototype.warn=function(t){x.warn("Module "+this.name+": "+t)},u.prototype.createError=function(t){return new Error("Error in Rangy "+this.name+" module: "+t)},x.createModule=function(t,e){var n=new u(t);x.modules[t]=n,C.push(function(t){e(t,n),n.initialized=!0,n.supported=!0})},x.requireModules=function(t){for(var e,n,i=0,r=t.length;r>i;++i){if(n=t[i],e=x.modules[n],!(e&&e instanceof u))throw new Error("Module '"+n+"' not found");if(!e.supported)throw new Error("Module '"+n+"' not supported")}};var S=!1,T=function(){S||(S=!0,x.initialized||o())};return typeof window==d?(a("No window found"),void 0):typeof document==d?(a("No document found"),void 0):(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",T,!1),t(window,"addEventListener")?window.addEventListener("load",T,!1):t(window,"attachEvent")?window.attachEvent("onload",T):a("Window does not have required addEventListener or attachEvent method"),x)}(),rangy.createModule("DomUtil",function(t,e){function n(t){var e;return typeof t.namespaceURI==T||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function i(t){var e=t.parentNode;return 1==e.nodeType?e:null}function r(t){for(var e=0;t=t.previousSibling;)e++;return e}function a(t){var e;return u(t)?t.length:(e=t.childNodes)?e.length:0}function s(t,e){var n,i=[];for(n=t;n;n=n.parentNode)i.push(n);for(n=e;n;n=n.parentNode)if(E(i,n))return n;return null}function o(t,e,n){for(var i=n?e:e.parentNode;i;){if(i===t)return!0;i=i.parentNode}return!1}function l(t,e,n){for(var i,r=n?t:t.parentNode;r;){if(i=r.parentNode,i===e)return r;r=i}return null}function u(t){var e=t.nodeType;return 3==e||4==e||8==e}function c(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t}function h(t,e){var n=t.cloneNode(!1);return n.deleteData(0,e),t.deleteData(e,t.length-e),c(n,t),n}function d(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=T)return t.ownerDocument;if(typeof t.document!=T)return t.document;if(t.parentNode)return d(t.parentNode);throw new Error("getDocument: no document found for node")}function f(t){var e=d(t);if(typeof e.defaultView!=T)return e.defaultView;if(typeof e.parentWindow!=T)return e.parentWindow;throw new Error("Cannot get a window object for node")}function p(t){if(typeof t.contentDocument!=T)return t.contentDocument;if(typeof t.contentWindow!=T)return t.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function g(t){if(typeof t.contentWindow!=T)return t.contentWindow;if(typeof t.contentDocument!=T)return t.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function m(t){return D.isHostObject(t,"body")?t.body:t.getElementsByTagName("body")[0]}function v(t){for(var e;e=t.parentNode;)t=e;return t}function y(t,e,n,i){var a,o,u,c,h;if(t==n)return e===i?0:i>e?-1:1;if(a=l(n,t,!0))return e<=r(a)?-1:1;if(a=l(t,n,!0))return r(a)<i?-1:1;if(o=s(t,n),u=t===o?o:l(t,o,!0),c=n===o?o:l(n,o,!0),u===c)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(h=o.firstChild;h;){if(h===u)return-1;if(h===c)return 1;h=h.nextSibling}throw new Error("Should not be here!")}function b(t){for(var e,n=d(t).createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n}function x(t){if(!t)return"[No node]";if(u(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">["+t.childNodes.length+"]"}return t.nodeName}function w(t){this.root=t,this._next=t}function C(t){return new w(t)}function _(t,e){this.node=t,this.offset=e}function S(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}var T="undefined",D=t.util;D.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),D.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var k=document.createElement("div");D.areHostMethods(k,["insertBefore","appendChild","cloneNode"]||!D.areHostObjects(k,["previousSibling","nextSibling","childNodes","parentNode"]))||e.fail("Incomplete Element implementation"),D.isHostProperty(k,"innerHTML")||e.fail("Element is missing innerHTML property");var M=document.createTextNode("test");D.areHostMethods(M,["splitText","deleteData","insertData","appendData","cloneNode"]||!D.areHostObjects(k,["previousSibling","nextSibling","childNodes","parentNode"])||!D.areHostProperties(M,["data"]))||e.fail("Incomplete Text Node implementation");var E=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1};w.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,n=this._current=this._next;if(this._current)if(t=n.firstChild)this._next=t;else{for(e=null;n!==this.root&&!(e=n.nextSibling);)n=n.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},_.prototype={equals:function(t){return this.node===t.node&this.offset==t.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"}},S.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},S.prototype.toString=function(){return this.message},t.dom={arrayContains:E,isHtmlNamespace:n,parentElement:i,getNodeIndex:r,getNodeLength:a,getCommonAncestor:s,isAncestorOf:o,getClosestAncestorIn:l,isCharacterDataNode:u,insertAfter:c,splitDataNode:h,getDocument:d,getWindow:f,getIframeWindow:g,getIframeDocument:p,getBody:m,getRootContainer:v,comparePoints:y,inspectNode:x,fragmentFromNodeChildren:b,createIterator:C,DomPosition:_},t.DOMException=S}),rangy.createModule("DomRange",function(t){function e(t,e){return 3!=t.nodeType&&(F.isAncestorOf(t,e.startContainer,!0)||F.isAncestorOf(t,e.endContainer,!0))}function n(t){return F.getDocument(t.startContainer)}function i(t,e,n){var i=t._listeners[e];if(i)for(var r=0,a=i.length;a>r;++r)i[r].call(t,{target:t,args:n})}function r(t){return new L(t.parentNode,F.getNodeIndex(t))}function a(t){return new L(t.parentNode,F.getNodeIndex(t)+1)}function s(t,e,n){var i=11==t.nodeType?t.firstChild:t;return F.isCharacterDataNode(e)?n==e.length?F.insertAfter(t,e):e.parentNode.insertBefore(t,0==n?e:F.splitDataNode(e,n)):n>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[n]),i}function o(t){for(var e,i,r,a=n(t.range).createDocumentFragment();i=t.next();){if(e=t.isPartiallySelectedSubtree(),i=i.cloneNode(!e),e&&(r=t.getSubtreeIterator(),i.appendChild(o(r)),r.detach(!0)),10==i.nodeType)throw new H("HIERARCHY_REQUEST_ERR");a.appendChild(i)}return a}function l(t,e,n){var i,r;n=n||{stop:!1};for(var a,s;a=t.next();)if(t.isPartiallySelectedSubtree()){if(e(a)===!1)return n.stop=!0,void 0;if(s=t.getSubtreeIterator(),l(s,e,n),s.detach(!0),n.stop)return}else for(i=F.createIterator(a);r=i.next();)if(e(r)===!1)return n.stop=!0,void 0}function u(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),u(e),e.detach(!0)):t.remove()}function c(t){for(var e,i,r=n(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),i=t.getSubtreeIterator(),e.appendChild(c(i)),i.detach(!0)):t.remove(),10==e.nodeType)throw new H("HIERARCHY_REQUEST_ERR");r.appendChild(e)}return r}function h(t,e,n){var i,r=!(!e||!e.length),a=!!n;r&&(i=new RegExp("^("+e.join("|")+")$"));var s=[];return l(new f(t,!1),function(t){r&&!i.test(t.nodeType)||a&&!n(t)||s.push(t)}),s}function d(t){var e="undefined"==typeof t.getName?"Range":t.getName();return"["+e+"("+F.inspectNode(t.startContainer)+":"+t.startOffset+", "+F.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function f(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var n=t.commonAncestorContainer;this.sc===this.ec&&F.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||F.isCharacterDataNode(this.sc)?F.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||F.isCharacterDataNode(this.ec)?F.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function p(t){this.code=this[t],this.codeName=t,this.message="RangeException: "+this.codeName}function g(t,e,n){this.nodes=h(t,e,n),this._next=this.nodes[0],this._position=0}function m(t){return function(e,n){for(var i,r=n?e:e.parentNode;r;){if(i=r.nodeType,F.arrayContains(t,i))return r;r=r.parentNode}return null}}function v(t,e){if(Y(t,e))throw new p("INVALID_NODE_TYPE_ERR")}function y(t){if(!t.startContainer)throw new H("INVALID_STATE_ERR")}function b(t,e){if(!F.arrayContains(e,t.nodeType))throw new p("INVALID_NODE_TYPE_ERR")}function x(t,e){if(0>e||e>(F.isCharacterDataNode(t)?t.length:t.childNodes.length))throw new H("INDEX_SIZE_ERR")}function w(t,e){if(V(t,!0)!==V(e,!0))throw new H("WRONG_DOCUMENT_ERR")}function C(t){if(U(t,!0))throw new H("NO_MODIFICATION_ALLOWED_ERR")}function _(t,e){if(!t)throw new H(e)}function S(t){return!F.arrayContains(B,t.nodeType)&&!V(t,!0)}function T(t,e){return e<=(F.isCharacterDataNode(t)?t.length:t.childNodes.length)}function D(t){if(y(t),S(t.startContainer)||S(t.endContainer)||!T(t.startContainer,t.startOffset)||!T(t.endContainer,t.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+t.inspect()+")")}function k(){}function M(t){t.START_TO_START=Z,t.START_TO_END=te,t.END_TO_END=ee,t.END_TO_START=ne,t.NODE_BEFORE=ie,t.NODE_AFTER=re,t.NODE_BEFORE_AND_AFTER=ae,t.NODE_INSIDE=se}function E(t){M(t),M(t.prototype)}function N(t,e){return function(){D(this);var n,i,r=this.startContainer,s=this.startOffset,o=this.commonAncestorContainer,u=new f(this,!0);r!==o&&(n=F.getClosestAncestorIn(r,o,!0),i=a(n),r=i.node,s=i.offset),l(u,C),u.reset();var c=t(u);return u.detach(),e(this,r,s,r,s),c}}function A(n,i,s){function o(t,e){return function(n){y(this),b(n,j),b(W(n),B);var i=(t?r:a)(n);(e?l:h)(this,i.node,i.offset)}}function l(t,e,n){var r=t.endContainer,a=t.endOffset;(e!==t.startContainer||n!==t.startOffset)&&((W(e)!=W(r)||1==F.comparePoints(e,n,r,a))&&(r=e,a=n),i(t,e,n,r,a))}function h(t,e,n){var r=t.startContainer,a=t.startOffset;(e!==t.endContainer||n!==t.endOffset)&&((W(e)!=W(r)||-1==F.comparePoints(e,n,r,a))&&(r=e,a=n),i(t,r,a,e,n))}function d(t,e,n){(e!==t.startContainer||n!==t.startOffset||e!==t.endContainer||n!==t.endOffset)&&i(t,e,n,e,n)}n.prototype=new k,t.util.extend(n.prototype,{setStart:function(t,e){y(this),v(t,!0),x(t,e),l(this,t,e)},setEnd:function(t,e){y(this),v(t,!0),x(t,e),h(this,t,e)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(t){D(this),t?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){y(this),v(t,!0),i(this,t,0,t,F.getNodeLength(t))},selectNode:function(t){y(this),v(t,!1),b(t,j);var e=r(t),n=a(t);i(this,e.node,e.offset,n.node,n.offset)},extractContents:N(c,i),deleteContents:N(u,i),canSurroundContents:function(){D(this),C(this.startContainer),C(this.endContainer);var t=new f(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},detach:function(){s(this)},splitBoundaries:function(){D(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,r=this.endOffset,a=t===n;F.isCharacterDataNode(n)&&r>0&&r<n.length&&F.splitDataNode(n,r),F.isCharacterDataNode(t)&&e>0&&e<t.length&&(t=F.splitDataNode(t,e),a?(r-=e,n=t):n==t.parentNode&&r>=F.getNodeIndex(t)&&r++,e=0),i(this,t,e,n,r)},normalizeBoundaries:function(){D(this);var t=this.startContainer,e=this.startOffset,n=this.endContainer,r=this.endOffset,a=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(n=t,r=t.length,t.appendData(e.data),e.parentNode.removeChild(e))},s=function(i){var a=i.previousSibling;if(a&&a.nodeType==i.nodeType){t=i;var s=i.length;if(e=a.length,i.insertData(0,a.data),a.parentNode.removeChild(a),t==n)r+=e,n=t;else if(n==i.parentNode){var o=F.getNodeIndex(i);r==o?(n=i,r=s):r>o&&r--}}},o=!0;if(F.isCharacterDataNode(n))n.length==r&&a(n);else{if(r>0){var l=n.childNodes[r-1];l&&F.isCharacterDataNode(l)&&a(l)}o=!this.collapsed}if(o){if(F.isCharacterDataNode(t))0==e&&s(t);else if(e<t.childNodes.length){var u=t.childNodes[e];u&&F.isCharacterDataNode(u)&&s(u)}}else t=n,e=r;i(this,t,e,n,r)},collapseToPoint:function(t,e){y(this),v(t,!0),x(t,e),d(this,t,e)}}),E(n)}function R(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:F.getCommonAncestor(t.startContainer,t.endContainer)}function I(t,e,n,r,a){var s=t.startContainer!==e||t.startOffset!==n,o=t.endContainer!==r||t.endOffset!==a;t.startContainer=e,t.startOffset=n,t.endContainer=r,t.endOffset=a,R(t),i(t,"boundarychange",{startMoved:s,endMoved:o})}function P(t){y(t),t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.collapsed=t.commonAncestorContainer=null,i(t,"detach",null),t._listeners=null}function O(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},R(this)}t.requireModules(["DomUtil"]);var F=t.dom,L=F.DomPosition,H=t.DOMException;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,F.isCharacterDataNode(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,n=this._current;!F.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(t=n===this.sc?this.so:0,e=n===this.ec?this.eo:n.length,t!=e&&n.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){var t=this._current;return e(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse();else{t=new O(n(this.range));var e=this._current,i=e,r=0,a=e,s=F.getNodeLength(e);F.isAncestorOf(e,this.sc,!0)&&(i=this.sc,r=this.so),F.isAncestorOf(e,this.ec,!0)&&(a=this.ec,s=this.eo),I(t,i,r,a,s)}return new f(t,this.clonePartiallySelectedTextNodes)},detach:function(t){t&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},p.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},p.prototype.toString=function(){return this.message},g.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var j=[1,3,4,5,7,8,10],B=[2,9,11],z=[5,6,10,12],$=[1,3,4,5,7,8,10,11],q=[1,3,4,5,7,8],W=F.getRootContainer,V=m([9,11]),U=m(z),Y=m([6,10,12]),X=document.createElement("style"),G=!1;try{X.innerHTML="<b>x</b>",G=3==X.firstChild.nodeType}catch(Q){}t.features.htmlParsingConforms=G;var J=G?function(t){var e=this.startContainer,n=F.getDocument(e);if(!e)throw new H("INVALID_STATE_ERR");var i=null;return 1==e.nodeType?i=e:F.isCharacterDataNode(e)&&(i=F.parentElement(e)),i=null===i||"HTML"==i.nodeName&&F.isHtmlNamespace(F.getDocument(i).documentElement)&&F.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1),i.innerHTML=t,F.fragmentFromNodeChildren(i)}:function(t){y(this);var e=n(this),i=e.createElement("body");return i.innerHTML=t,F.fragmentFromNodeChildren(i)},K=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Z=0,te=1,ee=2,ne=3,ie=0,re=1,ae=2,se=3;k.prototype={attachListener:function(t,e){this._listeners[t].push(e)},compareBoundaryPoints:function(t,e){D(this),w(this.startContainer,e.startContainer);var n,i,r,a,s=t==ne||t==Z?"start":"end",o=t==te||t==Z?"start":"end";return n=this[s+"Container"],i=this[s+"Offset"],r=e[o+"Container"],a=e[o+"Offset"],F.comparePoints(n,i,r,a)},insertNode:function(t){if(D(this),b(t,$),C(this.startContainer),F.isAncestorOf(t,this.startContainer,!0))throw new H("HIERARCHY_REQUEST_ERR");var e=s(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){D(this);var t,e;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&F.isCharacterDataNode(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),e=n(this).createDocumentFragment(),e.appendChild(t),e;var i=new f(this,!0);return t=o(i),i.detach(),t},canSurroundContents:function(){D(this),C(this.startContainer),C(this.endContainer);var t=new f(this,!0),n=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!n},surroundContents:function(t){if(b(t,q),!this.canSurroundContents())throw new p("BAD_BOUNDARYPOINTS_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);s(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){D(this);for(var t,e=new O(n(this)),i=K.length;i--;)t=K[i],e[t]=this[t];return e},toString:function(){D(this);var t=this.startContainer;if(t===this.endContainer&&F.isCharacterDataNode(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],n=new f(this,!0);return l(n,function(t){(3==t.nodeType||4==t.nodeType)&&e.push(t.data)}),n.detach(),e.join("")},compareNode:function(t){D(this);var e=t.parentNode,n=F.getNodeIndex(t);if(!e)throw new H("NOT_FOUND_ERR");var i=this.comparePoint(e,n),r=this.comparePoint(e,n+1);return 0>i?r>0?ae:ie:r>0?re:se},comparePoint:function(t,e){return D(this),_(t,"HIERARCHY_REQUEST_ERR"),w(t,this.startContainer),F.comparePoints(t,e,this.startContainer,this.startOffset)<0?-1:F.comparePoints(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:J,toHtml:function(){D(this);var t=n(this).createElement("div");return t.appendChild(this.cloneContents()),t.innerHTML},intersectsNode:function(t,e){if(D(this),_(t,"NOT_FOUND_ERR"),F.getDocument(t)!==n(this))return!1;var i=t.parentNode,r=F.getNodeIndex(t);_(i,"NOT_FOUND_ERR");var a=F.comparePoints(i,r,this.endContainer,this.endOffset),s=F.comparePoints(i,r+1,this.startContainer,this.startOffset);return e?0>=a&&s>=0:0>a&&s>0},isPointInRange:function(t,e){return D(this),_(t,"HIERARCHY_REQUEST_ERR"),w(t,this.startContainer),F.comparePoints(t,e,this.startContainer,this.startOffset)>=0&&F.comparePoints(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t,e){if(D(this),n(t)!=n(this))throw new H("WRONG_DOCUMENT_ERR");var i=F.comparePoints(this.startContainer,this.startOffset,t.endContainer,t.endOffset),r=F.comparePoints(this.endContainer,this.endOffset,t.startContainer,t.startOffset);return e?0>=i&&r>=0:0>i&&r>0},intersection:function(t){if(this.intersectsRange(t)){var e=F.comparePoints(this.startContainer,this.startOffset,t.startContainer,t.startOffset),n=F.comparePoints(this.endContainer,this.endOffset,t.endContainer,t.endOffset),i=this.cloneRange();return-1==e&&i.setStart(t.startContainer,t.startOffset),1==n&&i.setEnd(t.endContainer,t.endOffset),i}return null},union:function(t){if(this.intersectsRange(t,!0)){var e=this.cloneRange();return-1==F.comparePoints(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==F.comparePoints(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new p("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==se},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,F.getNodeLength(t))<=0},containsRange:function(t){return this.intersection(t).equals(t)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var n=e.getNodes([3]);if(n.length>0){e.setStart(n[0],0);var i=n.pop();e.setEnd(i,i.length);var r=this.containsRange(e);return e.detach(),r}return this.containsNodeContents(t)},createNodeIterator:function(t,e){return D(this),new g(this,t,e)},getNodes:function(t,e){return D(this),h(this,t,e)},getDocument:function(){return n(this)},collapseBefore:function(t){y(this),this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){y(this),this.setStartAfter(t),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(t){return O.rangesEqual(this,t)},inspect:function(){return d(this)}},A(O,I,P),t.rangePrototype=k.prototype,O.rangeProperties=K,O.RangeIterator=f,O.copyComparisonConstants=E,O.createPrototypeRange=A,O.inspect=d,O.getRangeDocument=n,O.rangesEqual=function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},t.DomRange=O,t.RangeException=p}),rangy.createModule("WrappedRange",function(t){function e(t){var e=t.parentElement(),n=t.duplicate();n.collapse(!0);var i=n.parentElement();n=t.duplicate(),n.collapse(!1);var r=n.parentElement(),a=i==r?i:s.getCommonAncestor(i,r);return a==e?a:s.getCommonAncestor(e,a)}function n(t){return 0==t.compareEndPoints("StartToEnd",t)}function i(t,e,n,i){var r=t.duplicate();r.collapse(n);var a=r.parentElement();if(s.isAncestorOf(e,a,!0)||(a=e),!a.canHaveHTML)return new o(a.parentNode,s.getNodeIndex(a));var l,u,c,h,d,f=s.getDocument(a).createElement("span"),p=n?"StartToStart":"StartToEnd";do a.insertBefore(f,f.previousSibling),r.moveToElementText(f);while((l=r.compareEndPoints(p,t))>0&&f.previousSibling);if(d=f.nextSibling,-1==l&&d&&s.isCharacterDataNode(d)){r.setEndPoint(n?"EndToStart":"EndToEnd",t);var g;if(/[\r\n]/.test(d.data)){var m=r.duplicate(),v=m.text.replace(/\r\n/g,"\r").length;for(g=m.moveStart("character",v);-1==(l=m.compareEndPoints("StartToEnd",m));)g++,m.moveStart("character",1)}else g=r.text.length;h=new o(d,g)}else u=(i||!n)&&f.previousSibling,c=(i||n)&&f.nextSibling,h=c&&s.isCharacterDataNode(c)?new o(c,0):u&&s.isCharacterDataNode(u)?new o(u,u.length):new o(a,s.getNodeIndex(f));return f.parentNode.removeChild(f),h}function r(t,e){var n,i,r,a,o=t.offset,l=s.getDocument(t.node),u=l.body.createTextRange(),c=s.isCharacterDataNode(t.node);return c?(n=t.node,i=n.parentNode):(a=t.node.childNodes,n=o<a.length?a[o]:null,i=t.node),r=l.createElement("span"),r.innerHTML="&#feff;",n?i.insertBefore(r,n):i.appendChild(r),u.moveToElementText(r),u.collapse(!e),i.removeChild(r),c&&u[e?"moveStart":"moveEnd"]("character",o),u}t.requireModules(["DomUtil","DomRange"]);var a,s=t.dom,o=s.DomPosition,l=t.DomRange;if(!t.features.implementsDomRange||t.features.implementsTextRange&&t.config.preferTextRange){if(t.features.implementsTextRange){a=function(t){this.textRange=t,this.refresh()},a.prototype=new l(document),a.prototype.refresh=function(){var t,r,a=e(this.textRange);n(this.textRange)?r=t=i(this.textRange,a,!0,!0):(t=i(this.textRange,a,!0,!1),r=i(this.textRange,a,!1,!1)),this.setStart(t.node,t.offset),this.setEnd(r.node,r.offset)},l.copyComparisonConstants(a);var u=function(){return this}();"undefined"==typeof u.Range&&(u.Range=a),t.createNativeRange=function(t){return t=t||document,t.body.createTextRange()}}}else!function(){function e(t){for(var e,n=c.length;n--;)e=c[n],t[e]=t.nativeRange[e]}function n(t,e,n,i,r){var a=t.startContainer!==e||t.startOffset!=n,s=t.endContainer!==i||t.endOffset!=r;(a||s)&&(t.setEnd(i,r),t.setStart(e,n))}function i(t){t.nativeRange.detach(),t.detached=!0;for(var e,n=c.length;n--;)e=c[n],t[e]=null}var r,o,u,c=l.rangeProperties;a=function(t){if(!t)throw new Error("Range must be specified");this.nativeRange=t,e(this)},l.createPrototypeRange(a,n,i),r=a.prototype,r.selectNode=function(t){this.nativeRange.selectNode(t),e(this)},r.deleteContents=function(){this.nativeRange.deleteContents(),e(this)},r.extractContents=function(){var t=this.nativeRange.extractContents();return e(this),t},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(t){this.nativeRange.surroundContents(t),e(this)},r.collapse=function(t){this.nativeRange.collapse(t),e(this)},r.cloneRange=function(){return new a(this.nativeRange.cloneRange())},r.refresh=function(){e(this)},r.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");s.getBody(document).appendChild(h);var d=document.createRange();d.setStart(h,0),d.setEnd(h,0);try{d.setStart(h,1),o=!0,r.setStart=function(t,n){this.nativeRange.setStart(t,n),e(this)},r.setEnd=function(t,n){this.nativeRange.setEnd(t,n),e(this)},u=function(t){return function(n){this.nativeRange[t](n),e(this)}}}catch(f){o=!1,r.setStart=function(t,n){try{this.nativeRange.setStart(t,n)}catch(i){this.nativeRange.setEnd(t,n),this.nativeRange.setStart(t,n)}e(this)},r.setEnd=function(t,n){try{this.nativeRange.setEnd(t,n)}catch(i){this.nativeRange.setStart(t,n),this.nativeRange.setEnd(t,n)}e(this)},u=function(t,n){return function(i){try{this.nativeRange[t](i)}catch(r){this.nativeRange[n](i),this.nativeRange[t](i)}e(this)}}}r.setStartBefore=u("setStartBefore","setEndBefore"),r.setStartAfter=u("setStartAfter","setEndAfter"),r.setEndBefore=u("setEndBefore","setStartBefore"),r.setEndAfter=u("setEndAfter","setStartAfter"),d.selectNodeContents(h),r.selectNodeContents=d.startContainer==h&&d.endContainer==h&&0==d.startOffset&&d.endOffset==h.length?function(t){this.nativeRange.selectNodeContents(t),e(this)}:function(t){this.setStart(t,0),this.setEnd(t,l.getEndOffset(t))},d.selectNodeContents(h),d.setEnd(h,3);var p=document.createRange();p.selectNodeContents(h),p.setEnd(h,4),p.setStart(h,2),r.compareBoundaryPoints=-1==d.compareBoundaryPoints(d.START_TO_END,p)&1==d.compareBoundaryPoints(d.END_TO_START,p)?function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)},t.util.isHostMethod(d,"createContextualFragment")&&(r.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),s.getBody(document).removeChild(h),d.detach(),p.detach()}(),t.createNativeRange=function(t){return t=t||document,t.createRange()};t.features.implementsTextRange&&(a.rangeToTextRange=function(t){if(t.collapsed){var e=r(new o(t.startContainer,t.startOffset),!0);return e}var n=r(new o(t.startContainer,t.startOffset),!0),i=r(new o(t.endContainer,t.endOffset),!1),a=s.getDocument(t.startContainer).body.createTextRange();return a.setEndPoint("StartToStart",n),a.setEndPoint("EndToEnd",i),a}),a.prototype.getName=function(){return"WrappedRange"},t.WrappedRange=a,t.createRange=function(e){return e=e||document,new a(t.createNativeRange(e))},t.createRangyRange=function(t){return t=t||document,new l(t)},t.createIframeRange=function(e){return t.createRange(s.getIframeDocument(e))},t.createIframeRangyRange=function(e){return t.createRangyRange(s.getIframeDocument(e))},t.addCreateMissingNativeApiListener(function(e){var n=e.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return t.createRange(this)}),n=e=null})}),rangy.createModule("WrappedSelection",function(t,e){function n(t){return(t||window).getSelection()}function i(t){return(t||window).document.selection}function r(t,e,n){var i=n?"end":"start",r=n?"start":"end";t.anchorNode=e[i+"Container"],t.anchorOffset=e[i+"Offset"],t.focusNode=e[r+"Container"],t.focusOffset=e[r+"Offset"]}function a(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function s(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function o(e){var n;return e instanceof S?(n=e._selectionNativeRange,n||(n=t.createNativeRange(C.getDocument(e.startContainer)),n.setEnd(e.endContainer,e.endOffset),n.setStart(e.startContainer,e.startOffset),e._selectionNativeRange=n,e.attachListener("detach",function(){this._selectionNativeRange=null}))):e instanceof T?n=e.nativeRange:t.features.implementsDomRange&&e instanceof C.getWindow(e.startContainer).Range&&(n=e),n}function l(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,n=t.length;n>e;++e)if(!C.isAncestorOf(t[0],t[e]))return!1;return!0}function u(t){var e=t.getNodes();if(!l(e))throw new Error("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return e[0]}function c(t){return!!t&&"undefined"!=typeof t.text}function h(t,e){var n=new T(e);t._ranges=[n],r(t,n,!1),t.rangeCount=1,t.isCollapsed=n.collapsed}function d(e){if(e._ranges.length=0,"None"==e.docSelection.type)s(e);else{var n=e.docSelection.createRange();if(c(n))h(e,n);else{e.rangeCount=n.length;for(var i,a=C.getDocument(n.item(0)),o=0;o<e.rangeCount;++o)i=t.createRange(a),i.selectNode(n.item(o)),e._ranges.push(i);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,r(e,e._ranges[e.rangeCount-1],!1)}}}function f(t,e){for(var n=t.docSelection.createRange(),i=u(e),r=C.getDocument(n.item(0)),a=C.getBody(r).createControlRange(),s=0,o=n.length;o>s;++s)a.add(n.item(s));try{a.add(i)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),d(t)}function p(t,e,n){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=n,this.refresh()}function g(t,e){for(var n,i=C.getDocument(e[0].startContainer),r=C.getBody(i).createControlRange(),a=0;rangeCount>a;++a){n=u(e[a]);try{r.add(n)}catch(s){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),d(t)}function m(t,e){if(t.anchorNode&&C.getDocument(t.anchorNode)!==C.getDocument(e))throw new D("WRONG_DOCUMENT_ERR")}function v(t){var e=[],n=new k(t.anchorNode,t.anchorOffset),i=new k(t.focusNode,t.focusOffset),r="function"==typeof t.getName?t.getName():"Selection";if("undefined"!=typeof t.rangeCount)for(var a=0,s=t.rangeCount;s>a;++a)e[a]=S.inspect(t.getRangeAt(a));return"["+r+"(Ranges: "+e.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"
}t.requireModules(["DomUtil","DomRange","WrappedRange"]),t.config.checkSelectionRanges=!0;var y,b,x="boolean",w="_rangySelection",C=t.dom,_=t.util,S=t.DomRange,T=t.WrappedRange,D=t.DOMException,k=C.DomPosition,M="Control",E=t.util.isHostMethod(window,"getSelection"),N=t.util.isHostObject(document,"selection"),A=N&&(!E||t.config.preferTextRange);A?(y=i,t.isSelectionValid=function(t){var e=(t||window).document,n=e.selection;return"None"!=n.type||C.getDocument(n.createRange().parentElement())==e}):E?(y=n,t.isSelectionValid=function(){return!0}):e.fail("Neither document.selection or window.getSelection() detected."),t.getNativeSelection=y;var R=y(),I=t.createNativeRange(document),P=C.getBody(document),O=_.areHostObjects(R,["anchorNode","focusNode"]&&_.areHostProperties(R,["anchorOffset","focusOffset"]));t.features.selectionHasAnchorAndFocus=O;var F=_.isHostMethod(R,"extend");t.features.selectionHasExtend=F;var L="number"==typeof R.rangeCount;t.features.selectionHasRangeCount=L;var H=!1,j=!0;_.areHostMethods(R,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof R.rangeCount&&t.features.implementsDomRange&&!function(){var t=document.createElement("iframe");P.appendChild(t);var e=C.getIframeDocument(t);e.open(),e.write("<html><head></head><body>12</body></html>"),e.close();var n=C.getIframeWindow(t).getSelection(),i=e.documentElement,r=i.lastChild,a=r.firstChild,s=e.createRange();s.setStart(a,1),s.collapse(!0),n.addRange(s),j=1==n.rangeCount,n.removeAllRanges();var o=s.cloneRange();s.setStart(a,0),o.setEnd(a,2),n.addRange(s),n.addRange(o),H=2==n.rangeCount,s.detach(),o.detach(),P.removeChild(t)}(),t.features.selectionSupportsMultipleRanges=H,t.features.collapsedNonEditableSelectionsSupported=j;var B,z=!1;P&&_.isHostMethod(P,"createControlRange")&&(B=P.createControlRange(),_.areHostProperties(B,["item","add"])&&(z=!0)),t.features.implementsControlRange=z,b=O?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return t.rangeCount?t.getRangeAt(t.rangeCount-1).collapsed:!1};var $;_.isHostMethod(R,"getRangeAt")?$=function(t,e){try{return t.getRangeAt(e)}catch(n){return null}}:O&&($=function(e){var n=C.getDocument(e.anchorNode),i=t.createRange(n);return i.setStart(e.anchorNode,e.anchorOffset),i.setEnd(e.focusNode,e.focusOffset),i.collapsed!==this.isCollapsed&&(i.setStart(e.focusNode,e.focusOffset),i.setEnd(e.anchorNode,e.anchorOffset)),i}),t.getSelection=function(t){t=t||window;var e=t[w],n=y(t),r=N?i(t):null;return e?(e.nativeSelection=n,e.docSelection=r,e.refresh(t)):(e=new p(n,r,t),t[w]=e),e},t.getIframeSelection=function(e){return t.getSelection(C.getIframeWindow(e))};var q=p.prototype;if(!A&&O&&_.areHostMethods(R,["removeAllRanges","addRange"])){q.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var W=function(e,n){var i=S.getRangeDocument(n),r=t.createRange(i);r.collapseToPoint(n.endContainer,n.endOffset),e.nativeSelection.addRange(o(r)),e.nativeSelection.extend(n.startContainer,n.startOffset),e.refresh()};q.addRange=L?function(e,n){if(z&&N&&this.docSelection.type==M)f(this,e);else if(n&&F)W(this,e);else{var i;if(H?i=this.rangeCount:(this.removeAllRanges(),i=0),this.nativeSelection.addRange(o(e)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(t.config.checkSelectionRanges){var a=$(this.nativeSelection,this.rangeCount-1);a&&!S.rangesEqual(a,e)&&(e=new T(a))}this._ranges[this.rangeCount-1]=e,r(this,e,Y(this.nativeSelection)),this.isCollapsed=b(this)}else this.refresh()}}:function(t,e){e&&F?W(this,t):(this.nativeSelection.addRange(o(t)),this.refresh())},q.setRanges=function(t){if(z&&t.length>1)g(this,t);else{this.removeAllRanges();for(var e=0,n=t.length;n>e;++e)this.addRange(t[e])}}}else{if(!(_.isHostMethod(R,"empty")&&_.isHostMethod(I,"select")&&z&&A))return e.fail("No means of selecting a Range or TextRange was found"),!1;q.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=C.getDocument(this.anchorNode);else if(this.docSelection.type==M){var e=this.docSelection.createRange();e.length&&(t=C.getDocument(e.item(0)).body.createTextRange())}if(t){var n=t.body.createTextRange();n.select(),this.docSelection.empty()}}}catch(i){}s(this)},q.addRange=function(t){this.docSelection.type==M?f(this,t):(T.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,r(this,t,!1))},q.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?g(this,t):e&&this.addRange(t[0])}}q.getRangeAt=function(t){if(0>t||t>=this.rangeCount)throw new D("INDEX_SIZE_ERR");return this._ranges[t]};var V;if(A)V=function(e){var n;t.isSelectionValid(e.win)?n=e.docSelection.createRange():(n=C.getBody(e.win.document).createTextRange(),n.collapse(!0)),e.docSelection.type==M?d(e):c(n)?h(e,n):s(e)};else if(_.isHostMethod(R,"getRangeAt")&&"number"==typeof R.rangeCount)V=function(e){if(z&&N&&e.docSelection.type==M)d(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var n=0,i=e.rangeCount;i>n;++n)e._ranges[n]=new t.WrappedRange(e.nativeSelection.getRangeAt(n));r(e,e._ranges[e.rangeCount-1],Y(e.nativeSelection)),e.isCollapsed=b(e)}else s(e)};else{if(!O||typeof R.isCollapsed!=x||typeof I.collapsed!=x||!t.features.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;V=function(t){var e,n=t.nativeSelection;n.anchorNode?(e=$(n,0),t._ranges=[e],t.rangeCount=1,a(t),t.isCollapsed=b(t)):s(t)}}q.refresh=function(t){var e=t?this._ranges.slice(0):null;if(V(this),t){var n=e.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!S.rangesEqual(e[n],this._ranges[n]))return!1;return!0}};var U=function(t,e){var n=t.getAllRanges(),i=!1;t.removeAllRanges();for(var r=0,a=n.length;a>r;++r)i||e!==n[r]?t.addRange(n[r]):i=!0;t.rangeCount||s(t)};q.removeRange=z?function(t){if(this.docSelection.type==M){for(var e,n=this.docSelection.createRange(),i=u(t),r=C.getDocument(n.item(0)),a=C.getBody(r).createControlRange(),s=!1,o=0,l=n.length;l>o;++o)e=n.item(o),e!==i||s?a.add(n.item(o)):s=!0;a.select(),d(this)}else U(this,t)}:function(t){U(this,t)};var Y;!A&&O&&t.features.implementsDomRange?(Y=function(t){var e=!1;return t.anchorNode&&(e=1==C.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e},q.isBackwards=function(){return Y(this)}):Y=q.isBackwards=function(){return!1},q.toString=function(){for(var t=[],e=0,n=this.rangeCount;n>e;++e)t[e]=""+this._ranges[e];return t.join("")},q.collapse=function(e,n){m(this,e);var i=t.createRange(C.getDocument(e));i.collapseToPoint(e,n),this.removeAllRanges(),this.addRange(i),this.isCollapsed=!0},q.collapseToStart=function(){if(!this.rangeCount)throw new D("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},q.collapseToEnd=function(){if(!this.rangeCount)throw new D("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},q.selectAllChildren=function(e){m(this,e);var n=t.createRange(C.getDocument(e));n.selectNodeContents(e),this.removeAllRanges(),this.addRange(n)},q.deleteFromDocument=function(){if(z&&N&&this.docSelection.type==M){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var i=0,r=n.length;r>i;++i)n[i].deleteContents();this.addRange(n[r-1])}},q.getAllRanges=function(){return this._ranges.slice(0)},q.setSingleRange=function(t){this.setRanges([t])},q.containsNode=function(t,e){for(var n=0,i=this._ranges.length;i>n;++n)if(this._ranges[n].containsNode(t,e))return!0;return!1},q.toHtml=function(){var t="";if(this.rangeCount){for(var e=S.getRangeDocument(this._ranges[0]).createElement("div"),n=0,i=this._ranges.length;i>n;++n)e.appendChild(this._ranges[n].cloneContents());t=e.innerHTML}return t},q.getName=function(){return"WrappedSelection"},q.inspect=function(){return v(this)},q.detach=function(){this.win[w]=null,this.win=this.anchorNode=this.focusNode=null},p.inspect=v,t.Selection=p,t.selectionPrototype=q,t.addCreateMissingNativeApiListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return t.getSelection(this)}),e=null})});var Base=function(){};Base.extend=function(t,e){var n=Base.prototype.extend;Base._prototyping=!0;var i=new this;n.call(i,t),i.base=function(){},delete Base._prototyping;var r=i.constructor,a=i.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==a)this._constructing=!0,r.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],i)};return a.ancestor=this,a.extend=this.extend,a.forEach=this.forEach,a.implement=this.implement,a.prototype=i,a.toString=this.toString,a.valueOf=function(t){return"object"==t?a:r.valueOf()},n.call(a,e),"function"==typeof a.init&&a.init(),a},Base.prototype={extend:function(t,e){if(arguments.length>1){var n=this[t];if(n&&"function"==typeof e&&(!n.valueOf||n.valueOf()!=e.valueOf())&&/\bbase\b/.test(e)){var i=e.valueOf();e=function(){var t=this.base||Base.prototype.base;this.base=n;var e=i.apply(this,arguments);return this.base=t,e},e.valueOf=function(t){return"object"==t?e:i},e.toString=Base.toString}this[t]=e}else if(t){var r=Base.prototype.extend;Base._prototyping||"function"==typeof this||(r=this.extend||r);for(var a={toSource:null},s=["constructor","toString","valueOf"],o=Base._prototyping?0:1;l=s[o++];)t[l]!=a[l]&&r.call(this,l,t[l]);for(var l in t)a[l]||r.call(this,l,t[l])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(t,e,n){for(var i in t)void 0===this.prototype[i]&&e.call(n,t[i],i,t)},implement:function(){for(var t=0;t<arguments.length;t++)"function"==typeof arguments[t]?arguments[t](this.prototype):this.prototype.extend(arguments[t]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function t(t){return(/ipad|iphone|ipod/.test(t)&&t.match(/ os (\d+).+? like mac os x/)||[,0])[1]}var e=navigator.userAgent,n=document.createElement("div"),i=-1!==e.indexOf("MSIE")&&-1===e.indexOf("Opera"),r=-1!==e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),a=-1!==e.indexOf("AppleWebKit/"),s=-1!==e.indexOf("Chrome/"),o=-1!==e.indexOf("Opera/");return{USER_AGENT:e,supported:function(){var e=this.USER_AGENT.toLowerCase(),i="contentEditable"in n,r=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,a=document.querySelector&&document.querySelectorAll,s=this.isIos()&&t(e)<5||-1!==e.indexOf("opera mobi")||-1!==e.indexOf("hpwos/");return i&&r&&a&&!s},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var t=this.USER_AGENT.toLowerCase();return-1!==t.indexOf("webkit")&&-1!==t.indexOf("mobile")},supportsSandboxedIframes:function(){return i},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!r},hasCurrentStyleProperty:function(){return"currentStyle"in n},insertsLineBreaksOnReturn:function(){return r},supportsPlaceholderAttributeOn:function(t){return"placeholder"in t},supportsEvent:function(t){return"on"+t in n||function(){return n.setAttribute("on"+t,"return;"),"function"==typeof n["on"+t]}()},supportsEventsInIframeCorrectly:function(){return!o},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return a||r},supportsDataTransfer:function(){try{return a&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(t){return!1}},supportsHTML5Tags:function(t){var e=t.createElement("div"),n="<article>foo</article>";return e.innerHTML=n,e.innerHTML.toLowerCase()===n},supportsCommand:function(){var t={formatBlock:i,insertUnorderedList:i||o||a,insertOrderedList:i||o||a},e={insertHTML:r};return function(n,i){var r=t[i];if(!r){try{return n.queryCommandSupported(i)}catch(a){}try{return n.queryCommandEnabled(i)}catch(s){return!!e[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return i},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return r||o||a},supportsGetAttributeCorrectly:function(){var t=document.createElement("td");return"1"!=t.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return r||i||o},clearsListsInContentEditableCorrectly:function(){return r||i||a},autoScrollsToCaret:function(){return!a},autoClosesUnclosedTags:function(){var t,e,i=n.cloneNode(!1);return i.innerHTML="<p><div></div>",e=i.innerHTML.toLowerCase(),t="<p></p><div></div>"===e||"<p><div></div></p>"===e,this.autoClosesUnclosedTags=function(){return t},t},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in n},needsSpaceAfterLineBreak:function(){return o},supportsSpeechApiOn:function(t){var n=e.match(/Chrome\/(\d+)/)||[,0];return n[1]>=11&&("onwebkitspeechchange"in t||"speech"in t)},crashesWhenDefineProperty:function(t){return i&&("XMLHttpRequest"===t||"XDomainRequest"===t)},doesAsyncFocus:function(){return i},hasProblemsSettingCaretAfterImg:function(){return i},hasUndoInContextMenu:function(){return r||s||o}}}(),wysihtml5.lang.array=function(t){return{contains:function(e){if(t.indexOf)return-1!==t.indexOf(e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return!0;return!1},without:function(e){e=wysihtml5.lang.array(e);for(var n=[],i=0,r=t.length;r>i;i++)e.contains(t[i])||n.push(t[i]);return n},get:function(){for(var e=0,n=t.length,i=[];n>e;e++)i.push(t[e]);return i}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(t,e){return this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(t,e){this.events=this.events||{};for(var n=this.events[t]||[],i=0;i<n.length;i++)n[i].call(this,e);return this},stopObserving:function(t,e){this.events=this.events||{};var n,i,r=0;if(t){for(n=this.events[t]||[],i=[];r<n.length;r++)n[r]!==e&&e&&i.push(n[r]);this.events[t]=i}else this.events={};return this}}),wysihtml5.lang.object=function(t){return{merge:function(e){for(var n in e)t[n]=e[n];return this},get:function(){return t},clone:function(){var e,n={};for(e in t)n[e]=t[e];return n},isArray:function(){return"[object Array]"===Object.prototype.toString.call(t)}}},function(){var t=/^\s+/,e=/\s+$/;wysihtml5.lang.string=function(n){return n=String(n),{trim:function(){return n.replace(t,"").replace(e,"")},interpolate:function(t){for(var e in t)n=this.replace("#{"+e+"}").by(t[e]);return n},replace:function(t){return{by:function(e){return n.split(t).join(e)}}}}}}(),function(t){function e(t){return a(t)?t:(t===t.ownerDocument.documentElement&&(t=t.ownerDocument.body),s(t))}function n(t){return t.replace(l,function(t,e){var n=(e.match(u)||[])[1]||"",i=h[n];e=e.replace(u,""),e.split(i).length>e.split(n).length&&(e+=n,n="");var r=e,a=e;return e.length>c&&(a=a.substr(0,c)+"..."),"www."===r.substr(0,4)&&(r="http://"+r),'<a href="'+r+'">'+a+"</a>"+n})}function i(t){var e=t._wysihtml5_tempElement;return e||(e=t._wysihtml5_tempElement=t.createElement("div")),e}function r(t){var e=t.parentNode,r=i(e.ownerDocument);for(r.innerHTML="<span></span>"+n(t.data),r.removeChild(r.firstChild);r.firstChild;)e.insertBefore(r.firstChild,t);e.removeChild(t)}function a(t){for(var e;t.parentNode;){if(t=t.parentNode,e=t.nodeName,o.contains(e))return!0;if("body"===e)return!1}return!1}function s(e){if(!o.contains(e.nodeName)){if(e.nodeType===t.TEXT_NODE&&e.data.match(l))return r(e),void 0;for(var n=t.lang.array(e.childNodes).get(),i=n.length,a=0;i>a;a++)s(n[a]);return e}}var o=t.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,u=/([^\w\/\-](,?))$/i,c=100,h={")":"(","]":"[","}":"{"};t.dom.autoLink=e,t.dom.autoLink.URL_REG_EXP=l}(wysihtml5),function(t){var e=t.browser.supportsClassList(),n=t.dom;n.addClass=function(t,i){return e?t.classList.add(i):(n.hasClass(t,i)||(t.className+=" "+i),void 0)},n.removeClass=function(t,n){return e?t.classList.remove(n):(t.className=t.className.replace(new RegExp("(^|\\s+)"+n+"(\\s+|$)")," "),void 0)},n.hasClass=function(t,n){if(e)return t.classList.contains(n);var i=t.className;return i.length>0&&(i==n||new RegExp("(^|\\s)"+n+"(\\s|$)").test(i))}}(wysihtml5),wysihtml5.dom.contains=function(){var t=document.documentElement;return t.contains?function(t,e){return e.nodeType!==wysihtml5.ELEMENT_NODE&&(e=e.parentNode),t!==e&&t.contains(e)}:t.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:void 0}(),wysihtml5.dom.convertToList=function(){function t(t,e){var n=t.createElement("li");return e.appendChild(n),n}function e(t,e){return t.createElement(e)}function n(n,i){if("UL"===n.nodeName||"OL"===n.nodeName||"MENU"===n.nodeName)return n;var r,a,s,o,l,u,c,h,d,f=n.ownerDocument,p=e(f,i),g=n.querySelectorAll("br"),m=g.length;for(d=0;m>d;d++)for(o=g[d];(l=o.parentNode)&&l!==n&&l.lastChild===o;){if("block"===wysihtml5.dom.getStyle("display").from(l)){l.removeChild(o);break}wysihtml5.dom.insert(o).after(o.parentNode)}for(r=wysihtml5.lang.array(n.childNodes).get(),a=r.length,d=0;a>d;d++)h=h||t(f,p),s=r[d],u="block"===wysihtml5.dom.getStyle("display").from(s),c="BR"===s.nodeName,u?(h=h.firstChild?t(f,p):h,h.appendChild(s),h=null):c?h=h.firstChild?null:h:h.appendChild(s);return n.parentNode.replaceChild(p,n),p}return n}(),wysihtml5.dom.copyAttributes=function(t){return{from:function(e){return{to:function(n){for(var i,r=0,a=t.length;a>r;r++)i=t[r],"undefined"!=typeof e[i]&&""!==e[i]&&(n[i]=e[i]);return{andTo:arguments.callee}}}}}},function(t){var e=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(e){return i(e)?parseInt(t.getStyle("width").from(e),10)<e.offsetWidth:!1},i=function(n){for(var i=0,r=e.length;r>i;i++)if("border-box"===t.getStyle(e[i]).from(n))return e[i]};t.copyStyles=function(i){return{from:function(r){n(r)&&(i=wysihtml5.lang.array(i).without(e));for(var a,s="",o=i.length,l=0;o>l;l++)a=i[l],s+=a+":"+t.getStyle(a).from(r)+";";return{to:function(e){return t.setStyles(s).on(e),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(t){t.dom.delegate=function(e,n,i,r){return t.dom.observe(e,i,function(i){for(var a=i.target,s=t.lang.array(e.querySelectorAll(n));a&&a!==e;){if(s.contains(a)){r.call(a,i);break}a=a.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var t=function(t,e){var n=e.createElement("div");n.style.display="none",e.body.appendChild(n);try{n.innerHTML=t}catch(i){}return e.body.removeChild(n),n},e=function(t){if(!t._wysihtml5_supportsHTML5Tags){for(var e=0,i=n.length;i>e;e++)t.createElement(n[e]);t._wysihtml5_supportsHTML5Tags=!0}},n=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(n,i){i=i||document;var r;return"object"==typeof n&&n.nodeType?(r=i.createElement("div"),r.appendChild(n)):wysihtml5.browser.supportsHTML5Tags(i)?(r=i.createElement("div"),r.innerHTML=n):(e(i),r=t(n,i)),r}}(),wysihtml5.dom.getParentElement=function(){function t(t,e){return e&&e.length?"string"==typeof e?t===e:wysihtml5.lang.array(e).contains(t):!0}function e(t){return t.nodeType===wysihtml5.ELEMENT_NODE}function n(t,e,n){var i=(t.className||"").match(n)||[];return e?i[i.length-1]===e:!!i.length}function i(e,n,i){for(;i--&&e&&"BODY"!==e.nodeName;){if(t(e.nodeName,n))return e;e=e.parentNode}return null}function r(i,r,a,s,o){for(;o--&&i&&"BODY"!==i.nodeName;){if(e(i)&&t(i.nodeName,r)&&n(i,a,s))return i;i=i.parentNode}return null}return function(t,e,n){return n=n||50,e.className||e.classRegExp?r(t,e.nodeName,e.className,e.classRegExp,n):i(t,e.nodeName,n)}}(),wysihtml5.dom.getStyle=function(){function t(t){return t.replace(n,function(t){return t.charAt(1).toUpperCase()})}var e={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(i){if(i.nodeType===wysihtml5.ELEMENT_NODE){var r=i.ownerDocument,a=e[n]||t(n),s=i.style,o=i.currentStyle,l=s[a];if(l)return l;if(o)try{return o[a]}catch(u){}var c,h,d=r.defaultView||r.parentWindow,f=("height"===n||"width"===n)&&"TEXTAREA"===i.nodeName;return d.getComputedStyle?(f&&(c=s.overflow,s.overflow="hidden"),h=d.getComputedStyle(i,null).getPropertyValue(n),f&&(s.overflow=c||""),h):void 0}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){function t(t){return t._wysihtml5_identifier||(t._wysihtml5_identifier=n++)}var e={},n=1;return function(n,i){var r=t(n)+":"+i,a=e[r];return a||(a=e[r]=n.getElementsByTagName(i)),a.length>0}}(),function(t){function e(t){return t._wysihtml5_identifier||(t._wysihtml5_identifier=i++)}var n={},i=1;t.dom.hasElementWithClassName=function(i,r){if(!t.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+r);var a=e(i)+":"+r,s=n[a];return s||(s=n[a]=i.getElementsByClassName(r)),s.length>0}}(wysihtml5),wysihtml5.dom.insert=function(t){return{after:function(e){e.parentNode.insertBefore(t,e.nextSibling)},before:function(e){e.parentNode.insertBefore(t,e)},into:function(e){e.appendChild(t)}}},wysihtml5.dom.insertCSS=function(t){return t=t.join("\n"),{into:function(e){var n=e.head||e.getElementsByTagName("head")[0],i=e.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n&&n.appendChild(i)}}},wysihtml5.dom.observe=function(t,e,n){e="string"==typeof e?[e]:e;for(var i,r,a=0,s=e.length;s>a;a++)r=e[a],t.addEventListener?t.addEventListener(r,n,!1):(i=function(e){"target"in e||(e.target=e.srcElement),e.preventDefault=e.preventDefault||function(){this.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){this.cancelBubble=!0},n.call(t,e)},t.attachEvent("on"+r,i));return{stop:function(){for(var r,a=0,s=e.length;s>a;a++)r=e[a],t.removeEventListener?t.removeEventListener(r,n,!1):t.detachEvent("on"+r,i)}}},wysihtml5.dom.parse=function(){function t(t,n,i,r){wysihtml5.lang.object(h).merge(c).merge(n).get(),i=i||t.ownerDocument||document;var a,s,o,l=i.createDocumentFragment(),u="string"==typeof t;for(a=u?wysihtml5.dom.getAsDom(t,i):t;a.firstChild;)o=a.firstChild,a.removeChild(o),s=e(o,r),s&&l.appendChild(s);return a.innerHTML="",a.appendChild(l),u?wysihtml5.quirks.getCorrectInnerHTML(a):a}function e(t,n){var i,r=t.nodeType,a=t.childNodes,s=a.length,u=o[r],c=0;if(i=u&&u(t),!i)return null;for(c=0;s>c;c++)newChild=e(a[c],n),newChild&&i.appendChild(newChild);return n&&i.childNodes.length<=1&&i.nodeName.toLowerCase()===l&&!i.attributes.length?i.firstChild:i}function n(t){var e,n,r=h.tags,a=t.nodeName.toLowerCase(),s=t.scopeName;if(t._wysihtml5)return null;if(t._wysihtml5=1,"wysihtml5-temp"===t.className)return null;if(s&&"HTML"!=s&&(a=s+":"+a),"outerHTML"in t&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==t.nodeName||"</p>"===t.outerHTML.slice(-4).toLowerCase()||(a="div")),a in r){if(e=r[a],!e||e.remove)return null;e="string"==typeof e?{rename_tag:e}:e}else{if(!t.firstChild)return null;e={rename_tag:l}}return n=t.ownerDocument.createElement(e.rename_tag||a),i(t,n,e),t=null,n}function i(t,e,n){var i,a,s,o,l,c,d,g={},m=n.set_class,v=n.add_class,y=n.set_attributes,b=n.check_attributes,x=h.classes,w=0,C=[],_=[],S=[],T=[];if(y&&(g=wysihtml5.lang.object(y).clone()),b)for(l in b)d=f[b[l]],d&&(c=d(r(t,l)),"string"==typeof c&&(g[l]=c));if(m&&C.push(m),v)for(l in v)d=p[v[l]],d&&(o=d(r(t,l)),"string"==typeof o&&C.push(o));for(x["_wysihtml5-temp-placeholder"]=1,T=t.getAttribute("class"),T&&(C=C.concat(T.split(u))),i=C.length;i>w;w++)s=C[w],x[s]&&_.push(s);for(a=_.length;a--;)s=_[a],wysihtml5.lang.array(S).contains(s)||S.unshift(s);S.length&&(g["class"]=S.join(" "));for(l in g)try{e.setAttribute(l,g[l])}catch(D){}g.src&&("undefined"!=typeof g.width&&e.setAttribute("width",g.width),"undefined"!=typeof g.height&&e.setAttribute("height",g.height))}function r(t,e){e=e.toLowerCase();var n=t.nodeName;if("IMG"==n&&"src"==e&&a(t)===!0)return t.src;if(d&&"outerHTML"in t){var i=t.outerHTML.toLowerCase(),r=-1!=i.indexOf(" "+e+"=");return r?t.getAttribute(e):null}return t.getAttribute(e)}function a(t){try{return t.complete&&!t.mozMatchesSelector(":-moz-broken")}catch(e){if(t.complete&&"complete"===t.readyState)return!0}}function s(t){return t.ownerDocument.createTextNode(t.data)}var o={1:n,3:s},l="span",u=/\s+/,c={tags:{},classes:{}},h={},d=!wysihtml5.browser.supportsGetAttributeCorrectly(),f={url:function(){var t=/^https?:\/\//i;return function(e){return e&&e.match(t)?e.replace(t,function(t){return t.toLowerCase()}):null}}(),alt:function(){var t=/[^ a-z0-9_\-]/gi;return function(e){return e?e.replace(t,""):""}}(),numbers:function(){var t=/\D/g;return function(e){return e=(e||"").replace(t,""),e||null}}()},p={align_img:function(){var t={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(e){return t[String(e).toLowerCase()]}}(),align_text:function(){var t={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(e){return t[String(e).toLowerCase()]}}(),clear_br:function(){var t={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(e){return t[String(e).toLowerCase()]}}(),size_font:function(){var t={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(e){return t[String(e).charAt(0)]}}()};return t}(),wysihtml5.dom.removeEmptyTextNodes=function(t){for(var e,n=wysihtml5.lang.array(t.childNodes).get(),i=n.length,r=0;i>r;r++)e=n[r],e.nodeType===wysihtml5.TEXT_NODE&&""===e.data&&e.parentNode.removeChild(e)},wysihtml5.dom.renameElement=function(t,e){for(var n,i=t.ownerDocument.createElement(e);n=t.firstChild;)i.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(t).to(i),t.parentNode.replaceChild(i,t),i},wysihtml5.dom.replaceWithChildNodes=function(t){if(t.parentNode){if(!t.firstChild)return t.parentNode.removeChild(t),void 0;for(var e=t.ownerDocument.createDocumentFragment();t.firstChild;)e.appendChild(t.firstChild);t.parentNode.replaceChild(e,t),t=e=null}},function(t){function e(e){return"block"===t.getStyle("display").from(e)}function n(t){return"BR"===t.nodeName}function i(t){var e=t.ownerDocument.createElement("br");t.appendChild(e)}function r(t){if("MENU"===t.nodeName||"UL"===t.nodeName||"OL"===t.nodeName){var r,a,s,o,l,u=t.ownerDocument,c=u.createDocumentFragment(),h=t.previousElementSibling||t.previousSibling;for(h&&!e(h)&&i(c);l=t.firstChild;){for(a=l.lastChild;r=l.firstChild;)s=r===a,o=s&&!e(r)&&!n(r),c.appendChild(r),o&&i(c);l.parentNode.removeChild(l)}t.parentNode.replaceChild(c,t)}}t.resolveList=r}(wysihtml5.dom),function(t){var e=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],i=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],r=["referrer","write","open","close"];t.dom.Sandbox=Base.extend({constructor:function(e,n){this.callback=e||t.EMPTY_FUNCTION,this.config=t.lang.object({}).merge(n).get(),this.iframe=this._createIframe()},insertInto:function(t){"string"==typeof t&&(t=e.getElementById(t)),t.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var t=this.getIframe();t.parentNode.removeChild(t)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=e.createElement("iframe");return i.className="wysihtml5-sandbox",t.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),t.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(a){if(t.dom.contains(e.documentElement,a)){var s=this,o=a.contentWindow,l=a.contentWindow.document,u=e.characterSet||e.charset||"utf-8",c=this._getHtml({charset:u,stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(c),l.close(),this.getWindow=function(){return a.contentWindow},this.getDocument=function(){return a.contentWindow.document},o.onerror=function(t,e,n){throw new Error("wysihtml5.Sandbox: "+t,e,n)},!t.browser.supportsSandboxedIframes()){var h,d;for(h=0,d=n.length;d>h;h++)this._unset(o,n[h]);for(h=0,d=i.length;d>h;h++)this._unset(o,i[h],t.EMPTY_FUNCTION);for(h=0,d=r.length;d>h;h++)this._unset(l,r[h]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){s.callback(s)},0)}},_getHtml:function(e){var n,i=e.stylesheets,r="",a=0;if(i="string"==typeof i?[i]:i)for(n=i.length;n>a;a++)r+='<link rel="stylesheet" href="'+i[a]+'">';return e.stylesheets=r,t.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(e)},_unset:function(e,n,i,r){try{e[n]=i}catch(a){}try{e.__defineGetter__(n,function(){return i})}catch(a){}if(r)try{e.__defineSetter__(n,function(){})}catch(a){}if(!t.browser.crashesWhenDefineProperty(n))try{var s={get:function(){return i}};r&&(s.set=function(){}),Object.defineProperty(e,n,s)}catch(a){}}})}(wysihtml5),function(){var t={className:"class"};wysihtml5.dom.setAttributes=function(e){return{on:function(n){for(var i in e)n.setAttribute(t[i]||i,e[i])}}}}(),wysihtml5.dom.setStyles=function(t){return{on:function(e){var n=e.style;if("string"==typeof t)return n.cssText+=";"+t,void 0;for(var i in t)"float"===i?(n.cssFloat=t[i],n.styleFloat=t[i]):n[i]=t[i]}}},function(t){t.simulatePlaceholder=function(e,n,i){var r="placeholder",a=function(){n.hasPlaceholderSet()&&n.clear(),t.removeClass(n.element,r)},s=function(){n.isEmpty()&&(n.setValue(i),t.addClass(n.element,r))};e.observe("set_placeholder",s).observe("unset_placeholder",a).observe("focus:composer",a).observe("paste:composer",a).observe("blur:composer",s),s()}}(wysihtml5.dom),function(t){var e=document.documentElement;"textContent"in e?(t.setTextContent=function(t,e){t.textContent=e},t.getTextContent=function(t){return t.textContent}):"innerText"in e?(t.setTextContent=function(t,e){t.innerText=e},t.getTextContent=function(t){return t.innerText}):(t.setTextContent=function(t,e){t.nodeValue=e},t.getTextContent=function(t){return t.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){function t(t,n,i){n=n||e,i=i||t.ownerDocument||document;var r,a,s,o,l,u="string"==typeof t,c=0;r=u?wysihtml5.dom.getAsDom(t,i):t;for(l in n)for(s=r.querySelectorAll(l),a=n[l],o=s.length;o>c;c++)a(s[c]);return s=t=n=null,u?r.innerHTML:r}var e={"a u":wysihtml5.dom.replaceWithChildNodes};return t}(),function(t){var e=t.dom;t.quirks.ensureProperClearing=function(){var t=function(){var t=this;setTimeout(function(){var e=t.innerHTML.toLowerCase();("<p>&nbsp;</p>"==e||"<p>&nbsp;</p><p>&nbsp;</p>"==e)&&(t.innerHTML="")},0)};return function(n){e.observe(n.element,["cut","keydown"],t)}}(),t.quirks.ensureProperClearingOfLists=function(){var n=["OL","UL","MENU"],i=function(i,r){if(r.firstChild&&t.lang.array(n).contains(r.firstChild.nodeName)){var a=e.getParentElement(i,{nodeName:n});if(a){var s=a==r.firstChild;if(s){var o=a.childNodes.length<=1;if(o){var l=a.firstChild?""===a.firstChild.innerHTML:!0;l&&a.parentNode.removeChild(a)}}}}};return function(n){e.observe(n.element,"keydown",function(e){if(e.keyCode===t.BACKSPACE_KEY){var r=n.selection.getSelectedNode();i(r,n.element)}})}}()}(wysihtml5),function(t){var e="%7E";t.quirks.getCorrectInnerHTML=function(n){var i=n.innerHTML;if(-1===i.indexOf(e))return i;var r,a,s,o,l=n.querySelectorAll("[href*='~'], [src*='~']");for(o=0,s=l.length;s>o;o++)r=l[o].href||l[o].src,a=t.lang.string(r).replace("~").by(e),i=t.lang.string(i).replace(a).by(r);
return i}}(wysihtml5),function(t){var e=t.dom,n=["LI","P","H1","H2","H3","H4","H5","H6"],i=["UL","OL","MENU"];t.quirks.insertLineBreakOnReturn=function(r){function a(n){var i=e.getParentElement(n,{nodeName:["P","DIV"]},2);if(i){var a=document.createTextNode(t.INVISIBLE_SPACE);e.insert(a).before(i),e.replaceWithChildNodes(i),r.selection.selectNode(a)}}function s(s){var o=s.keyCode;if(!(s.shiftKey||o!==t.ENTER_KEY&&o!==t.BACKSPACE_KEY)){var l=(s.target,r.selection.getSelectedNode()),u=e.getParentElement(l,{nodeName:n},4);return u?("LI"!==u.nodeName||o!==t.ENTER_KEY&&o!==t.BACKSPACE_KEY?u.nodeName.match(/H[1-6]/)&&o===t.ENTER_KEY&&setTimeout(function(){a(r.selection.getSelectedNode())},0):setTimeout(function(){var t,n=r.selection.getSelectedNode();n&&(t=e.getParentElement(n,{nodeName:i},2),t||a(n))},0),void 0):(o!==t.ENTER_KEY||t.browser.insertsLineBreaksOnReturn()||(r.commands.exec("insertLineBreak"),s.preventDefault()),void 0)}}e.observe(r.element.ownerDocument,"keydown",s)}}(wysihtml5),function(t){var e="wysihtml5-quirks-redraw";t.quirks.redraw=function(n){t.dom.addClass(n,e),t.dom.removeClass(n,e);try{var i=n.ownerDocument;i.execCommand("italic",!1,null),i.execCommand("italic",!1,null)}catch(r){}}}(wysihtml5),function(t){function e(t){var e=0;if(t.parentNode)do e+=t.offsetTop||0,t=t.offsetParent;while(t);return e}var n=t.dom;t.Selection=Base.extend({constructor:function(t){window.rangy.init(),this.editor=t,this.composer=t.composer,this.doc=this.composer.doc},getBookmark:function(){var t=this.getRange();return t&&t.cloneRange()},setBookmark:function(t){t&&this.setSelection(t)},setBefore:function(t){var e=rangy.createRange(this.doc);return e.setStartBefore(t),e.setEndBefore(t),this.setSelection(e)},setAfter:function(t){var e=rangy.createRange(this.doc);return e.setStartAfter(t),e.setEndAfter(t),this.setSelection(e)},selectNode:function(e){var i=rangy.createRange(this.doc),r=e.nodeType===t.ELEMENT_NODE,a="canHaveHTML"in e?e.canHaveHTML:"IMG"!==e.nodeName,s=r?e.innerHTML:e.data,o=""===s||s===t.INVISIBLE_SPACE,l=n.getStyle("display").from(e),u="block"===l||"list-item"===l;if(o&&r&&a)try{e.innerHTML=t.INVISIBLE_SPACE}catch(c){}a?i.selectNodeContents(e):i.selectNode(e),a&&o&&r?i.collapse(u):a&&o&&(i.setStartAfter(e),i.setEndAfter(e)),this.setSelection(i)},getSelectedNode:function(t){var e,n;return t&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange(),n&&n.length)?n.item(0):(e=this.getSelection(this.doc),e.focusNode===e.anchorNode?e.focusNode:(n=this.getRange(this.doc),n?n.commonAncestorContainer:this.doc.body))},executeAndRestore:function(e,n){var i,r=this.doc.body,a=n&&r.scrollTop,s=n&&r.scrollLeft,o="_wysihtml5-temp-placeholder",l='<span class="'+o+'">'+t.INVISIBLE_SPACE+"</span>",u=this.getRange(this.doc);if(!u)return e(r,r),void 0;var c=u.createContextualFragment(l);u.insertNode(c);try{e(u.startContainer,u.endContainer)}catch(h){setTimeout(function(){throw h},0)}caretPlaceholder=this.doc.querySelector("."+o),caretPlaceholder?(i=rangy.createRange(this.doc),i.selectNode(caretPlaceholder),i.deleteContents(),this.setSelection(i)):r.focus(),n&&(r.scrollTop=a,r.scrollLeft=s);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(d){}},executeAndRestoreSimple:function(t){var e,n,i,r,a,s=this.getRange(),o=this.doc.body;if(!s)return t(o,o),void 0;r=s.getNodes([3]),n=r[0]||s.startContainer,i=r[r.length-1]||s.endContainer,a={collapsed:s.collapsed,startContainer:n,startOffset:n===s.startContainer?s.startOffset:0,endContainer:i,endOffset:i===s.endContainer?s.endOffset:i.length};try{t(s.startContainer,s.endContainer)}catch(l){setTimeout(function(){throw l},0)}e=rangy.createRange(this.doc);try{e.setStart(a.startContainer,a.startOffset)}catch(u){}try{e.setEnd(a.endContainer,a.endOffset)}catch(c){}try{this.setSelection(e)}catch(h){}},insertHTML:function(t){var e=rangy.createRange(this.doc),n=e.createContextualFragment(t),i=n.lastChild;this.insertNode(n),i&&this.setAfter(i)},insertNode:function(t){var e=this.getRange();e&&e.insertNode(t)},surround:function(t){var e=this.getRange();if(e)try{e.surroundContents(t),this.selectNode(t)}catch(n){t.appendChild(e.extractContents()),e.insertNode(t)}},scrollIntoView:function(){var n,i=this.doc,r=i.documentElement.scrollHeight>i.documentElement.offsetHeight,a=i._wysihtml5ScrollIntoViewElement=i._wysihtml5ScrollIntoViewElement||function(){var e=i.createElement("span");return e.innerHTML=t.INVISIBLE_SPACE,e}();r&&(this.insertNode(a),n=e(a),a.parentNode.removeChild(a),n>i.body.scrollTop&&(i.body.scrollTop=n))},selectLine:function(){t.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var t=this.doc.defaultView,e=t.getSelection();e.modify("extend","left","lineboundary"),e.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var t,e,n,i,r,a=this.doc.selection.createRange(),s=a.boundingTop,o=(a.boundingHeight,this.doc.body.scrollWidth);if(a.moveToPoint){for(0===s&&(n=this.doc.createElement("span"),this.insertNode(n),s=n.offsetTop,n.parentNode.removeChild(n)),s+=1,i=-10;o>i;i+=2)try{a.moveToPoint(i,s);break}catch(l){}for(t=s,e=this.doc.selection.createRange(),r=o;r>=0;r--)try{e.moveToPoint(r,t);break}catch(u){}a.setEndPoint("EndToEnd",e),a.select()}},getText:function(){var t=this.getSelection();return t?t.toString():""},getNodes:function(t,e){var n=this.getRange();return n?n.getNodes([t],e):[]},getRange:function(){var t=this.getSelection();return t&&t.rangeCount&&t.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(t){var e=this.doc.defaultView||this.doc.parentWindow,n=rangy.getSelection(e);return n.setSingleRange(t)}})}(wysihtml5),function(t,e){function n(t,e,n){if(!t.className)return!1;var i=t.className.match(n)||[];return i[i.length-1]===e}function i(t,e,n){t.className?(r(t,n),t.className+=" "+e):t.className=e}function r(t,e){t.className&&(t.className=t.className.replace(e,""))}function a(t,e){return t.className.replace(f," ")==e.className.replace(f," ")}function s(t){for(var e=t.parentNode;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}function o(t,e){if(t.attributes.length!=e.attributes.length)return!1;for(var n,i,r,a=0,s=t.attributes.length;s>a;++a)if(n=t.attributes[a],r=n.name,"class"!=r){if(i=e.attributes.getNamedItem(r),n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function l(t,n){return e.dom.isCharacterDataNode(t)?0==n?!!t.previousSibling:n==t.length?!!t.nextSibling:!0:n>0&&n<t.childNodes.length}function u(t,n,i){var r;if(e.dom.isCharacterDataNode(n)&&(0==i?(i=e.dom.getNodeIndex(n),n=n.parentNode):i==n.length?(i=e.dom.getNodeIndex(n)+1,n=n.parentNode):r=e.dom.splitDataNode(n,i)),!r){r=n.cloneNode(!1),r.id&&r.removeAttribute("id");for(var a;a=n.childNodes[i];)r.appendChild(a);e.dom.insertAfter(r,n)}return n==t?r:u(t,r.parentNode,e.dom.getNodeIndex(r))}function c(e){this.isElementMerge=e.nodeType==t.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?e.lastChild:e,this.textNodes=[this.firstTextNode]}function h(t,e,n,i){this.tagNames=t||[d],this.cssClass=e||"",this.similarClassRegExp=n,this.normalize=i,this.applyToAnyTagName=!1}var d="span",f=/\s+/g;c.prototype={doMerge:function(){for(var t,e,n,i=[],r=0,a=this.textNodes.length;a>r;++r)t=this.textNodes[r],e=t.parentNode,i[r]=t.data,r&&(e.removeChild(t),e.hasChildNodes()||e.parentNode.removeChild(e));return this.firstTextNode.data=n=i.join(""),n},getLength:function(){for(var t=this.textNodes.length,e=0;t--;)e+=this.textNodes[t].length;return e},toString:function(){for(var t=[],e=0,n=this.textNodes.length;n>e;++e)t[e]="'"+this.textNodes[e].data+"'";return"[Merge("+t.join(",")+")]"}},h.prototype={getAncestorWithClass:function(i){for(var r;i;){if(r=this.cssClass?n(i,this.cssClass,this.similarClassRegExp):!0,i.nodeType==t.ELEMENT_NODE&&e.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&r)return i;i=i.parentNode}return!1},postApply:function(t,e){for(var n,i,r,a=t[0],s=t[t.length-1],o=[],l=a,u=s,h=0,d=s.length,f=0,p=t.length;p>f;++f)i=t[f],r=this.getAdjacentMergeableTextNode(i.parentNode,!1),r?(n||(n=new c(r),o.push(n)),n.textNodes.push(i),i===a&&(l=n.firstTextNode,h=l.length),i===s&&(u=n.firstTextNode,d=n.getLength())):n=null;var g=this.getAdjacentMergeableTextNode(s.parentNode,!0);if(g&&(n||(n=new c(s),o.push(n)),n.textNodes.push(g)),o.length){for(f=0,p=o.length;p>f;++f)o[f].doMerge();e.setStart(l,h),e.setEnd(u,d)}},getAdjacentMergeableTextNode:function(e,n){var i,r=e.nodeType==t.TEXT_NODE,a=r?e.parentNode:e,s=n?"nextSibling":"previousSibling";if(r){if(i=e[s],i&&i.nodeType==t.TEXT_NODE)return i}else if(i=a[s],i&&this.areElementsMergeable(e,i))return i[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(t,n){return e.dom.arrayContains(this.tagNames,(t.tagName||"").toLowerCase())&&e.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&a(t,n)&&o(t,n)},createContainer:function(t){var e=t.createElement(this.tagNames[0]);return this.cssClass&&(e.className=this.cssClass),e},applyToTextNode:function(t){var n=t.parentNode;if(1==n.childNodes.length&&e.dom.arrayContains(this.tagNames,n.tagName.toLowerCase()))this.cssClass&&i(n,this.cssClass,this.similarClassRegExp);else{var r=this.createContainer(e.dom.getDocument(t));t.parentNode.insertBefore(r,t),r.appendChild(t)}},isRemovable:function(n){return e.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&t.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(t,e,n){if(!e.containsNode(n)){var i=e.cloneRange();i.selectNode(n),i.isPointInRange(e.endContainer,e.endOffset)&&l(e.endContainer,e.endOffset)&&(u(n,e.endContainer,e.endOffset),e.setEndAfter(n)),i.isPointInRange(e.startContainer,e.startOffset)&&l(e.startContainer,e.startOffset)&&(n=u(n,e.startContainer,e.startOffset))}this.similarClassRegExp&&r(n,this.similarClassRegExp),this.isRemovable(n)&&s(n)},applyToRange:function(e){var n=e.getNodes([t.TEXT_NODE]);if(!n.length)try{var i=this.createContainer(e.endContainer.ownerDocument);return e.surroundContents(i),this.selectNode(e,i),void 0}catch(r){}if(e.splitBoundaries(),n=e.getNodes([t.TEXT_NODE]),n.length){for(var a,s=0,o=n.length;o>s;++s)a=n[s],this.getAncestorWithClass(a)||this.applyToTextNode(a);e.setStart(n[0],0),a=n[n.length-1],e.setEnd(a,a.length),this.normalize&&this.postApply(n,e)}},undoToRange:function(e){var n,i,r=e.getNodes([t.TEXT_NODE]);if(r.length)e.splitBoundaries(),r=e.getNodes([t.TEXT_NODE]);else{var a=e.endContainer.ownerDocument,s=a.createTextNode(t.INVISIBLE_SPACE);e.insertNode(s),e.selectNode(s),r=[s]}for(var o=0,l=r.length;l>o;++o)n=r[o],i=this.getAncestorWithClass(n),i&&this.undoToTextNode(n,e,i);1==l?this.selectNode(e,r[0]):(e.setStart(r[0],0),n=r[r.length-1],e.setEnd(n,n.length),this.normalize&&this.postApply(r,e))},selectNode:function(e,n){var i=n.nodeType===t.ELEMENT_NODE,r="canHaveHTML"in n?n.canHaveHTML:!0,a=i?n.innerHTML:n.data,s=""===a||a===t.INVISIBLE_SPACE;if(s&&i&&r)try{n.innerHTML=t.INVISIBLE_SPACE}catch(o){}e.selectNodeContents(n),s&&i?e.collapse(!1):s&&(e.setStartAfter(n),e.setEndAfter(n))},getTextSelectedByRange:function(t,e){var n=e.cloneRange();n.selectNodeContents(t);var i=n.intersection(e),r=i?i.toString():"";return n.detach(),r},isAppliedToRange:function(e){var n,i=[],r=e.getNodes([t.TEXT_NODE]);if(!r.length)return n=this.getAncestorWithClass(e.startContainer),n?[n]:!1;for(var a,s=0,o=r.length;o>s;++s){if(a=this.getTextSelectedByRange(r[s],e),n=this.getAncestorWithClass(r[s]),""!=a&&!n)return!1;i.push(n)}return i},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)}},t.selection.HTMLApplier=h}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(t){this.editor=t,this.composer=t.composer,this.doc=this.composer.doc},support:function(t){return wysihtml5.browser.supportsCommand(this.doc,t)},exec:function(t,e){var n=wysihtml5.commands[t],i=wysihtml5.lang.array(arguments).get(),r=n&&n.exec,a=null;if(this.editor.fire("beforecommand:composer"),r)i.unshift(this.composer),a=r.apply(n,i);else try{a=this.doc.execCommand(t,!1,e)}catch(s){}return this.editor.fire("aftercommand:composer"),a},state:function(t){var e=wysihtml5.commands[t],n=wysihtml5.lang.array(arguments).get(),i=e&&e.state;if(i)return n.unshift(this.composer),i.apply(e,n);try{return this.doc.queryCommandState(t)}catch(r){return!1}},value:function(t){var e=wysihtml5.commands[t],n=e&&e.value;if(n)return n.call(e,this.composer,t);try{return this.doc.queryCommandValue(t)}catch(i){return null}}}),function(t){var e;t.commands.bold={exec:function(e,n){return t.commands.formatInline.exec(e,n,"b")},state:function(e,n){return t.commands.formatInline.state(e,n,"b")},value:function(){return e}}}(wysihtml5),function(t){function e(t,e){for(var n,i,r,s=e.length,o=0;s>o;o++)n=e[o],i=a.getParentElement(n,{nodeName:"code"}),r=a.getTextContent(n),r.match(a.autoLink.URL_REG_EXP)&&!i?i=a.renameElement(n,"code"):a.replaceWithChildNodes(n)}function n(e,n){var s,o,l,u,c,h,d,f,p,g=e.doc,m="_wysihtml5-temp-"+ +new Date,v=/non-matching-class/g,y=0;for(t.commands.formatInline.exec(e,i,r,m,v),o=g.querySelectorAll(r+"."+m),s=o.length;s>y;y++){l=o[y],l.removeAttribute("class");for(p in n)l.setAttribute(p,n[p])}h=l,1===s&&(d=a.getTextContent(l),u=!!l.querySelector("*"),c=""===d||d===t.INVISIBLE_SPACE,!u&&c&&(a.setTextContent(l,n.text||l.href),f=g.createTextNode(" "),e.selection.setAfter(l),e.selection.insertNode(f),h=f)),e.selection.setAfter(h)}var i,r="A",a=t.dom;t.commands.createLink={exec:function(t,i,r){var a=this.state(t,i);a?t.selection.executeAndRestore(function(){e(t,a)}):(r="object"==typeof r?r:{href:r},n(t,r))},state:function(e,n){return t.commands.formatInline.state(e,n,"A")},value:function(){return i}}}(wysihtml5),function(t){var e,n=/wysiwyg-font-size-[a-z\-]+/g;t.commands.fontSize={exec:function(e,i,r){return t.commands.formatInline.exec(e,i,"span","wysiwyg-font-size-"+r,n)},state:function(e,i,r){return t.commands.formatInline.state(e,i,"span","wysiwyg-font-size-"+r,n)},value:function(){return e}}}(wysihtml5),function(t){var e,n=/wysiwyg-color-[a-z]+/g;t.commands.foreColor={exec:function(e,i,r){return t.commands.formatInline.exec(e,i,"span","wysiwyg-color-"+r,n)},state:function(e,i,r){return t.commands.formatInline.state(e,i,"span","wysiwyg-color-"+r,n)},value:function(){return e}}}(wysihtml5),function(t){function e(t,e,i){t.className?(n(t,i),t.className+=" "+e):t.className=e}function n(t,e){t.className=t.className.replace(e,"")}function i(e){return e.nodeType===t.TEXT_NODE&&!t.lang.string(e.data).trim()}function r(t){for(var e=t.previousSibling;e&&i(e);)e=e.previousSibling;return e}function a(t){for(var e=t.nextSibling;e&&i(e);)e=e.nextSibling;return e}function s(t){var e=t.ownerDocument,n=a(t),i=r(t);n&&!c(n)&&t.parentNode.insertBefore(e.createElement("br"),n),i&&!c(i)&&t.parentNode.insertBefore(e.createElement("br"),t)}function o(t){var e=a(t),n=r(t);e&&u(e)&&e.parentNode.removeChild(e),n&&u(n)&&n.parentNode.removeChild(n)}function l(t){var e=t.lastChild;e&&u(e)&&e.parentNode.removeChild(e)}function u(t){return"BR"===t.nodeName}function c(t){return u(t)?!0:"block"===g.getStyle("display").from(t)?!0:!1}function h(e,n,i,r){if(r)var a=g.observe(e,"DOMNodeInserted",function(e){var n,i=e.target;i.nodeType===t.ELEMENT_NODE&&(n=g.getStyle("display").from(i),"inline"!==n.substr(0,6)&&(i.className+=" "+r))});e.execCommand(n,!1,i),a&&a.stop()}function d(t,e){t.selection.selectLine(),t.selection.surround(e),o(e),l(e),t.selection.selectNode(e)}function f(e){return!!t.lang.string(e.className).trim()}var p,g=t.dom,m="DIV",v=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",m];t.commands.formatBlock={exec:function(i,r,a,o,l){var u,c=i.doc,p=this.state(i,r,a,o,l);return a="string"==typeof a?a.toUpperCase():a,p?(i.selection.executeAndRestoreSimple(function(){l&&n(p,l);var t=f(p);t||p.nodeName!==(a||m)?t&&g.renameElement(p,m):(s(p),g.replaceWithChildNodes(p))}),void 0):(null===a||t.lang.array(v).contains(a))&&(u=i.selection.getSelectedNode(),p=g.getParentElement(u,{nodeName:v}))?(i.selection.executeAndRestoreSimple(function(){a&&(p=g.renameElement(p,a)),o&&e(p,o,l)}),void 0):i.commands.support(r)?(h(c,r,a||m,o),void 0):(p=c.createElement(a||m),o&&(p.className=o),d(i,p),void 0)},state:function(t,e,n,i,r){n="string"==typeof n?n.toUpperCase():n;var a=t.selection.getSelectedNode();return g.getParentElement(a,{nodeName:n,className:i,classRegExp:r})},value:function(){return p}}}(wysihtml5),function(t){function e(t){var e=r[t];return e?[t.toLowerCase(),e.toLowerCase()]:[t.toLowerCase()]}function n(n,i,r){var s=n+":"+i;return a[s]||(a[s]=new t.selection.HTMLApplier(e(n),i,r,!0)),a[s]}var i,r={strong:"b",em:"i",b:"strong",i:"em"},a={};t.commands.formatInline={exec:function(t,e,i,r,a){var s=t.selection.getRange();return s?(n(i,r,a).toggleRange(s),t.selection.setSelection(s),void 0):!1},state:function(e,i,a,s,o){var l,u=e.doc,c=r[a]||a;return t.dom.hasElementWithTagName(u,a)||t.dom.hasElementWithTagName(u,c)?s&&!t.dom.hasElementWithClassName(u,s)?!1:(l=e.selection.getRange(),l?n(a,s,o).isAppliedToRange(l):!1):!1},value:function(){return i}}}(wysihtml5),function(t){var e;t.commands.insertHTML={exec:function(t,e,n){t.commands.support(e)?t.doc.execCommand(e,!1,n):t.selection.insertHTML(n)},state:function(){return!1},value:function(){return e}}}(wysihtml5),function(t){var e="IMG";t.commands.insertImage={exec:function(n,i,r){r="object"==typeof r?r:{src:r};var a,s,o,l=n.doc,u=this.state(n);if(u)return n.selection.setBefore(u),o=u.parentNode,o.removeChild(u),t.dom.removeEmptyTextNodes(o),"A"!==o.nodeName||o.firstChild||(n.selection.setAfter(o),o.parentNode.removeChild(o)),t.quirks.redraw(n.element),void 0;u=l.createElement(e);for(s in r)u[s]=r[s];n.selection.insertNode(u),t.browser.hasProblemsSettingCaretAfterImg()?(a=l.createTextNode(t.INVISIBLE_SPACE),n.selection.insertNode(a),n.selection.setAfter(a)):n.selection.setAfter(u)},state:function(n){var i,r,a,s=n.doc;return t.dom.hasElementWithTagName(s,e)?(i=n.selection.getSelectedNode())?i.nodeName===e?i:i.nodeType!==t.ELEMENT_NODE?!1:(r=n.selection.getText(),(r=t.lang.string(r).trim())?!1:(a=n.selection.getNodes(t.ELEMENT_NODE,function(t){return"IMG"===t.nodeName}),1!==a.length?!1:a[0])):!1:!1},value:function(t){var e=this.state(t);return e&&e.src}}}(wysihtml5),function(t){var e,n="<br>"+(t.browser.needsSpaceAfterLineBreak()?" ":"");t.commands.insertLineBreak={exec:function(e,i){e.commands.support(i)?(e.doc.execCommand(i,!1,null),t.browser.autoScrollsToCaret()||e.selection.scrollIntoView()):e.commands.exec("insertHTML",n)},state:function(){return!1},value:function(){return e}}}(wysihtml5),function(t){var e;t.commands.insertOrderedList={exec:function(e,n){var i,r,a=e.doc,s=e.selection.getSelectedNode(),o=t.dom.getParentElement(s,{nodeName:"OL"}),l=t.dom.getParentElement(s,{nodeName:"UL"}),u="_wysihtml5-temp-"+(new Date).getTime();return e.commands.support(n)?(a.execCommand(n,!1,null),void 0):(o?e.selection.executeAndRestoreSimple(function(){t.dom.resolveList(o)}):l?e.selection.executeAndRestoreSimple(function(){t.dom.renameElement(l,"ol")}):(e.commands.exec("formatBlock","div",u),r=a.querySelector("."+u),i=""===r.innerHTML||r.innerHTML===t.INVISIBLE_SPACE,e.selection.executeAndRestoreSimple(function(){o=t.dom.convertToList(r,"ol")}),i&&e.selection.selectNode(o.querySelector("li"))),void 0)},state:function(e){var n=e.selection.getSelectedNode();return t.dom.getParentElement(n,{nodeName:"OL"})},value:function(){return e}}}(wysihtml5),function(t){var e;t.commands.insertUnorderedList={exec:function(e,n){var i,r,a=e.doc,s=e.selection.getSelectedNode(),o=t.dom.getParentElement(s,{nodeName:"UL"}),l=t.dom.getParentElement(s,{nodeName:"OL"}),u="_wysihtml5-temp-"+(new Date).getTime();return e.commands.support(n)?(a.execCommand(n,!1,null),void 0):(o?e.selection.executeAndRestoreSimple(function(){t.dom.resolveList(o)}):l?e.selection.executeAndRestoreSimple(function(){t.dom.renameElement(l,"ul")}):(e.commands.exec("formatBlock","div",u),r=a.querySelector("."+u),i=""===r.innerHTML||r.innerHTML===t.INVISIBLE_SPACE,e.selection.executeAndRestoreSimple(function(){o=t.dom.convertToList(r,"ul")}),i&&e.selection.selectNode(o.querySelector("li"))),void 0)},state:function(e){var n=e.selection.getSelectedNode();return t.dom.getParentElement(n,{nodeName:"UL"})},value:function(){return e}}}(wysihtml5),function(t){var e;t.commands.italic={exec:function(e,n){return t.commands.formatInline.exec(e,n,"i")},state:function(e,n){return t.commands.formatInline.state(e,n,"i")},value:function(){return e}}}(wysihtml5),function(t){var e,n="wysiwyg-text-align-center",i=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyCenter={exec:function(e){return t.commands.formatBlock.exec(e,"formatBlock",null,n,i)},state:function(e){return t.commands.formatBlock.state(e,"formatBlock",null,n,i)},value:function(){return e}}}(wysihtml5),function(t){var e,n="wysiwyg-text-align-left",i=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyLeft={exec:function(e){return t.commands.formatBlock.exec(e,"formatBlock",null,n,i)},state:function(e){return t.commands.formatBlock.state(e,"formatBlock",null,n,i)},value:function(){return e}}}(wysihtml5),function(t){var e,n="wysiwyg-text-align-right",i=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyRight={exec:function(e){return t.commands.formatBlock.exec(e,"formatBlock",null,n,i)},state:function(e){return t.commands.formatBlock.state(e,"formatBlock",null,n,i)},value:function(){return e}}}(wysihtml5),function(t){var e;t.commands.underline={exec:function(e,n){return t.commands.formatInline.exec(e,n,"u")},state:function(e,n){return t.commands.formatInline.state(e,n,"u")},value:function(){return e}}}(wysihtml5),function(t){function e(t){for(var e;e=t.querySelector("._wysihtml5-temp");)e.parentNode.removeChild(e)}var n=90,i=89,r=8,a=46,s=40,o='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",l='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",u=t.dom;t.UndoManager=t.lang.Dispatcher.extend({constructor:function(t){this.editor=t,this.composer=t.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var s,c=this,h=this.composer.sandbox.getDocument();if(u.observe(this.element,"keydown",function(t){if(!t.altKey&&(t.ctrlKey||t.metaKey)){var e=t.keyCode,r=e===n&&!t.shiftKey,a=e===n&&t.shiftKey||e===i;r?(c.undo(),t.preventDefault()):a&&(c.redo(),t.preventDefault())}}),u.observe(this.element,"keydown",function(t){var e=t.keyCode;e!==s&&(s=e,(e===r||e===a)&&c.transact())}),t.browser.hasUndoInContextMenu()){var d,f,p=function(){e(h),clearInterval(d)};u.observe(this.element,"contextmenu",function(){p(),c.composer.selection.executeAndRestoreSimple(function(){c.element.lastChild&&c.composer.selection.setAfter(c.element.lastChild),h.execCommand("insertHTML",!1,o),h.execCommand("insertHTML",!1,l),h.execCommand("undo",!1,null)}),d=setInterval(function(){h.getElementById("_wysihtml5-redo")?(p(),c.redo()):h.getElementById("_wysihtml5-undo")||(p(),c.undo())},400),f||(f=!0,u.observe(document,"mousedown",p),u.observe(h,["mousedown","paste","cut","copy"],p))})}this.editor.observe("newword:composer",function(){c.transact()}).observe("beforecommand:composer",function(){c.transact()})},transact:function(){var t=this.history[this.position-1],e=this.composer.getValue();if(e!=t){var n=this.history.length=this.position;n>s&&(this.history.shift(),this.position--),this.position++,this.history.push(e)}},undo:function(){this.transact(),this.position<=1||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(t){this.composer.setValue(t),this.editor.focus(!0)}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(t,e,n){this.parent=t,this.element=e,this.config=n,this._observeViewChange()},_observeViewChange:function(){var t=this;this.parent.observe("beforeload",function(){t.parent.observe("change_view",function(e){e===t.name?(t.parent.currentView=t,t.show(),setTimeout(function(){t.focus()},0)):t.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(t){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(t){var e=t.dom,n=t.browser;t.views.Composer=t.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(t,e,n){this.base(t,e,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(e){var n=this.isEmpty()?"":t.quirks.getCorrectInnerHTML(this.element);return e&&(n=this.parent.parse(n)),n=t.lang.string(n).replace(t.INVISIBLE_SPACE).by("")},setValue:function(t,e){e&&(t=this.parent.parse(t)),this.element.innerHTML=t},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=e.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(e){t.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;e&&n&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return e.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var t=this.element.innerHTML,e="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return""===t||t===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector(e)},_initSandbox:function(){var t=this;this.sandbox=new e.Sandbox(function(){t._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var n=document.createElement("input");n.type="hidden",n.name="_wysihtml5_mode",n.value=1;var i=this.textarea.element;e.insert(this.iframe).after(i),e.insert(n).after(i)},_create:function(){var i=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new t.Selection(this.parent),this.commands=new t.Commands(this.parent),e.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),e.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var r=this.config.name;r&&(e.addClass(this.element,r),e.addClass(this.iframe,r));var a="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");a&&e.simulatePlaceholder(this.parent,this,a),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){i.focus()},100),t.quirks.insertLineBreakOnReturn(this),n.clearsContentEditableCorrectly()||t.quirks.ensureProperClearing(this),n.clearsListsInContentEditableCorrectly()||t.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i=this,r=n.canDisableAutoLinking(),a=n.doesAutoLinkingInContentEditable();if(r&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!a||a&&r)&&this.parent.observe("newword:composer",function(){i.selection.executeAndRestore(function(t,n){e.autoLink(n.parentNode)})});var s=this.sandbox.getDocument().getElementsByTagName("a"),o=e.autoLink.URL_REG_EXP,l=function(n){var i=t.lang.string(e.getTextContent(n)).trim();return"www."===i.substr(0,4)&&(i="http://"+i),i};e.observe(this.element,"keydown",function(t){if(s.length){var n,r=i.selection.getSelectedNode(t.target.ownerDocument),a=e.getParentElement(r,{nodeName:"A"},4);a&&(n=l(a),setTimeout(function(){var t=l(a);t!==n&&t.match(o)&&a.setAttribute("href",t)},0))}})}},_initObjectResizing:function(){var i=["width","height"],r=i.length,a=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?n.supportsEvent("resizeend")&&e.observe(a,"resizeend",function(e){for(var n,s=e.target||e.srcElement,o=s.style,l=0;r>l;l++)n=i[l],o[n]&&(s.setAttribute(n,parseInt(o[n],10)),o[n]="");t.quirks.redraw(a)}):n.supportsEvent("resizestart")&&e.observe(a,"resizestart",function(t){t.preventDefault()})},_initUndoManager:function(){new t.UndoManager(this.parent)}})}(wysihtml5),function(t){var e=t.dom,n=document,i=window,r=n.createElement("div"),a=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],s=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],o=["width","height","top","left","right","bottom"],l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",t.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],u=function(t){if(t.setActive)try{t.setActive()}catch(r){}else{var a=t.style,s=n.documentElement.scrollTop||n.body.scrollTop,o=n.documentElement.scrollLeft||n.body.scrollLeft,l={position:a.position,top:a.top,left:a.left,WebkitUserSelect:a.WebkitUserSelect};e.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(t),t.focus(),e.setStyles(l).on(t),i.scrollTo&&i.scrollTo(o,s)}};t.views.Composer.prototype.style=function(){var c=this,h=n.querySelector(":focus"),d=this.textarea.element,f=d.hasAttribute("placeholder"),p=f&&d.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||r.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||r.cloneNode(!1),f&&d.removeAttribute("placeholder"),d===h&&d.blur(),e.copyStyles(s).from(d).to(this.iframe).andTo(this.blurStylesHost),e.copyStyles(a).from(d).to(this.element).andTo(this.blurStylesHost),e.insertCSS(l).into(this.element.ownerDocument),u(d),e.copyStyles(s).from(d).to(this.focusStylesHost),e.copyStyles(a).from(d).to(this.focusStylesHost);var g=t.lang.array(s).without(["display"]);if(h?h.focus():d.blur(),f&&d.setAttribute("placeholder",p),!t.browser.hasCurrentStyleProperty())var m=e.observe(i,"resize",function(){if(!e.contains(document.documentElement,c.iframe))return m.stop(),void 0;var t=e.getStyle("display").from(d),n=e.getStyle("display").from(c.iframe);d.style.display="",c.iframe.style.display="none",e.copyStyles(o).from(d).to(c.iframe).andTo(c.focusStylesHost).andTo(c.blurStylesHost),c.iframe.style.display=n,d.style.display=t
});return this.parent.observe("focus:composer",function(){e.copyStyles(g).from(c.focusStylesHost).to(c.iframe),e.copyStyles(a).from(c.focusStylesHost).to(c.element)}),this.parent.observe("blur:composer",function(){e.copyStyles(g).from(c.blurStylesHost).to(c.iframe),e.copyStyles(a).from(c.blurStylesHost).to(c.element)}),this}}(wysihtml5),function(t){var e=t.dom,n=t.browser,i={66:"bold",73:"italic",85:"underline"};t.views.Composer.prototype.observe=function(){var r=this,a=this.getValue(),s=this.sandbox.getIframe(),o=this.element,l=n.supportsEventsInIframeCorrectly()?o:this.sandbox.getWindow(),u=n.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];e.observe(s,"DOMNodeRemoved",function(){clearInterval(c),r.parent.fire("destroy:composer")});var c=setInterval(function(){e.contains(document.documentElement,s)||(clearInterval(c),r.parent.fire("destroy:composer"))},250);e.observe(l,"focus",function(){r.parent.fire("focus").fire("focus:composer"),setTimeout(function(){a=r.getValue()},0)}),e.observe(l,"blur",function(){a!==r.getValue()&&r.parent.fire("change").fire("change:composer"),r.parent.fire("blur").fire("blur:composer")}),t.browser.isIos()&&e.observe(o,"blur",function(){var t=o.ownerDocument.createElement("input"),e=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{r.selection.insertNode(t)}catch(i){o.appendChild(t)}t.focus(),t.parentNode.removeChild(t),window.scrollTo(n,e)}),e.observe(o,"dragenter",function(){r.parent.fire("unset_placeholder")}),n.firesOnDropOnlyWhenOnDragOverIsCancelled()&&e.observe(o,["dragover","dragenter"],function(t){t.preventDefault()}),e.observe(o,u,function(t){var e,i=t.dataTransfer;console.log("PASTED",t),i&&n.supportsDataTransfer()&&(e=i.getData("text/html")||i.getData("text/plain")),e?(o.focus(),r.commands.exec("insertHTML",e),r.parent.fire("paste").fire("paste:composer"),t.stopPropagation(),t.preventDefault()):setTimeout(function(){r.parent.fire("paste").fire("paste:composer")},0)}),e.observe(o,"keyup",function(e){var n=e.keyCode;(n===t.SPACE_KEY||n===t.ENTER_KEY)&&r.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){r.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||e.observe(o,"mousedown",function(t){var e=t.target;"IMG"===e.nodeName&&(r.selection.selectNode(e),t.preventDefault())}),e.observe(o,"keydown",function(t){var e=t.keyCode,n=i[e];(t.ctrlKey||t.metaKey)&&!t.altKey&&n&&(r.commands.exec(n),t.preventDefault())}),e.observe(o,"keydown",function(e){var n,i=r.selection.getSelectedNode(!0),a=e.keyCode;!i||"IMG"!==i.nodeName||a!==t.BACKSPACE_KEY&&a!==t.DELETE_KEY||(n=i.parentNode,n.removeChild(i),"A"!==n.nodeName||n.firstChild||n.parentNode.removeChild(n),setTimeout(function(){t.quirks.redraw(o)},0),e.preventDefault())});var h={IMG:"Image: ",A:"Link: "};e.observe(o,"mouseover",function(t){var e,n=t.target,i=n.nodeName;if("A"===i||"IMG"===i){var r=n.hasAttribute("title");r||(e=h[i]+(n.getAttribute("href")||n.getAttribute("src")),n.setAttribute("title",e))}})}}(wysihtml5),function(t){var e=400;t.views.Synchronizer=Base.extend({constructor:function(t,e,n){this.editor=t,this.textarea=e,this.composer=n,this._observe()},fromComposerToTextarea:function(e){this.textarea.setValue(t.lang.string(this.composer.getValue()).trim(),e)},fromTextareaToComposer:function(t){var e=this.textarea.getValue();e?this.composer.setValue(e,t):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(t){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(t):this.fromComposerToTextarea(t)},_observe:function(){var n,i=this,r=this.textarea.element.form,a=function(){n=setInterval(function(){i.fromComposerToTextarea()},e)},s=function(){clearInterval(n),n=null};a(),r&&(t.dom.observe(r,"submit",function(){i.sync(!0)}),t.dom.observe(r,"reset",function(){setTimeout(function(){i.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(t){"composer"!==t||n?"textarea"===t&&(i.fromComposerToTextarea(!0),s()):(i.fromTextareaToComposer(!0),a())}),this.editor.observe("destroy:composer",s)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(t,e,n){this.base(t,e,n),this._observe()},clear:function(){this.element.value=""},getValue:function(t){var e=this.isEmpty()?"":this.element.value;return t&&(e=this.parent.parse(e)),e},setValue:function(t,e){e&&(t=this.parent.parse(t)),this.element.value=t},hasPlaceholderSet:function(){var t=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),e=this.element.getAttribute("placeholder")||null,n=this.element.value,i=!n;return t&&i||n===e},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var t=this.element,e=this.parent,n={focusin:"focus",focusout:"blur"},i=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];e.observe("beforeload",function(){wysihtml5.dom.observe(t,i,function(t){var i=n[t.type]||t.type;e.fire(i).fire(i+":textarea")}),wysihtml5.dom.observe(t,["paste","drop"],function(){setTimeout(function(){e.fire("paste").fire("paste:textarea")},0)})})}}),function(t){var e=t.dom,n="wysihtml5-command-dialog-opened",i="input, select, textarea",r="[data-wysihtml5-dialog-field]",a="data-wysihtml5-dialog-field";t.toolbar.Dialog=t.lang.Dispatcher.extend({constructor:function(t,e){this.link=t,this.container=e},_observe:function(){if(!this._observed){var r=this,a=function(t){var e=r._serialize();e==r.elementToChange?r.fire("edit",e):r.fire("save",e),r.hide(),t.preventDefault(),t.stopPropagation()};e.observe(r.link,"click",function(){e.hasClass(r.link,n)&&setTimeout(function(){r.hide()},0)}),e.observe(this.container,"keydown",function(e){var n=e.keyCode;n===t.ENTER_KEY&&a(e),n===t.ESCAPE_KEY&&r.hide()}),e.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",a),e.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(t){r.fire("cancel"),r.hide(),t.preventDefault(),t.stopPropagation()});for(var s=this.container.querySelectorAll(i),o=0,l=s.length,u=function(){clearInterval(r.interval)};l>o;o++)e.observe(s[o],"change",u);this._observed=!0}},_serialize:function(){for(var t=this.elementToChange||{},e=this.container.querySelectorAll(r),n=e.length,i=0;n>i;i++)t[e[i].getAttribute(a)]=e[i].value;return t},_interpolate:function(t){for(var e,n,i,s=document.querySelector(":focus"),o=this.container.querySelectorAll(r),l=o.length,u=0;l>u;u++)e=o[u],e!==s&&(t&&"hidden"===e.type||(n=e.getAttribute(a),i=this.elementToChange?this.elementToChange[n]||"":e.defaultValue,e.value=i))},show:function(t){var r=this,a=this.container.querySelector(i);if(this.elementToChange=t,this._observe(),this._interpolate(),t&&(this.interval=setInterval(function(){r._interpolate(!0)},500)),e.addClass(this.link,n),this.container.style.display="",this.fire("show"),a&&!t)try{a.focus()}catch(s){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,e.removeClass(this.link,n),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(t){var e=t.dom,n={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},r={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},a={"x-webkit-speech":"",speech:""};t.toolbar.Speech=function(s,o){var l=document.createElement("input");if(!t.browser.supportsSpeechApiOn(l))return o.style.display="none",void 0;var u=document.createElement("div");t.lang.object(i).merge({width:o.offsetWidth+"px",height:o.offsetHeight+"px"}),e.insert(l).into(u),e.insert(u).into(o),e.setStyles(r).on(l),e.setAttributes(a).on(l),e.setStyles(i).on(u),e.setStyles(n).on(o);var c="onwebkitspeechchange"in l?"webkitspeechchange":"speechchange";e.observe(l,c,function(){s.execCommand("insertText",l.value),l.value=""}),e.observe(l,"click",function(t){e.hasClass(o,"wysihtml5-command-disabled")&&t.preventDefault(),t.stopPropagation()})}}(wysihtml5),function(t){var e="wysihtml5-command-disabled",n="wysihtml5-commands-disabled",i="wysihtml5-command-active",r="wysihtml5-action-active",a=t.dom;t.toolbar.Toolbar=Base.extend({constructor:function(e,n){this.editor=e,this.container="string"==typeof n?document.getElementById(n):n,this.composer=e.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var i=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),r=i.length,a=0;r>a;a++)new t.toolbar.Speech(this,i[a])},_getLinks:function(e){for(var n,i,r,a,s,o=this[e+"Links"]=t.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+e+"]")).get(),l=o.length,u=0,c=this[e+"Mapping"]={};l>u;u++)n=o[u],r=n.getAttribute("data-wysihtml5-"+e),a=n.getAttribute("data-wysihtml5-"+e+"-value"),i=this.container.querySelector("[data-wysihtml5-"+e+"-group='"+r+"']"),s=this._getDialog(n,r),c[r+":"+a]={link:n,group:i,name:r,value:a,dialog:s,state:!1}},_getDialog:function(e,n){var i,r,a=this,s=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return s&&(i=new t.toolbar.Dialog(e,s),i.observe("show",function(){r=a.composer.selection.getBookmark(),a.editor.fire("show:dialog",{command:n,dialogContainer:s,commandLink:e})}),i.observe("save",function(t){r&&a.composer.selection.setBookmark(r),a._execCommand(n,t),a.editor.fire("save:dialog",{command:n,dialogContainer:s,commandLink:e})}),i.observe("cancel",function(){a.editor.focus(!1),a.editor.fire("cancel:dialog",{command:n,dialogContainer:s,commandLink:e})})),i},execCommand:function(t,e){if(!this.commandsDisabled){var n=this.commandMapping[t+":"+e];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(t,e)}},_execCommand:function(t,e){this.editor.focus(!1),this.composer.commands.exec(t,e),this._updateLinkStates()},execAction:function(t){var e=this.editor;switch(t){case"change_view":e.currentView===e.textarea?e.fire("change_view","composer"):e.fire("change_view","textarea")}},_observe:function(){for(var t=this,e=this.editor,i=this.container,r=this.commandLinks.concat(this.actionLinks),s=r.length,o=0;s>o;o++)a.setAttributes({href:"javascript:;",unselectable:"on"}).on(r[o]);a.delegate(i,"[data-wysihtml5-command]","mousedown",function(t){t.preventDefault()}),a.delegate(i,"[data-wysihtml5-command]","click",function(e){var n=this,i=n.getAttribute("data-wysihtml5-command"),r=n.getAttribute("data-wysihtml5-command-value");t.execCommand(i,r),e.preventDefault()}),a.delegate(i,"[data-wysihtml5-action]","click",function(e){var n=this.getAttribute("data-wysihtml5-action");t.execAction(n),e.preventDefault()}),e.observe("focus:composer",function(){t.bookmark=null,clearInterval(t.interval),t.interval=setInterval(function(){t._updateLinkStates()},500)}),e.observe("blur:composer",function(){clearInterval(t.interval)}),e.observe("destroy:composer",function(){clearInterval(t.interval)}),e.observe("change_view",function(e){setTimeout(function(){t.commandsDisabled="composer"!==e,t._updateLinkStates(),t.commandsDisabled?a.addClass(i,n):a.removeClass(i,n)},0)})},_updateLinkStates:function(){var n,s,o,l,u=(this.composer.element,this.commandMapping),c=this.actionMapping;for(n in u)l=u[n],this.commandsDisabled?(s=!1,a.removeClass(l.link,i),l.group&&a.removeClass(l.group,i),l.dialog&&l.dialog.hide()):(s=this.composer.commands.state(l.name,l.value),t.lang.object(s).isArray()&&(s=1===s.length?s[0]:!0),a.removeClass(l.link,e),l.group&&a.removeClass(l.group,e)),l.state!==s&&(l.state=s,s?(a.addClass(l.link,i),l.group&&a.addClass(l.group,i),l.dialog&&("object"==typeof s?l.dialog.show(s):l.dialog.hide())):(a.removeClass(l.link,i),l.group&&a.removeClass(l.group,i),l.dialog&&l.dialog.hide()));for(n in c)o=c[n],"change_view"===o.name&&(o.state=this.editor.currentView===this.editor.textarea,o.state?a.addClass(o.link,r):a.removeClass(o.link,r))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(t){var e,n={name:e,style:!0,toolbar:e,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:t.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:e,allowObjectResizing:!0,supportTouchDevices:!0};t.Editor=t.lang.Dispatcher.extend({constructor:function(e,i){if(this.textareaElement="string"==typeof e?document.getElementById(e):e,this.config=t.lang.object({}).merge(n).merge(i).get(),this.textarea=new t.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=t.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&t.browser.isTouchDevice()){var r=this;return setTimeout(function(){r.fire("beforeload").fire("load")},0),void 0}t.dom.addClass(document.body,this.config.bodyClassName),this.composer=new t.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new t.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new t.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(a){}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(t){return this.currentView.getValue(t)},setValue:function(t,e){return t?(this.currentView.setValue(t,e),this):this.clear()},focus:function(t){return this.currentView.focus(t),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(e){var n=this.config.parser(e,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof e&&t.quirks.redraw(e),n},_initParser:function(){this.observe("paste:composer",function(){var e=!0,n=this;n.composer.selection.executeAndRestore(function(){t.quirks.cleanPastedHTML(n.composer.element),n.parse(n.composer.element)},e)}),this.observe("paste:textarea",function(){var t,e=this.textarea.getValue();t=this.parse(e),this.textarea.setValue(t)})}})}(wysihtml5),!function(t,e){"use strict";var n={"font-styles":function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li class='dropdown'><a class='btn btn-default dropdown-toggle"+n+"' data-toggle='dropdown' href='#'>"+"<i class='icon-font'></i>&nbsp;<span class='current-font'>"+t.font_styles.normal+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+t.font_styles.normal+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+t.font_styles.h1+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+t.font_styles.h2+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+t.font_styles.h3+"</a></li>"+"</ul>"+"</li>"},emphasis:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='btn-group'><a class='btn btn-default"+n+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+t.emphasis.bold+"</a>"+"<a class='btn btn-default"+n+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+t.emphasis.italic+"</a>"+"<a class='btn btn-default"+n+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+t.emphasis.underline+"</a>"+"</div>"+"</li>"},lists:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='btn-group'><a class='btn btn-default"+n+"' data-wysihtml5-command='insertUnorderedList' title='"+t.lists.unordered+"' tabindex='-1'><i class='icon-list'></i></a>"+"<a class='btn btn-default"+n+"' data-wysihtml5-command='insertOrderedList' title='"+t.lists.ordered+"' tabindex='-1'><i class='icon-th-list'></i></a>"+"<a class='btn btn-default"+n+"' data-wysihtml5-command='Outdent' title='"+t.lists.outdent+"' tabindex='-1'><i class='icon-indent-right'></i></a>"+"<a class='btn btn-default"+n+"' data-wysihtml5-command='Indent' title='"+t.lists.indent+"' tabindex='-1'><i class='icon-indent-left'></i></a>"+"</div>"+"</li>"},link:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+t.link.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn btn-default' data-dismiss='modal'>"+t.link.cancel+"</a>"+"<a href='#' class='btn btn-blue' data-dismiss='modal'>"+t.link.insert+"</a>"+"</div>"+"</div>"+"<a class='btn btn-default"+n+"' data-wysihtml5-command='createLink' title='"+t.link.insert+"' tabindex='-1'><i class='icon-share'></i></a>"+"</li>"},image:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+t.image.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-image-url input-xlarge'>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn btn-default' data-dismiss='modal'>"+t.image.cancel+"</a>"+"<a href='#' class='btn btn-blue' data-dismiss='modal'>"+t.image.insert+"</a>"+"</div>"+"</div>"+"<a class='btn btn-default"+n+"' data-wysihtml5-command='insertImage' title='"+t.image.insert+"' tabindex='-1'><i class='icon-picture'></i></a>"+"</li>"},html:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li><div class='btn-group'><a class='btn btn-default"+n+"' data-wysihtml5-action='change_view' title='"+t.html.edit+"' tabindex='-1'><i class='icon-pencil'></i></a>"+"</div>"+"</li>"},color:function(t,e){var n=e&&e.size?" btn-"+e.size:"";return"<li class='dropdown'><a class='btn btn-default dropdown-toggle"+n+"' data-toggle='dropdown' href='#' tabindex='-1'>"+"<span class='current-color'>"+t.colours.black+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+t.colours.black+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+t.colours.silver+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+t.colours.gray+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+t.colours.maroon+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+t.colours.red+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+t.colours.purple+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+t.colours.green+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+t.colours.olive+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+t.colours.navy+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+t.colours.blue+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+t.colours.orange+"</a></li>"+"</ul>"+"</li>"}},i=function(t,e,i){return n[t](e,i)},r=function(e,i){this.el=e;var r=i||s;for(var a in r.customTemplates)n[a]=r.customTemplates[a];this.toolbar=this.createToolbar(e,r),this.editor=this.createEditor(i),window.editor=this.editor,t("iframe.wysihtml5-sandbox").each(function(e,n){t(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){t("li.dropdown").removeClass("open")}})})};r.prototype={constructor:r,createEditor:function(n){n=n||{},n=t.extend(!0,{},n),n.toolbar=this.toolbar[0];var i=new e.Editor(this.el[0],n);if(n&&n.events)for(var r in n.events)i.on(r,n.events[r]);return i},createToolbar:function(e,n){var r=this,a=t("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),l=n.locale||s.locale||"en";for(var u in s){var c=!1;void 0!==n[u]?n[u]===!0&&(c=!0):c=s[u],c===!0&&(a.append(i(u,o[l],n)),"html"===u&&this.initHtml(a),"link"===u&&this.initInsertLink(a),"image"===u&&this.initInsertImage(a))}if(n.toolbar)for(u in n.toolbar)a.append(n.toolbar[u]);return a.find("a[data-wysihtml5-command='formatBlock']").click(function(e){var n=e.target||e.srcElement,i=t(n);r.toolbar.find(".current-font").text(i.html())}),a.find("a[data-wysihtml5-command='foreColor']").click(function(e){var n=e.target||e.srcElement,i=t(n);r.toolbar.find(".current-color").text(i.html())}),this.el.before(a),a},initHtml:function(t){var e="a[data-wysihtml5-action='change_view']";t.find(e).click(function(){t.find("a.btn").not(e).toggleClass("disabled")})},initInsertImage:function(e){var n,i=this,r=e.find(".bootstrap-wysihtml5-insert-image-modal"),a=r.find(".bootstrap-wysihtml5-insert-image-url"),s=r.find("a.btn-blue"),o=a.val(),l=function(){var t=a.val();a.val(o),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null),i.editor.composer.commands.exec("insertImage",t)};a.keypress(function(t){13==t.which&&(l(),r.modal("hide"))}),s.click(l),r.on("shown",function(){a.focus()}),r.on("hide",function(){i.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=insertImage]").click(function(){var e=t(this).hasClass("wysihtml5-command-active");return e?!0:(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),r.appendTo("body").modal("show"),r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})},initInsertLink:function(e){var n,i=this,r=e.find(".bootstrap-wysihtml5-insert-link-modal"),a=r.find(".bootstrap-wysihtml5-insert-link-url"),s=r.find("a.btn-blue"),o=a.val(),l=function(){var t=a.val();a.val(o),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null),i.editor.composer.commands.exec("createLink",{href:t,target:"_blank",rel:"nofollow"})};a.keypress(function(t){13==t.which&&(l(),r.modal("hide"))}),s.click(l),r.on("shown",function(){a.focus()}),r.on("hide",function(){i.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=createLink]").click(function(){var e=t(this).hasClass("wysihtml5-command-active");return e?!0:(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),r.appendTo("body").modal("show"),r.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})}};var a={resetDefaults:function(){t.fn.wysihtml5.defaultOptions=t.extend(!0,{},t.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(e){return this.each(function(){var n=t(this);n.data("wysihtml5",new r(n,e))})},shallowExtend:function(e){var n=t.extend({},t.fn.wysihtml5.defaultOptions,e||{}),i=this;return a.bypassDefaults.apply(i,[n])},deepExtend:function(e){var n=t.extend(!0,{},t.fn.wysihtml5.defaultOptions,e||{}),i=this;return a.bypassDefaults.apply(i,[n])},init:function(t){var e=this;return a.shallowExtend.apply(e,[t])}};t.fn.wysihtml5=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.wysihtml5"),void 0):a.init.apply(this,arguments)},t.fn.wysihtml5.Constructor=r;var s=t.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{set_attributes:{target:"_blank",rel:"nofollow"},check_attributes:{href:"url"}},span:1,div:1,code:1,pre:1}},stylesheets:["./lib/css/wysiwyg-color.css"],locale:"en"};"undefined"==typeof t.fn.wysihtml5.defaultOptionsCache&&(t.fn.wysihtml5.defaultOptionsCache=t.extend(!0,{},t.fn.wysihtml5.defaultOptions));var o=t.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5),function(t){var e,n,i="0.3.4",r="hasOwnProperty",a=/[\.\/]/,s="*",o=function(){},l=function(t,e){return t-e},u={n:{}},c=function(t,i){var r,a=n,s=Array.prototype.slice.call(arguments,2),o=c.listeners(t),u=0,h=[],d={},f=[],p=e;e=t,n=0;for(var g=0,m=o.length;m>g;g++)"zIndex"in o[g]&&(h.push(o[g].zIndex),o[g].zIndex<0&&(d[o[g].zIndex]=o[g]));for(h.sort(l);h[u]<0;)if(r=d[h[u++]],f.push(r.apply(i,s)),n)return n=a,f;for(g=0;m>g;g++)if(r=o[g],"zIndex"in r)if(r.zIndex==h[u]){if(f.push(r.apply(i,s)),n)break;do if(u++,r=d[h[u]],r&&f.push(r.apply(i,s)),n)break;while(r)}else d[r.zIndex]=r;else if(f.push(r.apply(i,s)),n)break;return n=a,e=p,f.length?f:null};c.listeners=function(t){var e,n,i,r,o,l,c,h,d=t.split(a),f=u,p=[f],g=[];for(r=0,o=d.length;o>r;r++){for(h=[],l=0,c=p.length;c>l;l++)for(f=p[l].n,n=[f[d[r]],f[s]],i=2;i--;)e=n[i],e&&(h.push(e),g=g.concat(e.f||[]));p=h}return g},c.on=function(t,e){for(var n=t.split(a),i=u,r=0,s=n.length;s>r;r++)i=i.n,!i[n[r]]&&(i[n[r]]={n:{}}),i=i[n[r]];for(i.f=i.f||[],r=0,s=i.f.length;s>r;r++)if(i.f[r]==e)return o;return i.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},c.stop=function(){n=1},c.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},c.off=c.unbind=function(t,e){var n,i,o,l,c,h,d,f=t.split(a),p=[u];for(l=0,c=f.length;c>l;l++)for(h=0;h<p.length;h+=o.length-2){if(o=[h,1],n=p[h].n,f[l]!=s)n[f[l]]&&o.push(n[f[l]]);else for(i in n)n[r](i)&&o.push(n[i]);p.splice.apply(p,o)}for(l=0,c=p.length;c>l;l++)for(n=p[l];n.n;){if(e){if(n.f){for(h=0,d=n.f.length;d>h;h++)if(n.f[h]==e){n.f.splice(h,1);break}!n.f.length&&delete n.f}for(i in n.n)if(n.n[r](i)&&n.n[i].f){var g=n.n[i].f;for(h=0,d=g.length;d>h;h++)if(g[h]==e){g.splice(h,1);break}!g.length&&delete n.n[i].f}}else{delete n.f;for(i in n.n)n.n[r](i)&&n.n[i].f&&delete n.n[i].f}n=n.n}},c.once=function(t,e){var n=function(){var i=e.apply(this,arguments);return c.unbind(t,n),i};return c.on(t,n)},c.version=i,c.toString=function(){return"You are running Eve "+i},"undefined"!=typeof module&&module.exports?module.exports=c:"undefined"!=typeof define?define("eve",[],function(){return c}):t.eve=c}(this),function(){function t(t){for(var e=0;e<sn.length;e++)sn[e].el.paper==t&&sn.splice(e--,1)}function e(t,e,n,r,s,o){n=J(n);var l,u,c,h,d,f,p=t.ms,g={},m={},y={};if(r)for(w=0,C=sn.length;C>w;w++){var b=sn[w];if(b.el.id==e.id&&b.anim==t){b.percent!=n?(sn.splice(w,1),c=1):u=b,e.attr(b.totalOrigin);break}}else r=+m;for(var w=0,C=t.percents.length;C>w;w++){if(t.percents[w]==n||t.percents[w]>r*t.top){n=t.percents[w],d=t.percents[w-1]||0,p=p/t.top*(n-d),h=t.percents[w+1],l=t.anim[n];break}r&&e.attr(t.anim[t.percents[w]])}if(l){if(u)u.initstatus=r,u.start=new Date-u.ms*r;else{for(var S in l)if(l[_](S)&&(ee[_](S)||e.paper.customAttributes[_](S)))switch(g[S]=e.attr(S),null==g[S]&&(g[S]=te[S]),m[S]=l[S],ee[S]){case q:y[S]=(m[S]-g[S])/p;break;case"colour":g[S]=v.getRGB(g[S]);var T=v.getRGB(m[S]);y[S]={r:(T.r-g[S].r)/p,g:(T.g-g[S].g)/p,b:(T.b-g[S].b)/p};break;case"path":var D=Pe(g[S],m[S]),k=D[1];for(g[S]=D[0],y[S]=[],w=0,C=g[S].length;C>w;w++){y[S][w]=[0];for(var E=1,N=g[S][w].length;N>E;E++)y[S][w][E]=(k[w][E]-g[S][w][E])/p}break;case"transform":var A=e._,P=je(A[S],m[S]);if(P)for(g[S]=P.from,m[S]=P.to,y[S]=[],y[S].real=!0,w=0,C=g[S].length;C>w;w++)for(y[S][w]=[g[S][w][0]],E=1,N=g[S][w].length;N>E;E++)y[S][w][E]=(m[S][w][E]-g[S][w][E])/p;else{var O=e.matrix||new a,F={_:{transform:A.transform},getBBox:function(){return e.getBBox(1)}};g[S]=[O.a,O.b,O.c,O.d,O.e,O.f],Le(F,m[S]),m[S]=F._.transform,y[S]=[(F.matrix.a-O.a)/p,(F.matrix.b-O.b)/p,(F.matrix.c-O.c)/p,(F.matrix.d-O.d)/p,(F.matrix.e-O.e)/p,(F.matrix.f-O.f)/p]}break;case"csv":var L=R(l[S])[I](x),H=R(g[S])[I](x);if("clip-rect"==S)for(g[S]=H,y[S]=[],w=H.length;w--;)y[S][w]=(L[w]-g[S][w])/p;m[S]=L;break;default:for(L=[][M](l[S]),H=[][M](g[S]),y[S]=[],w=e.paper.customAttributes[S].length;w--;)y[S][w]=((L[w]||0)-(H[w]||0))/p}var j=l.easing,B=v.easing_formulas[j];if(!B)if(B=R(j).match(G),B&&5==B.length){var z=B;B=function(t){return i(t,+z[1],+z[2],+z[3],+z[4],p)}}else B=he;if(f=l.start||t.start||+new Date,b={anim:t,percent:n,timestamp:f,start:f+(t.del||0),status:0,initstatus:r||0,stop:!1,ms:p,easing:B,from:g,diff:y,to:m,el:e,callback:l.callback,prev:d,next:h,repeat:o||t.times,origin:e.attr(),totalOrigin:s},sn.push(b),r&&!u&&!c&&(b.stop=!0,b.start=new Date-p*r,1==sn.length))return ln();c&&(b.start=new Date-b.ms*r),1==sn.length&&on(ln)}eve("raphael.anim.start."+e.id,e,t)}}function n(t,e){var n=[],i={};if(this.ms=e,this.times=1,t){for(var r in t)t[_](r)&&(i[J(r)]=t[r],n.push(J(r)));n.sort(ue)}this.anim=i,this.top=n[n.length-1],this.percents=n}function i(t,e,n,i,r,a){function s(t,e){var n,i,r,a,s,o;for(r=t,o=0;8>o;o++){if(a=l(r)-t,B(a)<e)return r;if(s=(3*h*r+2*c)*r+u,B(s)<1e-6)break;r-=a/s}if(n=0,i=1,r=t,n>r)return n;if(r>i)return i;for(;i>n;){if(a=l(r),B(a-t)<e)return r;t>a?n=r:i=r,r=(i-n)/2+n}return r}function o(t,e){var n=s(t,e);return((p*n+f)*n+d)*n}function l(t){return((h*t+c)*t+u)*t}var u=3*e,c=3*(i-e)-u,h=1-u-c,d=3*n,f=3*(r-n)-d,p=1-d-f;return o(t,1/(200*a))}function r(){return this.x+A+this.y+A+this.width+"  "+this.height}function a(t,e,n,i,r,a){null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+i,this.e=+r,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function s(t,e,n){t=v._path2curve(t),e=v._path2curve(e);for(var i,r,a,s,l,u,c,h,d,f,p=n?0:[],g=0,m=t.length;m>g;g++){var y=t[g];if("M"==y[0])i=l=y[1],r=u=y[2];else{"C"==y[0]?(d=[i,r].concat(y.slice(1)),i=d[6],r=d[7]):(d=[i,r,i,r,l,u,l,u],i=l,r=u);for(var b=0,x=e.length;x>b;b++){var w=e[b];if("M"==w[0])a=c=w[1],s=h=w[2];else{"C"==w[0]?(f=[a,s].concat(w.slice(1)),a=f[6],s=f[7]):(f=[a,s,a,s,c,h,c,h],a=c,s=h);var C=o(d,f,n);if(n)p+=C;else{for(var _=0,S=C.length;S>_;_++)C[_].segment1=g,C[_].segment2=b,C[_].bez1=d,C[_].bez2=f;p=p.concat(C)}}}}}return p}function o(t,e,n){var i=v.bezierBBox(t),r=v.bezierBBox(e);if(!v.isBBoxIntersect(i,r))return n?0:[];for(var a=c.apply(0,t),s=c.apply(0,e),o=~~(a/5),u=~~(s/5),h=[],d=[],f={},p=n?0:[],g=0;o+1>g;g++){var m=v.findDotsAtSegment.apply(v,t.concat(g/o));h.push({x:m.x,y:m.y,t:g/o})}for(g=0;u+1>g;g++)m=v.findDotsAtSegment.apply(v,e.concat(g/u)),d.push({x:m.x,y:m.y,t:g/u});for(g=0;o>g;g++)for(var y=0;u>y;y++){var b=h[g],x=h[g+1],w=d[y],C=d[y+1],_=B(x.x-b.x)<.001?"y":"x",S=B(C.x-w.x)<.001?"y":"x",T=l(b.x,b.y,x.x,x.y,w.x,w.y,C.x,C.y);
if(T){if(f[T.x.toFixed(4)]==T.y.toFixed(4))continue;f[T.x.toFixed(4)]=T.y.toFixed(4);var D=b.t+B((T[_]-b[_])/(x[_]-b[_]))*(x.t-b.t),k=w.t+B((T[S]-w[S])/(C[S]-w[S]))*(C.t-w.t);D>=0&&1>=D&&k>=0&&1>=k&&(n?p++:p.push({x:T.x,y:T.y,t1:D,t2:k}))}}return p}function l(t,e,n,i,r,a,s,o){if(!(H(t,n)<j(r,s)||j(t,n)>H(r,s)||H(e,i)<j(a,o)||j(e,i)>H(a,o))){var l=(t*i-e*n)*(r-s)-(t-n)*(r*o-a*s),u=(t*i-e*n)*(a-o)-(e-i)*(r*o-a*s),c=(t-n)*(a-o)-(e-i)*(r-s);if(!c)return;var h=l/c,d=u/c,f=+h.toFixed(2),p=+d.toFixed(2);if(f<+j(t,n).toFixed(2)||f>+H(t,n).toFixed(2)||f<+j(r,s).toFixed(2)||f>+H(r,s).toFixed(2)||p<+j(e,i).toFixed(2)||p>+H(e,i).toFixed(2)||p<+j(a,o).toFixed(2)||p>+H(a,o).toFixed(2))return;return{x:h,y:d}}}function u(t,e,n,i,r,a,s,o,l){if(!(0>l||c(t,e,n,i,r,a,s,o)<l)){var u,h=1,d=h/2,f=h-d,p=.01;for(u=c(t,e,n,i,r,a,s,o,f);B(u-l)>p;)d/=2,f+=(l>u?1:-1)*d,u=c(t,e,n,i,r,a,s,o,f);return f}}function c(t,e,n,i,r,a,s,o,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var u=l/2,c=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;c>g;g++){var m=u*d[g]+u,v=h(m,t,n,r,s),y=h(m,e,i,a,o),b=v*v+y*y;p+=f[g]*L.sqrt(b)}return u*p}function h(t,e,n,i,r){var a=-3*e+9*n-9*i+3*r,s=t*a+6*e-12*n+6*i;return t*s-3*e+3*n}function d(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?a[3]={x:+t[0],y:+t[1]}:r-2==i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n}function f(){return this.hex}function p(t,e,n){function i(){var r=Array.prototype.slice.call(arguments,0),a=r.join("?"),s=i.cache=i.cache||{},o=i.count=i.count||[];return s[_](a)?(g(o,a),n?n(s[a]):s[a]):(o.length>=1e3&&delete s[o.shift()],o.push(a),s[a]=t[k](e,r),n?n(s[a]):s[a])}return i}function g(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function m(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[_](n)&&(e[n]=m(t[n]));return e}function v(t){if(v.is(t,"function"))return y?t():eve.on("raphael.DOMload",t);if(v.is(t,V))return v._engine.create[k](v,t.splice(0,3+v.is(t[0],q))).add(t);var e=Array.prototype.slice.call(arguments,0);if(v.is(e[e.length-1],"function")){var n=e.pop();return y?n.call(v._engine.create[k](v,e)):eve.on("raphael.DOMload",function(){n.call(v._engine.create[k](v,e))})}return v._engine.create[k](v,arguments)}v.version="2.1.0",v.eve=eve;var y,b,x=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},C=/\{(\d+)\}/g,_="hasOwnProperty",S={doc:document,win:window},T={was:Object.prototype[_].call(S.win,"Raphael"),is:S.win.Raphael},D=function(){this.ca=this.customAttributes={}},k="apply",M="concat",E="createTouch"in S.doc,N="",A=" ",R=String,I="split",P="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[I](A),O={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},F=R.prototype.toLowerCase,L=Math,H=L.max,j=L.min,B=L.abs,z=L.pow,$=L.PI,q="number",W="string",V="array",U=Object.prototype.toString,Y=(v._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),X={NaN:1,Infinity:1,"-Infinity":1},G=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=L.round,J=parseFloat,K=parseInt,Z=R.prototype.toUpperCase,te=v._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ee=v._availableAnimAttrs={blur:q,"clip-rect":"csv",cx:q,cy:q,fill:"colour","fill-opacity":q,"font-size":q,height:q,opacity:q,path:"path",r:q,rx:q,ry:q,stroke:"colour","stroke-opacity":q,"stroke-width":q,transform:"transform",width:q,x:q,y:q},ne=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ie={hs:1,rg:1},re=/,?([achlmqrstvxz]),?/gi,ae=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,se=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,oe=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,le=(v._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ue=function(t,e){return J(t)-J(e)},ce=function(){},he=function(t){return t},de=v._rectPath=function(t,e,n,i,r){return r?[["M",t+r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]]:[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]]},fe=function(t,e,n,i){return null==i&&(i=n),[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]]},pe=v._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return fe(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return fe(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return de(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return de(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return de(e.x,e.y,e.width,e.height)}},ge=v.mapPath=function(t,e){if(!e)return t;var n,i,r,a,s,o,l;for(t=Pe(t),r=0,s=t.length;s>r;r++)for(l=t[r],a=1,o=l.length;o>a;a+=2)n=e.x(l[a],l[a+1]),i=e.y(l[a],l[a+1]),l[a]=n,l[a+1]=i;return t};if(v._g=S,v.type=S.win.SVGAngle||S.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==v.type){var me,ve=S.doc.createElement("div");if(ve.innerHTML='<v:shape adj="1"/>',me=ve.firstChild,me.style.behavior="url(#default#VML)",!me||"object"!=typeof me.adj)return v.type=N;ve=null}v.svg=!(v.vml="VML"==v.type),v._Paper=D,v.fn=b=D.prototype=v.prototype,v._id=0,v._oid=0,v.is=function(t,e){return e=F.call(e),"finite"==e?!X[_](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||U.call(t).slice(8,-1).toLowerCase()==e},v.angle=function(t,e,n,i,r,a){if(null==r){var s=t-n,o=e-i;return s||o?(180+180*L.atan2(-o,-s)/$+360)%360:0}return v.angle(t,e,r,a)-v.angle(n,i,r,a)},v.rad=function(t){return t%360*$/180},v.deg=function(t){return 180*t/$%360},v.snapTo=function(t,e,n){if(n=v.is(n,"finite")?n:10,v.is(t,V)){for(var i=t.length;i--;)if(B(t[i]-e)<=n)return t[i]}else{t=+t;var r=e%t;if(n>r)return e-r;if(r>t-n)return e-r+t}return e},v.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=0|16*L.random(),n="x"==t?e:8|3&e;return n.toString(16)}),v.setWindow=function(t){eve("raphael.setWindow",v,S.win,t),S.win=t,S.doc=S.win.document,v._engine.initWin&&v._engine.initWin(S.win)};var ye=function(t){if(v.vml){var e,n=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),e=i.body}catch(r){e=createPopup().document.body}var a=e.createTextRange();ye=p(function(t){try{e.style.color=R(t).replace(n,N);var i=a.queryCommandValue("ForeColor");return i=(255&i)<<16|65280&i|(16711680&i)>>>16,"#"+("000000"+i.toString(16)).slice(-6)}catch(r){return"none"}})}else{var s=S.doc.createElement("i");s.title="Raphal Colour Picker",s.style.display="none",S.doc.body.appendChild(s),ye=p(function(t){return s.style.color=t,S.doc.defaultView.getComputedStyle(s,N).getPropertyValue("color")})}return ye(t)},be=function(){return"hsb("+[this.h,this.s,this.b]+")"},xe=function(){return"hsl("+[this.h,this.s,this.l]+")"},we=function(){return this.hex},Ce=function(t,e,n){if(null==e&&v.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,e=t.g,t=t.r),null==e&&v.is(t,W)){var i=v.getRGB(t);t=i.r,e=i.g,n=i.b}return(t>1||e>1||n>1)&&(t/=255,e/=255,n/=255),[t,e,n]},_e=function(t,e,n,i){t*=255,e*=255,n*=255;var r={r:t,g:e,b:n,hex:v.rgb(t,e,n),toString:we};return v.is(i,"finite")&&(r.opacity=i),r};v.color=function(t){var e;return v.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=v.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):v.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=v.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(v.is(t,"string")&&(t=v.getRGB(t)),v.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=v.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=v.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=we,t},v.hsb2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,t=t.h,i=t.o),t*=360;var r,a,s,o,l;return t=t%360/60,l=n*e,o=l*(1-B(t%2-1)),r=a=s=n-l,t=~~t,r+=[l,o,0,0,o,l][t],a+=[o,l,l,o,0,0][t],s+=[0,0,o,l,l,o][t],_e(r,a,s,i)},v.hsl2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var r,a,s,o,l;return t=t%360/60,l=2*e*(.5>n?n:1-n),o=l*(1-B(t%2-1)),r=a=s=n-l/2,t=~~t,r+=[l,o,0,0,o,l][t],a+=[o,l,l,o,0,0][t],s+=[0,0,o,l,l,o][t],_e(r,a,s,i)},v.rgb2hsb=function(t,e,n){n=Ce(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,a,s;return a=H(t,e,n),s=a-j(t,e,n),i=0==s?null:a==t?(e-n)/s:a==e?(n-t)/s+2:(t-e)/s+4,i=60*((i+360)%6)/360,r=0==s?0:s/a,{h:i,s:r,b:a,toString:be}},v.rgb2hsl=function(t,e,n){n=Ce(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,a,s,o,l;return s=H(t,e,n),o=j(t,e,n),l=s-o,i=0==l?null:s==t?(e-n)/l:s==e?(n-t)/l+2:(t-e)/l+4,i=60*((i+360)%6)/360,a=(s+o)/2,r=0==l?0:.5>a?l/(2*a):l/(2-2*a),{h:i,s:r,l:a,toString:xe}},v._path2string=function(){return this.join(",").replace(re,"$1")},v._preload=function(t,e){var n=S.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){e.call(this),this.onload=null,S.doc.body.removeChild(this)},n.onerror=function(){S.doc.body.removeChild(this)},S.doc.body.appendChild(n),n.src=t},v.getRGB=p(function(t){if(!t||(t=R(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:f};!ie[_](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=ye(t));var e,n,i,r,a,s,o=t.match(Y);return o?(o[2]&&(i=K(o[2].substring(5),16),n=K(o[2].substring(3,5),16),e=K(o[2].substring(1,3),16)),o[3]&&(i=K((a=o[3].charAt(3))+a,16),n=K((a=o[3].charAt(2))+a,16),e=K((a=o[3].charAt(1))+a,16)),o[4]&&(s=o[4][I](ne),e=J(s[0]),"%"==s[0].slice(-1)&&(e*=2.55),n=J(s[1]),"%"==s[1].slice(-1)&&(n*=2.55),i=J(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),"rgba"==o[1].toLowerCase().slice(0,4)&&(r=J(s[3])),s[3]&&"%"==s[3].slice(-1)&&(r/=100)),o[5]?(s=o[5][I](ne),e=J(s[0]),"%"==s[0].slice(-1)&&(e*=2.55),n=J(s[1]),"%"==s[1].slice(-1)&&(n*=2.55),i=J(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),("deg"==s[0].slice(-3)||""==s[0].slice(-1))&&(e/=360),"hsba"==o[1].toLowerCase().slice(0,4)&&(r=J(s[3])),s[3]&&"%"==s[3].slice(-1)&&(r/=100),v.hsb2rgb(e,n,i,r)):o[6]?(s=o[6][I](ne),e=J(s[0]),"%"==s[0].slice(-1)&&(e*=2.55),n=J(s[1]),"%"==s[1].slice(-1)&&(n*=2.55),i=J(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),("deg"==s[0].slice(-3)||""==s[0].slice(-1))&&(e/=360),"hsla"==o[1].toLowerCase().slice(0,4)&&(r=J(s[3])),s[3]&&"%"==s[3].slice(-1)&&(r/=100),v.hsl2rgb(e,n,i,r)):(o={r:e,g:n,b:i,toString:f},o.hex="#"+(16777216|i|n<<8|e<<16).toString(16).slice(1),v.is(r,"finite")&&(o.opacity=r),o)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f}},v),v.hsb=p(function(t,e,n){return v.hsb2rgb(t,e,n).hex}),v.hsl=p(function(t,e,n){return v.hsl2rgb(t,e,n).hex}),v.rgb=p(function(t,e,n){return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)}),v.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},n=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),n.hex},v.getColor.reset=function(){delete this.start},v.parsePathString=function(t){if(!t)return null;var e=Se(t);if(e.arr)return De(e.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return v.is(t,V)&&v.is(t[0],V)&&(i=De(t)),i.length||R(t).replace(ae,function(t,e,r){var a=[],s=e.toLowerCase();if(r.replace(oe,function(t,e){e&&a.push(+e)}),"m"==s&&a.length>2&&(i.push([e][M](a.splice(0,2))),s="l",e="m"==e?"l":"L"),"r"==s)i.push([e][M](a));else for(;a.length>=n[s]&&(i.push([e][M](a.splice(0,n[s]))),n[s]););}),i.toString=v._path2string,e.arr=De(i),i},v.parseTransformString=p(function(t){if(!t)return null;var e=[];return v.is(t,V)&&v.is(t[0],V)&&(e=De(t)),e.length||R(t).replace(se,function(t,n,i){var r=[];F.call(n),i.replace(oe,function(t,e){e&&r.push(+e)}),e.push([n][M](r))}),e.toString=v._path2string,e});var Se=function(t){var e=Se.ps=Se.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[_](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]};v.findDotsAtSegment=function(t,e,n,i,r,a,s,o,l){var u=1-l,c=z(u,3),h=z(u,2),d=l*l,f=d*l,p=c*t+3*h*l*n+3*u*l*l*r+f*s,g=c*e+3*h*l*i+3*u*l*l*a+f*o,m=t+2*l*(n-t)+d*(r-2*n+t),v=e+2*l*(i-e)+d*(a-2*i+e),y=n+2*l*(r-n)+d*(s-2*r+n),b=i+2*l*(a-i)+d*(o-2*a+i),x=u*t+l*n,w=u*e+l*i,C=u*r+l*s,_=u*a+l*o,S=90-180*L.atan2(m-y,v-b)/$;return(m>y||b>v)&&(S+=180),{x:p,y:g,m:{x:m,y:v},n:{x:y,y:b},start:{x:x,y:w},end:{x:C,y:_},alpha:S}},v.bezierBBox=function(t,e,n,i,r,a,s,o){v.is(t,"array")||(t=[t,e,n,i,r,a,s,o]);var l=Ie.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},v.isPointInsideBBox=function(t,e,n){return e>=t.x&&e<=t.x2&&n>=t.y&&n<=t.y2},v.isBBoxIntersect=function(t,e){var n=v.isPointInsideBBox;return n(e,t.x,t.y)||n(e,t.x2,t.y)||n(e,t.x,t.y2)||n(e,t.x2,t.y2)||n(t,e.x,e.y)||n(t,e.x2,e.y)||n(t,e.x,e.y2)||n(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},v.pathIntersection=function(t,e){return s(t,e)},v.pathIntersectionNumber=function(t,e){return s(t,e,1)},v.isPointInsidePath=function(t,e,n){var i=v.pathBBox(t);return v.isPointInsideBBox(i,e,n)&&1==s(t,[["M",e,n],["H",i.x2+10]],1)%2},v._removedFactory=function(t){return function(){eve("raphael.log",null,"Raphal: you are calling to method "+t+" of removed object",t)}};var Te=v.pathBBox=function(t){var e=Se(t);if(e.bbox)return e.bbox;if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Pe(t);for(var n,i=0,r=0,a=[],s=[],o=0,l=t.length;l>o;o++)if(n=t[o],"M"==n[0])i=n[1],r=n[2],a.push(i),s.push(r);else{var u=Ie(i,r,n[1],n[2],n[3],n[4],n[5],n[6]);a=a[M](u.min.x,u.max.x),s=s[M](u.min.y,u.max.y),i=n[5],r=n[6]}var c=j[k](0,a),h=j[k](0,s),d=H[k](0,a),f=H[k](0,s),p={x:c,y:h,x2:d,y2:f,width:d-c,height:f-h};return e.bbox=m(p),p},De=function(t){var e=m(t);return e.toString=v._path2string,e},ke=v._pathToRelative=function(t){var e=Se(t);if(e.rel)return De(e.rel);v.is(t,V)&&v.is(t&&t[0],V)||(t=v.parsePathString(t));var n=[],i=0,r=0,a=0,s=0,o=0;"M"==t[0][0]&&(i=t[0][1],r=t[0][2],a=i,s=r,o++,n.push(["M",i,r]));for(var l=o,u=t.length;u>l;l++){var c=n[l]=[],h=t[l];if(h[0]!=F.call(h[0]))switch(c[0]=F.call(h[0]),c[0]){case"a":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+(h[6]-i).toFixed(3),c[7]=+(h[7]-r).toFixed(3);break;case"v":c[1]=+(h[1]-r).toFixed(3);break;case"m":a=h[1],s=h[2];default:for(var d=1,f=h.length;f>d;d++)c[d]=+(h[d]-(d%2?i:r)).toFixed(3)}else{c=n[l]=[],"m"==h[0]&&(a=h[1]+i,s=h[2]+r);for(var p=0,g=h.length;g>p;p++)n[l][p]=h[p]}var m=n[l].length;switch(n[l][0]){case"z":i=a,r=s;break;case"h":i+=+n[l][m-1];break;case"v":r+=+n[l][m-1];break;default:i+=+n[l][m-2],r+=+n[l][m-1]}}return n.toString=v._path2string,e.rel=De(n),n},Me=v._pathToAbsolute=function(t){var e=Se(t);if(e.abs)return De(e.abs);if(v.is(t,V)&&v.is(t&&t[0],V)||(t=v.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],i=0,r=0,a=0,s=0,o=0;"M"==t[0][0]&&(i=+t[0][1],r=+t[0][2],a=i,s=r,o++,n[0]=["M",i,r]);for(var l,u,c=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),h=o,f=t.length;f>h;h++){if(n.push(l=[]),u=t[h],u[0]!=Z.call(u[0]))switch(l[0]=Z.call(u[0]),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+(u[6]+i),l[7]=+(u[7]+r);break;case"V":l[1]=+u[1]+r;break;case"H":l[1]=+u[1]+i;break;case"R":for(var p=[i,r][M](u.slice(1)),g=2,m=p.length;m>g;g++)p[g]=+p[g]+i,p[++g]=+p[g]+r;n.pop(),n=n[M](d(p,c));break;case"M":a=+u[1]+i,s=+u[2]+r;default:for(g=1,m=u.length;m>g;g++)l[g]=+u[g]+(g%2?i:r)}else if("R"==u[0])p=[i,r][M](u.slice(1)),n.pop(),n=n[M](d(p,c)),l=["R"][M](u.slice(-2));else for(var y=0,b=u.length;b>y;y++)l[y]=u[y];switch(l[0]){case"Z":i=a,r=s;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n.toString=v._path2string,e.abs=De(n),n},Ee=function(t,e,n,i){return[t,e,n,i,n,i]},Ne=function(t,e,n,i,r,a){var s=1/3,o=2/3;return[s*t+o*n,s*e+o*i,s*r+o*n,s*a+o*i,r,a]},Ae=function(t,e,n,i,r,a,s,o,l,u){var c,h=120*$/180,d=$/180*(+r||0),f=[],g=p(function(t,e,n){var i=t*L.cos(n)-e*L.sin(n),r=t*L.sin(n)+e*L.cos(n);return{x:i,y:r}});if(u)S=u[0],T=u[1],C=u[2],_=u[3];else{c=g(t,e,-d),t=c.x,e=c.y,c=g(o,l,-d),o=c.x,l=c.y;var m=(L.cos($/180*r),L.sin($/180*r),(t-o)/2),v=(e-l)/2,y=m*m/(n*n)+v*v/(i*i);y>1&&(y=L.sqrt(y),n=y*n,i=y*i);var b=n*n,x=i*i,w=(a==s?-1:1)*L.sqrt(B((b*x-b*v*v-x*m*m)/(b*v*v+x*m*m))),C=w*n*v/i+(t+o)/2,_=w*-i*m/n+(e+l)/2,S=L.asin(((e-_)/i).toFixed(9)),T=L.asin(((l-_)/i).toFixed(9));S=C>t?$-S:S,T=C>o?$-T:T,0>S&&(S=2*$+S),0>T&&(T=2*$+T),s&&S>T&&(S-=2*$),!s&&T>S&&(T-=2*$)}var D=T-S;if(B(D)>h){var k=T,E=o,N=l;T=S+h*(s&&T>S?1:-1),o=C+n*L.cos(T),l=_+i*L.sin(T),f=Ae(o,l,n,i,r,0,s,E,N,[T,k,C,_])}D=T-S;var A=L.cos(S),R=L.sin(S),P=L.cos(T),O=L.sin(T),F=L.tan(D/4),H=4/3*n*F,j=4/3*i*F,z=[t,e],q=[t+H*R,e-j*A],W=[o+H*O,l-j*P],V=[o,l];if(q[0]=2*z[0]-q[0],q[1]=2*z[1]-q[1],u)return[q,W,V][M](f);f=[q,W,V][M](f).join()[I](",");for(var U=[],Y=0,X=f.length;X>Y;Y++)U[Y]=Y%2?g(f[Y-1],f[Y],d).y:g(f[Y],f[Y+1],d).x;return U},Re=function(t,e,n,i,r,a,s,o,l){var u=1-l;return{x:z(u,3)*t+3*z(u,2)*l*n+3*u*l*l*r+z(l,3)*s,y:z(u,3)*e+3*z(u,2)*l*i+3*u*l*l*a+z(l,3)*o}},Ie=p(function(t,e,n,i,r,a,s,o){var l,u=r-2*n+t-(s-2*r+n),c=2*(n-t)-2*(r-n),h=t-n,d=(-c+L.sqrt(c*c-4*u*h))/2/u,f=(-c-L.sqrt(c*c-4*u*h))/2/u,p=[e,o],g=[t,s];return B(d)>"1e12"&&(d=.5),B(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=Re(t,e,n,i,r,a,s,o,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=Re(t,e,n,i,r,a,s,o,f),g.push(l.x),p.push(l.y)),u=a-2*i+e-(o-2*a+i),c=2*(i-e)-2*(a-i),h=e-i,d=(-c+L.sqrt(c*c-4*u*h))/2/u,f=(-c-L.sqrt(c*c-4*u*h))/2/u,B(d)>"1e12"&&(d=.5),B(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=Re(t,e,n,i,r,a,s,o,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=Re(t,e,n,i,r,a,s,o,f),g.push(l.x),p.push(l.y)),{min:{x:j[k](0,g),y:j[k](0,p)},max:{x:H[k](0,g),y:H[k](0,p)}}}),Pe=v._path2curve=p(function(t,e){var n=!e&&Se(t);if(!e&&n.curve)return De(n.curve);for(var i=Me(t),r=e&&Me(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=(function(t,e){var n,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][M](Ae[k](0,[e.x,e.y][M](t.slice(1))));break;case"S":n=e.x+(e.x-(e.bx||e.x)),i=e.y+(e.y-(e.by||e.y)),t=["C",n,i][M](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][M](Ne(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][M](Ne(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][M](Ee(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][M](Ee(e.x,e.y,t[1],e.y));break;case"V":t=["C"][M](Ee(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][M](Ee(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)t.splice(e++,0,["C"][M](n.splice(0,6)));t.splice(e,1),h=H(i.length,r&&r.length||0)}},u=function(t,e,n,a,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),n.bx=0,n.by=0,n.x=t[s][1],n.y=t[s][2],h=H(i.length,r&&r.length||0))},c=0,h=H(i.length,r&&r.length||0);h>c;c++){i[c]=o(i[c],a),l(i,c),r&&(r[c]=o(r[c],s)),r&&l(r,c),u(i,r,a,s,c),u(r,i,s,a,c);var d=i[c],f=r&&r[c],p=d.length,g=r&&f.length;a.x=d[p-2],a.y=d[p-1],a.bx=J(d[p-4])||a.x,a.by=J(d[p-3])||a.y,s.bx=r&&(J(f[g-4])||s.x),s.by=r&&(J(f[g-3])||s.y),s.x=r&&f[g-2],s.y=r&&f[g-1]}return r||(n.curve=De(i)),r?[i,r]:i},null,De),Oe=(v._parseDots=p(function(t){for(var e=[],n=0,i=t.length;i>n;n++){var r={},a=t[n].match(/^([^:]*):?([\d\.]*)/);if(r.color=v.getRGB(a[1]),r.color.error)return null;r.color=r.color.hex,a[2]&&(r.offset=a[2]+"%"),e.push(r)}for(n=1,i=e.length-1;i>n;n++)if(!e[n].offset){for(var s=J(e[n-1].offset||0),o=0,l=n+1;i>l;l++)if(e[l].offset){o=e[l].offset;break}o||(o=100,l=i),o=J(o);for(var u=(o-s)/(l-n+1);l>n;n++)s+=u,e[n].offset=s+"%"}return e}),v._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Fe=(v._tofront=function(t,e){e.top!==t&&(Oe(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},v._toback=function(t,e){e.bottom!==t&&(Oe(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},v._insertafter=function(t,e,n){Oe(t,n),e==n.top&&(n.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},v._insertbefore=function(t,e,n){Oe(t,n),e==n.bottom&&(n.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},v.toMatrix=function(t,e){var n=Te(t),i={_:{transform:N},getBBox:function(){return n}};return Le(i,e),i.matrix}),Le=(v.transformPath=function(t,e){return ge(t,Fe(t,e))},v._extractTransform=function(t,e){if(null==e)return t._.transform;e=R(e).replace(/\.{3}|\u2026/g,t._.transform||N);var n=v.parseTransformString(e),i=0,r=0,s=0,o=1,l=1,u=t._,c=new a;if(u.transform=n||[],n)for(var h=0,d=n.length;d>h;h++){var f,p,g,m,y,b=n[h],x=b.length,w=R(b[0]).toLowerCase(),C=b[0]!=w,_=C?c.invert():0;"t"==w&&3==x?C?(f=_.x(0,0),p=_.y(0,0),g=_.x(b[1],b[2]),m=_.y(b[1],b[2]),c.translate(g-f,m-p)):c.translate(b[1],b[2]):"r"==w?2==x?(y=y||t.getBBox(1),c.rotate(b[1],y.x+y.width/2,y.y+y.height/2),i+=b[1]):4==x&&(C?(g=_.x(b[2],b[3]),m=_.y(b[2],b[3]),c.rotate(b[1],g,m)):c.rotate(b[1],b[2],b[3]),i+=b[1]):"s"==w?2==x||3==x?(y=y||t.getBBox(1),c.scale(b[1],b[x-1],y.x+y.width/2,y.y+y.height/2),o*=b[1],l*=b[x-1]):5==x&&(C?(g=_.x(b[3],b[4]),m=_.y(b[3],b[4]),c.scale(b[1],b[2],g,m)):c.scale(b[1],b[2],b[3],b[4]),o*=b[1],l*=b[2]):"m"==w&&7==x&&c.add(b[1],b[2],b[3],b[4],b[5],b[6]),u.dirtyT=1,t.matrix=c}t.matrix=c,u.sx=o,u.sy=l,u.deg=i,u.dx=r=c.e,u.dy=s=c.f,1==o&&1==l&&!i&&u.bbox?(u.bbox.x+=+r,u.bbox.y+=+s):u.dirtyT=1}),He=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},je=v._equaliseTransform=function(t,e){e=R(e).replace(/\.{3}|\u2026/g,t),t=v.parseTransformString(t)||[],e=v.parseTransformString(e)||[];for(var n,i,r,a,s=H(t.length,e.length),o=[],l=[],u=0;s>u;u++){if(r=t[u]||He(e[u]),a=e[u]||He(r),r[0]!=a[0]||"r"==r[0].toLowerCase()&&(r[2]!=a[2]||r[3]!=a[3])||"s"==r[0].toLowerCase()&&(r[3]!=a[3]||r[4]!=a[4]))return;for(o[u]=[],l[u]=[],n=0,i=H(r.length,a.length);i>n;n++)n in r&&(o[u][n]=r[n]),n in a&&(l[u][n]=a[n])}return{from:o,to:l}};v._getContainer=function(t,e,n,i){var r;return r=null!=i||v.is(t,"object")?t:S.doc.getElementById(t),null!=r?r.tagName?null==e?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:e,height:n}:{container:1,x:t,y:e,width:n,height:i}:void 0},v.pathToRelative=ke,v._engine={},v.path2curve=Pe,v.matrix=function(t,e,n,i,r,s){return new a(t,e,n,i,r,s)},function(t){function e(t){var e=L.sqrt(n(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}function n(t){return t[0]*t[0]+t[1]*t[1]}t.add=function(t,e,n,i,r,s){var o,l,u,c,h=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[t,n,r],[e,i,s],[0,0,1]];for(t&&t instanceof a&&(f=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;3>o;o++)for(l=0;3>l;l++){for(c=0,u=0;3>u;u++)c+=d[o][u]*f[u][l];h[o][l]=c}this.a=h[0][0],this.b=h[1][0],this.c=h[0][1],this.d=h[1][1],this.e=h[0][2],this.f=h[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new a(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new a(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,n,i){null==e&&(e=t),(n||i)&&this.add(1,0,0,1,n,i),this.add(t,0,0,e,0,0),(n||i)&&this.add(1,0,0,1,-n,-i)},t.rotate=function(t,e,n){t=v.rad(t),e=e||0,n=n||0;var i=+L.cos(t).toFixed(9),r=+L.sin(t).toFixed(9);this.add(i,r,-r,i,e,n),this.add(1,0,0,1,-e,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[R.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return v.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=L.sqrt(n(i[0])),e(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=L.sqrt(n(i[1])),e(i[1]),t.shear/=t.scaley;var r=-i[0][1],a=i[1][1];return 0>a?(t.rotate=v.deg(L.acos(a)),0>r&&(t.rotate=360-t.rotate)):t.rotate=v.deg(L.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[I]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:N)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:N)+(e.rotate?"r"+[e.rotate,0,0]:N)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(a.prototype);var Be=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);b.safari="Apple Computer, Inc."==navigator.vendor&&(Be&&Be[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Be&&Be[1]<8?function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:ce;for(var ze=function(){this.returnValue=!1},$e=function(){return this.originalEvent.preventDefault()},qe=function(){this.cancelBubble=!0},We=function(){return this.originalEvent.stopPropagation()},Ve=function(){return S.doc.addEventListener?function(t,e,n,i){var r=E&&O[e]?O[e]:e,a=function(r){var a=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,s=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,o=r.clientX+s,l=r.clientY+a;if(E&&O[_](e))for(var u=0,c=r.targetTouches&&r.targetTouches.length;c>u;u++)if(r.targetTouches[u].target==t){var h=r;r=r.targetTouches[u],r.originalEvent=h,r.preventDefault=$e,r.stopPropagation=We;break}return n.call(i,r,o,l)};return t.addEventListener(r,a,!1),function(){return t.removeEventListener(r,a,!1),!0}}:S.doc.attachEvent?function(t,e,n,i){var r=function(t){t=t||S.win.event;var e=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,r=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,a=t.clientX+r,s=t.clientY+e;return t.preventDefault=t.preventDefault||ze,t.stopPropagation=t.stopPropagation||qe,n.call(i,t,a,s)};t.attachEvent("on"+e,r);var a=function(){return t.detachEvent("on"+e,r),!0};return a}:void 0}(),Ue=[],Ye=function(t){for(var e,n=t.clientX,i=t.clientY,r=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,a=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,s=Ue.length;s--;){if(e=Ue[s],E){for(var o,l=t.touches.length;l--;)if(o=t.touches[l],o.identifier==e.el._drag.id){n=o.clientX,i=o.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var u,c=e.el.node,h=c.nextSibling,d=c.parentNode,f=c.style.display;S.win.opera&&d.removeChild(c),c.style.display="none",u=e.el.paper.getElementByPoint(n,i),c.style.display=f,S.win.opera&&(h?d.insertBefore(c,h):d.appendChild(c)),u&&eve("raphael.drag.over."+e.el.id,e.el,u),n+=a,i+=r,eve("raphael.drag.move."+e.el.id,e.move_scope||e.el,n-e.el._drag.x,i-e.el._drag.y,n,i,t)}},Xe=function(t){v.unmousemove(Ye).unmouseup(Xe);for(var e,n=Ue.length;n--;)e=Ue[n],e.el._drag={},eve("raphael.drag.end."+e.el.id,e.end_scope||e.start_scope||e.move_scope||e.el,t);Ue=[]},Ge=v.el={},Qe=P.length;Qe--;)(function(t){v[t]=Ge[t]=function(e,n){return v.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Ve(this.shape||this.node||S.doc,t,e,n||this)})),this},v["un"+t]=Ge["un"+t]=function(e){for(var n=this.events||[],i=n.length;i--;)if(n[i].name==t&&n[i].f==e)return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}})(P[Qe]);Ge.data=function(t,e){var n=le[this.id]=le[this.id]||{};if(1==arguments.length){if(v.is(t,"object")){for(var i in t)t[_](i)&&this.data(i,t[i]);return this}return eve("raphael.data.get."+this.id,this,n[t],t),n[t]}return n[t]=e,eve("raphael.data.set."+this.id,this,e,t),this},Ge.removeData=function(t){return null==t?le[this.id]={}:le[this.id]&&delete le[this.id][t],this},Ge.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},Ge.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Je=[];Ge.drag=function(t,e,n,i,r,a){function s(s){(s.originalEvent||s).preventDefault();var o=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,l=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft;this._drag.x=s.clientX+l,this._drag.y=s.clientY+o,this._drag.id=s.identifier,!Ue.length&&v.mousemove(Ye).mouseup(Xe),Ue.push({el:this,move_scope:i,start_scope:r,end_scope:a}),e&&eve.on("raphael.drag.start."+this.id,e),t&&eve.on("raphael.drag.move."+this.id,t),n&&eve.on("raphael.drag.end."+this.id,n),eve("raphael.drag.start."+this.id,r||i||this,s.clientX+l,s.clientY+o,s)}return this._drag={},Je.push({el:this,start:s}),this.mousedown(s),this},Ge.onDragOver=function(t){t?eve.on("raphael.drag.over."+this.id,t):eve.unbind("raphael.drag.over."+this.id)},Ge.undrag=function(){for(var t=Je.length;t--;)Je[t].el==this&&(this.unmousedown(Je[t].start),Je.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!Je.length&&v.unmousemove(Ye).unmouseup(Xe)},b.circle=function(t,e,n){var i=v._engine.circle(this,t||0,e||0,n||0);return this.__set__&&this.__set__.push(i),i},b.rect=function(t,e,n,i,r){var a=v._engine.rect(this,t||0,e||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(a),a},b.ellipse=function(t,e,n,i){var r=v._engine.ellipse(this,t||0,e||0,n||0,i||0);
return this.__set__&&this.__set__.push(r),r},b.path=function(t){t&&!v.is(t,W)&&!v.is(t[0],V)&&(t+=N);var e=v._engine.path(v.format[k](v,arguments),this);return this.__set__&&this.__set__.push(e),e},b.image=function(t,e,n,i,r){var a=v._engine.image(this,t||"about:blank",e||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(a),a},b.text=function(t,e,n){var i=v._engine.text(this,t||0,e||0,R(n));return this.__set__&&this.__set__.push(i),i},b.set=function(t){!v.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new cn(t);return this.__set__&&this.__set__.push(e),e},b.setStart=function(t){this.__set__=t||this.set()},b.setFinish=function(){var t=this.__set__;return delete this.__set__,t},b.setSize=function(t,e){return v._engine.setSize.call(this,t,e)},b.setViewBox=function(t,e,n,i,r){return v._engine.setViewBox.call(this,t,e,n,i,r)},b.top=b.bottom=null,b.raphael=v;var Ke=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,r=n.documentElement,a=r.clientTop||i.clientTop||0,s=r.clientLeft||i.clientLeft||0,o=e.top+(S.win.pageYOffset||r.scrollTop||i.scrollTop)-a,l=e.left+(S.win.pageXOffset||r.scrollLeft||i.scrollLeft)-s;return{y:o,x:l}};b.getElementByPoint=function(t,e){var n=this,i=n.canvas,r=S.doc.elementFromPoint(t,e);if(S.win.opera&&"svg"==r.tagName){var a=Ke(i),s=i.createSVGRect();s.x=t-a.x,s.y=e-a.y,s.width=s.height=1;var o=i.getIntersectionList(s,null);o.length&&(r=o[o.length-1])}if(!r)return null;for(;r.parentNode&&r!=i.parentNode&&!r.raphael;)r=r.parentNode;return r==n.canvas.parentNode&&(r=i),r=r&&r.raphael?n.getById(r.raphaelid):null},b.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},b.forEach=function(t,e){for(var n=this.bottom;n;){if(t.call(e,n)===!1)return this;n=n.next}return this},b.getElementsByPoint=function(t,e){var n=this.set();return this.forEach(function(i){i.isPointInside(t,e)&&n.push(i)}),n},Ge.isPointInside=function(t,e){var n=this.realPath=this.realPath||pe[this.type](this);return v.isPointInsidePath(n,t,e)},Ge.getBBox=function(t){if(this.removed)return{};var e=this._;return t?((e.dirty||!e.bboxwt)&&(this.realPath=pe[this.type](this),e.bboxwt=Te(this.realPath),e.bboxwt.toString=r,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&((e.dirty||!this.realPath)&&(e.bboxwt=0,this.realPath=pe[this.type](this)),e.bbox=Te(ge(this.realPath,this.matrix)),e.bbox.toString=r,e.dirty=e.dirtyT=0),e.bbox)},Ge.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Ge.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},n=e.width/2,i=this.paper,r=i.set(),a=this.realPath||pe[this.type](this);a=this.matrix?ge(a,this.matrix):a;for(var s=1;n+1>s;s++)r.push(i.path(a).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*s).toFixed(3),opacity:+(e.opacity/n).toFixed(3)}));return r.insertBefore(this).translate(e.offsetx,e.offsety)};var Ze=function(t,e,n,i,r,a,s,o,l){return null==l?c(t,e,n,i,r,a,s,o):v.findDotsAtSegment(t,e,n,i,r,a,s,o,u(t,e,n,i,r,a,s,o,l))},tn=function(t,e){return function(n,i,r){n=Pe(n);for(var a,s,o,l,u,c="",h={},d=0,f=0,p=n.length;p>f;f++){if(o=n[f],"M"==o[0])a=+o[1],s=+o[2];else{if(l=Ze(a,s,o[1],o[2],o[3],o[4],o[5],o[6]),d+l>i){if(e&&!h.start){if(u=Ze(a,s,o[1],o[2],o[3],o[4],o[5],o[6],i-d),c+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],r)return c;h.start=c,c=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,o[5],o[6]].join(),d+=l,a=+o[5],s=+o[6];continue}if(!t&&!e)return u=Ze(a,s,o[1],o[2],o[3],o[4],o[5],o[6],i-d),{x:u.x,y:u.y,alpha:u.alpha}}d+=l,a=+o[5],s=+o[6]}c+=o.shift()+o}return h.end=c,u=t?d:e?h:v.findDotsAtSegment(a,s,o[0],o[1],o[2],o[3],o[4],o[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},en=tn(1),nn=tn(),rn=tn(0,1);v.getTotalLength=en,v.getPointAtLength=nn,v.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return rn(t,e).end;var i=rn(t,n,1);return e?rn(i,e).end:i},Ge.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():en(this.attrs.path):void 0},Ge.getPointAtLength=function(t){return"path"==this.type?nn(this.attrs.path,t):void 0},Ge.getSubpath=function(t,e){return"path"==this.type?v.getSubpath(this.attrs.path,t,e):void 0};var an=v.easing_formulas={linear:function(t){return t},"<":function(t){return z(t,1.7)},">":function(t){return z(t,.48)},"<>":function(t){var e=.48-t/1.04,n=L.sqrt(.1734+e*e),i=n-e,r=z(B(i),1/3)*(0>i?-1:1),a=-n-e,s=z(B(a),1/3)*(0>a?-1:1),o=r+s+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:z(2,-10*t)*L.sin(2*(t-.075)*$/.3)+1},bounce:function(t){var e,n=7.5625,i=2.75;return 1/i>t?e=n*t*t:2/i>t?(t-=1.5/i,e=n*t*t+.75):2.5/i>t?(t-=2.25/i,e=n*t*t+.9375):(t-=2.625/i,e=n*t*t+.984375),e}};an.easeIn=an["ease-in"]=an["<"],an.easeOut=an["ease-out"]=an[">"],an.easeInOut=an["ease-in-out"]=an["<>"],an["back-in"]=an.backIn,an["back-out"]=an.backOut;var sn=[],on=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},ln=function(){for(var t=+new Date,n=0;n<sn.length;n++){var i=sn[n];if(!i.el.removed&&!i.paused){var r,a,s=t-i.start,o=i.ms,l=i.easing,u=i.from,c=i.diff,h=i.to,d=(i.t,i.el),f={},p={};if(i.initstatus?(s=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*o,i.status=i.initstatus,delete i.initstatus,i.stop&&sn.splice(n--,1)):i.status=(i.prev+(i.percent-i.prev)*(s/o))/i.anim.top,!(0>s))if(o>s){var g=l(s/o);for(var m in u)if(u[_](m)){switch(ee[m]){case q:r=+u[m]+g*o*c[m];break;case"colour":r="rgb("+[un(Q(u[m].r+g*o*c[m].r)),un(Q(u[m].g+g*o*c[m].g)),un(Q(u[m].b+g*o*c[m].b))].join(",")+")";break;case"path":r=[];for(var y=0,b=u[m].length;b>y;y++){r[y]=[u[m][y][0]];for(var x=1,w=u[m][y].length;w>x;x++)r[y][x]=+u[m][y][x]+g*o*c[m][y][x];r[y]=r[y].join(A)}r=r.join(A);break;case"transform":if(c[m].real)for(r=[],y=0,b=u[m].length;b>y;y++)for(r[y]=[u[m][y][0]],x=1,w=u[m][y].length;w>x;x++)r[y][x]=u[m][y][x]+g*o*c[m][y][x];else{var C=function(t){return+u[m][t]+g*o*c[m][t]};r=[["m",C(0),C(1),C(2),C(3),C(4),C(5)]]}break;case"csv":if("clip-rect"==m)for(r=[],y=4;y--;)r[y]=+u[m][y]+g*o*c[m][y];break;default:var S=[][M](u[m]);for(r=[],y=d.paper.customAttributes[m].length;y--;)r[y]=+S[y]+g*o*c[m][y]}f[m]=r}d.attr(f),function(t,e,n){setTimeout(function(){eve("raphael.anim.frame."+t,e,n)})}(d.id,d,i.anim)}else{if(function(t,e,n){setTimeout(function(){eve("raphael.anim.frame."+e.id,e,n),eve("raphael.anim.finish."+e.id,e,n),v.is(t,"function")&&t.call(e)})}(i.callback,d,i.anim),d.attr(h),sn.splice(n--,1),i.repeat>1&&!i.next){for(a in h)h[_](a)&&(p[a]=i.totalOrigin[a]);i.el.attr(p),e(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&e(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}v.svg&&d&&d.paper&&d.paper.safari(),sn.length&&on(ln)},un=function(t){return t>255?255:0>t?0:t};Ge.animateWith=function(t,i,r,a,s,o){var l=this;if(l.removed)return o&&o.call(l),l;var u=r instanceof n?r:v.animation(r,a,s,o);e(u,l,u.percents[0],null,l.attr());for(var c=0,h=sn.length;h>c;c++)if(sn[c].anim==i&&sn[c].el==t){sn[h-1].start=sn[c].start;break}return l},Ge.onAnimation=function(t){return t?eve.on("raphael.anim.frame."+this.id,t):eve.unbind("raphael.anim.frame."+this.id),this},n.prototype.delay=function(t){var e=new n(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},n.prototype.repeat=function(t){var e=new n(this.anim,this.ms);return e.del=this.del,e.times=L.floor(H(t,0))||1,e},v.animation=function(t,e,i,r){if(t instanceof n)return t;(v.is(i,"function")||!i)&&(r=r||i||null,i=null),t=Object(t),e=+e||0;var a,s,o={};for(s in t)t[_](s)&&J(s)!=s&&J(s)+"%"!=s&&(a=!0,o[s]=t[s]);return a?(i&&(o.easing=i),r&&(o.callback=r),new n({100:o},e)):new n(t,e)},Ge.animate=function(t,i,r,a){var s=this;if(s.removed)return a&&a.call(s),s;var o=t instanceof n?t:v.animation(t,i,r,a);return e(o,s,o.percents[0],null,s.attr()),s},Ge.setTime=function(t,e){return t&&null!=e&&this.status(t,j(e,t.ms)/t.ms),this},Ge.status=function(t,n){var i,r,a=[],s=0;if(null!=n)return e(t,this,-1,j(n,1)),this;for(i=sn.length;i>s;s++)if(r=sn[s],r.el.id==this.id&&(!t||r.anim==t)){if(t)return r.status;a.push({anim:r.anim,status:r.status})}return t?0:a},Ge.pause=function(t){for(var e=0;e<sn.length;e++)sn[e].el.id==this.id&&(!t||sn[e].anim==t)&&eve("raphael.anim.pause."+this.id,this,sn[e].anim)!==!1&&(sn[e].paused=!0);return this},Ge.resume=function(t){for(var e=0;e<sn.length;e++)if(sn[e].el.id==this.id&&(!t||sn[e].anim==t)){var n=sn[e];eve("raphael.anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},Ge.stop=function(t){for(var e=0;e<sn.length;e++)sn[e].el.id==this.id&&(!t||sn[e].anim==t)&&eve("raphael.anim.stop."+this.id,this,sn[e].anim)!==!1&&sn.splice(e--,1);return this},eve.on("raphael.remove",t),eve.on("raphael.clear",t),Ge.toString=function(){return"Raphals object"};var cn=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,n=t.length;n>e;e++)t[e]&&(t[e].constructor==Ge.constructor||t[e].constructor==cn)&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},hn=cn.prototype;hn.push=function(){for(var t,e,n=0,i=arguments.length;i>n;n++)t=arguments[n],t&&(t.constructor==Ge.constructor||t.constructor==cn)&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},hn.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},hn.forEach=function(t,e){for(var n=0,i=this.items.length;i>n;n++)if(t.call(e,this.items[n],n)===!1)return this;return this};for(var dn in Ge)Ge[_](dn)&&(hn[dn]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t][k](n,e)})}}(dn));hn.attr=function(t,e){if(t&&v.is(t,V)&&v.is(t[0],"object"))for(var n=0,i=t.length;i>n;n++)this.items[n].attr(t[n]);else for(var r=0,a=this.items.length;a>r;r++)this.items[r].attr(t,e);return this},hn.clear=function(){for(;this.length;)this.pop()},hn.splice=function(t,e){t=0>t?H(this.length+t,0):t,e=H(0,j(this.length-t,e));var n,i=[],r=[],a=[];for(n=2;n<arguments.length;n++)a.push(arguments[n]);for(n=0;e>n;n++)r.push(this[t+n]);for(;n<this.length-t;n++)i.push(this[t+n]);var s=a.length;for(n=0;n<s+i.length;n++)this.items[t+n]=this[t+n]=s>n?a[n]:i[n-s];for(n=this.items.length=this.length-=e-s;this[n];)delete this[n++];return new cn(r)},hn.exclude=function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]==t)return this.splice(e,1),!0},hn.animate=function(t,e,n,i){(v.is(n,"function")||!n)&&(i=n||null);var r,a,s=this.items.length,o=s,l=this;if(!s)return this;i&&(a=function(){!--s&&i.call(l)}),n=v.is(n,W)?n:a;var u=v.animation(t,e,n,a);for(r=this.items[--o].animate(u);o--;)this.items[o]&&!this.items[o].removed&&this.items[o].animateWith(r,u,u);return this},hn.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},hn.getBBox=function(){for(var t=[],e=[],n=[],i=[],r=this.items.length;r--;)if(!this.items[r].removed){var a=this.items[r].getBBox();t.push(a.x),e.push(a.y),n.push(a.x+a.width),i.push(a.y+a.height)}return t=j[k](0,t),e=j[k](0,e),n=H[k](0,n),i=H[k](0,i),{x:t,y:e,x2:n,y2:i,width:n-t,height:i-e}},hn.clone=function(t){t=new cn;for(var e=0,n=this.items.length;n>e;e++)t.push(this.items[e].clone());return t},hn.toString=function(){return"Raphals set"},v.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},n=t.face["font-family"];for(var i in t.face)t.face[_](i)&&(e.face[i]=t.face[i]);if(this.fonts[n]?this.fonts[n].push(e):this.fonts[n]=[e],!t.svg){e.face["units-per-em"]=K(t.face["units-per-em"],10);for(var r in t.glyphs)if(t.glyphs[_](r)){var a=t.glyphs[r];if(e.glyphs[r]={w:a.w,k:{},d:a.d&&"M"+a.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},a.k)for(var s in a.k)a[_](s)&&(e.glyphs[r].k[s]=a.k[s])}}return t},b.getFont=function(t,e,n,i){if(i=i||"normal",n=n||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,v.fonts){var r=v.fonts[t];if(!r){var a=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,N)+"(\\s|$)","i");for(var s in v.fonts)if(v.fonts[_](s)&&a.test(s)){r=v.fonts[s];break}}var o;if(r)for(var l=0,u=r.length;u>l&&(o=r[l],o.face["font-weight"]!=e||o.face["font-style"]!=n&&o.face["font-style"]||o.face["font-stretch"]!=i);l++);return o}},b.print=function(t,e,n,i,r,a,s){a=a||"middle",s=H(j(s||0,1),-1);var o,l=R(n)[I](N),u=0,c=0,h=N;if(v.is(i,n)&&(i=this.getFont(i)),i){o=(r||16)/i.face["units-per-em"];for(var d=i.face.bbox[I](x),f=+d[0],p=d[3]-d[1],g=0,m=+d[1]+("baseline"==a?p+ +i.face.descent:p/2),y=0,b=l.length;b>y;y++){if("\n"==l[y])u=0,C=0,c=0,g+=p;else{var w=c&&i.glyphs[l[y-1]]||{},C=i.glyphs[l[y]];u+=c?(w.w||i.w)+(w.k&&w.k[l[y]]||0)+i.w*s:0,c=1}C&&C.d&&(h+=v.transformPath(C.d,["t",u*o,g*o,"s",o,o,f,m,"t",(t-f)/o,(e-m)/o]))}}return this.path(h).attr({fill:"#000",stroke:"none"})},b.add=function(t){if(v.is(t,"array"))for(var e,n=this.set(),i=0,r=t.length;r>i;i++)e=t[i]||{},w[_](e.type)&&n.push(this[e.type]().attr(e));return n},v.format=function(t,e){var n=v.is(e,V)?[0][M](e):arguments;return t&&v.is(t,W)&&n.length-1&&(t=t.replace(C,function(t,e){return null==n[++e]?N:n[e]})),t||N},v.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,i){var r=i;return n.replace(e,function(t,e,n,i,a){e=e||i,r&&(e in r&&(r=r[e]),"function"==typeof r&&a&&(r=r()))}),r=(null==r||r==i?t:r)+""};return function(e,i){return String(e).replace(t,function(t,e){return n(t,e,i)})}}(),v.ninja=function(){return T.was?S.win.Raphael=T.is:delete Raphael,v},v.st=hn,function(t,e,n){function i(){/in/.test(t.readyState)?setTimeout(i,9):v.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,n=function(){t.removeEventListener(e,n,!1),t.readyState="complete"},!1),t.readyState="loading"),i()}(document,"DOMContentLoaded"),T.was?S.win.Raphael=v:Raphael=v,eve.on("raphael.DOMload",function(){y=!0})}(),window.Raphael.svg&&function(t){var e="hasOwnProperty",n=String,i=parseFloat,r=parseInt,a=Math,s=a.max,o=a.abs,l=a.pow,u=/[, ]+/,c=t.eve,h="",d=" ",f="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var m=function(i,r){if(r){"string"==typeof i&&(i=m(i));for(var a in r)r[e](a)&&("xlink:"==a.substring(0,6)?i.setAttributeNS(f,a.substring(6),n(r[a])):i.setAttribute(a,n(r[a])))}else i=t._g.doc.createElementNS("http://www.w3.org/2000/svg",i),i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},v=function(e,r){var u="linear",c=e.id+r,d=.5,f=.5,p=e.node,g=e.paper,v=p.style,y=t._g.doc.getElementById(c);if(!y){if(r=n(r).replace(t._radial_gradient,function(t,e,n){if(u="radial",e&&n){d=i(e),f=i(n);var r=2*(f>.5)-1;l(d-.5,2)+l(f-.5,2)>.25&&(f=a.sqrt(.25-l(d-.5,2))*r+.5)&&.5!=f&&(f=f.toFixed(5)-1e-5*r)}return h}),r=r.split(/\s*\-\s*/),"linear"==u){var b=r.shift();if(b=-i(b),isNaN(b))return null;var x=[0,0,a.cos(t.rad(b)),a.sin(t.rad(b))],w=1/(s(o(x[2]),o(x[3]))||1);x[2]*=w,x[3]*=w,x[2]<0&&(x[0]=-x[2],x[2]=0),x[3]<0&&(x[1]=-x[3],x[3]=0)}var C=t._parseDots(r);if(!C)return null;if(c=c.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&c!=e.gradient.id&&(g.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){y=m(u+"Gradient",{id:c}),e.gradient=y,m(y,"radial"==u?{fx:d,fy:f}:{x1:x[0],y1:x[1],x2:x[2],y2:x[3],gradientTransform:e.matrix.invert()}),g.defs.appendChild(y);for(var _=0,S=C.length;S>_;_++)y.appendChild(m("stop",{offset:C[_].offset?C[_].offset:_?"100%":"0%","stop-color":C[_].color||"#fff"}))}}return m(p,{fill:"url(#"+c+")",opacity:1,"fill-opacity":1}),v.fill=h,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);m(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},b=function(i,r,a){if("path"==i.type){for(var s,o,l,u,c,d=n(r).toLowerCase().split("-"),f=i.paper,v=a?"end":"start",y=i.node,b=i.attrs,x=b["stroke-width"],w=d.length,C="classic",_=3,S=3,T=5;w--;)switch(d[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":C=d[w];break;case"wide":S=5;break;case"narrow":S=2;break;case"long":_=5;break;case"short":_=2}if("open"==C?(_+=2,S+=2,T+=2,l=1,u=a?4:1,c={fill:"none",stroke:b.stroke}):(u=l=_/2,c={fill:b.stroke,stroke:"none"}),i._.arrows?a?(i._.arrows.endPath&&g[i._.arrows.endPath]--,i._.arrows.endMarker&&g[i._.arrows.endMarker]--):(i._.arrows.startPath&&g[i._.arrows.startPath]--,i._.arrows.startMarker&&g[i._.arrows.startMarker]--):i._.arrows={},"none"!=C){var D="raphael-marker-"+C,k="raphael-marker-"+v+C+_+S;t._g.doc.getElementById(D)?g[D]++:(f.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:p[C],id:D})),g[D]=1);var M,E=t._g.doc.getElementById(k);E?(g[k]++,M=E.getElementsByTagName("use")[0]):(E=m(m("marker"),{id:k,markerHeight:S,markerWidth:_,orient:"auto",refX:u,refY:S/2}),M=m(m("use"),{"xlink:href":"#"+D,transform:(a?"rotate(180 "+_/2+" "+S/2+") ":h)+"scale("+_/T+","+S/T+")","stroke-width":(1/((_/T+S/T)/2)).toFixed(4)}),E.appendChild(M),f.defs.appendChild(E),g[k]=1),m(M,c);var N=l*("diamond"!=C&&"oval"!=C);a?(s=i._.arrows.startdx*x||0,o=t.getTotalLength(b.path)-N*x):(s=N*x,o=t.getTotalLength(b.path)-(i._.arrows.enddx*x||0)),c={},c["marker-"+v]="url(#"+k+")",(o||s)&&(c.d=Raphael.getSubpath(b.path,s,o)),m(y,c),i._.arrows[v+"Path"]=D,i._.arrows[v+"Marker"]=k,i._.arrows[v+"dx"]=N,i._.arrows[v+"Type"]=C,i._.arrows[v+"String"]=r}else a?(s=i._.arrows.startdx*x||0,o=t.getTotalLength(b.path)-s):(s=0,o=t.getTotalLength(b.path)-(i._.arrows.enddx*x||0)),i._.arrows[v+"Path"]&&m(y,{d:Raphael.getSubpath(b.path,s,o)}),delete i._.arrows[v+"Path"],delete i._.arrows[v+"Marker"],delete i._.arrows[v+"dx"],delete i._.arrows[v+"Type"],delete i._.arrows[v+"String"];for(c in g)if(g[e](c)&&!g[c]){var A=t._g.doc.getElementById(c);A&&A.parentNode.removeChild(A)}}},x={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,e,i){if(e=x[n(e).toLowerCase()]){for(var r=t.attrs["stroke-width"]||"1",a={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,s=[],o=e.length;o--;)s[o]=e[o]*r+(o%2?1:-1)*a;m(t.node,{"stroke-dasharray":s.join(",")})}},C=function(i,a){var l=i.node,c=i.attrs,d=l.style.visibility;l.style.visibility="hidden";for(var p in a)if(a[e](p)){if(!t._availableAttrs[e](p))continue;var g=a[p];switch(c[p]=g,p){case"blur":i.blur(g);break;case"href":case"title":case"target":var x=l.parentNode;if("a"!=x.tagName.toLowerCase()){var C=m("a");x.insertBefore(C,l),C.appendChild(l),x=C}"target"==p?x.setAttributeNS(f,"show","blank"==g?"new":g):x.setAttributeNS(f,p,g);break;case"cursor":l.style.cursor=g;break;case"transform":i.transform(g);break;case"arrow-start":b(i,g);break;case"arrow-end":b(i,g,1);break;case"clip-rect":var _=n(g).split(u);if(4==_.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var T=m("clipPath"),D=m("rect");T.id=t.createUUID(),m(D,{x:_[0],y:_[1],width:_[2],height:_[3]}),T.appendChild(D),i.paper.defs.appendChild(T),m(l,{"clip-path":"url(#"+T.id+")"}),i.clip=D}if(!g){var k=l.getAttribute("clip-path");if(k){var M=t._g.doc.getElementById(k.replace(/(^url\(#|\)$)/g,h));M&&M.parentNode.removeChild(M),m(l,{"clip-path":h}),delete i.clip}}break;case"path":"path"==i.type&&(m(l,{d:g?c.path=t._pathToAbsolute(g):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,g),i._.dirty=1,!c.fx)break;p="x",g=c.x;case"x":c.fx&&(g=-c.x-(c.width||0));case"rx":if("rx"==p&&"rect"==i.type)break;case"cx":l.setAttribute(p,g),i.pattern&&y(i),i._.dirty=1;break;case"height":if(l.setAttribute(p,g),i._.dirty=1,!c.fy)break;p="y",g=c.y;case"y":c.fy&&(g=-c.y-(c.height||0));case"ry":if("ry"==p&&"rect"==i.type)break;case"cy":l.setAttribute(p,g),i.pattern&&y(i),i._.dirty=1;break;case"r":"rect"==i.type?m(l,{rx:g,ry:g}):l.setAttribute(p,g),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(f,"href",g);break;case"stroke-width":(1!=i._.sx||1!=i._.sy)&&(g/=s(o(i._.sx),o(i._.sy))||1),i.paper._vbSize&&(g*=i.paper._vbSize),l.setAttribute(p,g),c["stroke-dasharray"]&&w(i,c["stroke-dasharray"],a),i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1));break;case"stroke-dasharray":w(i,g,a);break;case"fill":var E=n(g).match(t._ISURL);if(E){T=m("pattern");var N=m("image");T.id=t.createUUID(),m(T,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(N,{x:0,y:0,"xlink:href":E[1]}),T.appendChild(N),function(e){t._preload(E[1],function(){var t=this.offsetWidth,n=this.offsetHeight;m(e,{width:t,height:n}),m(N,{width:t,height:n}),i.paper.safari()})}(T),i.paper.defs.appendChild(T),m(l,{fill:"url(#"+T.id+")"}),i.pattern=T,i.pattern&&y(i);break}var A=t.getRGB(g);if(A.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=n(g).charAt())&&v(i,g)){if("opacity"in c||"fill-opacity"in c){var R=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h));if(R){var I=R.getElementsByTagName("stop");m(I[I.length-1],{"stop-opacity":("opacity"in c?c.opacity:1)*("fill-opacity"in c?c["fill-opacity"]:1)})}}c.gradient=g,c.fill="none";break}}else delete a.gradient,delete c.gradient,!t.is(c.opacity,"undefined")&&t.is(a.opacity,"undefined")&&m(l,{opacity:c.opacity}),!t.is(c["fill-opacity"],"undefined")&&t.is(a["fill-opacity"],"undefined")&&m(l,{"fill-opacity":c["fill-opacity"]});A[e]("opacity")&&m(l,{"fill-opacity":A.opacity>1?A.opacity/100:A.opacity});case"stroke":A=t.getRGB(g),l.setAttribute(p,A.hex),"stroke"==p&&A[e]("opacity")&&m(l,{"stroke-opacity":A.opacity>1?A.opacity/100:A.opacity}),"stroke"==p&&i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=n(g).charAt())&&v(i,g);break;case"opacity":c.gradient&&!c[e]("stroke-opacity")&&m(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(c.gradient){R=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h)),R&&(I=R.getElementsByTagName("stop"),m(I[I.length-1],{"stop-opacity":g}));break}default:"font-size"==p&&(g=r(g,10)+"px");var P=p.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[P]=g,i._.dirty=1,l.setAttribute(p,g)}}S(i,a),l.style.visibility=d},_=1.2,S=function(i,a){if("text"==i.type&&(a[e]("text")||a[e]("font")||a[e]("font-size")||a[e]("x")||a[e]("y"))){var s=i.attrs,o=i.node,l=o.firstChild?r(t._g.doc.defaultView.getComputedStyle(o.firstChild,h).getPropertyValue("font-size"),10):10;if(a[e]("text")){for(s.text=a.text;o.firstChild;)o.removeChild(o.firstChild);for(var u,c=n(a.text).split("\n"),d=[],f=0,p=c.length;p>f;f++)u=m("tspan"),f&&m(u,{dy:l*_,x:s.x}),u.appendChild(t._g.doc.createTextNode(c[f])),o.appendChild(u),d[f]=u}else for(d=o.getElementsByTagName("tspan"),f=0,p=d.length;p>f;f++)f?m(d[f],{dy:l*_,x:s.x}):m(d[0],{dy:0});m(o,{x:s.x,y:s.y}),i._.dirty=1;var g=i._getBBox(),v=s.y-(g.y+g.height/2);v&&t.is(v,"finite")&&m(d[0],{dy:v})}},T=function(e,n){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},D=t.el;T.prototype=D,D.constructor=T,t._engine.path=function(t,e){var n=m("path");e.canvas&&e.canvas.appendChild(n);var i=new T(n,e);return i.type="path",C(i,{fill:"none",stroke:"#000",path:t}),i},D.rotate=function(t,e,r){if(this.removed)return this;if(t=n(t).split(u),t.length-1&&(e=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(e=r),null==e||null==r){var a=this.getBBox(1);e=a.x+a.width/2,r=a.y+a.height/2}return this.transform(this._.transform.concat([["r",t,e,r]])),this},D.scale=function(t,e,r,a){if(this.removed)return this;if(t=n(t).split(u),t.length-1&&(e=i(t[1]),r=i(t[2]),a=i(t[3])),t=i(t[0]),null==e&&(e=t),null==a&&(r=a),null==r||null==a)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,a=null==a?s.y+s.height/2:a,this.transform(this._.transform.concat([["s",t,e,r,a]])),this},D.translate=function(t,e){return this.removed?this:(t=n(t).split(u),t.length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},D.transform=function(n){var i=this._;if(null==n)return i.transform;if(t._extractTransform(this,n),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var r=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},D.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},D.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},D.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),c.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),t._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var n in this)this[n]="function"==typeof this[n]?t._removedFactory(n):null;this.removed=!0}},D._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(n){}finally{e=e||{}}return t&&this.hide(),e},D.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var a in this.attrs)this.attrs[e](a)&&(r[a]=this.attrs[a]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&t.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var s=n.split(u),o={},l=0,h=s.length;h>l;l++)n=s[l],o[n]=n in this.attrs?this.attrs[n]:t.is(this.paper.customAttributes[n],"function")?this.paper.customAttributes[n].def:t._availableAttrs[n];return h-1?o:o[s[0]]}if(null==i&&t.is(n,"array")){for(o={},l=0,h=n.length;h>l;l++)o[n[l]]=this.attr(n[l]);return o}if(null!=i){var d={};d[n]=i}else null!=n&&t.is(n,"object")&&(d=n);for(var f in d)c("raphael.attr."+f+"."+this.id,this,d[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&d[e](f)&&t.is(this.paper.customAttributes[f],"function")){var p=this.paper.customAttributes[f].apply(this,[].concat(d[f]));this.attrs[f]=d[f];for(var g in p)p[e](g)&&(d[g]=p[g])}return C(this,d),this},D.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&t._tofront(this,e),this},D.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;return"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper),this.paper,this},D.insertAfter=function(e){if(this.removed)return this;var n=e.node||e[e.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this},D.insertBefore=function(e){if(this.removed)return this;var n=e.node||e[0].node;return n.parentNode.insertBefore(this.node,n),t._insertbefore(this,e,this.paper),this},D.blur=function(e){var n=this;if(0!==+e){var i=m("filter"),r=m("feGaussianBlur");n.attrs.blur=e,i.id=t.createUUID(),m(r,{stdDeviation:+e||1.5}),i.appendChild(r),n.paper.defs.appendChild(i),n._blur=i,m(n.node,{filter:"url(#"+i.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},t._engine.circle=function(t,e,n,i){var r=m("circle");t.canvas&&t.canvas.appendChild(r);var a=new T(r,t);return a.attrs={cx:e,cy:n,r:i,fill:"none",stroke:"#000"},a.type="circle",m(r,a.attrs),a},t._engine.rect=function(t,e,n,i,r,a){var s=m("rect");t.canvas&&t.canvas.appendChild(s);var o=new T(s,t);return o.attrs={x:e,y:n,width:i,height:r,r:a||0,rx:a||0,ry:a||0,fill:"none",stroke:"#000"},o.type="rect",m(s,o.attrs),o},t._engine.ellipse=function(t,e,n,i,r){var a=m("ellipse");t.canvas&&t.canvas.appendChild(a);var s=new T(a,t);return s.attrs={cx:e,cy:n,rx:i,ry:r,fill:"none",stroke:"#000"},s.type="ellipse",m(a,s.attrs),s},t._engine.image=function(t,e,n,i,r,a){var s=m("image");m(s,{x:n,y:i,width:r,height:a,preserveAspectRatio:"none"}),s.setAttributeNS(f,"href",e),t.canvas&&t.canvas.appendChild(s);var o=new T(s,t);return o.attrs={x:n,y:i,width:r,height:a,src:e},o.type="image",o},t._engine.text=function(e,n,i,r){var a=m("text");e.canvas&&e.canvas.appendChild(a);var s=new T(a,e);return s.attrs={x:n,y:i,"text-anchor":"middle",text:r,font:t._availableAttrs.font,stroke:"none",fill:"#000"},s.type="text",C(s,s.attrs),s},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),n=e&&e.container,i=e.x,r=e.y,a=e.width,s=e.height;if(!n)throw new Error("SVG container not found.");var o,l=m("svg"),u="overflow:hidden;";return i=i||0,r=r||0,a=a||512,s=s||342,m(l,{height:s,version:1.1,width:a,xmlns:"http://www.w3.org/2000/svg"}),1==n?(l.style.cssText=u+"position:absolute;left:"+i+"px;top:"+r+"px",t._g.doc.body.appendChild(l),o=1):(l.style.cssText=u+"position:relative",n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l)),n=new t._Paper,n.width=a,n.height=s,n.canvas=l,n.clear(),n._left=n._top=0,o&&(n.renderfix=function(){}),n.renderfix(),n},t._engine.setViewBox=function(t,e,n,i,r){c("raphael.setViewBox",this,this._viewBox,[t,e,n,i,r]);var a,o,l=s(n/this.width,i/this.height),u=this.top,h=r?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,a="0 0 "+this.width+d+this.height):(this._vbSize=l,a=t+d+e+d+n+d+i),m(this.canvas,{viewBox:a,preserveAspectRatio:h});l&&u;)o="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":o}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[t,e,n,i,!!r],this},t.prototype.renderfix=function(){var t,e=this.canvas,n=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}var r=-t.e%1,a=-t.f%1;(r||a)&&(r&&(this._left=(this._left+r)%1,n.left=this._left+"px"),a&&(this._top=(this._top+a)%1,n.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(t._g.doc.createTextNode("Created with Raphal "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=m("defs"))},t.prototype.remove=function(){c("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var k=t.st;for(var M in D)D[e](M)&&!k[e](M)&&(k[M]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(M))}(window.Raphael),window.Raphael.vml&&function(t){var e="hasOwnProperty",n=String,i=parseFloat,r=Math,a=r.round,s=r.max,o=r.min,l=r.abs,u="fill",c=/[, ]+/,h=t.eve,d=" progid:DXImageTransform.Microsoft",f=" ",p="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",x=21600,w={path:1,rect:1,image:1},C={circle:1,ellipse:1},_=function(e){var i=/[ahqstv]/gi,r=t._pathToAbsolute;if(n(e).match(i)&&(r=t._path2curve),i=/[clmz]/g,r==t._pathToAbsolute&&!n(e).match(i)){var s=n(e).replace(m,function(t,e,n){var i=[],r="m"==e.toLowerCase(),s=g[e];
return n.replace(y,function(t){r&&2==i.length&&(s+=i+g["m"==e?"l":"L"],i=[]),i.push(a(t*x))}),s+i});return s}var o,l,u=r(e);s=[];for(var c=0,h=u.length;h>c;c++){o=u[c],l=u[c][0].toLowerCase(),"z"==l&&(l="x");for(var d=1,v=o.length;v>d;d++)l+=a(o[d]*x)+(d!=v-1?",":p);s.push(l)}return s.join(f)},S=function(e,n,i){var r=t.matrix();return r.rotate(-e,.5,.5),{dx:r.x(n,i),dy:r.y(n,i)}},T=function(t,e,n,i,r,a){var s=t._,o=t.matrix,c=s.fillpos,h=t.node,d=h.style,p=1,g="",m=x/e,v=x/n;if(d.visibility="hidden",e&&n){if(h.coordsize=l(m)+f+l(v),d.rotation=a*(0>e*n?-1:1),a){var y=S(a,i,r);i=y.dx,r=y.dy}if(0>e&&(g+="x"),0>n&&(g+=" y")&&(p=-1),d.flip=g,h.coordorigin=i*-m+f+r*-v,c||s.fillsize){var b=h.getElementsByTagName(u);b=b&&b[0],h.removeChild(b),c&&(y=S(a,o.x(c[0],c[1]),o.y(c[0],c[1])),b.position=y.dx*p+f+y.dy*p),s.fillsize&&(b.size=s.fillsize[0]*l(e)+f+s.fillsize[1]*l(n)),h.appendChild(b)}d.visibility="visible"}};t.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var D=function(t,e,i){for(var r=n(e).toLowerCase().split("-"),a=i?"end":"start",s=r.length,o="classic",l="medium",u="medium";s--;)switch(r[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=r[s];break;case"wide":case"narrow":u=r[s];break;case"long":case"short":l=r[s]}var c=t.node.getElementsByTagName("stroke")[0];c[a+"arrow"]=o,c[a+"arrowlength"]=l,c[a+"arrowwidth"]=u},k=function(r,l){r.attrs=r.attrs||{};var h=r.node,d=r.attrs,g=h.style,m=w[r.type]&&(l.x!=d.x||l.y!=d.y||l.width!=d.width||l.height!=d.height||l.cx!=d.cx||l.cy!=d.cy||l.rx!=d.rx||l.ry!=d.ry||l.r!=d.r),v=C[r.type]&&(d.cx!=l.cx||d.cy!=l.cy||d.r!=l.r||d.rx!=l.rx||d.ry!=l.ry),y=r;for(var b in l)l[e](b)&&(d[b]=l[b]);if(m&&(d.path=t._getPath[r.type](r),r._.dirty=1),l.href&&(h.href=l.href),l.title&&(h.title=l.title),l.target&&(h.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||m)&&(h.path=_(~n(d.path).toLowerCase().indexOf("r")?t._pathToAbsolute(d.path):d.path),"image"==r.type&&(r._.fillpos=[d.x,d.y],r._.fillsize=[d.width,d.height],T(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),v){var S=+d.cx,k=+d.cy,E=+d.rx||+d.r||0,N=+d.ry||+d.r||0;h.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",a((S-E)*x),a((k-N)*x),a((S+E)*x),a((k+N)*x),a(S*x))}if("clip-rect"in l){var R=n(l["clip-rect"]).split(c);if(4==R.length){R[2]=+R[2]+ +R[0],R[3]=+R[3]+ +R[1];var I=h.clipRect||t._g.doc.createElement("div"),P=I.style;P.clip=t.format("rect({1}px {2}px {3}px {0}px)",R),h.clipRect||(P.position="absolute",P.top=0,P.left=0,P.width=r.paper.width+"px",P.height=r.paper.height+"px",h.parentNode.insertBefore(I,h),I.appendChild(h),h.clipRect=I)}l["clip-rect"]||h.clipRect&&(h.clipRect.style.clip="auto")}if(r.textpath){var O=r.textpath.style;l.font&&(O.font=l.font),l["font-family"]&&(O.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(O.fontSize=l["font-size"]),l["font-weight"]&&(O.fontWeight=l["font-weight"]),l["font-style"]&&(O.fontStyle=l["font-style"])}if("arrow-start"in l&&D(y,l["arrow-start"]),"arrow-end"in l&&D(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var F=h.getElementsByTagName(u),L=!1;if(F=F&&F[0],!F&&(L=F=A(u)),"image"==r.type&&l.src&&(F.src=l.src),l.fill&&(F.on=!0),(null==F.on||"none"==l.fill||null===l.fill)&&(F.on=!1),F.on&&l.fill){var H=n(l.fill).match(t._ISURL);if(H){F.parentNode==h&&h.removeChild(F),F.rotate=!0,F.src=H[1],F.type="tile";var j=r.getBBox(1);F.position=j.x+f+j.y,r._.fillpos=[j.x,j.y],t._preload(H[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else F.color=t.getRGB(l.fill).hex,F.src=p,F.type="solid",t.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=n(l.fill).charAt())&&M(y,l.fill,F)&&(d.fill="none",d.gradient=l.fill,F.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var B=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);B=o(s(B,0),1),F.opacity=B,F.src&&(F.color="none")}h.appendChild(F);var z=h.getElementsByTagName("stroke")&&h.getElementsByTagName("stroke")[0],$=!1;!z&&($=z=A("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(z.on=!0),("none"==l.stroke||null===l.stroke||null==z.on||0==l.stroke||0==l["stroke-width"])&&(z.on=!1);var q=t.getRGB(l.stroke);z.on&&l.stroke&&(z.color=q.hex),B=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+q.o+1||2)-1);var W=.75*(i(l["stroke-width"])||1);if(B=o(s(B,0),1),null==l["stroke-width"]&&(W=d["stroke-width"]),l["stroke-width"]&&(z.weight=W),W&&1>W&&(B*=W)&&(z.weight=1),z.opacity=B,l["stroke-linejoin"]&&(z.joinstyle=l["stroke-linejoin"]||"miter"),z.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(z.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var V={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};z.dashstyle=V[e](l["stroke-dasharray"])?V[l["stroke-dasharray"]]:p}$&&h.appendChild(z)}if("text"==y.type){y.paper.canvas.style.display=p;var U=y.paper.span,Y=100,X=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);g=U.style,d.font&&(g.font=d.font),d["font-family"]&&(g.fontFamily=d["font-family"]),d["font-weight"]&&(g.fontWeight=d["font-weight"]),d["font-style"]&&(g.fontStyle=d["font-style"]),X=i(d["font-size"]||X&&X[0])||10,g.fontSize=X*Y+"px",y.textpath.string&&(U.innerHTML=n(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=U.getBoundingClientRect();y.W=d.w=(G.right-G.left)/Y,y.H=d.h=(G.bottom-G.top)/Y,y.X=d.x,y.Y=d.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=t.format("m{0},{1}l{2},{1}",a(d.x*x),a(d.y*x),a(d.x*x)+1));for(var Q=["x","y","text","font","font-family","font-weight","font-style","font-size"],J=0,K=Q.length;K>J;J++)if(Q[J]in l){y._.dirty=1;break}switch(d["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},M=function(e,a,s){e.attrs=e.attrs||{};var o=(e.attrs,Math.pow),l="linear",u=".5 .5";if(e.attrs.gradient=a,a=n(a).replace(t._radial_gradient,function(t,e,n){return l="radial",e&&n&&(e=i(e),n=i(n),o(e-.5,2)+o(n-.5,2)>.25&&(n=r.sqrt(.25-o(e-.5,2))*(2*(n>.5)-1)+.5),u=e+f+n),p}),a=a.split(/\s*\-\s*/),"linear"==l){var c=a.shift();if(c=-i(c),isNaN(c))return null}var h=t._parseDots(a);if(!h)return null;if(e=e.shape||e.node,h.length){e.removeChild(s),s.on=!0,s.method="none",s.color=h[0].color,s.color2=h[h.length-1].color;for(var d=[],g=0,m=h.length;m>g;g++)h[g].offset&&d.push(h[g].offset+f+h[g].color);s.colors=d.length?d.join():"0% "+s.color,"radial"==l?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=u,s.angle=0):(s.type="gradient",s.angle=(270-c)%360),e.appendChild(s)}return 1},E=function(e,n){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},N=t.el;E.prototype=N,N.constructor=E,N.transform=function(e){if(null==e)return this._.transform;var i,r=this.paper._viewBoxShift,a=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:p;r&&(i=e=n(e).replace(/\.{3}|\u2026/g,this._.transform||p)),t._extractTransform(this,a+e);var s,o=this.matrix.clone(),l=this.skew,u=this.node,c=~n(this.attrs.fill).indexOf("-"),h=!n(this.attrs.fill).indexOf("url(");if(o.translate(-.5,-.5),h||c||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",s=o.split(),c&&s.noRotation||!s.isSimple){u.style.filter=o.toFilter();var d=this.getBBox(),g=this.getBBox(1),m=d.x-g.x,v=d.y-g.y;u.coordorigin=m*-x+f+v*-x,T(this,1,1,m,v,0)}else u.style.filter=p,T(this,s.scalex,s.scaley,s.dx,s.dy,s.rotate);else u.style.filter=p,l.matrix=n(o),l.offset=o.offset();return i&&(this._.transform=i),this},N.rotate=function(t,e,r){if(this.removed)return this;if(null!=t){if(t=n(t).split(c),t.length-1&&(e=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(e=r),null==e||null==r){var a=this.getBBox(1);e=a.x+a.width/2,r=a.y+a.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,r]])),this}},N.translate=function(t,e){return this.removed?this:(t=n(t).split(c),t.length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},N.scale=function(t,e,r,a){if(this.removed)return this;if(t=n(t).split(c),t.length-1&&(e=i(t[1]),r=i(t[2]),a=i(t[3]),isNaN(r)&&(r=null),isNaN(a)&&(a=null)),t=i(t[0]),null==e&&(e=t),null==a&&(r=a),null==r||null==a)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,a=null==a?s.y+s.height/2:a,this.transform(this._.transform.concat([["s",t,e,r,a]])),this._.dirtyT=1,this},N.hide=function(){return!this.removed&&(this.node.style.display="none"),this},N.show=function(){return!this.removed&&(this.node.style.display=p),this},N._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},N.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},N.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var a in this.attrs)this.attrs[e](a)&&(r[a]=this.attrs[a]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&t.is(n,"string")){if(n==u&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var s=n.split(c),o={},l=0,d=s.length;d>l;l++)n=s[l],o[n]=n in this.attrs?this.attrs[n]:t.is(this.paper.customAttributes[n],"function")?this.paper.customAttributes[n].def:t._availableAttrs[n];return d-1?o:o[s[0]]}if(this.attrs&&null==i&&t.is(n,"array")){for(o={},l=0,d=n.length;d>l;l++)o[n[l]]=this.attr(n[l]);return o}var f;null!=i&&(f={},f[n]=i),null==i&&t.is(n,"object")&&(f=n);for(var p in f)h("raphael.attr."+p+"."+this.id,this,f[p]);if(f){for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&f[e](p)&&t.is(this.paper.customAttributes[p],"function")){var g=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var m in g)g[e](m)&&(f[m]=g[m])}f.text&&"text"==this.type&&(this.textpath.string=f.text),k(this,f)}return this},N.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},N.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},N.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},N.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},N.blur=function(e){var n=this.node.runtimeStyle,i=n.filter;i=i.replace(v,p),0!==+e?(this.attrs.blur=e,n.filter=i+f+d+".Blur(pixelradius="+(+e||1.5)+")",n.margin=t.format("-{0}px 0 0 -{0}px",a(+e||1.5))):(n.filter=i,n.margin=0,delete this.attrs.blur)},t._engine.path=function(t,e){var n=A("shape");n.style.cssText=b,n.coordsize=x+f+x,n.coordorigin=e.coordorigin;var i=new E(n,e),r={fill:"none",stroke:"#000"};t&&(r.path=t),i.type="path",i.path=[],i.Path=p,k(i,r),e.canvas.appendChild(n);var a=A("skew");return a.on=!0,n.appendChild(a),i.skew=a,i.transform(p),i},t._engine.rect=function(e,n,i,r,a,s){var o=t._rectPath(n,i,r,a,s),l=e.path(o),u=l.attrs;return l.X=u.x=n,l.Y=u.y=i,l.W=u.width=r,l.H=u.height=a,u.r=s,u.path=o,l.type="rect",l},t._engine.ellipse=function(t,e,n,i,r){var a=t.path();return a.attrs,a.X=e-i,a.Y=n-r,a.W=2*i,a.H=2*r,a.type="ellipse",k(a,{cx:e,cy:n,rx:i,ry:r}),a},t._engine.circle=function(t,e,n,i){var r=t.path();return r.attrs,r.X=e-i,r.Y=n-i,r.W=r.H=2*i,r.type="circle",k(r,{cx:e,cy:n,r:i}),r},t._engine.image=function(e,n,i,r,a,s){var o=t._rectPath(i,r,a,s),l=e.path(o).attr({stroke:"none"}),c=l.attrs,h=l.node,d=h.getElementsByTagName(u)[0];return c.src=n,l.X=c.x=i,l.Y=c.y=r,l.W=c.width=a,l.H=c.height=s,c.path=o,l.type="image",d.parentNode==h&&h.removeChild(d),d.rotate=!0,d.src=n,d.type="tile",l._.fillpos=[i,r],l._.fillsize=[a,s],h.appendChild(d),T(l,1,1,0,0,0),l},t._engine.text=function(e,i,r,s){var o=A("shape"),l=A("path"),u=A("textpath");i=i||0,r=r||0,s=s||"",l.v=t.format("m{0},{1}l{2},{1}",a(i*x),a(r*x),a(i*x)+1),l.textpathok=!0,u.string=n(s),u.on=!0,o.style.cssText=b,o.coordsize=x+f+x,o.coordorigin="0 0";var c=new E(o,e),h={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:s};c.shape=o,c.path=l,c.textpath=u,c.type="text",c.attrs.text=n(s),c.attrs.x=i,c.attrs.y=r,c.attrs.w=1,c.attrs.h=1,k(c,h),o.appendChild(u),o.appendChild(l),e.canvas.appendChild(o);var d=A("skew");return d.on=!0,o.appendChild(d),c.skew=d,c.transform(p),c},t._engine.setSize=function(e,n){var i=this.canvas.style;return this.width=e,this.height=n,e==+e&&(e+="px"),n==+n&&(n+="px"),i.width=e,i.height=n,i.clip="rect(0 "+e+" "+n+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,n,i,r,a){t.eve("raphael.setViewBox",this,this._viewBox,[e,n,i,r,a]);var o,l,u=this.width,c=this.height,h=1/s(i/u,r/c);return a&&(o=c/r,l=u/i,u>i*o&&(e-=(u-i*o)/2/o),c>r*l&&(n-=(c-r*l)/2/l)),this._viewBox=[e,n,i,r,!!a],this._viewBoxShift={dx:-e,dy:-n,scale:h},this.forEach(function(t){t.transform("...")}),this};var A;t._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),A=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(n){A=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),n=e.container,i=e.height,r=e.width,a=e.x,s=e.y;if(!n)throw new Error("VML container not found.");var o=new t._Paper,l=o.canvas=t._g.doc.createElement("div"),u=l.style;return a=a||0,s=s||0,r=r||512,i=i||342,o.width=r,o.height=i,r==+r&&(r+="px"),i==+i&&(i+="px"),o.coordsize=1e3*x+f+1e3*x,o.coordorigin="0 0",o.span=t._g.doc.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(o.span),u.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,i),1==n?(t._g.doc.body.appendChild(l),u.left=a+"px",u.top=s+"px",u.position="absolute"):n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),o.renderfix=function(){},o},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var R=t.st;for(var I in N)N[e](I)&&!R[e](I)&&(R[I]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(I))}(window.Raphael),JustGage=function(t){if(!t.id)return alert("Missing id parameter for gauge!"),!1;if(!document.getElementById(t.id))return alert('No element with id: "'+t.id+'" found!'),!1;this.config={id:t.id,title:t.title?t.title:"Title",titleFontColor:t.titleFontColor?t.titleFontColor:"#999999",value:t.value?t.value:0,valueFontColor:t.valueFontColor?t.valueFontColor:"#010101",min:t.min?t.min:0,max:t.max?t.max:100,showMinMax:null!=t.showMinMax?t.showMinMax:!0,gaugeWidthScale:t.gaugeWidthScale?t.gaugeWidthScale:1,gaugeColor:t.gaugeColor?t.gaugeColor:"#edebeb",label:t.label?t.label:"",showInnerShadow:null!=t.showInnerShadow?t.showInnerShadow:!0,shadowOpacity:t.shadowOpacity?t.shadowOpacity:.2,shadowSize:t.shadowSize?t.shadowSize:5,shadowVerticalOffset:t.shadowVerticalOffset?t.shadowVerticalOffset:3,levelColors:t.levelColors?t.levelColors:percentColors,levelColorsGradient:null!=t.levelColorsGradient?t.levelColorsGradient:!0,labelFontColor:t.labelFontColor?t.labelFontColor:"#b3b3b3",startAnimationTime:t.startAnimationTime?t.startAnimationTime:700,startAnimationType:t.startAnimationType?t.startAnimationType:">",refreshAnimationTime:t.refreshAnimationTime?t.refreshAnimationTime:700,refreshAnimationType:t.refreshAnimationType?t.refreshAnimationType:">"},t.value>this.config.max&&(this.config.value=this.config.max),t.value<this.config.min&&(this.config.value=this.config.min),this.originalValue=t.value,this.canvas=Raphael(this.config.id,"100%","100%");var e,n,i=1*getStyle(document.getElementById(this.config.id),"width").slice(0,-2),r=1*getStyle(document.getElementById(this.config.id),"height").slice(0,-2);i/r>1.25?(e=1.25*r,n=r):(e=i,n=i/1.25);var a=(i-e)/2,s=(r-n)/2,o=n/8>10?n/10:10,l=a+e/2,u=s+n/6.5,c=n/6.4>16?n/6.4:16,h=a+e/2,d=s+n/1.4,f=n/16>10?n/16:10,p=a+e/2,g=d+c/2+6,m=n/16>10?n/16:10,v=a+e/10+e/6.666666666666667*this.config.gaugeWidthScale/2,y=s+n/1.126760563380282,b=n/16>10?n/16:10,x=a+e-e/10-e/6.666666666666667*this.config.gaugeWidthScale/2,w=s+n/1.126760563380282;this.params={canvasW:i,canvasH:r,widgetW:e,widgetH:n,dx:a,dy:s,titleFontSize:o,titleX:l,titleY:u,valueFontSize:c,valueX:h,valueY:d,labelFontSize:f,labelX:p,labelY:g,minFontSize:m,minX:v,minY:y,maxFontSize:b,maxX:x,maxY:w},this.canvas.customAttributes.pki=function(t,e,n,i,r,a,s,o){var l,u=(1-(t-e)/(n-e))*Math.PI,c=i/2-i/10,h=c-i/6.666666666666667*o,d=i/2+a,f=r/1.25+s,p=i/2+a+c*Math.cos(u),g=r-(r-f)+s-c*Math.sin(u),m=i/2+a+h*Math.cos(u),v=r-(r-f)+s-h*Math.sin(u);return l+="M"+(d-h)+","+f+" ",l+="L"+(d-c)+","+f+" ",l+="A"+c+","+c+" 0 0,1 "+p+","+g+" ",l+="L"+m+","+v+" ",l+="A"+h+","+h+" 0 0,0 "+(d-h)+","+f+" ",l+="z ",{path:l}},this.gauge=this.canvas.path().attr({stroke:"none",fill:this.config.gaugeColor,pki:[this.config.max,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]}),this.gauge.id=this.config.id+"-gauge",this.level=this.canvas.path().attr({stroke:"none",fill:getColorForPercentage((this.config.value-this.config.min)/(this.config.max-this.config.min),this.config.levelColors,this.config.levelColorsGradient),pki:[this.config.min,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]}),this.level.id=this.config.id+"-level",this.txtTitle=this.canvas.text(this.params.titleX,this.params.titleY,this.config.title),this.txtTitle.attr({"font-size":this.params.titleFontSize,"font-weight":"bold","font-family":"Arial",fill:this.config.titleFontColor,"fill-opacity":"1"}),this.txtTitle.id=this.config.id+"-txttitle",this.txtValue=this.canvas.text(this.params.valueX,this.params.valueY,this.originalValue),this.txtValue.attr({"font-size":this.params.valueFontSize,"font-weight":"bold","font-family":"Arial",fill:this.config.valueFontColor,"fill-opacity":"0"}),this.txtValue.id=this.config.id+"-txtvalue",this.txtLabel=this.canvas.text(this.params.labelX,this.params.labelY,this.config.label),this.txtLabel.attr({"font-size":this.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":"0"}),this.txtLabel.id=this.config.id+"-txtlabel",this.txtMin=this.canvas.text(this.params.minX,this.params.minY,this.config.min),this.txtMin.attr({"font-size":this.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":1==this.config.showMinMax?"1":"0"}),this.txtMin.id=this.config.id+"-txtmin",this.txtMax=this.canvas.text(this.params.maxX,this.params.maxY,this.config.max),this.txtMax.attr({"font-size":this.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":1==this.config.showMinMax?"1":"0"}),this.txtMax.id=this.config.id+"-txtmax";var C=this.canvas.canvas.childNodes[1],_="http://www.w3.org/2000/svg";9>ie?onCreateElementNsReady(function(){this.generateShadow()}):this.generateShadow(_,C),this.level.animate({pki:[this.config.value,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]},this.config.startAnimationTime,this.config.startAnimationType),this.txtValue.animate({"fill-opacity":"1"},this.config.startAnimationTime,this.config.startAnimationType),this.txtLabel.animate({"fill-opacity":"1"},this.config.startAnimationTime,this.config.startAnimationType)},JustGage.prototype.refresh=function(t){originalVal=t,t>this.config.max&&(t=this.config.max),t<this.config.min&&(t=this.config.min);var e=getColorForPercentage((t-this.config.min)/(this.config.max-this.config.min),this.config.levelColors,this.config.levelColorsGradient);this.canvas.getById(this.config.id+"-txtvalue").attr({text:originalVal}),this.canvas.getById(this.config.id+"-level").animate({pki:[t,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale],fill:e},this.config.refreshAnimationTime,this.config.refreshAnimationType)};var percentColors=["#a9d70b","#f9c802","#ff0000"];JustGage.prototype.generateShadow=function(t,e){var n=document.createElementNS(t,"filter");n.setAttribute("id",this.config.id+"-inner-shadow"),e.appendChild(n);var i=document.createElementNS(t,"feOffset");i.setAttribute("dx",0),i.setAttribute("dy",this.config.shadowVerticalOffset),n.appendChild(i);var r=document.createElementNS(t,"feGaussianBlur");r.setAttribute("result","offset-blur"),r.setAttribute("stdDeviation",this.config.shadowSize),n.appendChild(r);var a=document.createElementNS(t,"feComposite");a.setAttribute("operator","out"),a.setAttribute("in","SourceGraphic"),a.setAttribute("in2","offset-blur"),a.setAttribute("result","inverse"),n.appendChild(a);var s=document.createElementNS(t,"feFlood");s.setAttribute("flood-color","black"),s.setAttribute("flood-opacity",this.config.shadowOpacity),s.setAttribute("result","color"),n.appendChild(s);var o=document.createElementNS(t,"feComposite");o.setAttribute("operator","in"),o.setAttribute("in","color"),o.setAttribute("in2","inverse"),o.setAttribute("result","shadow"),n.appendChild(o);var l=document.createElementNS(t,"feComposite");l.setAttribute("operator","over"),l.setAttribute("in","shadow"),l.setAttribute("in2","SourceGraphic"),n.appendChild(l),1==this.config.showInnerShadow&&(this.canvas.canvas.childNodes[2].setAttribute("filter","url(#"+this.config.id+"-inner-shadow)"),this.canvas.canvas.childNodes[3].setAttribute("filter","url(#"+this.config.id+"-inner-shadow)"))};var getColorForPercentage=function(t,e,n){var i=e.length;if(1===i)return e[0];for(var r=n?1/(i-1):1/i,a=new Array,s=0;s<e.length;s++){var o=n?r*s:r*(s+1),l=parseInt(cutHex(e[s]).substring(0,2),16),u=parseInt(cutHex(e[s]).substring(2,4),16),c=parseInt(cutHex(e[s]).substring(4,6),16);a[s]={pct:o,color:{r:l,g:u,b:c}}}if(0==t)return"rgb("+[a[0].color.r,a[0].color.g,a[0].color.b].join(",")+")";for(var s=0;s<a.length;s++)if(t<=a[s].pct){if(1==n){var h=a[s-1],d=a[s],f=d.pct-h.pct,p=(t-h.pct)/f,g=1-p,m=p,v={r:Math.floor(h.color.r*g+d.color.r*m),g:Math.floor(h.color.g*g+d.color.g*m),b:Math.floor(h.color.b*g+d.color.b*m)};return"rgb("+[v.r,v.g,v.b].join(",")+")"}return"rgb("+[a[s].color.r,a[s].color.g,a[s].color.b].join(",")+")"}},ie=function(){for(var t,e=3,n=document.createElement("div"),i=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",i[0];);return e>4?e:t}();(function(){!function(t){return t.easyPieChart=function(e,n){var i,r,a,s,o,l,u,c=this;return this.el=e,this.$el=t(e),this.$el.data("easyPieChart",this),this.init=function(){var e,i;return c.options=t.extend({},t.easyPieChart.defaultOptions,n),e=parseInt(c.$el.data("percent"),10),c.percentage=0,c.canvas=t("<canvas width='"+c.options.size+"' height='"+c.options.size+"'></canvas>").get(0),c.$el.append(c.canvas),"undefined"!=typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(c.canvas),c.ctx=c.canvas.getContext("2d"),window.devicePixelRatio>1&&(i=window.devicePixelRatio,t(c.canvas).css({width:c.options.size,height:c.options.size}),c.canvas.width*=i,c.canvas.height*=i,c.ctx.scale(i,i)),c.ctx.translate(c.options.size/2,c.options.size/2),c.$el.addClass("easyPieChart"),c.$el.css({width:c.options.size,height:c.options.size,lineHeight:""+c.options.size+"px"}),c.update(e),c},this.update=function(t){return c.options.animate===!1?a(t):r(c.percentage,t)},l=function(){var t,e,n;for(c.ctx.fillStyle=c.options.scaleColor,c.ctx.lineWidth=1,n=[],t=e=0;24>=e;t=++e)n.push(i(t));return n},i=function(t){var e;return e=0===t%6?0:.017*c.options.size,c.ctx.save(),c.ctx.rotate(t*Math.PI/12),c.ctx.fillRect(c.options.size/2-e,0,.05*-c.options.size+e,1),c.ctx.restore()},u=function(){var t;return t=c.options.size/2-c.options.lineWidth/2,c.options.scaleColor!==!1&&(t-=.08*c.options.size),c.ctx.beginPath(),c.ctx.arc(0,0,t,0,2*Math.PI,!0),c.ctx.closePath(),c.ctx.strokeStyle=c.options.trackColor,c.ctx.lineWidth=c.options.lineWidth,c.ctx.stroke()},o=function(){return c.options.scaleColor!==!1&&l(),c.options.trackColor!==!1?u():void 0},a=function(e){var n;return o(),c.ctx.strokeStyle=t.isFunction(c.options.barColor)?c.options.barColor(e):c.options.barColor,c.ctx.lineCap=c.options.lineCap,c.ctx.lineWidth=c.options.lineWidth,n=c.options.size/2-c.options.lineWidth/2,c.options.scaleColor!==!1&&(n-=.08*c.options.size),c.ctx.save(),c.ctx.rotate(-Math.PI/2),c.ctx.beginPath(),c.ctx.arc(0,0,n,0,2*Math.PI*e/100,!1),c.ctx.stroke(),c.ctx.restore()},r=function(t,e){var n,i,r;return i=30,r=i*c.options.animate/1e3,n=0,c.options.onStart.call(c),c.percentage=e,c.animation&&(clearInterval(c.animation),c.animation=!1),c.animation=setInterval(function(){return c.ctx.clearRect(-c.options.size/2,-c.options.size/2,c.options.size,c.options.size),o.call(c),a.call(c,[s(n,t,e-t,r)]),n++,n/r>1?(clearInterval(c.animation),c.animation=!1,c.options.onStop.call(c)):void 0},1e3/i)},s=function(t,e,n,i){var r,a;return r=function(t){return Math.pow(t,2)},a=function(t){return 1>t?r(t):2-r(-2*(t/2)+2)},t/=i/2,n/2*a(t)+e},this.init()},t.easyPieChart.defaultOptions={barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",size:110,lineWidth:3,animate:!1,onStart:t.noop,onStop:t.noop},t.fn.easyPieChart=function(e){return t.each(this,function(n,i){var r;return r=t(i),r.data("easyPieChart")?void 0:r.data("easyPieChart",new t.easyPieChart(i,e))})},void 0}(jQuery)}).call(this),function(){var t=$('<div id="galleryOverlay">'),e=$('<div id="gallerySlider">'),n=$('<a id="prevArrow"><i class="icon-angle-left icon-4x"></i></a>'),i=$('<a id="nextArrow"><i class="icon-angle-right icon-4x"></i></a>'),r=!1;$.fn.touchTouch=function(){function a(e){return r?!1:(t.show(),setTimeout(function(){t.addClass("visible")},100),o(e),r=!0,void 0)}function s(){return r?(t.hide().removeClass("visible"),r=!1,void 0):!1}function o(t){e.css("left",100*-t+"%")}function l(t){setTimeout(function(){u(t)},1e3)}function u(t){return 0>t||t>=g.length?!1:(c(g.eq(t).attr("href"),function(){f.eq(t).html(this)}),void 0)}function c(t,e){var n=$("<img>").on("load",function(){e.call(n)});n.attr("src",t)}function h(){p+1<g.length?(p++,o(p),l(p+1)):(e.addClass("rightSpring"),setTimeout(function(){e.removeClass("rightSpring")},500))}function d(){p>0?(p--,o(p),l(p-1)):(e.addClass("leftSpring"),setTimeout(function(){e.removeClass("leftSpring")},500))}var f=$([]),p=0,g=this;t.hide().appendTo("body"),e.appendTo(t),g.each(function(){f=f.add($('<div class="placeholder">'))}),e.append(f).on("click",function(t){$(t.target).is("img")||s()}),$("body").on("touchstart","#gallerySlider img",function(t){var n=t.originalEvent,i=n.changedTouches[0].pageX;return e.on("touchmove",function(t){t.preventDefault(),n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],n.pageX-i>10?(e.off("touchmove"),d()):n.pageX-i<-10&&(e.off("touchmove"),h())}),!1}).on("touchend",function(){e.off("touchmove")}),g.on("click",function(t){t.preventDefault(),p=g.index(this),a(p),u(p),l(p+1),l(p-1)}),"ontouchstart"in window||(t.append(n).append(i),n.click(function(t){t.preventDefault(),d()}),i.click(function(t){t.preventDefault(),h()})),$(window).bind("keydown",function(t){37==t.keyCode?d():39==t.keyCode&&h()})}}(jQuery),function(X,l,n){var L=function(h){var j=function(e){function o(t,e){var i=j.defaults.columns,r=t.aoColumns.length,i=h.extend({},j.models.oColumn,i,{sSortingClass:t.oClasses.sSortable,sSortingClassJUI:t.oClasses.sSortJUI,nTh:e?e:l.createElement("th"),sTitle:i.sTitle?i.sTitle:e?e.innerHTML:"",aDataSort:i.aDataSort?i.aDataSort:[r],mData:i.mData?i.oDefaults:r});t.aoColumns.push(i),t.aoPreSearchCols[r]===n||null===t.aoPreSearchCols[r]?t.aoPreSearchCols[r]=h.extend({},j.models.oSearch):(i=t.aoPreSearchCols[r],i.bRegex===n&&(i.bRegex=!0),i.bSmart===n&&(i.bSmart=!0),i.bCaseInsensitive===n&&(i.bCaseInsensitive=!0)),m(t,r,null)}function m(t,e,i){var r=t.aoColumns[e];i!==n&&null!==i&&(i.mDataProp&&!i.mData&&(i.mData=i.mDataProp),i.sType!==n&&(r.sType=i.sType,r._bAutoType=!1),h.extend(r,i),p(r,i,"sWidth","sWidthOrig"),i.iDataSort!==n&&(r.aDataSort=[i.iDataSort]),p(r,i,"aDataSort"));var a=r.mRender?Q(r.mRender):null,s=Q(r.mData);r.fnGetData=function(t,e){var n=s(t,e);return r.mRender&&e&&""!==e?a(n,e,t):n},r.fnSetData=L(r.mData),t.oFeatures.bSort||(r.bSortable=!1),!r.bSortable||-1==h.inArray("asc",r.asSorting)&&-1==h.inArray("desc",r.asSorting)?(r.sSortingClass=t.oClasses.sSortableNone,r.sSortingClassJUI=""):-1==h.inArray("asc",r.asSorting)&&-1==h.inArray("desc",r.asSorting)?(r.sSortingClass=t.oClasses.sSortable,r.sSortingClassJUI=t.oClasses.sSortJUI):-1!=h.inArray("asc",r.asSorting)&&-1==h.inArray("desc",r.asSorting)?(r.sSortingClass=t.oClasses.sSortableAsc,r.sSortingClassJUI=t.oClasses.sSortJUIAscAllowed):-1==h.inArray("asc",r.asSorting)&&-1!=h.inArray("desc",r.asSorting)&&(r.sSortingClass=t.oClasses.sSortableDesc,r.sSortingClassJUI=t.oClasses.sSortJUIDescAllowed)}function k(t){if(!1===t.oFeatures.bAutoWidth)return!1;da(t);for(var e=0,n=t.aoColumns.length;n>e;e++)t.aoColumns[e].nTh.style.width=t.aoColumns[e].sWidth}function G(t,e){var n=r(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function R(t,e){var n=r(t,"bVisible"),n=h.inArray(e,n);return-1!==n?n:null}function t(t){return r(t,"bVisible").length}function r(t,e){var n=[];return h.map(t.aoColumns,function(t,i){t[e]&&n.push(i)}),n}function B(t){for(var e=j.ext.aTypes,n=e.length,i=0;n>i;i++){var r=e[i](t);if(null!==r)return r}return"string"}function u(t,e){for(var n=e.split(","),i=[],r=0,a=t.aoColumns.length;a>r;r++)for(var s=0;a>s;s++)if(t.aoColumns[r].sName==n[s]){i.push(s);break}return i}function M(t){for(var e="",n=0,i=t.aoColumns.length;i>n;n++)e+=t.aoColumns[n].sName+",";return e.length==i?"":e.slice(0,-1)}function ta(t,e,n,i){var r,a,s,l,u;if(e)for(r=e.length-1;r>=0;r--){var c=e[r].aTargets;for(h.isArray(c)||D(t,1,"aTargets must be an array of targets, not a "+typeof c),a=0,s=c.length;s>a;a++)if("number"==typeof c[a]&&0<=c[a]){for(;t.aoColumns.length<=c[a];)o(t);i(c[a],e[r])}else if("number"==typeof c[a]&&0>c[a])i(t.aoColumns.length+c[a],e[r]);else if("string"==typeof c[a])for(l=0,u=t.aoColumns.length;u>l;l++)("_all"==c[a]||h(t.aoColumns[l].nTh).hasClass(c[a]))&&i(l,e[r])}if(n)for(r=0,t=n.length;t>r;r++)i(r,n[r])}function H(t,e){var n;n=h.isArray(e)?e.slice():h.extend(!0,{},e);var i=t.aoData.length,r=h.extend(!0,{},j.models.oRow);r._aData=n,t.aoData.push(r);
for(var a,r=0,s=t.aoColumns.length;s>r;r++)n=t.aoColumns[r],"function"==typeof n.fnRender&&n.bUseRendered&&null!==n.mData?F(t,i,r,S(t,i,r)):F(t,i,r,v(t,i,r)),n._bAutoType&&"string"!=n.sType&&(a=v(t,i,r,"type"),null!==a&&""!==a&&(a=B(a),null===n.sType?n.sType=a:n.sType!=a&&"html"!=n.sType&&(n.sType="string")));return t.aiDisplayMaster.push(i),t.oFeatures.bDeferRender||ea(t,i),i}function ua(t){var e,n,i,r,a,s,o;if(t.bDeferLoading||null===t.sAjaxSource)for(e=t.nTBody.firstChild;e;){if("TR"==e.nodeName.toUpperCase())for(n=t.aoData.length,e._DT_RowIndex=n,t.aoData.push(h.extend(!0,{},j.models.oRow,{nTr:e})),t.aiDisplayMaster.push(n),a=e.firstChild,i=0;a;)s=a.nodeName.toUpperCase(),("TD"==s||"TH"==s)&&(F(t,n,i,h.trim(a.innerHTML)),i++),a=a.nextSibling;e=e.nextSibling}for(r=T(t),i=[],e=0,n=r.length;n>e;e++)for(a=r[e].firstChild;a;)s=a.nodeName.toUpperCase(),("TD"==s||"TH"==s)&&i.push(a),a=a.nextSibling;for(n=0,r=t.aoColumns.length;r>n;n++){o=t.aoColumns[n],null===o.sTitle&&(o.sTitle=o.nTh.innerHTML);var l,u,c=o._bAutoType,d="function"==typeof o.fnRender,f=null!==o.sClass,p=o.bVisible;if(c||d||f||!p)for(s=0,e=t.aoData.length;e>s;s++)a=t.aoData[s],l=i[s*r+n],c&&"string"!=o.sType&&(u=v(t,s,n,"type"),""!==u&&(u=B(u),null===o.sType?o.sType=u:o.sType!=u&&"html"!=o.sType&&(o.sType="string"))),o.mRender?l.innerHTML=v(t,s,n,"display"):o.mData!==n&&(l.innerHTML=v(t,s,n,"display")),d&&(u=S(t,s,n),l.innerHTML=u,o.bUseRendered&&F(t,s,n,u)),f&&(l.className+=" "+o.sClass),p?a._anHidden[n]=null:(a._anHidden[n]=l,l.parentNode.removeChild(l)),o.fnCreatedCell&&o.fnCreatedCell.call(t.oInstance,l,v(t,s,n,"display"),a._aData,s,n)}if(0!==t.aoRowCreatedCallback.length)for(e=0,n=t.aoData.length;n>e;e++)a=t.aoData[e],A(t,"aoRowCreatedCallback",null,[a.nTr,a._aData,e])}function I(t,e){return e._DT_RowIndex!==n?e._DT_RowIndex:null}function fa(t,e,n){for(var e=J(t,e),i=0,t=t.aoColumns.length;t>i;i++)if(e[i]===n)return i;return-1}function Y(t,e,n,i){for(var r=[],a=0,s=i.length;s>a;a++)r.push(v(t,e,i[a],n));return r}function v(t,e,i,r){var a=t.aoColumns[i];if((i=a.fnGetData(t.aoData[e]._aData,r))===n)return t.iDrawError!=t.iDraw&&null===a.sDefaultContent&&(D(t,0,"Requested unknown parameter "+("function"==typeof a.mData?"{mData function}":"'"+a.mData+"'")+" from the data source for row "+e),t.iDrawError=t.iDraw),a.sDefaultContent;if(null===i&&null!==a.sDefaultContent)i=a.sDefaultContent;else if("function"==typeof i)return i();return"display"==r&&null===i?"":i}function F(t,e,n,i){t.aoColumns[n].fnSetData(t.aoData[e]._aData,i)}function Q(t){if(null===t)return function(){return null};if("function"==typeof t)return function(e,n,i){return t(e,n,i)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("["))){var e=function(t,i,r){var a,s=r.split(".");if(""!==r){var o=0;for(a=s.length;a>o;o++){if(r=s[o].match(U)){s[o]=s[o].replace(U,""),""!==s[o]&&(t=t[s[o]]),a=[],s.splice(0,o+1);for(var s=s.join("."),o=0,l=t.length;l>o;o++)a.push(e(t[o],i,s));t=r[0].substring(1,r[0].length-1),t=""===t?a:a.join(t);break}if(null===t||t[s[o]]===n)return n;t=t[s[o]]}}return t};return function(n,i){return e(n,i,t)}}return function(e){return e[t]}}function L(t){if(null===t)return function(){};if("function"==typeof t)return function(e,n){t(e,"set",n)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("["))){var e=function(t,i,r){var a,s,r=r.split("."),o=0;for(s=r.length-1;s>o;o++){if(a=r[o].match(U)){r[o]=r[o].replace(U,""),t[r[o]]=[],a=r.slice(),a.splice(0,o+1),s=a.join(".");for(var l=0,u=i.length;u>l;l++)a={},e(a,i[l],s),t[r[o]].push(a);return}(null===t[r[o]]||t[r[o]]===n)&&(t[r[o]]={}),t=t[r[o]]}t[r[r.length-1].replace(U,"")]=i};return function(n,i){return e(n,i,t)}}return function(e,n){e[t]=n}}function Z(t){for(var e=[],n=t.aoData.length,i=0;n>i;i++)e.push(t.aoData[i]._aData);return e}function ga(t){t.aoData.splice(0,t.aoData.length),t.aiDisplayMaster.splice(0,t.aiDisplayMaster.length),t.aiDisplay.splice(0,t.aiDisplay.length),y(t)}function ha(t,e){for(var n=-1,i=0,r=t.length;r>i;i++)t[i]==e?n=i:t[i]>e&&t[i]--;-1!=n&&t.splice(n,1)}function S(t,e,n){var i=t.aoColumns[n];return i.fnRender({iDataRow:e,iDataColumn:n,oSettings:t,aData:t.aoData[e]._aData,mDataProp:i.mData},v(t,e,n,"display"))}function ea(t,e){var n,i=t.aoData[e];if(null===i.nTr){i.nTr=l.createElement("tr"),i.nTr._DT_RowIndex=e,i._aData.DT_RowId&&(i.nTr.id=i._aData.DT_RowId),i._aData.DT_RowClass&&(i.nTr.className=i._aData.DT_RowClass);for(var r=0,a=t.aoColumns.length;a>r;r++){var s=t.aoColumns[r];n=l.createElement(s.sCellType),n.innerHTML="function"!=typeof s.fnRender||s.bUseRendered&&null!==s.mData?v(t,e,r,"display"):S(t,e,r),null!==s.sClass&&(n.className=s.sClass),s.bVisible?(i.nTr.appendChild(n),i._anHidden[r]=null):i._anHidden[r]=n,s.fnCreatedCell&&s.fnCreatedCell.call(t.oInstance,n,v(t,e,r,"display"),i._aData,e,r)}A(t,"aoRowCreatedCallback",null,[i.nTr,i._aData,e])}}function va(t){var e,n,i;if(0!==h("th, td",t.nTHead).length)for(e=0,i=t.aoColumns.length;i>e;e++)n=t.aoColumns[e].nTh,n.setAttribute("role","columnheader"),t.aoColumns[e].bSortable&&(n.setAttribute("tabindex",t.iTabIndex),n.setAttribute("aria-controls",t.sTableId)),null!==t.aoColumns[e].sClass&&h(n).addClass(t.aoColumns[e].sClass),t.aoColumns[e].sTitle!=n.innerHTML&&(n.innerHTML=t.aoColumns[e].sTitle);else{var r=l.createElement("tr");for(e=0,i=t.aoColumns.length;i>e;e++)n=t.aoColumns[e].nTh,n.innerHTML=t.aoColumns[e].sTitle,n.setAttribute("tabindex","0"),null!==t.aoColumns[e].sClass&&h(n).addClass(t.aoColumns[e].sClass),r.appendChild(n);h(t.nTHead).html("")[0].appendChild(r),V(t.aoHeader,t.nTHead)}if(h(t.nTHead).children("tr").attr("role","row"),t.bJUI)for(e=0,i=t.aoColumns.length;i>e;e++){n=t.aoColumns[e].nTh,r=l.createElement("div"),r.className=t.oClasses.sSortJUIWrapper,h(n).contents().appendTo(r);var a=l.createElement("span");a.className=t.oClasses.sSortIcon,r.appendChild(a),n.appendChild(r)}if(t.oFeatures.bSort)for(e=0;e<t.aoColumns.length;e++)!1!==t.aoColumns[e].bSortable?ia(t,t.aoColumns[e].nTh,e):h(t.aoColumns[e].nTh).addClass(t.oClasses.sSortableNone);if(""!==t.oClasses.sFooterTH&&h(t.nTFoot).children("tr").children("th").addClass(t.oClasses.sFooterTH),null!==t.nTFoot)for(n=N(t,null,t.aoFooter),e=0,i=t.aoColumns.length;i>e;e++)n[e]&&(t.aoColumns[e].nTf=n[e],t.aoColumns[e].sClass&&h(n[e]).addClass(t.aoColumns[e].sClass))}function W(t,e,i){var r,a,s,o,l=[],u=[],c=t.aoColumns.length;for(i===n&&(i=!1),r=0,a=e.length;a>r;r++){for(l[r]=e[r].slice(),l[r].nTr=e[r].nTr,s=c-1;s>=0;s--)!t.aoColumns[s].bVisible&&!i&&l[r].splice(s,1);u.push([])}for(r=0,a=l.length;a>r;r++){if(t=l[r].nTr)for(;s=t.firstChild;)t.removeChild(s);for(s=0,e=l[r].length;e>s;s++)if(o=c=1,u[r][s]===n){for(t.appendChild(l[r][s].cell),u[r][s]=1;l[r+c]!==n&&l[r][s].cell==l[r+c][s].cell;)u[r+c][s]=1,c++;for(;l[r][s+o]!==n&&l[r][s].cell==l[r][s+o].cell;){for(i=0;c>i;i++)u[r+i][s+o]=1;o++}l[r][s].cell.rowSpan=c,l[r][s].cell.colSpan=o}}}function x(e){var i=A(e,"aoPreDrawCallback","preDraw",[e]);if(-1!==h.inArray(!1,i))E(e,!1);else{var r,a,i=[],s=0,o=e.asStripeClasses.length;if(r=e.aoOpenRows.length,e.bDrawing=!0,e.iInitDisplayStart!==n&&-1!=e.iInitDisplayStart&&(e._iDisplayStart=e.oFeatures.bServerSide?e.iInitDisplayStart:e.iInitDisplayStart>=e.fnRecordsDisplay()?0:e.iInitDisplayStart,e.iInitDisplayStart=-1,y(e)),e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++;else if(e.oFeatures.bServerSide){if(!e.bDestroying&&!wa(e))return}else e.iDraw++;if(0!==e.aiDisplay.length){var u=e._iDisplayStart;for(a=e._iDisplayEnd,e.oFeatures.bServerSide&&(u=0,a=e.aoData.length);a>u;u++){var c=e.aoData[e.aiDisplay[u]];null===c.nTr&&ea(e,e.aiDisplay[u]);var d=c.nTr;if(0!==o){var f=e.asStripeClasses[s%o];c._sRowStripe!=f&&(h(d).removeClass(c._sRowStripe).addClass(f),c._sRowStripe=f)}if(A(e,"aoRowCallback",null,[d,e.aoData[e.aiDisplay[u]]._aData,s,u]),i.push(d),s++,0!==r)for(c=0;r>c;c++)if(d==e.aoOpenRows[c].nParent){i.push(e.aoOpenRows[c].nTr);break}}}else i[0]=l.createElement("tr"),e.asStripeClasses[0]&&(i[0].className=e.asStripeClasses[0]),r=e.oLanguage,o=r.sZeroRecords,1!=e.iDraw||null===e.sAjaxSource||e.oFeatures.bServerSide?r.sEmptyTable&&0===e.fnRecordsTotal()&&(o=r.sEmptyTable):o=r.sLoadingRecords,r=l.createElement("td"),r.setAttribute("valign","top"),r.colSpan=t(e),r.className=e.oClasses.sRowEmpty,r.innerHTML=ja(e,o),i[s].appendChild(r);if(A(e,"aoHeaderCallback","header",[h(e.nTHead).children("tr")[0],Z(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]),A(e,"aoFooterCallback","footer",[h(e.nTFoot).children("tr")[0],Z(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]),s=l.createDocumentFragment(),r=l.createDocumentFragment(),e.nTBody){if(o=e.nTBody.parentNode,r.appendChild(e.nTBody),!e.oScroll.bInfinite||!e._bInitComplete||e.bSorted||e.bFiltered)for(;r=e.nTBody.firstChild;)e.nTBody.removeChild(r);for(r=0,a=i.length;a>r;r++)s.appendChild(i[r]);e.nTBody.appendChild(s),null!==o&&o.appendChild(e.nTBody)}A(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1,e.oFeatures.bServerSide&&(E(e,!1),e._bInitComplete||$(e))}}function aa(t){t.oFeatures.bSort?O(t,t.oPreviousSearch):t.oFeatures.bFilter?K(t,t.oPreviousSearch):(y(t),x(t))}function xa(t){var e=h("<div></div>")[0];t.nTable.parentNode.insertBefore(e,t.nTable),t.nTableWrapper=h('<div id="'+t.sTableId+'_wrapper" class="'+t.oClasses.sWrapper+'" role="grid"></div>')[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var n,i,r,a,s,o,l,u=t.nTableWrapper,c=t.sDom.split(""),d=0;d<c.length;d++){if(i=0,r=c[d],"<"==r){if(a=h("<div></div>")[0],s=c[d+1],"'"==s||'"'==s){for(o="",l=2;c[d+l]!=s;)o+=c[d+l],l++;"H"==o?o=t.oClasses.sJUIHeader:"F"==o&&(o=t.oClasses.sJUIFooter),-1!=o.indexOf(".")?(s=o.split("."),a.id=s[0].substr(1,s[0].length-1),a.className=s[1]):"#"==o.charAt(0)?a.id=o.substr(1,o.length-1):a.className=o,d+=l}u.appendChild(a),u=a}else if(">"==r)u=u.parentNode;else if("l"==r&&t.oFeatures.bPaginate&&t.oFeatures.bLengthChange)n=ya(t),i=1;else if("f"==r&&t.oFeatures.bFilter)n=za(t),i=1;else if("r"==r&&t.oFeatures.bProcessing)n=Aa(t),i=1;else if("t"==r)n=Ba(t),i=1;else if("i"==r&&t.oFeatures.bInfo)n=Ca(t),i=1;else if("p"==r&&t.oFeatures.bPaginate)n=Da(t),i=1;else if(0!==j.ext.aoFeatures.length)for(a=j.ext.aoFeatures,l=0,s=a.length;s>l;l++)if(r==a[l].cFeature){(n=a[l].fnInit(t))&&(i=1);break}1==i&&null!==n&&("object"!=typeof t.aanFeatures[r]&&(t.aanFeatures[r]=[]),t.aanFeatures[r].push(n),u.appendChild(n))}e.parentNode.replaceChild(t.nTableWrapper,e)}function V(t,e){var n,i,r,a,s,o,l,u,c,d,f=h(e).children("tr");for(t.splice(0,t.length),r=0,o=f.length;o>r;r++)t.push([]);for(r=0,o=f.length;o>r;r++)for(n=f[r],i=n.firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase()){for(u=1*i.getAttribute("colspan"),c=1*i.getAttribute("rowspan"),u=u&&0!==u&&1!==u?u:1,c=c&&0!==c&&1!==c?c:1,a=0,s=t[r];s[a];)a++;for(l=a,d=1===u?!0:!1,s=0;u>s;s++)for(a=0;c>a;a++)t[r+a][l+s]={cell:i,unique:d},t[r+a].nTr=n}i=i.nextSibling}}function N(t,e,n){var i=[];n||(n=t.aoHeader,e&&(n=[],V(n,e)));for(var e=0,r=n.length;r>e;e++)for(var a=0,s=n[e].length;s>a;a++)!n[e][a].unique||i[a]&&t.bSortCellsTop||(i[a]=n[e][a].cell);return i}function wa(t){if(t.bAjaxDataGet){t.iDraw++,E(t,!0);var e=Ea(t);return ka(t,e),t.fnServerData.call(t.oInstance,t.sAjaxSource,e,function(e){Fa(t,e)},t),!1}return!0}function Ea(t){var e,n,i,r,a=t.aoColumns.length,s=[];for(s.push({name:"sEcho",value:t.iDraw}),s.push({name:"iColumns",value:a}),s.push({name:"sColumns",value:M(t)}),s.push({name:"iDisplayStart",value:t._iDisplayStart}),s.push({name:"iDisplayLength",value:!1!==t.oFeatures.bPaginate?t._iDisplayLength:-1}),i=0;a>i;i++)e=t.aoColumns[i].mData,s.push({name:"mDataProp_"+i,value:"function"==typeof e?"function":e});if(!1!==t.oFeatures.bFilter)for(s.push({name:"sSearch",value:t.oPreviousSearch.sSearch}),s.push({name:"bRegex",value:t.oPreviousSearch.bRegex}),i=0;a>i;i++)s.push({name:"sSearch_"+i,value:t.aoPreSearchCols[i].sSearch}),s.push({name:"bRegex_"+i,value:t.aoPreSearchCols[i].bRegex}),s.push({name:"bSearchable_"+i,value:t.aoColumns[i].bSearchable});if(!1!==t.oFeatures.bSort){var o=0;for(e=null!==t.aaSortingFixed?t.aaSortingFixed.concat(t.aaSorting):t.aaSorting.slice(),i=0;i<e.length;i++)for(n=t.aoColumns[e[i][0]].aDataSort,r=0;r<n.length;r++)s.push({name:"iSortCol_"+o,value:n[r]}),s.push({name:"sSortDir_"+o,value:e[i][1]}),o++;for(s.push({name:"iSortingCols",value:o}),i=0;a>i;i++)s.push({name:"bSortable_"+i,value:t.aoColumns[i].bSortable})}return s}function ka(t,e){A(t,"aoServerParams","serverParams",[e])}function Fa(t,e){if(e.sEcho!==n){if(1*e.sEcho<t.iDraw)return;t.iDraw=1*e.sEcho}(!t.oScroll.bInfinite||t.oScroll.bInfinite&&(t.bSorted||t.bFiltered))&&ga(t),t._iRecordsTotal=parseInt(e.iTotalRecords,10),t._iRecordsDisplay=parseInt(e.iTotalDisplayRecords,10);var i,r=M(t),r=e.sColumns!==n&&""!==r&&e.sColumns!=r;r&&(i=u(t,e.sColumns));for(var a=Q(t.sAjaxDataProp)(e),s=0,o=a.length;o>s;s++)if(r){for(var l=[],c=0,h=t.aoColumns.length;h>c;c++)l.push(a[s][i[c]]);H(t,l)}else H(t,a[s]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,x(t),t.bAjaxDataGet=!0,E(t,!1)}function za(t){var e=t.oPreviousSearch,n=t.oLanguage.sSearch,n=-1!==n.indexOf("_INPUT_")?n.replace("_INPUT_",'<input type="text" />'):""===n?'<input type="text" />':n+' <input type="text" />',i=l.createElement("div");return i.className=t.oClasses.sFilter,i.innerHTML="<label>"+n+"</label>",t.aanFeatures.f||(i.id=t.sTableId+"_filter"),n=h('input[type="text"]',i),i._DT_Input=n[0],n.val(e.sSearch.replace('"',"&quot;")),n.bind("keyup.DT",function(){for(var n=t.aanFeatures.f,i=""===this.value?"":this.value,r=0,a=n.length;a>r;r++)n[r]!=h(this).parents("div.dataTables_filter")[0]&&h(n[r]._DT_Input).val(i);i!=e.sSearch&&K(t,{sSearch:i,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive})}),n.attr("aria-controls",t.sTableId).bind("keypress.DT",function(t){return 13==t.keyCode?!1:void 0}),i}function K(t,e,n){var i=t.oPreviousSearch,r=t.aoPreSearchCols,a=function(t){i.sSearch=t.sSearch,i.bRegex=t.bRegex,i.bSmart=t.bSmart,i.bCaseInsensitive=t.bCaseInsensitive};if(t.oFeatures.bServerSide)a(e);else{for(Ga(t,e.sSearch,n,e.bRegex,e.bSmart,e.bCaseInsensitive),a(e),e=0;e<t.aoPreSearchCols.length;e++)Ha(t,r[e].sSearch,e,r[e].bRegex,r[e].bSmart,r[e].bCaseInsensitive);Ia(t)}t.bFiltered=!0,h(t.oInstance).trigger("filter",t),t._iDisplayStart=0,y(t),x(t),la(t,0)}function Ia(t){for(var e=j.ext.afnFiltering,n=r(t,"bSearchable"),i=0,a=e.length;a>i;i++)for(var s=0,o=0,l=t.aiDisplay.length;l>o;o++){var u=t.aiDisplay[o-s];e[i](t,Y(t,u,"filter",n),u)||(t.aiDisplay.splice(o-s,1),s++)}}function Ha(t,e,n,i,r,a){if(""!==e)for(var s=0,e=ma(e,i,r,a),i=t.aiDisplay.length-1;i>=0;i--)r=Ja(v(t,t.aiDisplay[i],n,"filter"),t.aoColumns[n].sType),e.test(r)||(t.aiDisplay.splice(i,1),s++)}function Ga(t,e,n,i,r,a){if(i=ma(e,i,r,a),r=t.oPreviousSearch,n||(n=0),0!==j.ext.afnFiltering.length&&(n=1),0>=e.length)t.aiDisplay.splice(0,t.aiDisplay.length),t.aiDisplay=t.aiDisplayMaster.slice();else if(t.aiDisplay.length==t.aiDisplayMaster.length||r.sSearch.length>e.length||1==n||0!==e.indexOf(r.sSearch))for(t.aiDisplay.splice(0,t.aiDisplay.length),la(t,1),e=0;e<t.aiDisplayMaster.length;e++)i.test(t.asDataSearch[e])&&t.aiDisplay.push(t.aiDisplayMaster[e]);else for(e=n=0;e<t.asDataSearch.length;e++)i.test(t.asDataSearch[e])||(t.aiDisplay.splice(e-n,1),n++)}function la(t,e){if(!t.oFeatures.bServerSide){t.asDataSearch=[];for(var n=r(t,"bSearchable"),i=1===e?t.aiDisplayMaster:t.aiDisplay,a=0,s=i.length;s>a;a++)t.asDataSearch[a]=na(t,Y(t,i[a],"filter",n))}}function na(t,e){var n=e.join("  ");return-1!==n.indexOf("&")&&(n=h("<div>").html(n).text()),n.replace(/[\n\r]/g," ")}function ma(t,e,n,i){return n?(t=e?t.split(" "):oa(t).split(" "),t="^(?=.*?"+t.join(")(?=.*?")+").*$",RegExp(t,i?"i":"")):(t=e?t:oa(t),RegExp(t,i?"i":""))}function Ja(t,e){return"function"==typeof j.ext.ofnSearch[e]?j.ext.ofnSearch[e](t):null===t?"":"html"==e?t.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"==typeof t?t.replace(/[\r\n]/g," "):t}function oa(t){return t.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function Ca(t){var e=l.createElement("div");return e.className=t.oClasses.sInfo,t.aanFeatures.i||(t.aoDrawCallback.push({fn:Ka,sName:"information"}),e.id=t.sTableId+"_info"),t.nTable.setAttribute("aria-describedby",t.sTableId+"_info"),e}function Ka(t){if(t.oFeatures.bInfo&&0!==t.aanFeatures.i.length){var e,n=t.oLanguage,i=t._iDisplayStart+1,r=t.fnDisplayEnd(),a=t.fnRecordsTotal(),s=t.fnRecordsDisplay();for(e=0===s?n.sInfoEmpty:n.sInfo,s!=a&&(e+=" "+n.sInfoFiltered),e+=n.sInfoPostFix,e=ja(t,e),null!==n.fnInfoCallback&&(e=n.fnInfoCallback.call(t.oInstance,t,i,r,a,s,e)),t=t.aanFeatures.i,n=0,i=t.length;i>n;n++)h(t[n]).html(e)}}function ja(t,e){var n=t.fnFormatNumber(t._iDisplayStart+1),i=t.fnDisplayEnd(),i=t.fnFormatNumber(i),r=t.fnRecordsDisplay(),r=t.fnFormatNumber(r),a=t.fnRecordsTotal(),a=t.fnFormatNumber(a);return t.oScroll.bInfinite&&(n=t.fnFormatNumber(1)),e.replace(/_START_/g,n).replace(/_END_/g,i).replace(/_TOTAL_/g,r).replace(/_MAX_/g,a)}function ba(t){var e,n,i=t.iInitDisplayStart;if(!1===t.bInitialised)setTimeout(function(){ba(t)},200);else{for(xa(t),va(t),W(t,t.aoHeader),t.nTFoot&&W(t,t.aoFooter),E(t,!0),t.oFeatures.bAutoWidth&&da(t),e=0,n=t.aoColumns.length;n>e;e++)null!==t.aoColumns[e].sWidth&&(t.aoColumns[e].nTh.style.width=q(t.aoColumns[e].sWidth));t.oFeatures.bSort?O(t):t.oFeatures.bFilter?K(t,t.oPreviousSearch):(t.aiDisplay=t.aiDisplayMaster.slice(),y(t),x(t)),null===t.sAjaxSource||t.oFeatures.bServerSide?t.oFeatures.bServerSide||(E(t,!1),$(t)):(n=[],ka(t,n),t.fnServerData.call(t.oInstance,t.sAjaxSource,n,function(n){var r=""!==t.sAjaxDataProp?Q(t.sAjaxDataProp)(n):n;for(e=0;e<r.length;e++)H(t,r[e]);t.iInitDisplayStart=i,t.oFeatures.bSort?O(t):(t.aiDisplay=t.aiDisplayMaster.slice(),y(t),x(t)),E(t,!1),$(t,n)},t))}}function $(t,e){t._bInitComplete=!0,A(t,"aoInitComplete","init",[t,e])}function pa(t){var e=j.defaults.oLanguage;!t.sEmptyTable&&t.sZeroRecords&&"No data available in table"===e.sEmptyTable&&p(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&t.sZeroRecords&&"Loading..."===e.sLoadingRecords&&p(t,t,"sZeroRecords","sLoadingRecords")}function ya(t){if(t.oScroll.bInfinite)return null;var e,n,i='<select size="1" '+('name="'+t.sTableId+'_length"')+">",r=t.aLengthMenu;if(2==r.length&&"object"==typeof r[0]&&"object"==typeof r[1])for(e=0,n=r[0].length;n>e;e++)i+='<option value="'+r[0][e]+'">'+r[1][e]+"</option>";else for(e=0,n=r.length;n>e;e++)i+='<option value="'+r[e]+'">'+r[e]+"</option>";return i+="</select>",r=l.createElement("div"),t.aanFeatures.l||(r.id=t.sTableId+"_length"),r.className=t.oClasses.sLength,r.innerHTML="<label>"+t.oLanguage.sLengthMenu.replace("_MENU_",i)+"</label>",h('select option[value="'+t._iDisplayLength+'"]',r).attr("selected",!0),h("select",r).bind("change.DT",function(){var i=h(this).val(),r=t.aanFeatures.l;for(e=0,n=r.length;n>e;e++)r[e]!=this.parentNode&&h("select",r[e]).val(i);t._iDisplayLength=parseInt(i,10),y(t),t.fnDisplayEnd()==t.fnRecordsDisplay()&&(t._iDisplayStart=t.fnDisplayEnd()-t._iDisplayLength,t._iDisplayStart<0&&(t._iDisplayStart=0)),-1==t._iDisplayLength&&(t._iDisplayStart=0),x(t)}),h("select",r).attr("aria-controls",t.sTableId),r}function y(t){t._iDisplayEnd=!1===t.oFeatures.bPaginate?t.aiDisplay.length:t._iDisplayStart+t._iDisplayLength>t.aiDisplay.length||-1==t._iDisplayLength?t.aiDisplay.length:t._iDisplayStart+t._iDisplayLength}function Da(t){if(t.oScroll.bInfinite)return null;var e=l.createElement("div");return e.className=t.oClasses.sPaging+t.sPaginationType,j.ext.oPagination[t.sPaginationType].fnInit(t,e,function(t){y(t),x(t)}),t.aanFeatures.p||t.aoDrawCallback.push({fn:function(t){j.ext.oPagination[t.sPaginationType].fnUpdate(t,function(t){y(t),x(t)})},sName:"pagination"}),e}function qa(t,e){var n=t._iDisplayStart;if("number"==typeof e)t._iDisplayStart=e*t._iDisplayLength,t._iDisplayStart>t.fnRecordsDisplay()&&(t._iDisplayStart=0);else if("first"==e)t._iDisplayStart=0;else if("previous"==e)t._iDisplayStart=0<=t._iDisplayLength?t._iDisplayStart-t._iDisplayLength:0,0>t._iDisplayStart&&(t._iDisplayStart=0);else if("next"==e)0<=t._iDisplayLength?t._iDisplayStart+t._iDisplayLength<t.fnRecordsDisplay()&&(t._iDisplayStart+=t._iDisplayLength):t._iDisplayStart=0;else if("last"==e)if(0<=t._iDisplayLength){var i=parseInt((t.fnRecordsDisplay()-1)/t._iDisplayLength,10)+1;t._iDisplayStart=(i-1)*t._iDisplayLength}else t._iDisplayStart=0;else D(t,0,"Unknown paging action: "+e);return h(t.oInstance).trigger("page",t),n!=t._iDisplayStart}function Aa(t){var e=l.createElement("div");return t.aanFeatures.r||(e.id=t.sTableId+"_processing"),e.innerHTML=t.oLanguage.sProcessing,e.className=t.oClasses.sProcessing,t.nTable.parentNode.insertBefore(e,t.nTable),e}function E(t,e){if(t.oFeatures.bProcessing)for(var n=t.aanFeatures.r,i=0,r=n.length;r>i;i++)n[i].style.visibility=e?"visible":"hidden";h(t.oInstance).trigger("processing",[t,e])}function Ba(t){if(""===t.oScroll.sX&&""===t.oScroll.sY)return t.nTable;var e=l.createElement("div"),n=l.createElement("div"),i=l.createElement("div"),r=l.createElement("div"),a=l.createElement("div"),s=l.createElement("div"),o=t.nTable.cloneNode(!1),u=t.nTable.cloneNode(!1),c=t.nTable.getElementsByTagName("thead")[0],d=0===t.nTable.getElementsByTagName("tfoot").length?null:t.nTable.getElementsByTagName("tfoot")[0],f=t.oClasses;return n.appendChild(i),a.appendChild(s),r.appendChild(t.nTable),e.appendChild(n),e.appendChild(r),i.appendChild(o),o.appendChild(c),null!==d&&(e.appendChild(a),s.appendChild(u),u.appendChild(d)),e.className=f.sScrollWrapper,n.className=f.sScrollHead,i.className=f.sScrollHeadInner,r.className=f.sScrollBody,a.className=f.sScrollFoot,s.className=f.sScrollFootInner,t.oScroll.bAutoCss&&(n.style.overflow="hidden",n.style.position="relative",a.style.overflow="hidden",r.style.overflow="auto"),n.style.border="0",n.style.width="100%",a.style.border="0",i.style.width=""!==t.oScroll.sXInner?t.oScroll.sXInner:"100%",o.removeAttribute("id"),o.style.marginLeft="0",t.nTable.style.marginLeft="0",null!==d&&(u.removeAttribute("id"),u.style.marginLeft="0"),i=h(t.nTable).children("caption"),0<i.length&&(i=i[0],"top"===i._captionSide?o.appendChild(i):"bottom"===i._captionSide&&d&&u.appendChild(i)),""!==t.oScroll.sX&&(n.style.width=q(t.oScroll.sX),r.style.width=q(t.oScroll.sX),null!==d&&(a.style.width=q(t.oScroll.sX)),h(r).scroll(function(){n.scrollLeft=this.scrollLeft,null!==d&&(a.scrollLeft=this.scrollLeft)})),""!==t.oScroll.sY&&(r.style.height=q(t.oScroll.sY)),t.aoDrawCallback.push({fn:La,sName:"scrolling"}),t.oScroll.bInfinite&&h(r).scroll(function(){!t.bDrawing&&0!==h(this).scrollTop()&&h(this).scrollTop()+h(this).height()>h(t.nTable).height()-t.oScroll.iLoadGap&&t.fnDisplayEnd()<t.fnRecordsDisplay()&&(qa(t,"next"),y(t),x(t))}),t.nScrollHead=n,t.nScrollFoot=a,e}function La(t){var e,n,i,r,a,s,o,l,u=t.nScrollHead.getElementsByTagName("div")[0],c=u.getElementsByTagName("table")[0],d=t.nTable.parentNode,f=[],p=[],g=null!==t.nTFoot?t.nScrollFoot.getElementsByTagName("div")[0]:null,m=null!==t.nTFoot?g.getElementsByTagName("table")[0]:null,v=t.oBrowser.bScrollOversize,y=function(t){o=t.style,o.paddingTop="0",o.paddingBottom="0",o.borderTopWidth="0",o.borderBottomWidth="0",o.height=0};h(t.nTable).children("thead, tfoot").remove(),e=h(t.nTHead).clone()[0],t.nTable.insertBefore(e,t.nTable.childNodes[0]),i=t.nTHead.getElementsByTagName("tr"),r=e.getElementsByTagName("tr"),null!==t.nTFoot&&(a=h(t.nTFoot).clone()[0],t.nTable.insertBefore(a,t.nTable.childNodes[1]),s=t.nTFoot.getElementsByTagName("tr"),a=a.getElementsByTagName("tr")),""===t.oScroll.sX&&(d.style.width="100%",u.parentNode.style.width="100%");var b=N(t,e);for(e=0,n=b.length;n>e;e++)l=G(t,e),b[e].style.width=t.aoColumns[l].sWidth;null!==t.nTFoot&&C(function(t){t.style.width=""},a),t.oScroll.bCollapse&&""!==t.oScroll.sY&&(d.style.height=d.offsetHeight+t.nTHead.offsetHeight+"px"),e=h(t.nTable).outerWidth(),""===t.oScroll.sX?(t.nTable.style.width="100%",v&&(h("tbody",d).height()>d.offsetHeight||"scroll"==h(d).css("overflow-y"))&&(t.nTable.style.width=q(h(t.nTable).outerWidth()-t.oScroll.iBarWidth))):""!==t.oScroll.sXInner?t.nTable.style.width=q(t.oScroll.sXInner):e==h(d).width()&&h(d).height()<h(t.nTable).height()?(t.nTable.style.width=q(e-t.oScroll.iBarWidth),h(t.nTable).outerWidth()>e-t.oScroll.iBarWidth&&(t.nTable.style.width=q(e))):t.nTable.style.width=q(e),e=h(t.nTable).outerWidth(),C(y,r),C(function(t){f.push(q(h(t).width()))},r),C(function(t,e){t.style.width=f[e]},i),h(r).height(0),null!==t.nTFoot&&(C(y,a),C(function(t){p.push(q(h(t).width()))},a),C(function(t,e){t.style.width=p[e]},s),h(a).height(0)),C(function(t,e){t.innerHTML="",t.style.width=f[e]},r),null!==t.nTFoot&&C(function(t,e){t.innerHTML="",t.style.width=p[e]},a),h(t.nTable).outerWidth()<e?(i=d.scrollHeight>d.offsetHeight||"scroll"==h(d).css("overflow-y")?e+t.oScroll.iBarWidth:e,v&&(d.scrollHeight>d.offsetHeight||"scroll"==h(d).css("overflow-y"))&&(t.nTable.style.width=q(i-t.oScroll.iBarWidth)),d.style.width=q(i),t.nScrollHead.style.width=q(i),null!==t.nTFoot&&(t.nScrollFoot.style.width=q(i)),""===t.oScroll.sX?D(t,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==t.oScroll.sXInner&&D(t,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):(d.style.width=q("100%"),t.nScrollHead.style.width=q("100%"),null!==t.nTFoot&&(t.nScrollFoot.style.width=q("100%"))),""===t.oScroll.sY&&v&&(d.style.height=q(t.nTable.offsetHeight+t.oScroll.iBarWidth)),""!==t.oScroll.sY&&t.oScroll.bCollapse&&(d.style.height=q(t.oScroll.sY),v=""!==t.oScroll.sX&&t.nTable.offsetWidth>d.offsetWidth?t.oScroll.iBarWidth:0,t.nTable.offsetHeight<d.offsetHeight&&(d.style.height=q(t.nTable.offsetHeight+v))),v=h(t.nTable).outerWidth(),c.style.width=q(v),u.style.width=q(v),c=h(t.nTable).height()>d.clientHeight||"scroll"==h(d).css("overflow-y"),u.style.paddingRight=c?t.oScroll.iBarWidth+"px":"0px",null!==t.nTFoot&&(m.style.width=q(v),g.style.width=q(v),g.style.paddingRight=c?t.oScroll.iBarWidth+"px":"0px"),h(d).scroll(),(t.bSorted||t.bFiltered)&&(d.scrollTop=0)}function C(t,e,n){for(var i,r,a=0,s=0,o=e.length;o>s;){for(i=e[s].firstChild,r=n?n[s].firstChild:null;i;)1===i.nodeType&&(n?t(i,r,a):t(i,a),a++),i=i.nextSibling,r=n?r.nextSibling:null;s++}}function Ma(t,e){if(!t||null===t||""===t)return 0;e||(e=l.body);var n,i=l.createElement("div");return i.style.width=q(t),e.appendChild(i),n=i.offsetWidth,e.removeChild(i),n}function da(t){var e,n,i,r=0,a=0,s=t.aoColumns.length,o=h("th",t.nTHead),u=t.nTable.getAttribute("width");for(i=t.nTable.parentNode,n=0;s>n;n++)t.aoColumns[n].bVisible&&(a++,null!==t.aoColumns[n].sWidth&&(e=Ma(t.aoColumns[n].sWidthOrig,i),null!==e&&(t.aoColumns[n].sWidth=q(e)),r++));if(s==o.length&&0===r&&a==s&&""===t.oScroll.sX&&""===t.oScroll.sY)for(n=0;n<t.aoColumns.length;n++)e=h(o[n]).width(),null!==e&&(t.aoColumns[n].sWidth=q(e));else{for(r=t.nTable.cloneNode(!1),n=t.nTHead.cloneNode(!0),a=l.createElement("tbody"),e=l.createElement("tr"),r.removeAttribute("id"),r.appendChild(n),null!==t.nTFoot&&(r.appendChild(t.nTFoot.cloneNode(!0)),C(function(t){t.style.width=""},r.getElementsByTagName("tr"))),r.appendChild(a),a.appendChild(e),a=h("thead th",r),0===a.length&&(a=h("tbody tr:eq(0)>td",r)),o=N(t,n),n=a=0;s>n;n++){var c=t.aoColumns[n];c.bVisible&&null!==c.sWidthOrig&&""!==c.sWidthOrig?o[n-a].style.width=q(c.sWidthOrig):c.bVisible?o[n-a].style.width="":a++}for(n=0;s>n;n++)t.aoColumns[n].bVisible&&(a=Na(t,n),null!==a&&(a=a.cloneNode(!0),""!==t.aoColumns[n].sContentPadding&&(a.innerHTML+=t.aoColumns[n].sContentPadding),e.appendChild(a)));if(i.appendChild(r),""!==t.oScroll.sX&&""!==t.oScroll.sXInner?r.style.width=q(t.oScroll.sXInner):""!==t.oScroll.sX?(r.style.width="",h(r).width()<i.offsetWidth&&(r.style.width=q(i.offsetWidth))):""!==t.oScroll.sY?r.style.width=q(i.offsetWidth):u&&(r.style.width=q(u)),r.style.visibility="hidden",Oa(t,r),s=h("tbody tr:eq(0)",r).children(),0===s.length&&(s=N(t,h("thead",r)[0])),""!==t.oScroll.sX){for(n=a=i=0;n<t.aoColumns.length;n++)t.aoColumns[n].bVisible&&(i=null===t.aoColumns[n].sWidthOrig?i+h(s[a]).outerWidth():i+(parseInt(t.aoColumns[n].sWidth.replace("px",""),10)+(h(s[a]).outerWidth()-h(s[a]).width())),a++);r.style.width=q(i),t.nTable.style.width=q(i)}for(n=a=0;n<t.aoColumns.length;n++)t.aoColumns[n].bVisible&&(i=h(s[a]).width(),null!==i&&i>0&&(t.aoColumns[n].sWidth=q(i)),a++);s=h(r).css("width"),t.nTable.style.width=-1!==s.indexOf("%")?s:q(h(r).outerWidth()),r.parentNode.removeChild(r)}u&&(t.nTable.style.width=q(u))}function Oa(t,e){""===t.oScroll.sX&&""!==t.oScroll.sY?(h(e).width(),e.style.width=q(h(e).outerWidth()-t.oScroll.iBarWidth)):""!==t.oScroll.sX&&(e.style.width=q(h(e).outerWidth()))}function Na(t,e){var n=Pa(t,e);if(0>n)return null;if(null===t.aoData[n].nTr){var i=l.createElement("td");return i.innerHTML=v(t,n,e,""),i}return J(t,n)[e]}function Pa(t,e){for(var n=-1,i=-1,r=0;r<t.aoData.length;r++){var a=v(t,r,e,"display")+"",a=a.replace(/<.*?>/g,"");a.length>n&&(n=a.length,i=r)}return i}function q(t){if(null===t)return"0px";if("number"==typeof t)return 0>t?"0px":t+"px";var e=t.charCodeAt(t.length-1);return 48>e||e>57?t:t+"px"}function Qa(){var t=l.createElement("p"),e=t.style;e.width="100%",e.height="200px",e.padding="0px";var n=l.createElement("div"),e=n.style;return e.position="absolute",e.top="0px",e.left="0px",e.visibility="hidden",e.width="200px",e.height="150px",e.padding="0px",e.overflow="hidden",n.appendChild(t),l.body.appendChild(n),e=t.offsetWidth,n.style.overflow="scroll",t=t.offsetWidth,e==t&&(t=n.clientWidth),l.body.removeChild(n),e-t}function O(t,e){var i,r,a,s,o,l,u=[],c=[],d=j.ext.oSort,f=t.aoData,p=t.aoColumns,g=t.oLanguage.oAria;if(!t.oFeatures.bServerSide&&(0!==t.aaSorting.length||null!==t.aaSortingFixed)){for(u=null!==t.aaSortingFixed?t.aaSortingFixed.concat(t.aaSorting):t.aaSorting.slice(),i=0;i<u.length;i++)if(r=u[i][0],a=R(t,r),s=t.aoColumns[r].sSortDataType,j.ext.afnSortData[s])if(o=j.ext.afnSortData[s].call(t.oInstance,t,r,a),o.length===f.length)for(a=0,s=f.length;s>a;a++)F(t,a,r,o[a]);else D(t,0,"Returned data sort array (col "+r+") is the wrong length");for(i=0,r=t.aiDisplayMaster.length;r>i;i++)c[t.aiDisplayMaster[i]]=i;var m,b=u.length;for(i=0,r=f.length;r>i;i++)for(a=0;b>a;a++)for(m=p[u[a][0]].aDataSort,o=0,l=m.length;l>o;o++)s=p[m[o]].sType,s=d[(s?s:"string")+"-pre"],f[i]._aSortData[m[o]]=s?s(v(t,i,m[o],"sort")):v(t,i,m[o],"sort");t.aiDisplayMaster.sort(function(t,e){var n,i,r,a,s;for(n=0;b>n;n++)for(s=p[u[n][0]].aDataSort,i=0,r=s.length;r>i;i++)if(a=p[s[i]].sType,a=d[(a?a:"string")+"-"+u[n][1]](f[t]._aSortData[s[i]],f[e]._aSortData[s[i]]),0!==a)return a;return d["numeric-asc"](c[t],c[e])})}for((e===n||e)&&!t.oFeatures.bDeferRender&&P(t),i=0,r=t.aoColumns.length;r>i;i++)s=p[i].sTitle.replace(/<.*?>/g,""),a=p[i].nTh,a.removeAttribute("aria-sort"),a.removeAttribute("aria-label"),p[i].bSortable?0<u.length&&u[0][0]==i?(a.setAttribute("aria-sort","asc"==u[0][1]?"ascending":"descending"),a.setAttribute("aria-label",s+("asc"==(p[i].asSorting[u[0][2]+1]?p[i].asSorting[u[0][2]+1]:p[i].asSorting[0])?g.sSortAscending:g.sSortDescending))):a.setAttribute("aria-label",s+("asc"==p[i].asSorting[0]?g.sSortAscending:g.sSortDescending)):a.setAttribute("aria-label",s);t.bSorted=!0,h(t.oInstance).trigger("sort",t),t.oFeatures.bFilter?K(t,t.oPreviousSearch,1):(t.aiDisplay=t.aiDisplayMaster.slice(),t._iDisplayStart=0,y(t),x(t))}function ia(t,e,n,i){Ra(e,{},function(e){if(!1!==t.aoColumns[n].bSortable){var r=function(){var i,r;if(e.shiftKey){for(var a=!1,s=0;s<t.aaSorting.length;s++)if(t.aaSorting[s][0]==n){a=!0,i=t.aaSorting[s][0],r=t.aaSorting[s][2]+1,t.aoColumns[i].asSorting[r]?(t.aaSorting[s][1]=t.aoColumns[i].asSorting[r],t.aaSorting[s][2]=r):t.aaSorting.splice(s,1);break}!1===a&&t.aaSorting.push([n,t.aoColumns[n].asSorting[0],0])}else 1==t.aaSorting.length&&t.aaSorting[0][0]==n?(i=t.aaSorting[0][0],r=t.aaSorting[0][2]+1,t.aoColumns[i].asSorting[r]||(r=0),t.aaSorting[0][1]=t.aoColumns[i].asSorting[r],t.aaSorting[0][2]=r):(t.aaSorting.splice(0,t.aaSorting.length),t.aaSorting.push([n,t.aoColumns[n].asSorting[0],0]));O(t)};t.oFeatures.bProcessing?(E(t,!0),setTimeout(function(){r(),t.oFeatures.bServerSide||E(t,!1)},0)):r(),"function"==typeof i&&i(t)}})}function P(t){var e,n,i,r,a,s=t.aoColumns.length,o=t.oClasses;for(e=0;s>e;e++)t.aoColumns[e].bSortable&&h(t.aoColumns[e].nTh).removeClass(o.sSortAsc+" "+o.sSortDesc+" "+t.aoColumns[e].sSortingClass);for(n=null!==t.aaSortingFixed?t.aaSortingFixed.concat(t.aaSorting):t.aaSorting.slice(),e=0;e<t.aoColumns.length;e++)if(t.aoColumns[e].bSortable){for(a=t.aoColumns[e].sSortingClass,r=-1,i=0;i<n.length;i++)if(n[i][0]==e){a="asc"==n[i][1]?o.sSortAsc:o.sSortDesc,r=i;
break}h(t.aoColumns[e].nTh).addClass(a),t.bJUI&&(a=h("span."+o.sSortIcon,t.aoColumns[e].nTh),a.removeClass(o.sSortJUIAsc+" "+o.sSortJUIDesc+" "+o.sSortJUI+" "+o.sSortJUIAscAllowed+" "+o.sSortJUIDescAllowed),a.addClass(-1==r?t.aoColumns[e].sSortingClassJUI:"asc"==n[r][1]?o.sSortJUIAsc:o.sSortJUIDesc))}else h(t.aoColumns[e].nTh).addClass(t.aoColumns[e].sSortingClass);if(a=o.sSortColumn,t.oFeatures.bSort&&t.oFeatures.bSortClasses){for(t=J(t),r=[],e=0;s>e;e++)r.push("");for(e=0,i=1;e<n.length;e++)o=parseInt(n[e][0],10),r[o]=a+i,3>i&&i++;a=RegExp(a+"[123]");var l;for(e=0,n=t.length;n>e;e++)o=e%s,i=t[e].className,l=r[o],o=i.replace(a,l),o!=i?t[e].className=h.trim(o):0<l.length&&-1==i.indexOf(l)&&(t[e].className=i+" "+l)}}function ra(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var e,n;e=t.oScroll.bInfinite;var i={iCreate:(new Date).getTime(),iStart:e?0:t._iDisplayStart,iEnd:e?t._iDisplayLength:t._iDisplayEnd,iLength:t._iDisplayLength,aaSorting:h.extend(!0,[],t.aaSorting),oSearch:h.extend(!0,{},t.oPreviousSearch),aoSearchCols:h.extend(!0,[],t.aoPreSearchCols),abVisCols:[]};for(e=0,n=t.aoColumns.length;n>e;e++)i.abVisCols.push(t.aoColumns[e].bVisible);A(t,"aoStateSaveParams","stateSaveParams",[t,i]),t.fnStateSave.call(t.oInstance,t,i)}}function Sa(t,e){if(t.oFeatures.bStateSave){var n=t.fnStateLoad.call(t.oInstance,t);if(n){var i=A(t,"aoStateLoadParams","stateLoadParams",[t,n]);if(-1===h.inArray(!1,i)){for(t.oLoadedState=h.extend(!0,{},n),t._iDisplayStart=n.iStart,t.iInitDisplayStart=n.iStart,t._iDisplayEnd=n.iEnd,t._iDisplayLength=n.iLength,t.aaSorting=n.aaSorting.slice(),t.saved_aaSorting=n.aaSorting.slice(),h.extend(t.oPreviousSearch,n.oSearch),h.extend(!0,t.aoPreSearchCols,n.aoSearchCols),e.saved_aoColumns=[],i=0;i<n.abVisCols.length;i++)e.saved_aoColumns[i]={},e.saved_aoColumns[i].bVisible=n.abVisCols[i];A(t,"aoStateLoaded","stateLoaded",[t,n])}}}}function s(t){for(var e=0;e<j.settings.length;e++)if(j.settings[e].nTable===t)return j.settings[e];return null}function T(t){for(var e=[],t=t.aoData,n=0,i=t.length;i>n;n++)null!==t[n].nTr&&e.push(t[n].nTr);return e}function J(t,e){var i,r,a,s,o,l,u=[];r=0;var c=t.aoData.length;for(e!==n&&(r=e,c=e+1),a=r;c>a;a++)if(l=t.aoData[a],null!==l.nTr){for(r=[],i=l.nTr.firstChild;i;)s=i.nodeName.toLowerCase(),("td"==s||"th"==s)&&r.push(i),i=i.nextSibling;for(s=i=0,o=t.aoColumns.length;o>s;s++)t.aoColumns[s].bVisible?u.push(r[s-i]):(u.push(l._anHidden[s]),i++)}return u}function D(t,e,n){if(t=null===t?"DataTables warning: "+n:"DataTables warning (table id = '"+t.sTableId+"'): "+n,0===e){if("alert"!=j.ext.sErrMode)throw Error(t);alert(t)}else X.console&&console.log&&console.log(t)}function p(t,e,i,r){r===n&&(r=i),e[i]!==n&&(t[r]=e[i])}function Ta(t,n){var i,r;for(r in n)n.hasOwnProperty(r)&&(i=n[r],"object"==typeof e[r]&&null!==i&&!1===h.isArray(i)?h.extend(!0,t[r],i):t[r]=i);return t}function Ra(t,e,n){h(t).bind("click.DT",e,function(e){t.blur(),n(e)}).bind("keypress.DT",e,function(t){13===t.which&&n(t)}).bind("selectstart.DT",function(){return!1})}function z(t,e,n,i){n&&t[e].push({fn:n,sName:i})}function A(t,e,n,i){for(var e=t[e],r=[],a=e.length-1;a>=0;a--)r.push(e[a].fn.apply(t.oInstance,i));return null!==n&&h(t.oInstance).trigger(n,i),r}function Ua(t){var e=h('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];l.body.appendChild(e),t.oBrowser.bScrollOversize=100===h("#DT_BrowserTest",e)[0].offsetWidth?!0:!1,l.body.removeChild(e)}function Va(t){return function(){var e=[s(this[j.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return j.ext.oApi[t].apply(this,e)}}var U=/\[.*?\]$/,Wa=X.JSON?JSON.stringify:function(t){var e=typeof t;if("object"!==e||null===t)return"string"===e&&(t='"'+t+'"'),t+"";var n,i,r=[],a=h.isArray(t);for(n in t)i=t[n],e=typeof i,"string"===e?i='"'+i+'"':"object"===e&&null!==i&&(i=Wa(i)),r.push((a?"":'"'+n+'":')+i);return(a?"[":"{")+r+(a?"]":"}")};this.$=function(t,e){var n,i,r,a=[];i=s(this[j.ext.iApiIndex]);var o=i.aoData,l=i.aiDisplay,u=i.aiDisplayMaster;if(e||(e={}),e=h.extend({},{filter:"none",order:"current",page:"all"},e),"current"==e.page)for(n=i._iDisplayStart,i=i.fnDisplayEnd();i>n;n++)(r=o[l[n]].nTr)&&a.push(r);else if("current"==e.order&&"none"==e.filter)for(n=0,i=u.length;i>n;n++)(r=o[u[n]].nTr)&&a.push(r);else if("current"==e.order&&"applied"==e.filter)for(n=0,i=l.length;i>n;n++)(r=o[l[n]].nTr)&&a.push(r);else if("original"==e.order&&"none"==e.filter)for(n=0,i=o.length;i>n;n++)(r=o[n].nTr)&&a.push(r);else if("original"==e.order&&"applied"==e.filter)for(n=0,i=o.length;i>n;n++)r=o[n].nTr,-1!==h.inArray(n,l)&&r&&a.push(r);else D(i,1,"Unknown selection options");return a=h(a),n=a.filter(t),a=a.find(t),h([].concat(h.makeArray(n),h.makeArray(a)))},this._=function(t,e){var n,i,r=[],a=this.$(t,e);for(n=0,i=a.length;i>n;n++)r.push(this.fnGetData(a[n]));return r},this.fnAddData=function(t,e){if(0===t.length)return[];var i,r=[],a=s(this[j.ext.iApiIndex]);if("object"==typeof t[0]&&null!==t[0])for(var o=0;o<t.length;o++){if(i=H(a,t[o]),-1==i)return r;r.push(i)}else{if(i=H(a,t),-1==i)return r;r.push(i)}return a.aiDisplay=a.aiDisplayMaster.slice(),(e===n||e)&&aa(a),r},this.fnAdjustColumnSizing=function(t){var e=s(this[j.ext.iApiIndex]);k(e),t===n||t?this.fnDraw(!1):(""!==e.oScroll.sX||""!==e.oScroll.sY)&&this.oApi._fnScrollDraw(e)},this.fnClearTable=function(t){var e=s(this[j.ext.iApiIndex]);ga(e),(t===n||t)&&x(e)},this.fnClose=function(t){for(var e=s(this[j.ext.iApiIndex]),n=0;n<e.aoOpenRows.length;n++)if(e.aoOpenRows[n].nParent==t)return(t=e.aoOpenRows[n].nTr.parentNode)&&t.removeChild(e.aoOpenRows[n].nTr),e.aoOpenRows.splice(n,1),0;return 1},this.fnDeleteRow=function(t,e,i){var r,a,o=s(this[j.ext.iApiIndex]),t="object"==typeof t?I(o,t):t,l=o.aoData.splice(t,1);for(r=0,a=o.aoData.length;a>r;r++)null!==o.aoData[r].nTr&&(o.aoData[r].nTr._DT_RowIndex=r);return r=h.inArray(t,o.aiDisplay),o.asDataSearch.splice(r,1),ha(o.aiDisplayMaster,t),ha(o.aiDisplay,t),"function"==typeof e&&e.call(this,o,l),o._iDisplayStart>=o.fnRecordsDisplay()&&(o._iDisplayStart-=o._iDisplayLength,0>o._iDisplayStart&&(o._iDisplayStart=0)),(i===n||i)&&(y(o),x(o)),l},this.fnDestroy=function(t){var i,r,a=s(this[j.ext.iApiIndex]),o=a.nTableWrapper.parentNode,l=a.nTBody,t=t===n?!1:t;if(a.bDestroying=!0,A(a,"aoDestroyCallback","destroy",[a]),!t)for(i=0,r=a.aoColumns.length;r>i;i++)!1===a.aoColumns[i].bVisible&&this.fnSetColumnVis(i,!0);for(h(a.nTableWrapper).find("*").andSelf().unbind(".DT"),h("tbody>tr>td."+a.oClasses.sRowEmpty,a.nTable).parent().remove(),a.nTable!=a.nTHead.parentNode&&(h(a.nTable).children("thead").remove(),a.nTable.appendChild(a.nTHead)),a.nTFoot&&a.nTable!=a.nTFoot.parentNode&&(h(a.nTable).children("tfoot").remove(),a.nTable.appendChild(a.nTFoot)),a.nTable.parentNode.removeChild(a.nTable),h(a.nTableWrapper).remove(),a.aaSorting=[],a.aaSortingFixed=[],P(a),h(T(a)).removeClass(a.asStripeClasses.join(" ")),h("th, td",a.nTHead).removeClass([a.oClasses.sSortable,a.oClasses.sSortableAsc,a.oClasses.sSortableDesc,a.oClasses.sSortableNone].join(" ")),a.bJUI&&(h("th span."+a.oClasses.sSortIcon+", td span."+a.oClasses.sSortIcon,a.nTHead).remove(),h("th, td",a.nTHead).each(function(){var t=h("div."+a.oClasses.sSortJUIWrapper,this),e=t.contents();h(this).append(e),t.remove()})),!t&&a.nTableReinsertBefore?o.insertBefore(a.nTable,a.nTableReinsertBefore):t||o.appendChild(a.nTable),i=0,r=a.aoData.length;r>i;i++)null!==a.aoData[i].nTr&&l.appendChild(a.aoData[i].nTr);if(!0===a.oFeatures.bAutoWidth&&(a.nTable.style.width=q(a.sDestroyWidth)),r=a.asDestroyStripes.length)for(t=h(l).children("tr"),i=0;r>i;i++)t.filter(":nth-child("+r+"n + "+i+")").addClass(a.asDestroyStripes[i]);for(i=0,r=j.settings.length;r>i;i++)j.settings[i]==a&&j.settings.splice(i,1);e=a=null},this.fnDraw=function(t){var e=s(this[j.ext.iApiIndex]);!1===t?(y(e),x(e)):aa(e)},this.fnFilter=function(t,e,i,r,a,o){var u=s(this[j.ext.iApiIndex]);if(u.oFeatures.bFilter)if((i===n||null===i)&&(i=!1),(r===n||null===r)&&(r=!0),(a===n||null===a)&&(a=!0),(o===n||null===o)&&(o=!0),e===n||null===e){if(K(u,{sSearch:t+"",bRegex:i,bSmart:r,bCaseInsensitive:o},1),a&&u.aanFeatures.f)for(e=u.aanFeatures.f,i=0,r=e.length;r>i;i++)try{e[i]._DT_Input!=l.activeElement&&h(e[i]._DT_Input).val(t)}catch(c){h(e[i]._DT_Input).val(t)}}else h.extend(u.aoPreSearchCols[e],{sSearch:t+"",bRegex:i,bSmart:r,bCaseInsensitive:o}),K(u,u.oPreviousSearch,1)},this.fnGetData=function(t,e){var i=s(this[j.ext.iApiIndex]);if(t!==n){var r=t;if("object"==typeof t){var a=t.nodeName.toLowerCase();"tr"===a?r=I(i,t):"td"===a&&(r=I(i,t.parentNode),e=fa(i,r,t))}return e!==n?v(i,r,e,""):i.aoData[r]!==n?i.aoData[r]._aData:null}return Z(i)},this.fnGetNodes=function(t){var e=s(this[j.ext.iApiIndex]);return t!==n?e.aoData[t]!==n?e.aoData[t].nTr:null:T(e)},this.fnGetPosition=function(t){var e=s(this[j.ext.iApiIndex]),n=t.nodeName.toUpperCase();return"TR"==n?I(e,t):"TD"==n||"TH"==n?(n=I(e,t.parentNode),t=fa(e,n,t),[n,R(e,t),t]):null},this.fnIsOpen=function(t){for(var e=s(this[j.ext.iApiIndex]),n=0;n<e.aoOpenRows.length;n++)if(e.aoOpenRows[n].nParent==t)return!0;return!1},this.fnOpen=function(e,n,i){var r=s(this[j.ext.iApiIndex]),a=T(r);if(-1!==h.inArray(e,a)){this.fnClose(e);var a=l.createElement("tr"),o=l.createElement("td");return a.appendChild(o),o.className=i,o.colSpan=t(r),"string"==typeof n?o.innerHTML=n:h(o).html(n),n=h("tr",r.nTBody),-1!=h.inArray(e,n)&&h(a).insertAfter(e),r.aoOpenRows.push({nTr:a,nParent:e}),a}},this.fnPageChange=function(t,e){var i=s(this[j.ext.iApiIndex]);qa(i,t),y(i),(e===n||e)&&x(i)},this.fnSetColumnVis=function(e,i,r){var a,o,l,u,c=s(this[j.ext.iApiIndex]),h=c.aoColumns,d=c.aoData;if(h[e].bVisible!=i){if(i){for(a=o=0;e>a;a++)h[a].bVisible&&o++;if(u=o>=t(c),!u)for(a=e;a<h.length;a++)if(h[a].bVisible){l=a;break}for(a=0,o=d.length;o>a;a++)null!==d[a].nTr&&(u?d[a].nTr.appendChild(d[a]._anHidden[e]):d[a].nTr.insertBefore(d[a]._anHidden[e],J(c,a)[l]))}else for(a=0,o=d.length;o>a;a++)null!==d[a].nTr&&(l=J(c,a)[e],d[a]._anHidden[e]=l,l.parentNode.removeChild(l));for(h[e].bVisible=i,W(c,c.aoHeader),c.nTFoot&&W(c,c.aoFooter),a=0,o=c.aoOpenRows.length;o>a;a++)c.aoOpenRows[a].nTr.colSpan=t(c);(r===n||r)&&(k(c),x(c)),ra(c)}},this.fnSettings=function(){return s(this[j.ext.iApiIndex])},this.fnSort=function(t){var e=s(this[j.ext.iApiIndex]);e.aaSorting=t,O(e)},this.fnSortListener=function(t,e,n){ia(s(this[j.ext.iApiIndex]),t,e,n)},this.fnUpdate=function(t,e,i,a,o){var l=s(this[j.ext.iApiIndex]),e="object"==typeof e?I(l,e):e;if(h.isArray(t)&&i===n)for(l.aoData[e]._aData=t.slice(),i=0;i<l.aoColumns.length;i++)this.fnUpdate(v(l,e,i),e,i,!1,!1);else if(h.isPlainObject(t)&&i===n)for(l.aoData[e]._aData=h.extend(!0,{},t),i=0;i<l.aoColumns.length;i++)this.fnUpdate(v(l,e,i),e,i,!1,!1);else{F(l,e,i,t);var t=v(l,e,i,"display"),u=l.aoColumns[i];null!==u.fnRender&&(t=S(l,e,i),u.bUseRendered&&F(l,e,i,t)),null!==l.aoData[e].nTr&&(J(l,e)[i].innerHTML=t)}return i=h.inArray(e,l.aiDisplay),l.asDataSearch[i]=na(l,Y(l,e,"filter",r(l,"bSearchable"))),(o===n||o)&&k(l),(a===n||a)&&aa(l),0},this.fnVersionCheck=j.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:Va,_fnInitialise:ba,_fnInitComplete:$,_fnLanguageCompat:pa,_fnAddColumn:o,_fnColumnOptions:m,_fnAddData:H,_fnCreateTr:ea,_fnGatherData:ua,_fnBuildHead:va,_fnDrawHead:W,_fnDraw:x,_fnReDraw:aa,_fnAjaxUpdate:wa,_fnAjaxParameters:Ea,_fnAjaxUpdateDraw:Fa,_fnServerParams:ka,_fnAddOptionsHtml:xa,_fnFeatureHtmlTable:Ba,_fnScrollDraw:La,_fnAdjustColumnSizing:k,_fnFeatureHtmlFilter:za,_fnFilterComplete:K,_fnFilterCustom:Ia,_fnFilterColumn:Ha,_fnFilter:Ga,_fnBuildSearchArray:la,_fnBuildSearchRow:na,_fnFilterCreateSearch:ma,_fnDataToSearch:Ja,_fnSort:O,_fnSortAttachListener:ia,_fnSortingClasses:P,_fnFeatureHtmlPaginate:Da,_fnPageChange:qa,_fnFeatureHtmlInfo:Ca,_fnUpdateInfo:Ka,_fnFeatureHtmlLength:ya,_fnFeatureHtmlProcessing:Aa,_fnProcessingDisplay:E,_fnVisibleToColumnIndex:G,_fnColumnIndexToVisible:R,_fnNodeToDataIndex:I,_fnVisbleColumns:t,_fnCalculateEnd:y,_fnConvertToWidth:Ma,_fnCalculateColumnWidths:da,_fnScrollingWidthAdjust:Oa,_fnGetWidestNode:Na,_fnGetMaxLenString:Pa,_fnStringToCss:q,_fnDetectType:B,_fnSettingsFromNode:s,_fnGetDataMaster:Z,_fnGetTrNodes:T,_fnGetTdNodes:J,_fnEscapeRegex:oa,_fnDeleteIndex:ha,_fnReOrderIndex:u,_fnColumnOrdering:M,_fnLog:D,_fnClearTable:ga,_fnSaveState:ra,_fnLoadState:Sa,_fnCreateCookie:function(a,b,c,d,e){var f=new Date;f.setTime(f.getTime()+1e3*c);var c=X.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase(),g;if(null!==e?(g="function"==typeof h.parseJSON?h.parseJSON(b):eval("("+b+")"),b=e(a,g,f.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+f.toGMTString()+"; path="+c.join("/")+"/",a=l.cookie.split(";"),e=b.split(";")[0].length,f=[],4096<e+l.cookie.length+10){for(var j=0,o=a.length;o>j;j++)if(-1!=a[j].indexOf(d)){var k=a[j].split("=");try{(g=eval("("+decodeURIComponent(k[1])+")"))&&g.iCreate&&f.push({name:k[0],time:g.iCreate})}catch(m){}}for(f.sort(function(t,e){return e.time-t.time});4096<e+l.cookie.length+10;){if(0===f.length)return;d=f.pop(),l.cookie=d.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/"}}l.cookie=b},_fnReadCookie:function(t){for(var e=X.location.pathname.split("/"),t=t+"_"+e[e.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",e=l.cookie.split(";"),n=0;n<e.length;n++){for(var i=e[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},_fnDetectHeader:V,_fnGetUniqueThs:N,_fnScrollBarWidth:Qa,_fnApplyToChildren:C,_fnMap:p,_fnGetRowData:Y,_fnGetCellData:v,_fnSetCellData:F,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:L,_fnApplyColumnDefs:ta,_fnBindAction:Ra,_fnExtend:Ta,_fnCallbackReg:z,_fnCallbackFire:A,_fnJsonString:Wa,_fnRender:S,_fnNodeToColumnIndex:fa,_fnInfoMacros:ja,_fnBrowserDetect:Ua,_fnGetColumns:r},h.extend(j.ext.oApi,this.oApi);for(var sa in j.ext.oApi)sa&&(this[sa]=Va(sa));var ca=this;return this.each(function(){var t,i,r,a=0;i=this.getAttribute("id");var s=!1,u=!1;if("table"!=this.nodeName.toLowerCase())D(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{for(a=0,t=j.settings.length;t>a;a++){if(j.settings[a].nTable==this){if(e===n||e.bRetrieve)return j.settings[a].oInstance;if(e.bDestroy){j.settings[a].oInstance.fnDestroy();break}return D(j.settings[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy"),void 0}if(j.settings[a].sTableId==this.id){j.settings.splice(a,1);break}}(null===i||""===i)&&(this.id=i="DataTables_Table_"+j.ext._oExternConfig.iNextUnique++);var c=h.extend(!0,{},j.models.oSettings,{nTable:this,oApi:ca.oApi,oInit:e,sDestroyWidth:h(this).width(),sInstance:i,sTableId:i});if(j.settings.push(c),c.oInstance=1===ca.length?ca:h(this).dataTable(),e||(e={}),e.oLanguage&&pa(e.oLanguage),e=Ta(h.extend(!0,{},j.defaults),e),p(c.oFeatures,e,"bPaginate"),p(c.oFeatures,e,"bLengthChange"),p(c.oFeatures,e,"bFilter"),p(c.oFeatures,e,"bSort"),p(c.oFeatures,e,"bInfo"),p(c.oFeatures,e,"bProcessing"),p(c.oFeatures,e,"bAutoWidth"),p(c.oFeatures,e,"bSortClasses"),p(c.oFeatures,e,"bServerSide"),p(c.oFeatures,e,"bDeferRender"),p(c.oScroll,e,"sScrollX","sX"),p(c.oScroll,e,"sScrollXInner","sXInner"),p(c.oScroll,e,"sScrollY","sY"),p(c.oScroll,e,"bScrollCollapse","bCollapse"),p(c.oScroll,e,"bScrollInfinite","bInfinite"),p(c.oScroll,e,"iScrollLoadGap","iLoadGap"),p(c.oScroll,e,"bScrollAutoCss","bAutoCss"),p(c,e,"asStripeClasses"),p(c,e,"asStripClasses","asStripeClasses"),p(c,e,"fnServerData"),p(c,e,"fnFormatNumber"),p(c,e,"sServerMethod"),p(c,e,"aaSorting"),p(c,e,"aaSortingFixed"),p(c,e,"aLengthMenu"),p(c,e,"sPaginationType"),p(c,e,"sAjaxSource"),p(c,e,"sAjaxDataProp"),p(c,e,"iCookieDuration"),p(c,e,"sCookiePrefix"),p(c,e,"sDom"),p(c,e,"bSortCellsTop"),p(c,e,"iTabIndex"),p(c,e,"oSearch","oPreviousSearch"),p(c,e,"aoSearchCols","aoPreSearchCols"),p(c,e,"iDisplayLength","_iDisplayLength"),p(c,e,"bJQueryUI","bJUI"),p(c,e,"fnCookieCallback"),p(c,e,"fnStateLoad"),p(c,e,"fnStateSave"),p(c.oLanguage,e,"fnInfoCallback"),z(c,"aoDrawCallback",e.fnDrawCallback,"user"),z(c,"aoServerParams",e.fnServerParams,"user"),z(c,"aoStateSaveParams",e.fnStateSaveParams,"user"),z(c,"aoStateLoadParams",e.fnStateLoadParams,"user"),z(c,"aoStateLoaded",e.fnStateLoaded,"user"),z(c,"aoRowCallback",e.fnRowCallback,"user"),z(c,"aoRowCreatedCallback",e.fnCreatedRow,"user"),z(c,"aoHeaderCallback",e.fnHeaderCallback,"user"),z(c,"aoFooterCallback",e.fnFooterCallback,"user"),z(c,"aoInitComplete",e.fnInitComplete,"user"),z(c,"aoPreDrawCallback",e.fnPreDrawCallback,"user"),c.oFeatures.bServerSide&&c.oFeatures.bSort&&c.oFeatures.bSortClasses?z(c,"aoDrawCallback",P,"server_side_sort_classes"):c.oFeatures.bDeferRender&&z(c,"aoDrawCallback",P,"defer_sort_classes"),e.bJQueryUI?(h.extend(c.oClasses,j.ext.oJUIClasses),e.sDom===j.defaults.sDom&&"lfrtip"===j.defaults.sDom&&(c.sDom='<"H"lfr>t<"F"ip>')):h.extend(c.oClasses,j.ext.oStdClasses),h(this).addClass(c.oClasses.sTable),(""!==c.oScroll.sX||""!==c.oScroll.sY)&&(c.oScroll.iBarWidth=Qa()),c.iInitDisplayStart===n&&(c.iInitDisplayStart=e.iDisplayStart,c._iDisplayStart=e.iDisplayStart),e.bStateSave&&(c.oFeatures.bStateSave=!0,Sa(c,e),z(c,"aoDrawCallback",ra,"state_save")),null!==e.iDeferLoading&&(c.bDeferLoading=!0,a=h.isArray(e.iDeferLoading),c._iRecordsDisplay=a?e.iDeferLoading[0]:e.iDeferLoading,c._iRecordsTotal=a?e.iDeferLoading[1]:e.iDeferLoading),null!==e.aaData&&(u=!0),""!==e.oLanguage.sUrl?(c.oLanguage.sUrl=e.oLanguage.sUrl,h.getJSON(c.oLanguage.sUrl,null,function(t){pa(t),h.extend(!0,c.oLanguage,e.oLanguage,t),ba(c)}),s=!0):h.extend(!0,c.oLanguage,e.oLanguage),null===e.asStripeClasses&&(c.asStripeClasses=[c.oClasses.sStripeOdd,c.oClasses.sStripeEven]),t=c.asStripeClasses.length,c.asDestroyStripes=[],t){for(i=!1,r=h(this).children("tbody").children("tr:lt("+t+")"),a=0;t>a;a++)r.hasClass(c.asStripeClasses[a])&&(i=!0,c.asDestroyStripes.push(c.asStripeClasses[a]));i&&r.removeClass(c.asStripeClasses.join(" "))}if(i=[],a=this.getElementsByTagName("thead"),0!==a.length&&(V(c.aoHeader,a[0]),i=N(c)),null===e.aoColumns)for(r=[],a=0,t=i.length;t>a;a++)r.push(null);else r=e.aoColumns;for(a=0,t=r.length;t>a;a++)e.saved_aoColumns!==n&&e.saved_aoColumns.length==t&&(null===r[a]&&(r[a]={}),r[a].bVisible=e.saved_aoColumns[a].bVisible),o(c,i?i[a]:null);for(ta(c,e.aoColumnDefs,r,function(t,e){m(c,t,e)}),a=0,t=c.aaSorting.length;t>a;a++){c.aaSorting[a][0]>=c.aoColumns.length&&(c.aaSorting[a][0]=0);var d=c.aoColumns[c.aaSorting[a][0]];for(c.aaSorting[a][2]===n&&(c.aaSorting[a][2]=0),e.aaSorting===n&&c.saved_aaSorting===n&&(c.aaSorting[a][1]=d.asSorting[0]),i=0,r=d.asSorting.length;r>i;i++)if(c.aaSorting[a][1]==d.asSorting[i]){c.aaSorting[a][2]=i;break}}if(P(c),Ua(c),a=h(this).children("caption").each(function(){this._captionSide=h(this).css("caption-side")}),t=h(this).children("thead"),0===t.length&&(t=[l.createElement("thead")],this.appendChild(t[0])),c.nTHead=t[0],t=h(this).children("tbody"),0===t.length&&(t=[l.createElement("tbody")],this.appendChild(t[0])),c.nTBody=t[0],c.nTBody.setAttribute("role","alert"),c.nTBody.setAttribute("aria-live","polite"),c.nTBody.setAttribute("aria-relevant","all"),t=h(this).children("tfoot"),0===t.length&&0<a.length&&(""!==c.oScroll.sX||""!==c.oScroll.sY)&&(t=[l.createElement("tfoot")],this.appendChild(t[0])),0<t.length&&(c.nTFoot=t[0],V(c.aoFooter,c.nTFoot)),u)for(a=0;a<e.aaData.length;a++)H(c,e.aaData[a]);else ua(c);c.aiDisplay=c.aiDisplayMaster.slice(),c.bInitialised=!0,!1===s&&ba(c)}}),ca=null,this};j.fnVersionCheck=function(t){for(var e=function(t,e){for(;t.length<e;)t+="0";return t},n=j.ext.sVersion.split("."),t=t.split("."),i="",r="",a=0,s=t.length;s>a;a++)i+=e(n[a],3),r+=e(t[a],3);return parseInt(i,10)>=parseInt(r,10)},j.fnIsDataTable=function(t){for(var e=j.settings,n=0;n<e.length;n++)if(e[n].nTable===t||e[n].nScrollHead===t||e[n].nScrollFoot===t)return!0;return!1},j.fnTables=function(t){var e=[];return jQuery.each(j.settings,function(n,i){(!t||!0===t&&h(i.nTable).is(":visible"))&&e.push(i.nTable)}),e},j.version="1.9.4",j.settings=[],j.models={},j.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:j.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:j.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},j.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},j.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},j.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},j.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){if(1e3>t)return t;for(var e=t+"",t=e.split(""),n="",e=e.length,i=0;e>i;i++)0===i%3&&0!==i&&(n=this.oLanguage.sInfoThousands+n),n=t[e-i-1]+n;return n},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(t,e,n,i){i.jqXHR=h.ajax({url:t,data:e,success:function(t){t.sError&&i.oApi._fnLog(i,0,t.sError),h(i.oInstance).trigger("xhr",[i,t]),n(t)},dataType:"json",cache:!1,type:i.sServerMethod,error:function(t,e){"parsererror"==e&&i.oApi._fnLog(i,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(e){var e=this.oApi._fnReadCookie(e.sCookiePrefix+e.sInstance),j;try{j="function"==typeof h.parseJSON?h.parseJSON(e):eval("("+e+")")}catch(m){j=null}return j},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(t,e){this.oApi._fnCreateCookie(t.sCookiePrefix+t.sInstance,this.oApi._fnJsonString(e),t.iCookieDuration,t.sCookiePrefix,t.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},j.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},j.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},j.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null},j.ext=h.extend(!0,{},j.models.ext),h.extend(j.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""}),h.extend(j.ext.oJUIClasses,j.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}),h.extend(j.ext.oPagination,{two_button:{fnInit:function(t,e,n){var i=t.oLanguage.oPaginate,r=function(e){t.oApi._fnPageChange(t,e.data.action)&&n(t)},i=t.bJUI?'<a class="'+t.oClasses.sPagePrevDisabled+'" tabindex="'+t.iTabIndex+'" role="button"><span class="'+t.oClasses.sPageJUIPrev+'"></span></a><a class="'+t.oClasses.sPageNextDisabled+'" tabindex="'+t.iTabIndex+'" role="button"><span class="'+t.oClasses.sPageJUINext+'"></span></a>':'<a class="'+t.oClasses.sPagePrevDisabled+'" tabindex="'+t.iTabIndex+'" role="button">'+i.sPrevious+'</a><a class="'+t.oClasses.sPageNextDisabled+'" tabindex="'+t.iTabIndex+'" role="button">'+i.sNext+"</a>";h(e).append(i);var a=h("a",e),i=a[0],a=a[1];t.oApi._fnBindAction(i,{action:"previous"},r),t.oApi._fnBindAction(a,{action:"next"},r),t.aanFeatures.p||(e.id=t.sTableId+"_paginate",i.id=t.sTableId+"_previous",a.id=t.sTableId+"_next",i.setAttribute("aria-controls",t.sTableId),a.setAttribute("aria-controls",t.sTableId))},fnUpdate:function(t){if(t.aanFeatures.p)for(var e,n=t.oClasses,i=t.aanFeatures.p,r=0,a=i.length;a>r;r++)(e=i[r].firstChild)&&(e.className=0===t._iDisplayStart?n.sPagePrevDisabled:n.sPagePrevEnabled,e=e.nextSibling,e.className=t.fnDisplayEnd()==t.fnRecordsDisplay()?n.sPageNextDisabled:n.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(t,e,n){var i=t.oLanguage.oPaginate,r=t.oClasses,a=function(e){t.oApi._fnPageChange(t,e.data.action)&&n(t)};h(e).append('<a  tabindex="'+t.iTabIndex+'" class="'+r.sPageButton+" "+r.sPageFirst+'">'+i.sFirst+'</a><a  tabindex="'+t.iTabIndex+'" class="'+r.sPageButton+" "+r.sPagePrevious+'">'+i.sPrevious+'</a><span></span><a tabindex="'+t.iTabIndex+'" class="'+r.sPageButton+" "+r.sPageNext+'">'+i.sNext+'</a><a tabindex="'+t.iTabIndex+'" class="'+r.sPageButton+" "+r.sPageLast+'">'+i.sLast+"</a>");var s=h("a",e),i=s[0],r=s[1],o=s[2],s=s[3];t.oApi._fnBindAction(i,{action:"first"},a),t.oApi._fnBindAction(r,{action:"previous"},a),t.oApi._fnBindAction(o,{action:"next"},a),t.oApi._fnBindAction(s,{action:"last"},a),t.aanFeatures.p||(e.id=t.sTableId+"_paginate",i.id=t.sTableId+"_first",r.id=t.sTableId+"_previous",o.id=t.sTableId+"_next",s.id=t.sTableId+"_last")},fnUpdate:function(t,e){if(t.aanFeatures.p){var n,i,r=j.ext.oPagination.iFullNumbersShowPages,a=Math.floor(r/2),s=Math.ceil(t.fnRecordsDisplay()/t._iDisplayLength),o=Math.ceil(t._iDisplayStart/t._iDisplayLength)+1,l="",u=t.oClasses,c=t.aanFeatures.p,d=function(i){t.oApi._fnBindAction(this,{page:i+n-1},function(n){t.oApi._fnPageChange(t,n.data.page),e(t),n.preventDefault()})};for(-1===t._iDisplayLength?o=a=n=1:r>s?(n=1,a=s):a>=o?(n=1,a=r):o>=s-a?(n=s-r+1,a=s):(n=o-Math.ceil(r/2)+1,a=n+r-1),r=n;a>=r;r++)l+=o!==r?'<a tabindex="'+t.iTabIndex+'" class="'+u.sPageButton+'">'+t.fnFormatNumber(r)+"</a>":'<a tabindex="'+t.iTabIndex+'" class="'+u.sPageButtonActive+'">'+t.fnFormatNumber(r)+"</a>";for(r=0,a=c.length;a>r;r++)i=c[r],i.hasChildNodes()&&(h("span:eq(0)",i).html(l).children("a").each(d),i=i.getElementsByTagName("a"),i=[i[0],i[1],i[i.length-2],i[i.length-1]],h(i).removeClass(u.sPageButton+" "+u.sPageButtonActive+" "+u.sPageButtonStaticDisabled),h([i[0],i[1]]).addClass(1==o?u.sPageButtonStaticDisabled:u.sPageButton),h([i[2],i[3]]).addClass(0===s||o===s||-1===t._iDisplayLength?u.sPageButtonStaticDisabled:u.sPageButton))}}}}),h.extend(j.ext.oSort,{"string-pre":function(t){return"string"!=typeof t&&(t=null!==t&&t.toString?t.toString():""),t.toLowerCase()},"string-asc":function(t,e){return e>t?-1:t>e?1:0},"string-desc":function(t,e){return e>t?1:t>e?-1:0},"html-pre":function(t){return t.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(t,e){return e>t?-1:t>e?1:0},"html-desc":function(t,e){return e>t?1:t>e?-1:0
},"date-pre":function(t){return t=Date.parse(t),(isNaN(t)||""===t)&&(t=Date.parse("01/01/1970 00:00:00")),t},"date-asc":function(t,e){return t-e},"date-desc":function(t,e){return e-t},"numeric-pre":function(t){return"-"==t||""===t?0:1*t},"numeric-asc":function(t,e){return t-e},"numeric-desc":function(t,e){return e-t}}),h.extend(j.ext.aTypes,[function(t){if("number"==typeof t)return"numeric";if("string"!=typeof t)return null;var e,n=!1;if(e=t.charAt(0),-1=="0123456789-".indexOf(e))return null;for(var i=1;i<t.length;i++){if(e=t.charAt(i),-1=="0123456789.".indexOf(e))return null;if("."==e){if(n)return null;n=!0}}return"numeric"},function(t){var e=Date.parse(t);return null!==e&&!isNaN(e)||"string"==typeof t&&0===t.length?"date":null},function(t){return"string"==typeof t&&-1!=t.indexOf("<")&&-1!=t.indexOf(">")?"html":null}]),h.fn.DataTable=j,h.fn.dataTable=j,h.fn.dataTableSettings=j.settings,h.fn.dataTableExt=j.ext};"function"==typeof define&&define.amd?define(["jquery"],L):jQuery&&!jQuery.fn.dataTable&&L(jQuery)}(window,document),$(document).ready(function(){function t(t){t.wrap("<div class='table-wrapper' />");var e=t.clone();e.find("td:not(:first-child), th:not(:first-child)").css("display","none"),e.removeClass("responsive"),t.closest(".table-wrapper").append(e),e.wrap("<div class='pinned' />"),t.wrap("<div class='scrollable' />"),n(t,e)}function e(t){t.closest(".table-wrapper").find(".pinned").remove(),t.unwrap(),t.unwrap()}function n(t,e){var n=t.find("tr"),i=e.find("tr"),r=[];n.each(function(t){var e=$(this),n=e.find("th, td");n.each(function(){var e=$(this).outerHeight(!0);r[t]=r[t]||0,e>r[t]&&(r[t]=e)})}),i.each(function(t){$(this).height(r[t])})}var i=!1,r=function(){return $(window).width()<767&&!i?(i=!0,$("table.responsive").each(function(e,n){t($(n))}),!0):(i&&$(window).width()>767&&(i=!1,$("table.responsive").each(function(t,n){e($(n))})),void 0)};$(window).load(r),$(window).bind("resize",r)}),function(t){t.fn.wizard=function(t){return new Wizard(this,t)},t.fn.wizard.logging=!1,WizardCard=function(t,e,n,i,r){this.wizard=t,this.index=n,this.prev=i,this.next=r,this.el=e,this.title=e.find("h3").first().text(),this.name=e.data("cardname")||this.title,this.nav=this._createNavElement(this.title,n),this._disabled=!1,this._loaded=!1,this._events={}},WizardCard.prototype={select:function(){this.log("selecting"),this.isSelected()||(this.nav.addClass("active"),this.el.show(),this._loaded||(this.trigger("loaded"),this.reload()),this.trigger("selected"));var t=this.wizard;return this.index>=t._cards.length-1?(this.log("on last card, changing next button to submit"),t.changeNextButton(t.args.buttons.submitText,"btn-green"),t._readyToSubmit=!0,t.trigger("readySubmit")):(t._readyToSubmit=!1,0==this.index?t.backButton.toggleClass("disabled",!0):t.backButton.toggleClass("disabled",!1),t.changeNextButton(t.args.buttons.nextText,"btn-blue")),this},_createNavElement:function(e,n){var i=t('<li class="wizard-nav-item"></li>'),r=t('<a class="wizard-nav-link"></a>');return r.data("navindex",n),i.append(r),r.append('<i class="icon-chevron-right"></i>'),r.append(e),i},markVisited:function(){return this.log("marking as visited"),this.nav.addClass("already-visited"),this.trigger("markVisited"),this},unmarkVisited:function(){return this.log("unmarking as visited"),this.nav.removeClass("already-visited"),this.trigger("unmarkVisited"),this},deselect:function(){return this.nav.removeClass("active"),this.el.hide(),this.trigger("deselect"),this},enable:function(){return this.log("enabling"),this.nav.addClass("active"),this._disabled=!1,this.trigger("enabled"),this},disable:function(t){return this.log("disabling"),this._disabled=!0,this.nav.removeClass("active already-visited"),t&&this.el.hide(),this.trigger("disabled"),this},isDisabled:function(){return this._disabled},alreadyVisited:function(){return this.nav.hasClass("already-visited")},isSelected:function(){return this.nav.hasClass("active")},reload:function(){return this._loaded=!0,this.trigger("reload"),this},on:function(){return this.wizard.on.apply(this,arguments)},trigger:function(){return this.callListener("on"+arguments[0]),this.wizard.trigger.apply(this,arguments)},toggleAlert:function(e,n){this.log("toggling alert to: "+n),n="undefined"==typeof n?!0:n,n?this.trigger("showAlert"):this.trigger("hideAlert");var i,r=this.el.children("h3").first().next("div.alert");if(0==r.length){if(!n)return this;this.log("couldn't find existing alert div, creating one"),i=t("<div />"),i.addClass("alert"),i.addClass("hide"),i.insertAfter(this.el.find("h3").first())}else this.log("found existing alert div"),i=r.first();return n?(null!=e&&(this.log("setting alert msg to",e),i.html(e)),i.show()):i.hide(),this},callListener:function(t){t=t.toLowerCase(),this.log("looking for listener "+t);var e=window[this.el.data(t)];if(e){this.log("calling listener "+t),this.wizard;try{e(this)}catch(n){this.log("exception calling listener "+t+": ",n)}}else this.log("didn't find listener "+t)},problem:function(t){this.nav.find("a").toggleClass("wizard-step-error",t)},validate:function(){var e=!1,n=this;this.el.find("[data-validate]").each(function(i,r){n.log("validating individiual inputs"),r=t(r);var a=r.data("validate");if(a){var s={status:!0,title:"Error",msg:""},o=window[a](r);if(t.extend(s,o),s.status){r.parent(".control-group").toggleClass("error",!1);try{r.popover("destroy")}catch(l){r.popover("hide")}}else e=!0,r.parent(".control-group").toggleClass("error",!0),n.wizard.errorPopover(r,s.msg)}}),this.log("after validating inputs, failures is",e);var i=window[this.el.data("validate")];if(i){this.log("running html-embedded card validator");var r=i(this);("undefined"==typeof r||null==r)&&(r=!0),r||(e=!0),this.log("after running html-embedded card validator, failures is",e)}this.log("running listener validator");var a=this.trigger("validate");("undefined"==typeof a||null==a)&&(a=!0),a||(e=!0),this.log("after running listener validator, failures is",e);var s=!e;return s?(this.log("validated, calling listeners"),this.trigger("validated")):(this.log("invalid"),this.trigger("invalid")),s},log:function(){if(window.console&&t.fn.wizard.logging){var e="card '"+this.name+"': ",n=[e];n.push.apply(n,arguments),console.log.apply(console,n)}},isActive:function(){return this.nav.hasClass("active")}},Wizard=function(e,n){var i=['<div class="modal hide wizard-modal" role="dialog">','<div class="wizard-modal-header modal-header">','<button class="wizard-close close" type="button">x</button>','<h3 class="wizard-title"></h3>','<span class="wizard-subtitle"></span>',"</div>",'<div class="pull-left wizard-steps">','<div class="wizard-nav-container">','<ul class="nav nav-list" style="padding-bottom:30px;">',"</ul>","</div>",'<div class="wizard-progress-container">',,'<div class="progress progress-striped">','<div class="bar"></div>',"</div>","</div>","</div>","<form>",'<div class="wizard-cards">','<div class="wizard-card-container">',"</div>",'<div class="wizard-modal-footer">','<div class="wizard-buttons-container">','<button class="btn btn-default wizard-back" type="button">Back</button>','<button class="btn btn-blue wizard-next" type="button">Next</button>',"</div>","</div>","</div>","</form>","</div>"];this.args={submitUrl:"",width:750,progressBarCurrent:!1,increaseHeight:0,buttons:{nextText:"Next",backText:"Back",submitText:"Submit",submittingText:"Submitting..."}},t.extend(this.args,n||{}),this.markup=t(e),this.submitCards=this.markup.find(".wizard-error,.wizard-failure,.wizard-success,.wizard-loading"),this.el=t(i.join("\n")),this.el.find(".wizard-card-container").append(this.markup.find(".wizard-card")).append(this.submitCards),t("body").append(this.el),this.closeButton=this.el.find("button.wizard-close"),this.footer=this.el.find(".wizard-modal-footer"),this.backButton=this.footer.find(".wizard-back"),this.nextButton=this.footer.find(".wizard-next"),this.progress=this.el.find(".progress"),this._cards=[],this.cards={},this._readyToSubmit=!1,this.percentComplete=0,this._submitting=!1,this._events={},this._firstShow=!0,this._createCards(),this.nextButton.click(this,this._handleNextClick),this.backButton.click(this,this._handleBackClick),this.backButton.text(this.args.buttons.backText),this.nextButton.text(this.args.buttons.nextText);var r=360,a=r+this.args.increaseHeight;this.el.find(".wizard-nav-container").css("height",a),this.el.find(".wizard-steps").css("height",a+65+"px"),this.el.find(".wizard-card").css("height",a-60+"px"),this.submitCards.css("height",a-60+"px"),this.el.css("margin-top",-(this.el.height()/2)),this.el.css("width",this.args.width),this.el.css("margin-left",-(this.args.width/2));var s=this;this.closeButton.click(function(){s.reset(),s.close()}),this.el.find(".wizard-steps").on("click","li.already-visited a.wizard-nav-link",this,function(e){var n=parseInt(t(e.target).data("navindex"));e.data.setCard(n)});var o=this.markup.children("h1").first();o.length&&this.setTitle(o.text()),this.on("submit",this._defaultSubmit)},Wizard.prototype={errorPopover:function(t,e){this.log("launching popover on",t);var n=t.popover({content:e,trigger:"manual"}).popover("show").next(".popover");return n.addClass("error-popover"),n},eachCard:function(e){return t.each(this._cards,e),this},getActiveCard:function(){this.log("getting active card");var e=null;return t.each(this._cards,function(t,n){return n.isActive()?(e=n,!1):void 0}),e?this.log("found active card",e):this.log("couldn't find an active card"),e},setTitle:function(t){return this.log("setting title to",t),this.el.find(".wizard-title").first().text(t),this},setSubtitle:function(t){return this.log("setting subtitle to",t),this.el.find(".wizard-subtitle").first().text(t),this},changeNextButton:function(t,e){return this.log("changing next button, text: "+t,"class: "+e),"undefined"!=typeof e&&this.nextButton.removeClass("btn-green btn-blue"),e&&this.nextButton.addClass(e),this.nextButton.text(t),this},hide:function(){return this.log("hiding"),this.el.modal("hide"),this},close:function(){return this.log("closing"),this.el.modal("hide"),this},show:function(){return this.log("showing"),this._firstShow&&(this.setCard(0),this._firstShow=!1),this.el.modal(),this},on:function(t,e){return this.log("adding listener to event "+t),this._events[t]=e,this},trigger:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments);e.shift(),e.unshift(this),this.log("firing event "+t);var n=this._events[t],i=null;if("function"==typeof n){this.log("found event handler, calling "+t);try{i=n.apply(this,e)}catch(r){this.log("event handler "+t+" had an exception")}}else this.log("couldn't find an event handler for "+t);return i},reset:function(){return this.log("resetting"),this.updateProgressBar(0),this.hideSubmitCards(),this.setCard(0),this.lockCards(),this.enableNextButton(),this.showButtons(),this.trigger("reset"),this},log:function(){if(window.console&&t.fn.wizard.logging){var e="wizard "+this.el.id+": ",n=[e];n.push.apply(n,arguments),console.log.apply(console,n)}},_abstractIncrementStep:function(t,e){var n,i=this.getActiveCard();if(i)for(this.log("searching for valid next card");;){if(n=e(i)){if(this.log("looking at card",n.index),n.isDisabled()){this.log("card "+n.index+" is disabled/locked, continuing"),i=n;continue}return this.setCard(i.index+t)}this.log("next card is not defined, breaking");break}else this.log("current card is undefined")},incrementCard:function(){this.log("incrementing card");var t=this._abstractIncrementStep(1,function(t){return t.next});return this.trigger("incrementCard"),t},decrementCard:function(){this.log("decrementing card");var t=this._abstractIncrementStep(-1,function(t){return t.prev});return this.trigger("decrementCard"),t},setCard:function(t){this.log("setting card to "+t),this.hideSubmitCards();var e=this.getActiveCard();if(this._submitting)return this.log("we're submitting the wizard already, can't change cards"),e;var n=this._cards[t];if(n){if(n.isDisabled())return this.log("new card is currently disabled, returning"),e;if(e){if(t>e.index){for(var i=e,r=!1;i.index!=n.index;){if(i.index!=e.index&&(i.prev.deselect(),i.prev.markVisited(),i.select()),r=i.validate(),!r)return i;i=i.next}i.prev.deselect(),i.prev.markVisited()}e.deselect(),e.markVisited()}if(n.select(),this.args.progressBarCurrent){var a=this.percentComplete;this.percentComplete=100*t/this._cards.length,this.updateProgressBar(this.percentComplete)}else{var a=this.percentComplete;this.percentComplete=100*t/this._cards.length,this.percentComplete=Math.max(a,this.percentComplete),this.updateProgressBar(this.percentComplete)}return n}this.log("couldn't find card "+t)},updateProgressBar:function(t){this.log("updating progress to "+t+"%"),this.progress.find(".bar").css({width:t+"%"}),this.percentComplete=t,this.trigger("progressBar",t),100==t?(this.log("progress is 100, animating progress bar"),this.progress.addClass("active")):0==t&&(this.log("progress is 0, disabling animation"),this.progress.removeClass("active"))},getNextCard:function(){var t=this.getActiveCard();return t?t.next:void 0},lockCards:function(){return this.log("locking nav cards"),this.eachCard(function(t,e){e.unmarkVisited()}),this},disableCards:function(){return this.log("disabling all nav cards"),this.eachCard(function(t,e){e.disable()}),this},enableCards:function(){return this.log("enabling all nav cards"),this.eachCard(function(t,e){e.enable()}),this},hideCards:function(){return this.log("hiding cards"),this.eachCard(function(t,e){e.deselect()}),this.hideSubmitCards(),this},hideButtons:function(){return this.log("hiding buttons"),this.nextButton.hide(),this.backButton.hide(),this},showButtons:function(){return this.log("showing buttons"),this.nextButton.show(),this.backButton.show(),this},getCard:function(e){var n=t(e).parents(".wizard-card").first()[0];if(n){var i=null;return this.eachCard(function(t,e){return n==e.el[0]?(i=e,!1):!0}),i}return null},_createCards:function(){var e=null,n=null,i=null,r=this,a=this,s=this.el.find(".wizard-cards .wizard-card");t.each(s,function(s,o){o=t(o),e=i,i=new WizardCard(r,o,s,e,n),a._cards.push(i),i.name&&(a.cards[i.name]=i),e&&(e.next=i),a.el.find(".wizard-steps .nav-list").append(i.nav)})},showSubmitCard:function(t){this.log("showing "+t+" submit card");var e=this.el.find(".wizard-"+t);e.length?(this.hideCards(),this.el.find(".wizard-"+t).show()):this.log("couldn't find submit card "+t)},hideSubmitCard:function(t){this.log("hiding "+t+" submit card"),this.el.find(".wizard-"+t).hide()},hideSubmitCards:function(){var e=this;t.each(["success","error","failure","loading"],function(t,n){e.hideSubmitCard(n)})},enableNextButton:function(){return this.log("enabling next button"),this.nextButton.removeAttr("disabled"),this},disableNextButton:function(){return this.log("disabling next button"),this.nextButton.attr("disabled","disabled"),this},serializeArray:function(){var t=this.el.children("form").first();return t.serializeArray()},serialize:function(){var t=this.el.children("form").first();return t.serialize()},submitSuccess:function(){this.log("submit success"),this._submitting=!1,this.showSubmitCard("success"),this.trigger("submitSuccess")},submitFailure:function(){this.log("submit failure"),this._submitting=!1,this.showSubmitCard("failure"),this.trigger("submitFailure")},submitError:function(){this.log("submit error"),this._submitting=!1,this.showSubmitCard("error"),this.trigger("submitError")},_submit:function(){this.log("submitting wizard"),this._submitting=!0,this.lockCards(),this.backButton.hide(),this.showSubmitCard("loading"),this.updateProgressBar(100),this.changeNextButton(this.args.buttons.submittingText,!1),this.disableNextButton(),this.trigger("submit"),this.trigger("loading")},_onNextClick:function(){this.log("handling 'next' button click"),this._readyToSubmit?this._submit():this.incrementCard()},_onBackClick:function(){this.log("handling 'back' button click"),this.decrementCard()},_handleNextClick:function(t){var e=t.data;e._onNextClick.call(e)},_handleBackClick:function(t){var e=t.data;e._onBackClick.call(e)},_defaultSubmit:function(e){t.ajax({type:"POST",url:e.args.submitUrl,data:e.serialize(),dataType:"json",success:function(){e.submitSuccess(),e.hideButtons(),e.updateProgressBar(0)},error:function(){e.submitFailure(),e.hideButtons()}})}}}(window.jQuery),function(t){"use strict";var e={init:function(n){var i=this;return i.data("jqv")&&null!=i.data("jqv")||(n=e._saveOptions(i,n),t(document).on("click",".formError",function(){t(this).fadeOut(150,function(){t(this).parent(".formErrorOuter").remove(),t(this).remove()})})),this},attach:function(n){var i,r=this;return i=n?e._saveOptions(r,n):r.data("jqv"),i.validateAttribute=r.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",i.binded&&(r.on(i.validationEventTrigger,"["+i.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",e._onFieldEvent),r.on("click","["+i.validateAttribute+"*=validate][type=checkbox],["+i.validateAttribute+"*=validate][type=radio]",e._onFieldEvent),r.on(i.validationEventTrigger,"["+i.validateAttribute+"*=validate][class*=datepicker]",{delay:300},e._onFieldEvent)),i.autoPositionUpdate&&t(window).bind("resize",{noAnimation:!0,formElem:r},e.updatePromptsPosition),r.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",e._submitButtonClick),r.removeData("jqv_submitButton"),r.on("submit",e._onSubmitEvent),this},detach:function(){var n=this,i=n.data("jqv");return n.find("["+i.validateAttribute+"*=validate]").not("[type=checkbox]").off(i.validationEventTrigger,e._onFieldEvent),n.find("["+i.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",e._onFieldEvent),n.off("submit",e.onAjaxFormComplete),n.die("submit",e.onAjaxFormComplete),n.removeData("jqv"),n.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",e._submitButtonClick),n.removeData("jqv_submitButton"),i.autoPositionUpdate&&t(window).unbind("resize",e.updatePromptsPosition),this},validate:function(){var n=t(this),i=null;if(!n.is("form")&&!n.hasClass("validationEngineContainer")||n.hasClass("validating"))if(n.is("form")||n.hasClass("validationEngineContainer"))n.removeClass("validating");else{var r=n.closest("form, .validationEngineContainer"),a=r.data("jqv")?r.data("jqv"):t.validationEngine.defaults,i=e._validateField(n,a);i&&a.onFieldSuccess?a.onFieldSuccess():a.onFieldFailure&&a.InvalidFields.length>0&&a.onFieldFailure()}else{n.addClass("validating");var a=n.data("jqv"),i=e._validateFields(this);setTimeout(function(){n.removeClass("validating")},100),i&&a.onSuccess?a.onSuccess():!i&&a.onFailure&&a.onFailure()}return a.onValidationComplete?!!a.onValidationComplete(r,i):i},updatePromptsPosition:function(n){if(n&&this==window)var i=n.data.formElem,r=n.data.noAnimation;else var i=t(this.closest("form, .validationEngineContainer"));var a=i.data("jqv");return i.find("["+a.validateAttribute+"*=validate]").not(":disabled").each(function(){var n=t(this);a.prettySelect&&n.is(":hidden")&&(n=i.find("#"+a.usePrefix+n.attr("id")+a.useSuffix));var s=e._getPrompt(n),o=t(s).find(".formErrorContent").html();s&&e._updatePrompt(n,t(s),o,void 0,!1,a,r)}),this},showPrompt:function(t,n,i,r){var a=this.closest("form, .validationEngineContainer"),s=a.data("jqv");return s||(s=e._saveOptions(this,s)),i&&(s.promptPosition=i),s.showArrow=1==r,e._showPrompt(this,t,n,!1,s),this},hide:function(){var n,i=t(this).closest("form, .validationEngineContainer"),r=i.data("jqv"),a=r&&r.fadeDuration?r.fadeDuration:.3;return n=t(this).is("form")||t(this).hasClass("validationEngineContainer")?"parentForm"+e._getClassName(t(this).attr("id")):e._getClassName(t(this).attr("id"))+"formError",t("."+n).fadeTo(a,.3,function(){t(this).parent(".formErrorOuter").remove(),t(this).remove()}),this},hideAll:function(){var e=this,n=e.data("jqv"),i=n?n.fadeDuration:300;return t(".formError").fadeTo(i,300,function(){t(this).parent(".formErrorOuter").remove(),t(this).remove()}),this},_onFieldEvent:function(n){var i=t(this),r=i.closest("form, .validationEngineContainer"),a=r.data("jqv");a.eventTrigger="field",window.setTimeout(function(){e._validateField(i,a),0==a.InvalidFields.length&&a.onFieldSuccess?a.onFieldSuccess():a.InvalidFields.length>0&&a.onFieldFailure&&a.onFieldFailure()},n.data?n.data.delay:0)},_onSubmitEvent:function(){var n=t(this),i=n.data("jqv");if(n.data("jqv_submitButton")){var r=t("#"+n.data("jqv_submitButton"));if(r&&r.length>0&&(r.hasClass("validate-skip")||"true"==r.attr("data-validation-engine-skip")))return!0}i.eventTrigger="submit";var a=e._validateFields(n);return a&&i.ajaxFormValidation?(e._validateFormWithAjax(n,i),!1):i.onValidationComplete?!!i.onValidationComplete(n,a):a},_checkAjaxStatus:function(e){var n=!0;return t.each(e.ajaxValidCache,function(t,e){return e?void 0:(n=!1,!1)}),n},_checkAjaxFieldStatus:function(t,e){return 1==e.ajaxValidCache[t]},_validateFields:function(n){var i=n.data("jqv"),r=!1;n.trigger("jqv.form.validating");var a=null;if(n.find("["+i.validateAttribute+"*=validate]").not(":disabled").each(function(){var s=t(this),o=[];if(t.inArray(s.attr("name"),o)<0){if(r|=e._validateField(s,i),r&&null==a&&(a=s.is(":hidden")&&i.prettySelect?s=n.find("#"+i.usePrefix+e._jqSelector(s.attr("id"))+i.useSuffix):s),i.doNotShowAllErrosOnSubmit)return!1;if(o.push(s.attr("name")),1==i.showOneMessage&&r)return!1}}),n.trigger("jqv.form.result",[r]),r){if(i.scroll){var s=a.offset().top,o=a.offset().left,l=i.promptPosition;if("string"==typeof l&&-1!=l.indexOf(":")&&(l=l.substring(0,l.indexOf(":"))),"bottomRight"!=l&&"bottomLeft"!=l){var u=e._getPrompt(a);u&&(s=u.offset().top)}if(i.scrollOffset&&(s-=i.scrollOffset),i.isOverflown){var c=t(i.overflownDIV);if(!c.length)return!1;var h=c.scrollTop(),d=-parseInt(c.offset().top);s+=h+d-5;var f=t(i.overflownDIV+":not(:animated)");f.animate({scrollTop:s},1100,function(){i.focusFirstField&&a.focus()})}else t("html, body").animate({scrollTop:s},1100,function(){i.focusFirstField&&a.focus()}),t("html, body").animate({scrollLeft:o},1100)}else i.focusFirstField&&a.focus();return!1}return!0},_validateFormWithAjax:function(n,i){var r=n.serialize(),a=i.ajaxFormValidationMethod?i.ajaxFormValidationMethod:"GET",s=i.ajaxFormValidationURL?i.ajaxFormValidationURL:n.attr("action"),o=i.dataType?i.dataType:"json";t.ajax({type:a,url:s,cache:!1,dataType:o,data:r,form:n,methods:e,options:i,beforeSend:function(){return i.onBeforeAjaxFormValidation(n,i)},error:function(t,n){e._ajaxError(t,n)},success:function(r){if("json"==o&&r!==!0){for(var a=!1,s=0;s<r.length;s++){var l=r[s],u=l[0],c=t(t("#"+u)[0]);if(1==c.length){var h=l[2];if(1==l[1])if(""!=h&&h){if(i.allrules[h]){var d=i.allrules[h].alertTextOk;d&&(h=d)}i.showPrompts&&e._showPrompt(c,h,"pass",!1,i,!0)}else e._closePrompt(c);else{if(a|=!0,i.allrules[h]){var d=i.allrules[h].alertText;d&&(h=d)}i.showPrompts&&e._showPrompt(c,h,"",!1,i,!0)}}}i.onAjaxFormComplete(!a,n,r,i)}else i.onAjaxFormComplete(!0,n,r,i)}})},_validateField:function(n,i,r){if(n.attr("id")||(n.attr("id","form-validation-field-"+t.validationEngine.fieldIdCounter),++t.validationEngine.fieldIdCounter),!i.validateNonVisibleFields&&(n.is(":hidden")&&!i.prettySelect||n.parent().is(":hidden")))return!1;var a=n.attr(i.validateAttribute),s=/validate\[(.*)\]/.exec(a);if(!s)return!1;var o=s[1],l=o.split(/\[|,|\]/),u=!1,c=n.attr("name"),h="",d="",f=!1,p=!1;i.isError=!1,i.showArrow=!1,i.maxErrorsPerField>0&&(p=!0);for(var g=t(n.closest("form, .validationEngineContainer")),m=0;m<l.length;m++)l[m]=l[m].replace(" ",""),""===l[m]&&delete l[m];for(var m=0,v=0;m<l.length;m++){if(p&&v>=i.maxErrorsPerField){if(!f){var y=t.inArray("required",l);f=-1!=y&&y>=m}break}var b=void 0;switch(l[m]){case"required":f=!0,b=e._getErrorMessage(g,n,l[m],l,m,i,e._required);break;case"custom":b=e._getErrorMessage(g,n,l[m],l,m,i,e._custom);break;case"groupRequired":var x="["+i.validateAttribute+"*="+l[m+1]+"]",w=g.find(x).eq(0);w[0]!=n[0]&&(e._validateField(w,i,r),i.showArrow=!0),b=e._getErrorMessage(g,n,l[m],l,m,i,e._groupRequired),b&&(f=!0),i.showArrow=!1;break;case"ajax":b=e._ajax(n,l,m,i),b&&(d="load");break;case"minSize":b=e._getErrorMessage(g,n,l[m],l,m,i,e._minSize);break;case"maxSize":b=e._getErrorMessage(g,n,l[m],l,m,i,e._maxSize);break;case"min":b=e._getErrorMessage(g,n,l[m],l,m,i,e._min);break;case"max":b=e._getErrorMessage(g,n,l[m],l,m,i,e._max);break;case"past":b=e._getErrorMessage(g,n,l[m],l,m,i,e._past);break;case"future":b=e._getErrorMessage(g,n,l[m],l,m,i,e._future);break;case"dateRange":var x="["+i.validateAttribute+"*="+l[m+1]+"]";i.firstOfGroup=g.find(x).eq(0),i.secondOfGroup=g.find(x).eq(1),(i.firstOfGroup[0].value||i.secondOfGroup[0].value)&&(b=e._getErrorMessage(g,n,l[m],l,m,i,e._dateRange)),b&&(f=!0),i.showArrow=!1;break;case"dateTimeRange":var x="["+i.validateAttribute+"*="+l[m+1]+"]";i.firstOfGroup=g.find(x).eq(0),i.secondOfGroup=g.find(x).eq(1),(i.firstOfGroup[0].value||i.secondOfGroup[0].value)&&(b=e._getErrorMessage(g,n,l[m],l,m,i,e._dateTimeRange)),b&&(f=!0),i.showArrow=!1;break;case"maxCheckbox":n=t(g.find("input[name='"+c+"']")),b=e._getErrorMessage(g,n,l[m],l,m,i,e._maxCheckbox);break;case"minCheckbox":n=t(g.find("input[name='"+c+"']")),b=e._getErrorMessage(g,n,l[m],l,m,i,e._minCheckbox);break;case"equals":b=e._getErrorMessage(g,n,l[m],l,m,i,e._equals);break;case"funcCall":b=e._getErrorMessage(g,n,l[m],l,m,i,e._funcCall);break;case"creditCard":b=e._getErrorMessage(g,n,l[m],l,m,i,e._creditCard);break;case"condRequired":b=e._getErrorMessage(g,n,l[m],l,m,i,e._condRequired),void 0!==b&&(f=!0)}var C=!1;if("object"==typeof b)switch(b.status){case"_break":C=!0;break;case"_error":b=b.message;break;case"_error_no_prompt":return!0}if(C)break;"string"==typeof b&&(h+=b+"<br/>",i.isError=!0,v++)}!f&&!n.val()&&n.val().length<1&&(i.isError=!1);var _=n.prop("type"),S=n.data("promptPosition")||i.promptPosition;("radio"==_||"checkbox"==_)&&g.find("input[name='"+c+"']").size()>1&&(n="inline"===S?t(g.find("input[name='"+c+"'][type!=hidden]:last")):t(g.find("input[name='"+c+"'][type!=hidden]:first")),i.showArrow=!1),n.is(":hidden")&&i.prettySelect&&(n=g.find("#"+i.usePrefix+e._jqSelector(n.attr("id"))+i.useSuffix)),i.isError&&i.showPrompts?e._showPrompt(n,h,d,!1,i):u||e._closePrompt(n),u||n.trigger("jqv.field.result",[n,i.isError,h]);var T=t.inArray(n[0],i.InvalidFields);return-1==T?i.isError&&i.InvalidFields.push(n[0]):i.isError||i.InvalidFields.splice(T,1),e._handleStatusCssClasses(n,i),i.isError&&i.onFieldFailure&&i.onFieldFailure(n),!i.isError&&i.onFieldSuccess&&i.onFieldSuccess(n),i.isError},_handleStatusCssClasses:function(t,e){e.addSuccessCssClassToField&&t.removeClass(e.addSuccessCssClassToField),e.addFailureCssClassToField&&t.removeClass(e.addFailureCssClassToField),e.addSuccessCssClassToField&&!e.isError&&t.addClass(e.addSuccessCssClassToField),e.addFailureCssClassToField&&e.isError&&t.addClass(e.addFailureCssClassToField)},_getErrorMessage:function(n,i,r,a,s,o,l){var u=jQuery.inArray(r,a);if("custom"===r||"funcCall"===r){var c=a[u+1];r=r+"["+c+"]",delete a[u]}var h,d=r,f=i.attr("data-validation-engine")?i.attr("data-validation-engine"):i.attr("class"),p=f.split(" ");if(h="future"==r||"past"==r||"maxCheckbox"==r||"minCheckbox"==r?l(n,i,a,s,o):l(i,a,s,o),void 0!=h){var g=e._getCustomErrorMessage(t(i),p,d,o);g&&(h=g)}return h},_getCustomErrorMessage:function(t,n,i,r){var a=!1,s=e._validityProp[i];if(void 0!=s&&(a=t.attr("data-errormessage-"+s),void 0!=a))return a;if(a=t.attr("data-errormessage"),void 0!=a)return a;var o="#"+t.attr("id");if("undefined"!=typeof r.custom_error_messages[o]&&"undefined"!=typeof r.custom_error_messages[o][i])a=r.custom_error_messages[o][i].message;else if(n.length>0)for(var l=0;l<n.length&&n.length>0;l++){var u="."+n[l];if("undefined"!=typeof r.custom_error_messages[u]&&"undefined"!=typeof r.custom_error_messages[u][i]){a=r.custom_error_messages[u][i].message;break}}return a||"undefined"==typeof r.custom_error_messages[i]||"undefined"==typeof r.custom_error_messages[i].message||(a=r.custom_error_messages[i].message),a},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(e,n,i,r,a){switch(e.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var s=t.trim(e.val()),o=t.trim(e.attr("data-validation-placeholder")),l=t.trim(e.attr("placeholder"));if(!s||o&&s==o||l&&s==l)return r.allrules[n[i]].alertText;break;case"radio":case"checkbox":if(a){if(!e.attr("checked"))return r.allrules[n[i]].alertTextCheckboxMultiple;break}var u=e.closest("form, .validationEngineContainer"),c=e.attr("name");if(0==u.find("input[name='"+c+"']:checked").size())return 1==u.find("input[name='"+c+"']:visible").size()?r.allrules[n[i]].alertTextCheckboxe:r.allrules[n[i]].alertTextCheckboxMultiple}},_groupRequired:function(n,i,r,a){var s="["+a.validateAttribute+"*="+i[r+1]+"]",o=!1;return n.closest("form, .validationEngineContainer").find(s).each(function(){return e._required(t(this),i,r,a)?void 0:(o=!0,!1)}),o?void 0:a.allrules[i[r]].alertText},_custom:function(t,e,n,i){var r,a=e[n+1],s=i.allrules[a];if(!s)return alert("jqv:custom rule not found - "+a),void 0;if(s.regex){var o=s.regex;if(!o)return alert("jqv:custom regex not found - "+a),void 0;var l=new RegExp(o);if(!l.test(t.val()))return i.allrules[a].alertText}else{if(!s.func)return alert("jqv:custom type not allowed "+a),void 0;if(r=s.func,"function"!=typeof r)return alert("jqv:custom parameter 'function' is no function - "+a),void 0;if(!r(t,e,n,i))return i.allrules[a].alertText}},_funcCall:function(t,e,n,i){var r,a=e[n+1];if(a.indexOf(".")>-1){for(var s=a.split("."),o=window;s.length;)o=o[s.shift()];r=o}else r=window[a]||i.customFunctions[a];return"function"==typeof r?r(t,e,n,i):void 0},_equals:function(e,n,i,r){var a=n[i+1];return e.val()!=t("#"+a).val()?r.allrules.equals.alertText:void 0},_maxSize:function(t,e,n,i){var r=e[n+1],a=t.val().length;if(a>r){var s=i.allrules.maxSize;return s.alertText+r+s.alertText2}},_minSize:function(t,e,n,i){var r=e[n+1],a=t.val().length;if(r>a){var s=i.allrules.minSize;return s.alertText+r+s.alertText2}},_min:function(t,e,n,i){var r=parseFloat(e[n+1]),a=parseFloat(t.val());if(r>a){var s=i.allrules.min;return s.alertText2?s.alertText+r+s.alertText2:s.alertText+r}},_max:function(t,e,n,i){var r=parseFloat(e[n+1]),a=parseFloat(t.val());if(a>r){var s=i.allrules.max;return s.alertText2?s.alertText+r+s.alertText2:s.alertText+r}},_past:function(n,i,r,a,s){var o,l=r[a+1],u=t(n.find("input[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())o=new Date;else if(void 0!=u.val()){if(u.is(":disabled"))return;o=e._parseDate(u.val())}else o=e._parseDate(l);var c=e._parseDate(i.val());if(c>o){var h=s.allrules.past;return h.alertText2?h.alertText+e._dateToString(o)+h.alertText2:h.alertText+e._dateToString(o)}},_future:function(n,i,r,a,s){var o,l=r[a+1],u=t(n.find("input[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())o=new Date;else if(void 0!=u.val()){if(u.is(":disabled"))return;o=e._parseDate(u.val())}else o=e._parseDate(l);var c=e._parseDate(i.val());if(o>c){var h=s.allrules.future;return h.alertText2?h.alertText+e._dateToString(o)+h.alertText2:h.alertText+e._dateToString(o)}},_isDate:function(t){var e=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return e.test(t)},_isDateTime:function(t){var e=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);
return e.test(t)},_dateCompare:function(t,e){return new Date(t.toString())<new Date(e.toString())},_dateRange:function(t,n,i,r){return!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value?r.allrules[n[i]].alertText+r.allrules[n[i]].alertText2:e._isDate(r.firstOfGroup[0].value)&&e._isDate(r.secondOfGroup[0].value)?e._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)?void 0:r.allrules[n[i]].alertText+r.allrules[n[i]].alertText2:r.allrules[n[i]].alertText+r.allrules[n[i]].alertText2},_dateTimeRange:function(t,n,i,r){return!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value?r.allrules[n[i]].alertText+r.allrules[n[i]].alertText2:e._isDateTime(r.firstOfGroup[0].value)&&e._isDateTime(r.secondOfGroup[0].value)?e._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)?void 0:r.allrules[n[i]].alertText+r.allrules[n[i]].alertText2:r.allrules[n[i]].alertText+r.allrules[n[i]].alertText2},_maxCheckbox:function(t,e,n,i,r){var a=n[i+1],s=e.attr("name"),o=t.find("input[name='"+s+"']:checked").size();return o>a?(r.showArrow=!1,r.allrules.maxCheckbox.alertText2?r.allrules.maxCheckbox.alertText+" "+a+" "+r.allrules.maxCheckbox.alertText2:r.allrules.maxCheckbox.alertText):void 0},_minCheckbox:function(t,e,n,i,r){var a=n[i+1],s=e.attr("name"),o=t.find("input[name='"+s+"']:checked").size();return a>o?(r.showArrow=!1,r.allrules.minCheckbox.alertText+" "+a+" "+r.allrules.minCheckbox.alertText2):void 0},_creditCard:function(t,e,n,i){var r=!1,a=t.val().replace(/ +/g,"").replace(/-+/g,""),s=a.length;if(s>=14&&16>=s&&parseInt(a)>0){var o,l=0,n=s-1,u=1,c=new String;do o=parseInt(a.charAt(n)),c+=0==u++%2?2*o:o;while(--n>=0);for(n=0;n<c.length;n++)l+=parseInt(c.charAt(n));r=0==l%10}return r?void 0:i.allrules.creditCard.alertText},_ajax:function(n,i,r,a){var s=i[r+1],o=a.allrules[s],l=o.extraData,u=o.extraDataDynamic,c={fieldId:n.attr("id"),fieldValue:n.val()};if("object"==typeof l)t.extend(c,l);else if("string"==typeof l)for(var h=l.split("&"),r=0;r<h.length;r++){var d=h[r].split("=");d[0]&&d[0]&&(c[d[0]]=d[1])}if(u)for(var f=String(u).split(","),r=0;r<f.length;r++){var p=f[r];if(t(p).length){var g=n.closest("form, .validationEngineContainer").find(p).val();p.replace("#","")+"="+escape(g),c[p.replace("#","")]=g}}return"field"==a.eventTrigger&&delete a.ajaxValidCache[n.attr("id")],a.isError||e._checkAjaxFieldStatus(n.attr("id"),a)?void 0:(t.ajax({type:a.ajaxFormValidationMethod,url:o.url,cache:!1,dataType:"json",data:c,field:n,rule:o,methods:e,options:a,beforeSend:function(){},error:function(t,n){e._ajaxError(t,n)},success:function(i){var r=i[0],s=t("#"+r).eq(0);if(1==s.length){var l=i[1],u=i[2];if(l){if(a.ajaxValidCache[r]=!0,u){if(a.allrules[u]){var c=a.allrules[u].alertTextOk;c&&(u=c)}}else u=o.alertTextOk;a.showPrompts&&(u?e._showPrompt(s,u,"pass",!0,a):e._closePrompt(s)),"submit"==a.eventTrigger&&n.closest("form").submit()}else{if(a.ajaxValidCache[r]=!1,a.isError=!0,u){if(a.allrules[u]){var c=a.allrules[u].alertText;c&&(u=c)}}else u=o.alertText;a.showPrompts&&e._showPrompt(s,u,"",!0,a)}}s.trigger("jqv.field.result",[s,a.isError,u])}}),o.alertTextLoad)},_ajaxError:function(t,e){0==t.status&&null==e?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+t.status+" "+e)},_dateToString:function(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},_parseDate:function(t){var e=t.split("-");return e==t&&(e=t.split("/")),e==t?(e=t.split("."),new Date(e[2],e[1]-1,e[0])):new Date(e[0],e[1]-1,e[2])},_showPrompt:function(n,i,r,a,s,o){var l=e._getPrompt(n);o&&(l=!1),t.trim(i)&&(l?e._updatePrompt(n,l,i,r,a,s):e._buildPrompt(n,i,r,a,s))},_buildPrompt:function(n,i,r,a,s){var o=t("<div>");switch(o.addClass(e._getClassName(n.attr("id"))+"formError"),o.addClass("parentForm"+e._getClassName(n.closest("form, .validationEngineContainer").attr("id"))),o.addClass("formError"),r){case"pass":o.addClass("greenPopup");break;case"load":o.addClass("blackPopup")}a&&o.addClass("ajaxed"),t("<div>").addClass("formErrorContent").html(i).appendTo(o);var l=n.data("promptPosition")||s.promptPosition;if(s.showArrow){var u=t("<div>").addClass("formErrorArrow");if("string"==typeof l){var c=l.indexOf(":");-1!=c&&(l=l.substring(0,c))}switch(l){case"bottomLeft":case"bottomRight":o.find(".formErrorContent").before(u),u.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":u.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>'),o.append(u)}}s.addPromptClass&&o.addClass(s.addPromptClass);var h=n.attr("data-required-class");if(void 0!==h)o.addClass(h);else if(s.prettySelect&&t("#"+n.attr("id")).next().is("select")){var d=t("#"+n.attr("id").substr(s.usePrefix.length).substring(s.useSuffix.length)).attr("data-required-class");void 0!==d&&o.addClass(d)}o.css({opacity:0}),"inline"===l?(o.addClass("inline"),"undefined"!=typeof n.attr("data-prompt-target")&&t("#"+n.attr("data-prompt-target")).length>0?o.appendTo(t("#"+n.attr("data-prompt-target"))):n.after(o)):n.before(o);var c=e._calculatePosition(n,o,s);return o.css({position:"inline"===l?"relative":"absolute",top:c.callerTopPosition,left:c.callerleftPosition,marginTop:c.marginTopSize,opacity:0}).data("callerField",n),s.autoHidePrompt&&setTimeout(function(){o.animate({opacity:0},function(){o.closest(".formErrorOuter").remove(),o.remove()})},s.autoHideDelay),o.animate({opacity:.87})},_updatePrompt:function(t,n,i,r,a,s,o){if(n){"undefined"!=typeof r&&("pass"==r?n.addClass("greenPopup"):n.removeClass("greenPopup"),"load"==r?n.addClass("blackPopup"):n.removeClass("blackPopup")),a?n.addClass("ajaxed"):n.removeClass("ajaxed"),n.find(".formErrorContent").html(i);var l=e._calculatePosition(t,n,s),u={top:l.callerTopPosition,left:l.callerleftPosition,marginTop:l.marginTopSize};o?n.css(u):n.animate(u)}},_closePrompt:function(t){var n=e._getPrompt(t);n&&n.fadeTo("fast",0,function(){n.parent(".formErrorOuter").remove(),n.remove()})},closePrompt:function(t){return e._closePrompt(t)},_getPrompt:function(n){var i=t(n).closest("form, .validationEngineContainer").attr("id"),r=e._getClassName(n.attr("id"))+"formError",a=t("."+e._escapeExpression(r)+".parentForm"+i)[0];return a?t(a):void 0},_escapeExpression:function(t){return t.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var n=t(document),i=t("body"),r=e&&e.hasClass("rtl")||e&&"rtl"===(e.attr("dir")||"").toLowerCase()||n.hasClass("rtl")||"rtl"===(n.attr("dir")||"").toLowerCase()||i.hasClass("rtl")||"rtl"===(i.attr("dir")||"").toLowerCase();return Boolean(r)},_calculatePosition:function(t,e,n){var i,r,a,s=t.width(),o=t.position().left,l=t.position().top;t.height();var u=e.height();i=r=0,a=-u;var c=t.data("promptPosition")||n.promptPosition,h="",d="",f=0,p=0;switch("string"==typeof c&&-1!=c.indexOf(":")&&(h=c.substring(c.indexOf(":")+1),c=c.substring(0,c.indexOf(":")),-1!=h.indexOf(",")&&(d=h.substring(h.indexOf(",")+1),h=h.substring(0,h.indexOf(",")),p=parseInt(d),isNaN(p)&&(p=0)),f=parseInt(h),isNaN(h)&&(h=0)),c){default:case"topRight":r+=o+s-30,i+=l;break;case"topLeft":i+=l,r+=o;break;case"centerRight":i=l+4,a=0,r=o+t.outerWidth(!0)+5;break;case"centerLeft":r=o-(e.width()+2),i=l+4,a=0;break;case"bottomLeft":i=l+t.height()+5,a=0,r=o;break;case"bottomRight":r=o+s-30,i=l+t.height()+5,a=0;break;case"inline":r=0,i=0,a=0}return r+=f,i+=p,{callerTopPosition:i+"px",callerleftPosition:r+"px",marginTopSize:a+"px"}},_saveOptions:function(e,n){if(t.validationEngineLanguage)var i=t.validationEngineLanguage.allRules;else t.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");t.validationEngine.defaults.allrules=i;var r=t.extend(!0,{},t.validationEngine.defaults,n);return e.data("jqv",r),r},_getClassName:function(t){return t?t.replace(/:/g,"_").replace(/\./g,"_"):void 0},_jqSelector:function(t){return t.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(t,n,i,r){var a,s;for(a=i+1;a<n.length;a++)if(s=jQuery("#"+n[a]).first(),s.length&&void 0==e._required(s,["required"],0,r,!0))return e._required(t,["required"],0,r)},_submitButtonClick:function(){var e=t(this),n=e.closest("form, .validationEngineContainer");n.data("jqv_submitButton",e.attr("id"))}};t.fn.validationEngine=function(n){var i=t(this);return i[0]?"string"==typeof n&&"_"!=n.charAt(0)&&e[n]?("showPrompt"!=n&&"hide"!=n&&"hideAll"!=n&&e.init.apply(i),e[n].apply(i,Array.prototype.slice.call(arguments,1))):"object"!=typeof n&&n?(t.error("Method "+n+" does not exist in jQuery.validationEngine"),void 0):(e.init.apply(i,arguments),e.attach.apply(i)):i},t.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:t.noop,onBeforeAjaxFormValidation:t.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},t(function(){t.validationEngine.defaults.promptPosition=e.isRTL()?"topLeft":"topRight"})}(jQuery),function(t){function e(t,e,n,i){var r=n.lang();return r[t].call?r[t](n,i):r[t][e]}function n(t,e){return function(n){return o(t.call(this,n),e)}}function i(t){return function(e){var n=t.call(this,e);return n+this.lang().ordinal(n)}}function r(t,e,n){this._d=t,this._isUTC=!!e,this._a=t._a||null,this._lang=n||!1}function a(t){var e=this._data={},n=t.years||t.y||0,i=t.months||t.M||0,r=t.weeks||t.w||0,a=t.days||t.d||0,o=t.hours||t.h||0,l=t.minutes||t.m||0,u=t.seconds||t.s||0,c=t.milliseconds||t.ms||0;this._milliseconds=c+1e3*u+6e4*l+36e5*o,this._days=a+7*r,this._months=i+12*n,e.milliseconds=c%1e3,u+=s(c/1e3),e.seconds=u%60,l+=s(u/60),e.minutes=l%60,o+=s(l/60),e.hours=o%24,a+=s(o/24),a+=7*r,e.days=a%30,i+=s(a/30),e.months=i%12,n+=s(i/12),e.years=n,this._lang=!1}function s(t){return 0>t?Math.ceil(t):Math.floor(t)}function o(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function l(t,e,n){var i,r=e._milliseconds,a=e._days,s=e._months;r&&t._d.setTime(+t+r*n),a&&t.date(t.date()+a*n),s&&(i=t.date(),t.date(1).month(t.month()+s*n).date(Math.min(i,t.daysInMonth())))}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t,e){var n,i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0;for(n=0;i>n;n++)~~t[n]!==~~e[n]&&a++;return a+r}function h(t,e,n,i){var r,a,s=[];for(r=0;7>r;r++)s[r]=t[r]=null==t[r]?2===r?1:0:t[r];return t[7]=s[7]=e,null!=t[8]&&(s[8]=t[8]),t[3]+=n||0,t[4]+=i||0,a=new Date(0),e?(a.setUTCFullYear(t[0],t[1],t[2]),a.setUTCHours(t[3],t[4],t[5],t[6])):(a.setFullYear(t[0],t[1],t[2]),a.setHours(t[3],t[4],t[5],t[6])),a._a=s,a}function d(t,e){var n,i,r=[];for(!e&&I&&(e=require("./lang/"+t)),n=0;n<P.length;n++)e[P[n]]=e[P[n]]||A.en[P[n]];for(n=0;12>n;n++)i=k([2e3,n]),r[n]=new RegExp("^"+(e.months[n]||e.months(i,""))+"|^"+(e.monthsShort[n]||e.monthsShort(i,"")).replace(".",""),"i");return e.monthsParse=e.monthsParse||r,A[t]=e,e}function f(t){var e="string"==typeof t&&t||t&&t._lang||null;return e?A[e]||d(e):k}function p(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function g(t){var e,n,i=t.match(F);for(e=0,n=i.length;n>e;e++)i[e]=ee[i[e]]?ee[i[e]]:p(i[e]);return function(r){var a="";for(e=0;n>e;e++)a+="function"==typeof i[e].call?i[e].call(r,t):i[e];return a}}function m(t,e){function n(e){return t.lang().longDateFormat[e]||e}for(var i=5;i--&&L.test(e);)e=e.replace(L,n);return K[e]||(K[e]=g(e)),K[e](t)}function v(t){switch(t){case"DDDD":return z;case"YYYY":return $;case"S":case"SS":case"SSS":case"DDD":return B;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return q;case"Z":case"ZZ":return W;case"T":return V;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return j;default:return new RegExp(t.replace("\\",""))}}function y(t,e,n,i){var r,a;switch(t){case"M":case"MM":n[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":for(r=0;12>r;r++)if(f().monthsParse[r].test(e)){n[1]=r,a=!0;break}a||(n[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(n[2]=~~e);break;case"YY":n[0]=~~e+(~~e>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(e);break;case"a":case"A":i.isPm="pm"===(e+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":n[3]=~~e;break;case"m":case"mm":n[4]=~~e;break;case"s":case"ss":n[5]=~~e;break;case"S":case"SS":case"SSS":n[6]=~~(1e3*("0."+e));break;case"Z":case"ZZ":i.isUTC=!0,r=(e+"").match(G),r&&r[1]&&(i.tzh=~~r[1]),r&&r[2]&&(i.tzm=~~r[2]),r&&"+"===r[0]&&(i.tzh=-i.tzh,i.tzm=-i.tzm)}null==e&&(n[8]=!1)}function b(t,e){var n,i,r=[0,0,1,0,0,0,0],a={tzh:0,tzm:0},s=e.match(F);for(n=0;n<s.length;n++)i=(v(s[n]).exec(t)||[])[0],i&&(t=t.slice(t.indexOf(i)+i.length)),ee[s[n]]&&y(s[n],i,r,a);return a.isPm&&r[3]<12&&(r[3]+=12),a.isPm===!1&&12===r[3]&&(r[3]=0),h(r,a.isUTC,a.tzh,a.tzm)}function x(t,e){var n,i,a,s,o,l=t.match(H)||[],u=99;for(a=0;a<e.length;a++)s=b(t,e[a]),i=m(new r(s),e[a]).match(H)||[],o=c(l,i),u>o&&(u=o,n=s);return n}function w(t){var e,n="YYYY-MM-DDT";if(U.exec(t)){for(e=0;4>e;e++)if(X[e][1].exec(t)){n+=X[e][0];break}return W.exec(t)?b(t,n+" Z"):b(t,n)}return new Date(t)}function C(t,e,n,i,r){var a=r.relativeTime[t];return"function"==typeof a?a(e||1,!!n,t,i):a.replace(/%d/i,e||1)}function _(t,e,n){var i=N(Math.abs(t)/1e3),r=N(i/60),a=N(r/60),s=N(a/24),o=N(s/365),l=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===a&&["h"]||22>a&&["hh",a]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",N(s/30)]||1===o&&["y"]||["yy",o];return l[2]=e,l[3]=t>0,l[4]=n,C.apply({},l)}function S(t,e){k.fn[t]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),this):this._d["get"+n+e]()}}function T(t){k.duration.fn[t]=function(){return this._data[t]}}function D(t,e){k.duration.fn["as"+t]=function(){return+this/e}}for(var k,M,E="1.7.2",N=Math.round,A={},R="en",I="undefined"!=typeof module&&module.exports,P="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),O=/^\/?Date\((\-?\d+)/i,F=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,L=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,H=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,j=/\d\d?/,B=/\d{1,3}/,z=/\d{3}/,$=/\d{1,4}/,q=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,W=/Z|[\+\-]\d\d:?\d\d/i,V=/T/i,U=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,Y="YYYY-MM-DDTHH:mm:ssZ",X=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],G=/([\+\-]|\d\d)/gi,Q="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),J={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},K={},Z="DDD w M D d".split(" "),te="M D H h m s w".split(" "),ee={M:function(){return this.month()+1},MMM:function(t){return e("monthsShort",this.month(),this,t)},MMMM:function(t){return e("months",this.month(),this,t)},D:function(){return this.date()},DDD:function(){var t=new Date(this.year(),this.month(),this.date()),e=new Date(this.year(),0,1);return~~((t-e)/864e5+1.5)},d:function(){return this.day()},dd:function(t){return e("weekdaysMin",this.day(),this,t)},ddd:function(t){return e("weekdaysShort",this.day(),this,t)},dddd:function(t){return e("weekdays",this.day(),this,t)},w:function(){var t=new Date(this.year(),this.month(),this.date()-this.day()+5),e=new Date(t.getFullYear(),0,4);return~~((t-e)/864e5/7+1.5)},YY:function(){return o(this.year()%100,2)},YYYY:function(){return o(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return o(~~(this.milliseconds()/10),2)},SSS:function(){return o(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+o(~~(t/60),2)+":"+o(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+o(~~(10*t/6),4)}};Z.length;)M=Z.pop(),ee[M+"o"]=i(ee[M]);for(;te.length;)M=te.pop(),ee[M+M]=n(ee[M],2);for(ee.DDDD=n(ee.DDD,3),k=function(e,n){if(null===e||""===e)return null;var i,a;return k.isMoment(e)?new r(new Date(+e._d),e._isUTC,e._lang):(n?i=u(n)?x(e,n):b(e,n):(a=O.exec(e),i=e===t?new Date:a?new Date(+a[1]):e instanceof Date?e:u(e)?h(e):"string"==typeof e?w(e):new Date(e)),new r(i))},k.utc=function(t,e){return u(t)?new r(h(t,!0),!0):("string"==typeof t&&!W.exec(t)&&(t+=" +0000",e&&(e+=" Z")),k(t,e).utc())},k.unix=function(t){return k(1e3*t)},k.duration=function(t,e){var n,i=k.isDuration(t),r="number"==typeof t,s=i?t._data:r?{}:t;return r&&(e?s[e]=t:s.milliseconds=t),n=new a(s),i&&(n._lang=t._lang),n},k.humanizeDuration=function(t,e,n){return k.duration(t,e===!0?null:e).humanize(e===!0?!0:n)},k.version=E,k.defaultFormat=Y,k.lang=function(t,e){var n;if(!t)return R;if((e||!A[t])&&d(t,e),A[t]){for(n=0;n<P.length;n++)k[P[n]]=A[t][P[n]];k.monthsParse=A[t].monthsParse,R=t}},k.langData=f,k.isMoment=function(t){return t instanceof r},k.isDuration=function(t){return t instanceof a},k.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"}}),k.fn=r.prototype={clone:function(){return k(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!c(this._a,(this._a[7]?k.utc(this._a):k(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){return m(this,t?t:k.defaultFormat)},add:function(t,e){var n=e?k.duration(+e,t):k.duration(t);return l(this,n,1),this},subtract:function(t,e){var n=e?k.duration(+e,t):k.duration(t);return l(this,n,-1),this},diff:function(t,e,n){var i,r=this._isUTC?k(t).utc():k(t).local(),a=6e4*(this.zone()-r.zone()),s=this._d-r._d-a,o=this.year()-r.year(),l=this.month()-r.month(),u=this.date()-r.date();return i="months"===e?12*o+l+u/30:"years"===e?o+(l+u/30)/12:"seconds"===e?s/1e3:"minutes"===e?s/6e4:"hours"===e?s/36e5:"days"===e?s/864e5:"weeks"===e?s/6048e5:s,n?i:N(i)},from:function(t,e){return k.duration(this.diff(t)).lang(this._lang).humanize(!e)},fromNow:function(t){return this.from(k(),t)},calendar:function(){var t=this.diff(k().sod(),"days",!0),e=this.lang().calendar,n=e.sameElse,i=-6>t?n:-1>t?e.lastWeek:0>t?e.lastDay:1>t?e.sameDay:2>t?e.nextDay:7>t?e.nextWeek:n;return this.format("function"==typeof i?i.apply(this):i)},isLeapYear:function(){var t=this.year();return 0===t%4&&0!==t%100||0===t%400},isDST:function(){return this.zone()<k([this.year()]).zone()||this.zone()<k([this.year(),5]).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:this.add({d:t-e})},startOf:function(t){switch(t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return k.utc([this.year(),this.month()+1,0]).date()},lang:function(e){return e===t?f(this):(this._lang=e,this)}},M=0;M<Q.length;M++)S(Q[M].toLowerCase(),Q[M]);S("year","FullYear"),k.duration.fn=a.prototype={weeks:function(){return s(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var e=+this,n=this.lang().relativeTime,i=_(e,!t,this.lang()),r=0>=e?n.past:n.future;return t&&(i="function"==typeof r?r(i):r.replace(/%s/i,i)),i},lang:k.fn.lang};for(M in J)J.hasOwnProperty(M)&&(D(M,J[M]),T(M.toLowerCase()));D("Weeks",6048e5),I&&(module.exports=k),"undefined"==typeof ender&&(this.moment=k),"function"==typeof define&&define.amd&&define("moment",[],function(){return k})}.call(this),function(t){var e=function(e,n){return this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,n,this.$element.data()),this.init(),void 0):(t.error("Combodate should be applied to INPUT element"),void 0)};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(){this.$element.val(this.getValue())},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,n){n=n[0];var i=new RegExp(n+"+"),r=n.length>1?n.substring(1,2):n;e=e.replace(i,"{"+r+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,n){n=n[0];var i=n.length>1?n.substring(1,2):n;e=e.replace("{"+i+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){var e=this;t.each(this.map,function(t){var n,i,r=e.$widget.find("."+t);r.length&&(e["$"+t]=r,n="fill"+t.charAt(0).toUpperCase()+t.slice(1),i=e[n](),e["$"+t].html(e.renderItems(i)))})},initItems:function(t){var e=[];if("name"===this.options.firstItem){var n="function"==typeof moment.relativeTime[t]?moment.relativeTime[t](1,!0,t,!1):moment.relativeTime[t];n=n.split(" ").reverse()[0],e.push(["",n])}else"empty"===this.options.firstItem&&e.push(["",""]);return e},renderItems:function(t){for(var e=[],n=0;n<t.length;n++)e.push('<option value="'+t[n][0]+'">'+t[n][1]+"</option>");return e.join("\n")},fillDay:function(){var t,e,n=this.initItems("d"),i=-1!==this.options.template.indexOf("DD");for(e=1;31>=e;e++)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillMonth:function(){var t,e,n=this.initItems("M"),i=-1!==this.options.template.indexOf("MMMM"),r=-1!==this.options.template.indexOf("MMM"),a=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=i?moment.months[e]:r?moment.monthsShort[e]:a?this.leadZero(e+1):e+1,n.push([e,t]);return n},fillYear:function(){var t,e,n=this.initItems("y"),i=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=i?e:(e+"").substring(2),n.push([e,t]);return n},fillHour:function(){var t,e,n=this.initItems("h"),i=-1!==this.options.template.indexOf("h"),r=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),a=i?12:23;for(e=0;a>=e;e++)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillMinute:function(){var t,e,n=this.initItems("m"),i=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillSecond:function(){var t,e,n=this.initItems("s"),i=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(e){var n,i={},r=this,a=!1;return t.each(this.map,function(t){if("ampm"!==t){var e="day"===t?1:0;return i[t]=r["$"+t]?parseInt(r["$"+t].val(),10):e,isNaN(i[t])?(a=!0,!1):void 0}}),a?"":(this.$ampm&&(i.hour="am"===this.$ampm.val()?i.hour:i.hour+12,24===i.hour&&(i.hour=0)),n=moment([i.year,i.month,i.day,i.hour,i.minute,i.second]),this.highlight(n),e=void 0===e?this.options.format:e,null===e?n.isValid()?n:null:n.isValid()?n.format(e):"")},setValue:function(e){if(e){var n="string"==typeof e?moment(e,this.options.format):moment(e),i=this,r={};n.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(r[t]=n[e[1]]())}),this.$ampm&&(r.hour>12?(r.hour-=12,r.ampm="pm"):r.ampm="am"),t.each(r,function(t,e){i["$"+t]&&i["$"+t].val(e)}),this.$element.val(n.format(this.options.format)))}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(n){var i,r=Array.apply(null,arguments);return r.shift(),"getValue"===n&&this.length&&(i=this.eq(0).data("combodate"))?i.getValue.apply(i,r):this.each(function(){var i=t(this),a=i.data("combodate"),s="object"==typeof n&&n;a||i.data("combodate",a=new e(this,s)),"string"==typeof n&&"function"==typeof a[n]&&a[n].apply(a,r)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null}}(window.jQuery),function(t){var e=function(e,n){this.options=t.extend({},t.fn.editableform.defaults,n),this.$div=t(e),this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value)},initTemplate:function(){this.$form=t(t.fn.editableform.template)},initButtons:function(){this.$form.find(".editable-buttons").append(t.fn.editableform.buttons)},render:function(){this.$loading=t(t.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.$div.triggerHandler("rendering"),this.initInput(),this.input.prerender(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),t.when(this.input.render()).then(t.proxy(function(){this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(t.proxy(this.cancel,this)),this.input.error?(this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(t){t.preventDefault()})):(this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled"),this.input.value2input(this.value),this.$form.submit(t.proxy(this.submit,this))),this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,e;this.$form?(t=this.$form.outerWidth(),e=this.$form.outerHeight(),t&&this.$loading.width(t),e&&this.$loading.height(e),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(e){var n,i=this.$form.find(".control-group"),r=this.$form.find(".editable-error-block");if(e===!1)i.removeClass(t.fn.editableform.errorGroupClass),r.removeClass(t.fn.editableform.errorBlockClass).empty().hide();else{if(e){n=e.split("\n");for(var a=0;a<n.length;a++)n[a]=t("<div>").text(n[a]).html();e=n.join("<br>")}i.addClass(t.fn.editableform.errorGroupClass),r.addClass(t.fn.editableform.errorBlockClass).html(e).show()}},submit:function(e){e.stopPropagation(),e.preventDefault();var n,i=this.input.input2value();return(n=this.validate(i))?(this.error(n),this.showForm(),void 0):this.options.savenochange||this.input.value2str(i)!=this.input.value2str(this.value)?(t.when(this.save(i)).done(t.proxy(function(t){var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,t,i):null;return e===!1?(this.error(!1),this.showForm(!1),void 0):"string"==typeof e?(this.error(e),this.showForm(),void 0):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(i=e.newValue),this.error(!1),this.value=i,this.$div.triggerHandler("save",{newValue:i,response:t}),void 0)},this)).fail(t.proxy(function(t){this.error("string"==typeof t?t:t.responseText||t.statusText||"Unknown error!"),this.showForm()},this)),void 0):(this.$div.triggerHandler("nochange"),void 0)},save:function(e){var n=this.input.value2submit(e);this.options.pk=t.fn.editableutils.tryParseJson(this.options.pk,!0);var i,r="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,a=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&r));return a?(this.showLoading(),i={name:this.options.name||"",value:n,pk:r},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=t.fn.editableutils.tryParseJson(this.options.params,!0),t.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):t.ajax(t.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(t){return void 0===t&&(t=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,t):void 0},option:function(t,e){t in this.options&&(this.options[t]=e),"value"===t&&this.setValue(e)},setValue:function(t,e){this.value=e?this.input.str2value(t):t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},t.fn.editableform=function(n){var i=arguments;return this.each(function(){var r=t(this),a=r.data("editableform"),s="object"==typeof n&&n;a||r.data("editableform",a=new e(this,s)),"string"==typeof n&&a[n].apply(a,Array.prototype.slice.call(i,1))})},t.fn.editableform.Constructor=e,t.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,send:"auto",validate:null,success:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},t.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',t.fn.editableform.loading='<div class="editableform-loading"></div>',t.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',t.fn.editableform.errorGroupClass=null,t.fn.editableform.errorBlockClass="editable-error"
}(window.jQuery),function(t){t.fn.editableutils={inherit:function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype},setCursorPosition:function(t,e){if(t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},tryParseJson:function(t,e){if("string"==typeof t&&t.length&&t.match(/^[\{\[].*[\}\]]$/))if(e)try{t=new Function("return "+t)()}catch(n){}finally{return t}else t=new Function("return "+t)();return t},sliceObj:function(e,n,i){var r,a,s={};if(!t.isArray(n)||!n.length)return s;for(var o=0;o<n.length;o++)r=n[o],e.hasOwnProperty(r)&&(s[r]=e[r]),i!==!0&&(a=r.toLowerCase(),e.hasOwnProperty(a)&&(s[r]=e[a]));return s},getConfigData:function(e){var n={};return t.each(e.data(),function(t,e){("object"!=typeof e||e&&"object"==typeof e&&(e.constructor===Object||e.constructor===Array))&&(n[t]=e)}),n},objectKeys:function(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},escape:function(e){return t("<div>").text(e).html()},itemsByValue:function(e,n,i){if(!n||null===e)return[];i=i||"value";var r=t.isArray(e),a=[],s=this;return t.each(n,function(n,o){o.children?a=a.concat(s.itemsByValue(e,o.children)):r?t.grep(e,function(t){return t==(o&&"object"==typeof o?o[i]:o)}).length&&a.push(o):e==(o&&"object"==typeof o?o[i]:o)&&a.push(o)}),a},createInput:function(e){var n,i,r,a=e.type;return"date"===a&&("inline"===e.mode?t.fn.editabletypes.datefield?a="datefield":t.fn.editabletypes.dateuifield&&(a="dateuifield"):t.fn.editabletypes.date?a="date":t.fn.editabletypes.dateui&&(a="dateui"),"date"!==a||t.fn.editabletypes.date||(a="combodate")),"wysihtml5"!==a||t.fn.editabletypes[a]||(a="textarea"),"function"==typeof t.fn.editabletypes[a]?(n=t.fn.editabletypes[a],i=this.sliceObj(e,this.objectKeys(n.defaults)),r=new n(i)):(t.error("Unknown type: "+a),!1)}}}(window.jQuery),function(t){var e=function(t,e){this.init(t,e)},n=function(t,e){this.init(t,e)};e.prototype={containerName:null,innerCss:null,init:function(n,i){this.$element=t(n),this.options=t.extend({},t.fn.editableContainer.defaults,i),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.$element.on("destroyed",t.proxy(function(){this.destroy()},this)),t(document).data("editable-handlers-attached")||(t(document).on("keyup.editable",function(e){27===e.which&&t(".editable-open").editableContainer("hide")}),t(document).on("click.editable",function(n){var i,r=t(n.target),a=[".editable-container",".ui-datepicker-header",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];for(i=0;i<a.length;i++)if(r.is(a[i])||r.parents(a[i]).length)return;e.prototype.closeOthers(n.target)}),t(document).data("editable-handlers-attached",!0))},splitOptions:function(){this.containerOptions={},this.formOptions={};var e=t.fn[this.containerName].defaults;for(var n in this.options)n in e?this.containerOptions[n]=this.options[n]:this.formOptions[n]=this.options[n]},tip:function(){return this.container()?this.container().$tip:null},container:function(){return this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:t.proxy(this.save,this),nochange:t.proxy(function(){this.hide("nochange")},this),cancel:t.proxy(function(){this.hide("cancel")},this),show:t.proxy(this.setPosition,this),rendering:t.proxy(this.setPosition,this),resize:t.proxy(this.setPosition,this),rendered:t.proxy(function(){this.$element.triggerHandler("shown")},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open"),e!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass("editable-container"),this.$form,this.$form=t("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(t){this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")&&(this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",t))},innerShow:function(){},innerHide:function(){},toggle:function(t){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(t)},setPosition:function(){},save:function(t,e){this.$element.triggerHandler("save",e),this.hide("save")},option:function(t,e){this.options[t]=e,t in this.containerOptions?(this.containerOptions[t]=e,this.setContainerOption(t,e)):(this.formOptions[t]=e,this.$form&&this.$form.editableform("option",t,e))},setContainerOption:function(t,e){this.call("option",t,e)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){t(".editable-open").each(function(n,i){if(i!==e&&!t(i).find(e).length){var r=t(i),a=r.data("editableContainer");a&&("cancel"===a.options.onblur?r.data("editableContainer").hide("onblur"):"submit"===a.options.onblur&&r.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},t.fn.editableContainer=function(i){var r=arguments;return this.each(function(){var a=t(this),s="editableContainer",o=a.data(s),l="object"==typeof i&&i,u="inline"===l.mode?n:e;o||a.data(s,o=new u(this,l)),"string"==typeof i&&o[i].apply(o,Array.prototype.slice.call(r,1))})},t.fn.editableContainer.Popup=e,t.fn.editableContainer.Inline=n,t.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:"fast",mode:"popup"},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}}(window.jQuery),function(t){t.extend(t.fn.editableContainer.Inline.prototype,t.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",initContainer:function(){this.$tip=t("<span></span>").addClass("editable-inline"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,t.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.editable.defaults,n,t.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init()};e.prototype={constructor:e,init:function(){var e,n=!1;this.options.name=this.options.name||this.$element.attr("id"),this.input=t.fn.editableutils.createInput(this.options),this.input&&(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(t.trim(this.$element.html())),n=!0):(this.options.value=t.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"==typeof this.options.value?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",t.proxy(function(t){if(t.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var e="click"!==this.options.toggle;this.toggle(e)}},this))):this.$element.attr("tabindex",-1),e=!n&&null!==this.value&&void 0!==this.value,e&="always"===this.options.autotext||"auto"===this.options.autotext&&!this.$element.text().length,t.when(e?this.render():!0).then(t.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this)))},initLive:function(){var e=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",e,t.proxy(function(e){var n=t(e.target);n.data("editable")||n.editable(this.options).trigger(e)},this))},render:function(t){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,n){return e&&"object"==typeof e?(t.each(e,t.proxy(function(e,n){this.option(t.trim(e),n)},this)),void 0):(this.options[e]=n,"disabled"===e?n?this.disable():this.enable():("value"===e&&this.setValue(n),this.container&&this.container.option(e,n),this.input.option&&this.input.option(e,n),void 0))},handleEmpty:function(e){this.options.display!==!1&&(this.isEmpty=void 0!==e?e:""===t.trim(this.$element.text()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.text(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var n=t.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(n),this.$element.on("save.internal",t.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,e){if(this.options.unsavedclass){var n=!1;n=n||"function"==typeof this.options.url,n=n||this.options.display===!1,n=n||void 0!==e.response,n=n||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue),n?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}this.setValue(e.newValue,!1,e.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(e,n,i){this.value=n?this.input.str2value(e):e,this.container&&this.container.option("value",this.value),t.when(this.render(i)).then(t.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.container&&this.container.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable"),this.$element.removeClass("editable-open"),this.$element.removeData("editable")}},t.fn.editable=function(n){var i={},r=arguments,a="editable";switch(n){case"validate":return this.each(function(){var e,n=t(this),r=n.data(a);r&&(e=r.validate())&&(i[r.options.name]=e)}),i;case"getValue":return this.each(function(){var e=t(this),n=e.data(a);n&&void 0!==n.value&&null!==n.value&&(i[n.options.name]=n.input.value2submit(n.value))}),i;case"submit":var s,o=arguments[1]||{},l=this,u=this.editable("validate");return t.isEmptyObject(u)?(s=this.editable("getValue"),o.data&&t.extend(s,o.data),t.ajax(t.extend({url:o.url,data:s,type:"POST"},o.ajaxOptions)).success(function(t){"function"==typeof o.success&&o.success.call(l,t,o)}).error(function(){"function"==typeof o.error&&o.error.apply(l,arguments)})):"function"==typeof o.error&&o.error.call(l,u),this}return this.each(function(){var i=t(this),s=i.data(a),o="object"==typeof n&&n;s||i.data(a,s=new e(this,o)),"string"==typeof n&&s[n].apply(s,Array.prototype.slice.call(r,1))})},t.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null}}(window.jQuery),function(t){t.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,n,i){this.type=e,this.options=t.extend({},i,n)},prerender:function(){this.$tpl=t(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(e,n){t(n).text(e)},html2value:function(e){return t("<div>").html(e).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return t("<div>").text(e).html()},autosubmit:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){this.options[t]&&this.$input.attr(t,this.options[t])},option:function(t,e){this.options[t]=e}},e.defaults={tpl:"",inputclass:"input-medium"},t.extend(t.fn.editabletypes,{abstractinput:e})}(window.jQuery),function(t){var e=function(){};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){var e=t.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),e.resolve()},function(){this.error=this.options.sourceError,e.resolve()}),e.promise()},html2value:function(){return null},value2html:function(e,n,i,r){var a=t.Deferred(),s=function(){"function"==typeof i?i.call(n,e,this.sourceData,r):this.value2htmlFinal(e,n),a.resolve()};return null===e?s.call(this):this.onSourceReady(s,function(){a.resolve()}),a.promise()},onSourceReady:function(e,n){if(t.isArray(this.sourceData))return e.call(this),void 0;try{this.options.source=t.fn.editableutils.tryParseJson(this.options.source,!1)}catch(i){return n.call(this),void 0}if("string"==typeof this.options.source){if(this.options.sourceCache){var r,a=this.options.source;if(t(document).data(a)||t(document).data(a,{}),r=t(document).data(a),r.loading===!1&&r.sourceData)return this.sourceData=r.sourceData,this.doPrepend(),e.call(this),void 0;if(r.loading===!0)return r.callbacks.push(t.proxy(function(){this.sourceData=r.sourceData,this.doPrepend(),e.call(this)},this)),r.err_callbacks.push(t.proxy(n,this)),void 0;r.loading=!0,r.callbacks=[],r.err_callbacks=[]}t.ajax({url:this.options.source,type:"get",cache:!1,dataType:"json",success:t.proxy(function(i){r&&(r.loading=!1),this.sourceData=this.makeArray(i),t.isArray(this.sourceData)?(r&&(r.sourceData=this.sourceData,t.each(r.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(n.call(this),r&&t.each(r.err_callbacks,function(){this.call()}))},this),error:t.proxy(function(){n.call(this),r&&(r.loading=!1,t.each(r.err_callbacks,function(){this.call()}))},this)})}else this.sourceData=t.isFunction(this.options.source)?this.makeArray(this.options.source()):this.makeArray(this.options.source),t.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):n.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(t.isArray(this.prependData)||(this.options.prepend=t.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData="function"==typeof this.options.prepend?this.makeArray(this.options.prepend()):this.makeArray(this.options.prepend)),t.isArray(this.prependData)&&t.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(e){var n,i,r,a,s=[];if(!e||"string"==typeof e)return null;if(t.isArray(e)){a=function(t,e){return i={value:t,text:e},n++>=2?!1:void 0};for(var o=0;o<e.length;o++)r=e[o],"object"==typeof r?(n=0,t.each(r,a),1===n?s.push(i):n>1&&(r.children&&(r.children=this.makeArray(r.children)),s.push(r))):s.push({value:r,text:r})}else t.each(e,function(t,e){s.push({value:t,text:e})});return s},option:function(t,e){this.options[t]=e,"source"===t&&(this.sourceData=null),"prepend"===t&&(this.prependData=null)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0}),t.fn.editabletypes.list=e}(window.jQuery),function(t){var e=function(t){this.init("text",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),t.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=t('<span class="editable-clear-x icon-remove-sign"></span>'),this.$input.after(this.$clear).css("padding-right",20).keyup(t.proxy(this.toggleClear,this)).parent().css("position","relative"),this.$clear.click(t.proxy(this.clear,this)))},postrender:function(){if(this.$clear){var t=this.$input.outerHeight()||20,e=(t-this.$clear.height())/2;3>e&&(e=3),this.$clear.css({top:e,right:e})}},toggleClear:function(){this.$clear&&(this.$input.val().length?this.$clear.show():this.$clear.hide())},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),t.fn.editabletypes.text=e}(window.jQuery),function(t){var e=function(t){this.init("textarea",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&t(this).closest("form").submit()})},value2html:function(e,n){var i,r="";if(e){i=e.split("\n");for(var a=0;a<i.length;a++)i[a]=t("<div>").text(i[a]).html();r=i.join("<br>")}t(n).html(r)},html2value:function(e){if(!e)return"";for(var n=new RegExp(String.fromCharCode(10),"g"),i=e.split(/<br\s*\/?>/i),r=0;r<i.length;r++){var a=t("<div>").html(i[r]).text();a=a.replace(n,""),i[r]=a}return i.join("\n")},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),t.fn.editabletypes.textarea=e}(window.jQuery),function(t){var e=function(t){this.init("select",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input.empty();var e=function(n,i){if(t.isArray(i))for(var r=0;r<i.length;r++)i[r].children?n.append(e(t("<optgroup>",{label:i[r].text}),i[r].children)):n.append(t("<option>",{value:i[r].value}).text(i[r].text));return n};e(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&t(this).closest("form").submit()})},value2htmlFinal:function(e,n){var i="",r=t.fn.editableutils.itemsByValue(e,this.sourceData);r.length&&(i=r[0].text),t(n).text(i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),t.fn.editabletypes.select=e}(window.jQuery),function(t){var e=function(t){this.init("checklist",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){var e;if(this.$tpl.empty(),t.isArray(this.sourceData)){for(var n=0;n<this.sourceData.length;n++)e=t("<label>").append(t("<input>",{type:"checkbox",value:this.sourceData[n].value})).append(t("<span>").text(" "+this.sourceData[n].text)),t("<div>").append(e).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(e){return t.isArray(e)?e.sort().join(t.trim(this.options.separator)):""},str2value:function(e){var n,i=null;return"string"==typeof e&&e.length?(n=new RegExp("\\s*"+t.trim(this.options.separator)+"\\s*"),i=e.split(n)):t.isArray(e)&&(i=e),i},value2input:function(e){this.$input.prop("checked",!1),t.isArray(e)&&e.length&&this.$input.each(function(n,i){var r=t(i);t.each(e,function(t,e){r.val()==e&&r.prop("checked",!0)})})},input2value:function(){var e=[];return this.$input.filter(":checked").each(function(n,i){e.push(t(i).val())}),e},value2htmlFinal:function(e,n){var i=[],r=t.fn.editableutils.itemsByValue(e,this.sourceData);r.length?(t.each(r,function(e,n){i.push(t.fn.editableutils.escape(n.text))}),t(n).html(i.join("<br>"))):t(n).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),t.fn.editabletypes.checklist=e}(window.jQuery),function(t){var e=function(t){this.init("password",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{value2html:function(e,n){e?t(n).text("[hidden]"):t(n).empty()},html2value:function(){return null}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),t.fn.editabletypes.password=e}(window.jQuery),function(t){var e=function(t){this.init("email",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),t.fn.editabletypes.email=e}(window.jQuery),function(t){var e=function(t){this.init("url",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),t.fn.editabletypes.url=e}(window.jQuery),function(t){var e=function(t){this.init("tel",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),t.fn.editabletypes.tel=e}(window.jQuery),function(t){var e=function(t){this.init("number",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{render:function(){e.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),t.fn.editabletypes.number=e}(window.jQuery),function(t){var e=function(t){this.init("range",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.number),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){t(this).siblings("output").text(t(this).val())})},activate:function(){this.$input.focus()}}),e.defaults=t.extend({},t.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),t.fn.editabletypes.range=e}(window.jQuery),function(t){var e=function(n){this.init("select2",n,e.defaults),n.select2=n.select2||{};var i=this,r={placeholder:n.placeholder};this.isMultiple=n.select2.tags||n.select2.multiple,n.select2.tags||(n.source&&(r.data=n.source),r.initSelection=function(e,n){var a=i.str2value(e.val()),s=t.fn.editableutils.itemsByValue(a,r.data,"id");t.isArray(s)&&s.length&&!i.isMultiple&&(s=s[0]),n(s)}),this.options.select2=t.extend({},e.defaults.select2,r,n.select2)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.$input.select2(this.options.select2),this.isMultiple&&this.$input.on("change",function(){t(this).closest("form").parent().triggerHandler("resize")})},value2html:function(e,n){var i,r="";this.$input?i=this.$input.select2("data"):this.options.select2.tags?i=e:this.options.select2.data&&(i=t.fn.editableutils.itemsByValue(e,this.options.select2.data,"id")),t.isArray(i)?(r=[],t.each(i,function(t,e){r.push(e&&"object"==typeof e?e.text:e)})):i&&(r=i.text),r=t.isArray(r)?r.join(this.options.viewseparator):r,t(n).text(r)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(t){this.$input.val(t).trigger("change")},input2value:function(){return this.$input.select2("val")},str2value:function(e,n){if("string"!=typeof e||!this.isMultiple)return e;n=n||this.options.select2.separator||t.fn.select2.defaults.separator;var i,r,a;if(null===e||e.length<1)return null;for(i=e.split(n),r=0,a=i.length;a>r;r+=1)i[r]=t.trim(i[r]);return i}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),t.fn.editabletypes.select2=e}(window.jQuery),function(t){var e=function(e,n){return this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,n,this.$element.data()),this.init(),void 0):(t.error("Combodate should be applied to INPUT element"),void 0)};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(){this.$element.val(this.getValue())},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,n){n=n[0];var i=new RegExp(n+"+"),r=n.length>1?n.substring(1,2):n;e=e.replace(i,"{"+r+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,n){n=n[0];var i=n.length>1?n.substring(1,2):n;e=e.replace("{"+i+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){var e=this;t.each(this.map,function(t){var n,i,r=e.$widget.find("."+t);r.length&&(e["$"+t]=r,n="fill"+t.charAt(0).toUpperCase()+t.slice(1),i=e[n](),e["$"+t].html(e.renderItems(i)))})},initItems:function(t){var e=[];if("name"===this.options.firstItem){var n="function"==typeof moment.relativeTime[t]?moment.relativeTime[t](1,!0,t,!1):moment.relativeTime[t];n=n.split(" ").reverse()[0],e.push(["",n])}else"empty"===this.options.firstItem&&e.push(["",""]);return e},renderItems:function(t){for(var e=[],n=0;n<t.length;n++)e.push('<option value="'+t[n][0]+'">'+t[n][1]+"</option>");return e.join("\n")},fillDay:function(){var t,e,n=this.initItems("d"),i=-1!==this.options.template.indexOf("DD");for(e=1;31>=e;e++)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillMonth:function(){var t,e,n=this.initItems("M"),i=-1!==this.options.template.indexOf("MMMM"),r=-1!==this.options.template.indexOf("MMM"),a=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=i?moment.months[e]:r?moment.monthsShort[e]:a?this.leadZero(e+1):e+1,n.push([e,t]);return n},fillYear:function(){var t,e,n=this.initItems("y"),i=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=i?e:(e+"").substring(2),n.push([e,t]);return n},fillHour:function(){var t,e,n=this.initItems("h"),i=-1!==this.options.template.indexOf("h"),r=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),a=i?12:23;for(e=0;a>=e;e++)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillMinute:function(){var t,e,n=this.initItems("m"),i=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillSecond:function(){var t,e,n=this.initItems("s"),i=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(e){var n,i={},r=this,a=!1;return t.each(this.map,function(t){if("ampm"!==t){var e="day"===t?1:0;return i[t]=r["$"+t]?parseInt(r["$"+t].val(),10):e,isNaN(i[t])?(a=!0,!1):void 0}}),a?"":(this.$ampm&&(i.hour="am"===this.$ampm.val()?i.hour:i.hour+12,24===i.hour&&(i.hour=0)),n=moment([i.year,i.month,i.day,i.hour,i.minute,i.second]),this.highlight(n),e=void 0===e?this.options.format:e,null===e?n.isValid()?n:null:n.isValid()?n.format(e):"")},setValue:function(e){if(e){var n="string"==typeof e?moment(e,this.options.format):moment(e),i=this,r={};n.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(r[t]=n[e[1]]())}),this.$ampm&&(r.hour>12?(r.hour-=12,r.ampm="pm"):r.ampm="am"),t.each(r,function(t,e){i["$"+t]&&i["$"+t].val(e)}),this.$element.val(n.format(this.options.format)))}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(n){var i,r=Array.apply(null,arguments);return r.shift(),"getValue"===n&&this.length&&(i=this.eq(0).data("combodate"))?i.getValue.apply(i,r):this.each(function(){var i=t(this),a=i.data("combodate"),s="object"==typeof n&&n;a||i.data("combodate",a=new e(this,s)),"string"==typeof n&&"function"==typeof a[n]&&a[n].apply(a,r)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null}}(window.jQuery),function(t){var e=function(n){this.init("combodate",n,e.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),this.options.combodate=t.extend({},e.defaults.combodate,n.combodate,{format:this.options.format,template:this.options.template})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate)},value2html:function(e,n){var i=e?e.format(this.options.viewformat):"";t(n).text(i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),t.fn.editabletypes.combodate=e}(window.jQuery),function(t){t.extend(t.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=t(t.fn.editableform.template),this.$form.find(".editable-error-block").addClass("help-block")}}),t.fn.editableform.buttons='<button type="submit" class="btn btn-blue editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn btn-default editable-cancel"><i class="icon-remove"></i></button>',t.fn.editableform.errorGroupClass="error",t.fn.editableform.errorBlockClass=null}(window.jQuery),function(t){t.extend(t.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:t(t.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",initContainer:function(){t.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:t.fn.popover.defaults.template});var e;this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),e&&this.$element.data("template",e)
},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(t,e){this.container().options[t]=e},setPosition:function(){(function(){var t,e,n,i,r,a,s=this.tip();switch(r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,t=/in/.test(r),s.removeClass("top right bottom left").css({top:0,left:0,display:"block"}),e=this.getPosition(t),n=s[0].offsetWidth,i=s[0].offsetHeight,t?r.split(" ")[1]:r){case"bottom":a={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"top":a={top:e.top-i,left:e.left+e.width/2-n/2};break;case"left":a={top:e.top+e.height/2-i/2,left:e.left-n};break;case"right":a={top:e.top+e.height/2-i/2,left:e.left+e.width}}s.offset(a).addClass(r).addClass("in")}).call(this.container())}})}(window.jQuery),function(t){var e=function(t){this.init("date",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,n){this.options.viewformat||(this.options.viewformat=this.options.format),this.options.datepicker=t.extend({},n.datepicker,e.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=t.fn.datepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.datepicker(this.options.datepicker),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,n){var i=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html(i,n)},html2value:function(t){return t?this.dpg.parseDate(t,this.parsedViewFormat,this.options.datepicker.language):null},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return t?this.dpg.parseDate(t,this.parsedFormat,this.options.datepicker.language):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.datepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active")},autosubmit:function(){this.$input.on("changeDate",function(){var e=t(this).closest("form");setTimeout(function(){e.submit()},200)})}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.date=e}(window.jQuery),function(t){var e=function(t){this.init("datefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.date),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.datepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,autoclose:!0}}),t.fn.editabletypes.datefield=e}(window.jQuery),!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var n=function(e,n){var a=this;switch(this.element=t(e),this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in i?this.language:"en",this.isRTL=i[this.language].rtl||!1,this.format=r.parseFormat(n.format||this.element.data("date-format")||"dd/mm/yyyy"),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this._attachEvents(),this.forceParse=!0,"forceParse"in n?this.forceParse=n.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=t(r.template).appendTo(this.isInline?this.element:"body").on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),t(document).on("mousedown",function(e){0===t(e.target).closest(".datepicker").length&&a.hide()}),this.autoclose=!1,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.viewMode=this.startViewMode=0,n.startView||this.element.data("date-start-view")){case 2:case"decade":this.viewMode=this.startViewMode=2;break;case 1:case"year":this.viewMode=this.startViewMode=1}this.todayBtn=n.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=n.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(n.weekStart||this.element.data("date-weekstart")||i[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(n.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};n.prototype={constructor:n,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]];for(var e,n,i=0;i<this._events.length;i++)e=this._events[i][0],n=this._events[i][1],e.on(n)},_detachEvents:function(){for(var t,e,n=0;n<this._events.length;n++)t=this._events[n][0],e=this._events[n][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(){this.isInline||(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t))},getFormattedDate:function(t){return void 0===t&&(t=this.format),r.formatDate(this.date,t,this.language)},setStartDate:function(t){this.startDate=t||-1/0,this.startDate!==-1/0&&(this.startDate=r.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,1/0!==this.endDate&&(this.endDate=r.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10,n=this.component?this.component.offset():this.element.offset(),i=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:n.top+i,left:n.left,zIndex:e})}},update:function(){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),this.date=r.parseDate(t,this.format,this.language),e&&this.setValue();var n=this.viewDate;this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date),n&&n.getTime()!=this.viewDate.getTime()&&this.element.trigger({type:"changeDate",date:this.viewDate}),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+i[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+i[this.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},fill:function(){var n=new Date(this.viewDate),a=n.getUTCFullYear(),s=n.getUTCMonth(),o=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,l=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,u=1/0!==this.endDate?this.endDate.getUTCFullYear():1/0,c=1/0!==this.endDate?this.endDate.getUTCMonth():1/0,h=this.date&&this.date.valueOf(),d=new Date;this.picker.find(".datepicker-days thead th:eq(1)").text(i[this.language].months[s]+" "+a),this.picker.find("tfoot th.today").text(i[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var f=e(a,s-1,28,0,0,0,0),p=r.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(p),f.setUTCDate(p-(f.getUTCDay()-this.weekStart+7)%7);var g=new Date(f);g.setUTCDate(g.getUTCDate()+42),g=g.valueOf();for(var m,v=[];f.valueOf()<g;)f.getUTCDay()==this.weekStart&&v.push("<tr>"),m="",f.getUTCFullYear()<a||f.getUTCFullYear()==a&&f.getUTCMonth()<s?m+=" old":(f.getUTCFullYear()>a||f.getUTCFullYear()==a&&f.getUTCMonth()>s)&&(m+=" new"),this.todayHighlight&&f.getUTCFullYear()==d.getFullYear()&&f.getUTCMonth()==d.getMonth()&&f.getUTCDate()==d.getDate()&&(m+=" today"),h&&f.valueOf()==h&&(m+=" active"),(f.valueOf()<this.startDate||f.valueOf()>this.endDate||-1!==t.inArray(f.getUTCDay(),this.daysOfWeekDisabled))&&(m+=" disabled"),v.push('<td class="day'+m+'">'+f.getUTCDate()+"</td>"),f.getUTCDay()==this.weekEnd&&v.push("</tr>"),f.setUTCDate(f.getUTCDate()+1);this.picker.find(".datepicker-days tbody").empty().append(v.join(""));var y=this.date&&this.date.getUTCFullYear(),b=this.picker.find(".datepicker-months").find("th:eq(1)").text(a).end().find("span").removeClass("active");y&&y==a&&b.eq(this.date.getUTCMonth()).addClass("active"),(o>a||a>u)&&b.addClass("disabled"),a==o&&b.slice(0,l).addClass("disabled"),a==u&&b.slice(c+1).addClass("disabled"),v="",a=10*parseInt(a/10,10);var x=this.picker.find(".datepicker-years").find("th:eq(1)").text(a+"-"+(a+9)).end().find("td");a-=1;for(var w=-1;11>w;w++)v+='<span class="year'+(-1==w||10==w?" old":"")+(y==a?" active":"")+(o>a||a>u?" disabled":"")+'">'+a+"</span>",a+=1;x.html(v)},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(n){n.stopPropagation(),n.preventDefault();var i=t(n.target).closest("span, td, th");if(1==i.length)switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var a=r.modes[this.viewMode].navStep*("prev"==i[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a)}this.fill();break;case"today":var s=new Date;s=e(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0),this.showMode(-2);var o="linked"==this.todayBtn?null:"view";this._setDate(s,o)}break;case"span":if(!i.is(".disabled")){if(this.viewDate.setUTCDate(1),i.is(".month")){var l=i.parent().find("span").index(i);this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate})}else{var u=parseInt(i.text(),10)||0;this.viewDate.setUTCFullYear(u),this.element.trigger({type:"changeYear",date:this.viewDate})}this.showMode(-1),this.fill()}break;case"td":if(i.is(".day")&&!i.is(".disabled")){var c=parseInt(i.text(),10)||1,u=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth();i.is(".old")?0===l?(l=11,u-=1):l-=1:i.is(".new")&&(11==l?(l=0,u+=1):l+=1),this._setDate(e(u,l,c,0,0,0,0))}}},_setDate:function(t,e){e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date});var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),!this.autoclose||e&&"date"!=e||this.hide())},moveMonth:function(t,e){if(!e)return t;var n,i,r=new Date(t.valueOf()),a=r.getUTCDate(),s=r.getUTCMonth(),o=Math.abs(e);if(e=e>0?1:-1,1==o)i=-1==e?function(){return r.getUTCMonth()==s}:function(){return r.getUTCMonth()!=n},n=s+e,r.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var l=0;o>l;l++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(a),i=function(){return n!=r.getUTCMonth()}}for(;i();)r.setUTCDate(--a),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return 27==t.keyCode&&this.show(),void 0;var e,n,i,r=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):(n=new Date(this.date),n.setUTCDate(this.date.getUTCDate()+e),i=new Date(this.viewDate),i.setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):(n=new Date(this.date),n.setUTCDate(this.date.getUTCDate()+7*e),i=new Date(this.viewDate),i.setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(r){this.element.trigger({type:"changeDate",date:this.date});var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(t){t&&(this.viewMode=Math.max(0,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+r.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}},t.fn.datepicker=function(e){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var r=t(this),a=r.data("datepicker"),s="object"==typeof e&&e;a||r.data("datepicker",a=new n(this,t.extend({},t.fn.datepicker.defaults,s))),"string"==typeof e&&"function"==typeof a[e]&&a[e].apply(a,i)})},t.fn.datepicker.defaults={},t.fn.datepicker.Constructor=n;var i=t.fn.datepicker.dates={en:{days:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S&aacute;bado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","S\u00e1b"],daysMin:["D","S","T","Q","Q","S","S","D"],months:["Janeiro","Fevereiro","Mar\u00e7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje"}},r={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return 0===t%4&&0!==t%100||0===t%400},getDaysInMonth:function(t,e){return[31,r.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(r,a,s){if(r instanceof Date)return r;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(r)){var o,l,u=/([\-+]\d+)([dmwy])/,c=r.match(/([\-+]\d+)([dmwy])/g);r=new Date;for(var h=0;h<c.length;h++)switch(o=u.exec(c[h]),l=parseInt(o[1]),o[2]){case"d":r.setUTCDate(r.getUTCDate()+l);break;case"m":r=n.prototype.moveMonth.call(n.prototype,r,l);break;case"w":r.setUTCDate(r.getUTCDate()+7*l);break;case"y":r=n.prototype.moveYear.call(n.prototype,r,l)}return e(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),0,0,0)}var d,f,o,c=r&&r.match(this.nonpunctuation)||[],r=new Date,p={},g=["yyyy","yy","M","MM","m","mm","d","dd"],m={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};m.M=m.MM=m.mm=m.m,m.dd=m.d,r=e(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0);var v=a.parts.slice();if(c.length!=v.length&&(v=t(v).filter(function(e,n){return-1!==t.inArray(n,g)}).toArray()),c.length==v.length){for(var h=0,y=v.length;y>h;h++){if(d=parseInt(c[h],10),o=v[h],isNaN(d))switch(o){case"MM":f=t(i[s].months).filter(function(){var t=this.slice(0,c[h].length),e=c[h].slice(0,t.length);return t==e}),d=t.inArray(f[0],i[s].months)+1;break;case"M":f=t(i[s].monthsShort).filter(function(){var t=this.slice(0,c[h].length),e=c[h].slice(0,t.length);return t==e}),d=t.inArray(f[0],i[s].monthsShort)+1}p[o]=d}for(var b,h=0;h<g.length;h++)b=g[h],b in p&&!isNaN(p[b])&&m[b](r,p[b])}return r},formatDate:function(e,n,r){var a={d:e.getUTCDate(),D:i[r].daysShort[e.getUTCDay()],DD:i[r].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:i[r].monthsShort[e.getUTCMonth()],MM:i[r].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m;for(var e=[],s=t.extend([],n.separators),o=0,l=n.parts.length;l>o;o++)s.length&&e.push(s.shift()),e.push(a[n.parts[o]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};r.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table>"+"</div>"+"</div>",t.fn.datepicker.DPGlobal=r}(window.jQuery),function(t){var e=function(n){this.init("typeahead",n,e.defaults),this.options.typeahead=t.extend({},e.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},n.typeahead)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]'),this.options.typeahead.source=this.sourceData,this.$input.typeahead(this.options.typeahead),this.$input.data("typeahead").render=t.proxy(this.typeaheadRender,this.$input.data("typeahead")),this.renderClear(),this.setClass(),this.setAttr("placeholder")},value2htmlFinal:function(e,n){if(this.getIsObjects()){var i=t.fn.editableutils.itemsByValue(e,this.sourceData);t(n).text(i.length?i[0].text:"")}else t(n).text(e)},html2value:function(t){return t?t:null},value2input:function(e){if(this.getIsObjects()){var n=t.fn.editableutils.itemsByValue(e,this.sourceData);this.$input.data("value",e).val(n.length?n[0].text:"")}else this.$input.val(e)},input2value:function(){if(this.getIsObjects()){var e=this.$input.data("value"),n=t.fn.editableutils.itemsByValue(e,this.sourceData);return n.length&&n[0].text.toLowerCase()===this.$input.val().toLowerCase()?e:null}return this.$input.val()},getIsObjects:function(){if(void 0===this.isObjects){this.isObjects=!1;for(var t=0;t<this.sourceData.length;t++)if(this.sourceData[t].value!==this.sourceData[t].text){this.isObjects=!0;break}}return this.isObjects},activate:t.fn.editabletypes.text.prototype.activate,renderClear:t.fn.editabletypes.text.prototype.renderClear,postrender:t.fn.editabletypes.text.prototype.postrender,toggleClear:t.fn.editabletypes.text.prototype.toggleClear,clear:function(){t.fn.editabletypes.text.prototype.clear.call(this),this.$input.data("value","")},matcher:function(e){return t.fn.typeahead.Constructor.prototype.matcher.call(this,e.text)},sorter:function(t){for(var e,n,i=[],r=[],a=[];e=t.shift();)n=e.text,n.toLowerCase().indexOf(this.query.toLowerCase())?~n.indexOf(this.query)?r.push(e):a.push(e):i.push(e);return i.concat(r,a)},highlighter:function(e){return t.fn.typeahead.Constructor.prototype.highlighter.call(this,e.text)},updater:function(t){return t=this.$menu.find(".active").data("item"),this.$element.data("value",t.value),t.text},typeaheadRender:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).data("item",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:!0}),t.fn.editabletypes.typeahead=e}(window.jQuery),function(t){var e=function(t){this.init("address",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input")},value2html:function(e,n){if(!e)return t(n).empty(),void 0;var i=t("<div>").text(e.city).html()+", "+t("<div>").text(e.street).html()+" st., bld. "+t("<div>").text(e.building).html();t(n).html(i)},html2value:function(){return null},value2str:function(t){var e="";if(t)for(var n in t)e=e+n+":"+t[n]+";";return e},str2value:function(t){return t},value2input:function(t){this.$input.filter('[name="city"]').val(t.city),this.$input.filter('[name="street"]').val(t.street),this.$input.filter('[name="building"]').val(t.building)},input2value:function(){return{city:this.$input.filter('[name="city"]').val(),street:this.$input.filter('[name="street"]').val(),building:this.$input.filter('[name="building"]').val()}},activate:function(){this.$input.filter('[name="city"]').focus()},autosubmit:function(){this.$input.keydown(function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-address"><label><span>City: </span><input type="text" name="city" class="input-small"></label></div><div class="editable-address"><label><span>Street: </span><input type="text" name="street" class="input-small"></label></div><div class="editable-address"><label><span>Building: </span><input type="text" name="building" class="input-mini"></label></div>',inputclass:""}),t.fn.editabletypes.address=e}(window.jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,n,i,r){return jQuery.easing[jQuery.easing.def](t,e,n,i,r)},easeInQuad:function(t,e,n,i,r){return i*(e/=r)*e+n},easeOutQuad:function(t,e,n,i,r){return-i*(e/=r)*(e-2)+n},easeInOutQuad:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,r){return i*(e/=r)*e*e+n},easeOutCubic:function(t,e,n,i,r){return i*((e=e/r-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,r){return i*(e/=r)*e*e*e+n},easeOutQuart:function(t,e,n,i,r){return-i*((e=e/r-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,r){return i*(e/=r)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,r){return i*((e=e/r-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,r){return(e/=r/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,r){return-i*Math.cos(e/r*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,r){return i*Math.sin(e/r*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,r){return-i/2*(Math.cos(Math.PI*e/r)-1)+n},easeInExpo:function(t,e,n,i,r){return 0==e?n:i*Math.pow(2,10*(e/r-1))+n},easeOutExpo:function(t,e,n,i,r){return e==r?n+i:i*(-Math.pow(2,-10*e/r)+1)+n},easeInOutExpo:function(t,e,n,i,r){return 0==e?n:e==r?n+i:(e/=r/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(-Math.pow(2,-10*--e)+2)+n},easeInCirc:function(t,e,n,i,r){return-i*(Math.sqrt(1-(e/=r)*e)-1)+n},easeOutCirc:function(t,e,n,i,r){return i*Math.sqrt(1-(e=e/r-1)*e)+n},easeInOutCirc:function(t,e,n,i,r){return(e/=r/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,r){var a=1.70158,s=0,o=i;if(0==e)return n;if(1==(e/=r))return n+i;if(s||(s=.3*r),o<Math.abs(i)){o=i;var a=s/4}else var a=s/(2*Math.PI)*Math.asin(i/o);return-(o*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*2*Math.PI/s))+n},easeOutElastic:function(t,e,n,i,r){var a=1.70158,s=0,o=i;if(0==e)return n;if(1==(e/=r))return n+i;if(s||(s=.3*r),o<Math.abs(i)){o=i;var a=s/4}else var a=s/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*e)*Math.sin((e*r-a)*2*Math.PI/s)+i+n},easeInOutElastic:function(t,e,n,i,r){var a=1.70158,s=0,o=i;if(0==e)return n;if(2==(e/=r/2))return n+i;if(s||(s=r*.3*1.5),o<Math.abs(i)){o=i;var a=s/4}else var a=s/(2*Math.PI)*Math.asin(i/o);return 1>e?-.5*o*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*2*Math.PI/s)+n:.5*o*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*2*Math.PI/s)+i+n},easeInBack:function(t,e,n,i,r,a){return void 0==a&&(a=1.70158),i*(e/=r)*e*((a+1)*e-a)+n},easeOutBack:function(t,e,n,i,r,a){return void 0==a&&(a=1.70158),i*((e=e/r-1)*e*((a+1)*e+a)+1)+n},easeInOutBack:function(t,e,n,i,r,a){return void 0==a&&(a=1.70158),(e/=r/2)<1?i/2*e*e*(((a*=1.525)+1)*e-a)+n:i/2*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)+n},easeInBounce:function(t,e,n,i,r){return i-jQuery.easing.easeOutBounce(t,r-e,0,i,r)+n},easeOutBounce:function(t,e,n,i,r){return(e/=r)<1/2.75?i*7.5625*e*e+n:2/2.75>e?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:2.5/2.75>e?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,i,r){return r/2>e?.5*jQuery.easing.easeInBounce(t,2*e,0,i,r)+n:.5*jQuery.easing.easeOutBounce(t,2*e-r,0,i,r)+.5*i+n}}),function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(t,e){this.defaults.type=t,this.defaults.name=e},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);settings.single.length||(settings.single="metadata");var data=$.data(elem,settings.single);if(data)return data;if(data="{}","class"==settings.type){var m=settings.cre.exec(elem.className);m&&(data=m[1])}else if("elem"==settings.type){if(!elem.getElementsByTagName)return void 0;var e=elem.getElementsByTagName(settings.name);e.length&&(data=$.trim(e[0].innerHTML))}else if(void 0!=elem.getAttribute){var attr=elem.getAttribute(settings.name);attr&&(data=attr)}return data.indexOf("{")<0&&(data="{"+data+"}"),data=eval("("+data+")"),$.data(elem,settings.single,data),data}}}),$.fn.metadata=function(t){return $.metadata.get(this[0],t)}}(jQuery),function(t){t.iButton={version:"1.0.03",setDefaults:function(e){t.extend(i,e)}},t.fn.iButton=function(e){var i="string"==typeof arguments[0]&&arguments[0],r=i&&Array.prototype.slice.call(arguments,1)||arguments,a=0==this.length?null:t.data(this[0],"iButton");if(a&&i&&this.length){if("object"==i.toLowerCase())return a;if(a[i]){var s;return this.each(function(e){var n=t.data(this,"iButton")[i].apply(a,r);if(0==e&&n){if(!n.jquery)return s=n,!1;s=t([]).add(n)}else n&&n.jquery&&(s=s.add(n))}),s||this}return this}return this.each(function(){new n(this,e)})};var e=0,n=function(n,s){var o=this,l=t(n),u=++e,c=!1,h={},d={dragging:!1,clicked:null},f={position:null,offset:null,time:null},s=t.extend({},i,s,t.metadata?l.metadata():{}),p=s.labelOn==r&&s.labelOff==a,g=":checkbox, :radio";if(!l.is(g))return l.find(g).iButton(s);if(!t.data(l[0],"iButton")){t.data(l[0],"iButton",o),"auto"==s.resizeHandle&&(s.resizeHandle=!p),"auto"==s.resizeContainer&&(s.resizeContainer=!p),this.toggle=function(t){var e=arguments.length>0?t:!l[0].checked;l.prop("checked",e).trigger("change")},this.disable=function(e){var n=arguments.length>0?e:!c;c=n,l.attr("disabled",n),m[n?"addClass":"removeClass"](s.classDisabled),t.isFunction(s.disable)&&s.disable.apply(o,[c,l,s])},this.repaint=function(){_()},this.destroy=function(){t([l[0],m[0]]).unbind(".iButton"),t(document).unbind(".iButton_"+u),m.after(l).remove(),t.data(l[0],"iButton",null),t.isFunction(s.destroy)&&s.destroy.apply(o,[l,s])},l.wrap('<div class="'+t.trim(s.classContainer+" "+s.className)+'" />').after('<div class="'+s.classHandle+'"><div class="'+s.classHandleRight+'"><div class="'+s.classHandleMiddle+'" /></div></div>'+'<div class="'+s.classLabelOff+'"><span><label>'+s.labelOff+"</label></span></div>"+'<div class="'+s.classLabelOn+'"><span><label>'+s.labelOn+"</label></span></div>"+'<div class="'+s.classPaddingLeft+'"></div><div class="'+s.classPaddingRight+'"></div>');var m=l.parent(),v=l.siblings("."+s.classHandle),y=l.siblings("."+s.classLabelOff),b=y.children("span"),x=l.siblings("."+s.classLabelOn),w=x.children("span");(s.resizeHandle||s.resizeContainer)&&(h.onspan=w.outerWidth(),h.offspan=b.outerWidth()),s.resizeHandle?(h.handle=s.handleWidth?s.handleWidth:h.onspan>0?Math.min(h.onspan,h.offspan):h.offspan,v.css("width",h.handle)):h.handle=v.width(),s.resizeContainer?(h.container=Math.max(h.onspan,h.offspan)+h.handle+10,m.css("width",h.container),y.css("width",h.container-5)):(h.container=m.width()+3,console.log(h.container));var C=h.container-h.handle-5,_=function(t){var e=l[0].checked,n=e?C:0,t=arguments.length>0?arguments[0]:!0;t&&s.enableFx?(v.stop().animate({left:n},s.duration,s.easing),x.stop().animate({width:n+4},s.duration,s.easing),w.stop().animate({marginLeft:n-C},s.duration,s.easing),b.stop().animate({marginRight:-n},s.duration,s.easing)):(v.css("left",n),x.css("width",n+4),w.css("marginLeft",n-C),b.css("marginRight",-n))
};_(!1);var S=function(t){return t.pageX||(t.originalEvent.changedTouches?t.originalEvent.changedTouches[0].pageX:0)};m.bind("mousedown.iButton touchstart.iButton",function(e){return t(e.target).is(g)||c||!s.allowRadioUncheck&&l.is(":radio:checked")?void 0:(e.preventDefault(),d.clicked=v,f.position=S(e),f.offset=f.position-(parseInt(v.css("left"),10)||0),f.time=(new Date).getTime(),!1)}),s.enableDrag&&t(document).bind("mousemove.iButton_"+u+" touchmove.iButton_"+u,function(t){if(d.clicked==v){t.preventDefault();var e=S(t);e!=f.offset&&(d.dragging=!0,m.addClass(s.classHandleActive));var n=Math.min(1,Math.max(0,(e-f.offset)/C));return v.css("left",n*C),x.css("width",n*C+4),b.css("marginRight",-n*C),w.css("marginLeft",-(1-n)*C),!1}}),t(document).bind("mouseup.iButton_"+u+" touchend.iButton_"+u,function(e){if(d.clicked!=v)return!1;e.preventDefault();var n=!0;if(!d.dragging||(new Date).getTime()-f.time<s.clickOffset){var i=l[0].checked;l.prop("checked",!i),t.isFunction(s.click)&&s.click.apply(o,[!i,l,s])}else{var r=S(e),a=(r-f.offset)/C,i=a>=.5;l[0].checked==i&&(n=!1),l.prop("checked",i)}return m.removeClass(s.classHandleActive),d.clicked=null,d.dragging=null,n?l.trigger("change"):_(),!1}),l.bind("change.iButton",function(){if(_(),l.is(":radio")){var e=l[0],n=t(e.form?e.form[e.name]:":radio[name="+e.name+"]");n.filter(":not(:checked)").iButton("repaint")}t.isFunction(s.change)&&s.change.apply(o,[l,s])}).bind("focus.iButton",function(){m.addClass(s.classFocus)}).bind("blur.iButton",function(){m.removeClass(s.classFocus)}),t.isFunction(s.click)&&l.bind("click.iButton",function(){s.click.apply(o,[l[0].checked,l,s])}),l.is(":disabled")&&this.disable(!0),t.isFunction(s.init)&&s.init.apply(o,[l,s])}},i={duration:200,easing:"swing",labelOn:"ON",labelOff:"OFF",resizeHandle:"auto",resizeContainer:"auto",enableDrag:!0,enableFx:!0,allowRadioUncheck:!1,clickOffset:120,handleWidth:30,className:"",classContainer:"ibutton-container",classDisabled:"ibutton-disabled",classFocus:"ibutton-focus",classLabelOn:"ibutton-label-on",classLabelOff:"ibutton-label-off",classHandle:"ibutton-handle",classHandleMiddle:"ibutton-handle-middle",classHandleRight:"ibutton-handle-right",classHandleActive:"ibutton-active-handle",classPaddingLeft:"ibutton-padding-left",classPaddingRight:"ibutton-padding-right",init:null,change:null,click:null,disable:null,destroy:null},r=i.labelOn,a=i.labelOff}(jQuery);var __bind=function(e,t){return function(){return e.apply(t,arguments)}};this.CalendarEvent=function(){function e(e,t){var n;this.container=e;this.makeFullCalendarEventObject=__bind(this.makeFullCalendarEventObject,this);this.handleDoubleClick=__bind(this.handleDoubleClick,this);this.finalizeEvent=__bind(this.finalizeEvent,this);this.handleInputBlur=__bind(this.handleInputBlur,this);this.handleInputKeyup=__bind(this.handleInputKeyup,this);this.container.bind("dblclick",this.handleDoubleClick);if(t!=null){n=this.container.find("input");n.focus();n.bind("keyup",this.handleInputKeyup);n.bind("blur",this.handleInputBlur)}else{this.makeFullCalendarEventObject()}}e.prototype.handleInputKeyup=function(e){var t;t=$(e.target);if(e.keyCode===13){if(t.val().length===0){return this.container.remove()}else{return this.finalizeEvent(t.val())}}};e.prototype.handleInputBlur=function(e){var t;t=$(e.target);if(t.val().length===0){return this.container.remove()}else{return this.finalizeEvent(t.val())}};e.prototype.finalizeEvent=function(e){this.container.find("a").html(e);return this.makeFullCalendarEventObject()};e.prototype.handleDoubleClick=function(e){var t,n,r,i=this;t=$("<input type='text'>");n=$(e.target);r=n.text();t.val(r);n.html(t);t.focus();t.bind("keyup",function(e){if(e.keyCode===13){if(t.val().length>0){n.html(t.val());return i.makeFullCalendarEventObject()}else{return n.html(r)}}});return t.bind("blur",function(e){if(t.val().length>0){n.html(t.val());return i.makeFullCalendarEventObject()}else{return n.html(r)}})};e.prototype.makeFullCalendarEventObject=function(){var e,t;t=$(this.container);e={title:$.trim(t.text())};t.data("eventObject",e);return t.draggable({zIndex:999,revert:true,revertDuration:0})};return e}();this.CalendarEvents=function(){function e(e){this.container=e;this.handleAddLink=__bind(this.handleAddLink,this);this.addLink=this.container.find("#add-event");this.container.find("a.external-event").each(function(){return new CalendarEvent($(this))});this.template="<li><a class='external-event'><input type='text'></a></li>";this.addLink.bind("click",this.handleAddLink)}e.prototype.handleAddLink=function(){var e;e=$(this.template);e.insertBefore(this.addLink.parent());return new CalendarEvent(e,true)};return e}()